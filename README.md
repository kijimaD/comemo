## TODO

- [ ] git submoduleを設定してリポジトリを持ってくる
- [ ] より正確になるようなフロー設計する

## submodule

```shell
git submodule update --init
git submodule update --remote
```


goディレクトリにあるリポジトリの全コミットに対して、解説を生成させたい。

生成方式。

- 解説の生成だけをGemini CLIでやる。できるところはプログラムにして動作を確実・高速にしたい
- プログラミング言語はGoを使いたい
- バッチで自動実行したい
- トークンを使い切ったとき用に途中から再実行できるようにしたい
- 解説の生成に時間がかかると予想されるので、並列実行したい。生成が混ざらないようにしたい
- 入出力トークンが最小になるようにしてください

解説ファイル形式。

- markdownファイルに出力してください
- ファイル名はコミットのインデックス番号にしてください。リポジトリの全コミットとして何番目かということで、コミットハッシュではありません
  - `git rev-list --reverse HEAD | grep -n コミットハッシュ`を使って算出する。非効率で構わない
- インデックス番号のファイルがすでに存在している場合はスキップしてください
- ファイルはカレントディレクトリ下に作成してください
- 既存の解説ファイルに更新しないでください。解説ファイルは必ず新規作成してください
- コミットごとに新規ファイルを作成してください

解説ファイルの中身。

- コミットごとに章を分けて、1ファイルで作成してください
- 変更の背景や周辺知識も検索して最大限詳しく解説してください。公式ドキュメントを優先して検索してください
- コミットのコアなコードの変更をdiff形式で表示して解説を入れてください
- 関連リンクや議論がある場合はそれらも見て、解説に含めてください
- 目次を作成してください

章の一覧。

- ファイルの概要
- コミット
- GitHub上でのコミットページへのリンク
- 元コミット内容
- 変更の背景
- 前提知識の解説
- 技術的詳細
- コアとなるコードの変更箇所
- コアとなるコードの解説
- 関連リンク
- 参考にした情報源リンク

生成結果イメージ。

- prompts
  - 1.sh
  - 2.sh
  - 3.sh
  - 4.sh
- src
  - 1.md
  - 2.md
  - 3.md
  - 4.md
- commit_data
  - 1.txt
  - 2.txt
  - 3.txt
  - 4.txt
