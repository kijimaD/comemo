# [インデックス 10016] ファイルの概要

本コミットは、Go言語の初期リリースサイクルにおけるリリースタグの管理を行うコミットです。2011年10月18日にAndrew Gerrandによって作成され、release.r60.3というタグを設定する目的で.hgtagsファイルを更新しています。Go言語がまだMercurialを使用していた時代の重要なリリース管理コミットです。

## コミット

**コミットハッシュ**: 07a34495cf07b903b3f173ad57582d560b912841  
**作成者**: Andrew Gerrand <adg@golang.org>  
**日付**: 2011年10月18日 11:35:58 +1100  
**コミットメッセージ**: tag release.r60.3  
**レビュー**: R=golang-dev, dsymonds  
**CC**: golang-dev  

## GitHub上でのコミットページへのリンク

https://github.com/golang/go/commit/07a34495cf07b903b3f173ad57582d560b912841

## 元コミット内容

このコミットは、Go言語のリリースタグ管理を行うためのものです。具体的には：

- `.hgtags`ファイルに新しいタグ情報を追加
- `release.r60.3`タグを`c1702f36df0397c19fc333571a771666029aa37e`コミットに関連付け
- 同時に`release`タグを最新リリースに更新

ファイル変更統計：
- 1つのファイル変更（.hgtags）
- 2行の追加、1行の削除

```diff
diff --git a/.hgtags b/.hgtags
index 2a90dd3853..760f04368e 100644
--- a/.hgtags
+++ b/.hgtags
@@ -83,6 +83,7 @@ b0819469a6df6029a27192fe7b19a73d97404c63 release.r60
 fd30c132d1bdeb79f8f111cb721fb1c78b767b27 release.r60.1
 d7322ae4d055a4cf3efaf842d0717a41acd85bac weekly.2011-09-21
 32a5db19629897641b2d488de4d1b998942ef80e release.r60.2
-32a5db19629897641b2d488de4d1b998942ef80e release
 3bdabf483805fbf0c7ef013fd09bfd6062b9d3f2 weekly.2011-10-06
 3bdabf483805fbf0c7ef013fd09bfd6062b9d3f2 weekly
+c1702f36df0397c19fc333571a771666029aa37e release.r60.3
+c1702f36df0397c19fc333571a771666029aa37e release
```

## 変更の背景

### Go言語のリリースサイクル

2011年当時、Go言語はまだ1.0リリース前の段階にあり、定期的なリリースサイクルを通じて言語の成熟度を高めていました。r60シリーズは、Go 1.0リリース前の最後の重要なリリースシリーズの一つでした。

### r60.3リリースの位置づけ

- **r60**: 2011年8月17日の週次リリース（weekly.2011-08-17）に対応
- **r60.1**: リンカーの修正、goplayの修正、jsonパッケージの修正を含む
- **r60.2**: 前のポイントリリース
- **r60.3**: r60シリーズの最終リリース（本コミット）

このリリースは、Go 1.0リリース（2012年3月）に向けた重要なマイルストーンでした。

### バージョン管理システムの移行期

当時のGo言語プロジェクトは、Mercurialを使用してソースコード管理を行っていました。後にGitへの移行が行われることになりますが、この時点ではまだMercurialの`.hgtags`ファイルを使用してリリースタグを管理していました。

### r60シリーズの主要な変更点

r60シリーズでは以下の重要な変更が行われました：

- **言語仕様の厳格化**: elseブロックでの中括弧必須化
- **HTTPパッケージの改善**: URLパースとクエリエスケープのコードが新しいurlパッケージに移行
- **imageパッケージの重要な変更**: image.RGBAやimage.NRGBAなどの構造体のPixフィールドに重要な変更
- **JSONパッケージの修正**: 新しい構造体タグオプション

## 前提知識の解説

### Mercurialのタグシステム

Mercurialでは、タグ情報を`.hgtags`という特別なファイルで管理します。このファイルは：

1. **バージョン管理対象**: 通常のファイルと同様にバージョン管理される
2. **フォーマット**: 各行が「コミットハッシュ スペース タグ名」の形式
3. **追記専用**: 既存の行を編集するのではなく、新しい行を追加する
4. **最終行優先**: 同じタグ名が複数回記述されている場合、最後の行が有効

### .hgtagsファイルの特徴

- タグを作成するたびに、自動的にコミットが生成される
- ファイルの内容は上から下に読まれ、最後に一致する行が使用される
- リポジトリの履歴を保持するため、タグの変更履歴も追跡可能
- マージ時には通常のファイルと同様に競合が発生する可能性がある

### Go言語の初期リリース命名規則

Go言語の初期リリースでは、以下の命名規則が使用されていました：

- **weekly.YYYY-MM-DD**: 週次リリース
- **release.rXX**: 安定版リリース
- **release.rXX.Y**: ポイントリリース（バグ修正など）

r60.3は、Go 1.0リリースの基準点として公式に位置付けられており、Go 1.0リリースノートでも「その参照点は前のリリースr60（r60.3としてタグ付け）」として明記されています。

## 技術的詳細

### 変更内容の詳細分析

本コミットでは、`.hgtags`ファイルに対して以下の変更が行われました：

1. **新しいタグの追加**: `release.r60.3`タグを`c1702f36df0397c19fc333571a771666029aa37e`に関連付け
2. **releaseタグの更新**: 汎用的な`release`タグを最新のr60.3リリースに移動
3. **古いreleaseタグの削除**: 前のリリース（r60.2）を指していた`release`タグを削除

### タグ管理の意図

この変更により：
- 開発者は`release.r60.3`で特定のリリースを参照可能
- `release`タグで常に最新の安定版リリースを参照可能
- リリース履歴の追跡が容易になる

### Mercurialタグの技術的仕組み

Mercurialでは、タグの作成時に以下の処理が行われます：

1. **コミットハッシュの取得**: タグを付けるコミットのSHA-1ハッシュを取得
2. **.hgtagsファイルの更新**: 新しい行を追加
3. **自動コミット**: 変更内容を自動的にコミット
4. **タグの解決**: 後からタグ名で特定のコミットを参照可能

## コアとなるコードの変更箇所

変更対象ファイル: `.hgtags:22-26`

コミットで変更された核心部分は、リリースタグの管理セクションです。具体的には：

```diff
-32a5db19629897641b2d488de4d1b998942ef80e release
+c1702f36df0397c19fc333571a771666029aa37e release.r60.3
+c1702f36df0397c19fc333571a771666029aa37e release
```

この変更により、以下のタグ構造が確立されました：

- `release.r60.3`: 特定のr60.3リリースを指定
- `release`: 常に最新の安定版リリースを指定（可動的なタグ）

## コアとなるコードの解説

### タグエントリの構造

各タグエントリは以下の形式で構成されています：

```
<40文字のSHA-1ハッシュ> <タグ名>
```

- **SHA-1ハッシュ**: タグが指すコミットの一意識別子
- **タグ名**: 人間が読みやすいリリース名

### 重要なタグの意味

1. **release.r60.3**: 特定のポイントリリースを指定
   - コミット：`c1702f36df0397c19fc333571a771666029aa37e`
   - 用途：特定のバージョンを参照する際に使用

2. **release**: 常に最新の安定版リリースを指定（可動的なタグ）
   - コミット：`c1702f36df0397c19fc333571a771666029aa37e`（r60.3と同じ）
   - 用途：常に最新の安定版を使用したい場合に使用

### リリース管理戦略

このタグ管理手法により：

- **バージョン特定**: 特定のリリースバージョンを正確に参照可能
- **最新版追跡**: 汎用的な`release`タグで最新版を簡単に取得可能
- **履歴保持**: 過去のリリースへの参照も維持

### Andrew Gerrandの役割

Andrew Gerrandは、Go言語チームの重要なメンバーとして以下の役割を担っていました：

- **ユーザーエクスペリエンス**: Go言語の使いやすさの向上に従事
- **リリース管理**: 公式リリースの品質管理とタグ付け
- **コミュニティ活動**: ドキュメント作成、教育コンテンツの制作
- **API設計**: 開発者向けAPIの設計と文書化

Andrew Gerrandは、Go言語プロジェクトの初期からGoogle社で4年以上にわたってGo言語の開発に携わり、特に開発者体験の向上に重点を置いて活動していました。

### リリースプロセスの自動化

このようなタグ管理作業は、Go言語プロジェクトにおけるリリースプロセスの一部として体系化されていました：

1. **コードレビュー**: golang-devチームによるレビュー
2. **テスト実行**: 自動テストスイートの実行
3. **タグ作成**: 本コミットのようなタグ作成作業
4. **リリース告知**: 開発者コミュニティへの告知

## 関連リンク

- [Go 1リリースノート](https://go.dev/doc/go1) - r60.3からGo 1.0への移行について
- [Go 1.0以前のリリース履歴](https://golang.org/doc/devel/pre_go1.html) - 初期リリースの詳細情報
- [Mercurialタグシステム](https://wiki.mercurial-scm.org/Tag) - .hgtagsファイルの仕組み
- [Go言語の歴史](https://golang.design/history/) - Go言語開発の全体的な歴史
- [Andrew Gerrand GitHub](https://github.com/adg) - 開発者の個人プロフィール

## 参考にした情報源リンク

- [Go Development Release History](https://go.dev/doc/devel/release) - 公式リリース履歴
- [Mercurial Tag Documentation](https://www.mercurial-scm.org/wiki/Tag) - Mercurialタグシステムの詳細
- [Go Language Six Years Blog](https://go.dev/blog/6years) - Go言語の6年間の発展
- [Software Engineering Radio Episode 202](https://se-radio.net/2014/03/episode-202-andrew-gerrand/) - Andrew Gerrandのインタビュー
- [Go Documentary Project](https://golang.design/history/) - Go言語開発の包括的な歴史