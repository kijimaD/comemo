# [インデックス 11926] ファイルの概要

このコミットは、Go言語プロジェクトのバージョン管理システム（当時はMercurial）において、リリース管理に使用される`.hgtags`ファイルに新しいタグを追加するものです。具体的には、`weekly.2012-02-14`という日付ベースの週次タグと、その時点での最新の週次リリースを指す`weekly`というエイリアスタグが追加されています。

## コミット

-   **コミットハッシュ**: `60797a375caec151c327e4174da94b58be81c70b`
-   **作者**: Andrew Gerrand <adg@golang.org>
-   **日付**: Wed Feb 15 14:45:54 2012 +1100
-   **コミットメッセージ**: `tag weekly.2012-02-14`
-   **レビュー担当者**: golang-dev, dsymonds
-   **CC**: golang-dev
-   **Gerrit Change-ID**: `https://golang.org/cl/5676046`

## GitHub上でのコミットページへのリンク

[https://github.com/golang/go/commit/60797a375caec151c327e4174da94b58be81c70b](https://github.com/golang/go/commit/60797a375caec151c327e4174da94b58be81c70b)

## 元コミット内容

```
tag weekly.2012-02-14

R=golang-dev, dsymonds
CC=golang-dev
https://golang.org/cl/5676046
```

## 変更の背景

このコミットは、Go言語プロジェクトが当時採用していた週次リリース（weekly snapshot）のプロセスの一環として行われました。Goプロジェクトは、安定版リリースとは別に、開発の進捗を定期的にユーザーに提供するために、毎週スナップショットを公開していました。このスナップショットには、最新のバグ修正や新機能が含まれており、ユーザーはこれを利用して早期にフィードバックを提供したり、最新の開発版でアプリケーションをテストしたりすることができました。

`.hgtags`ファイルに新しい週次タグを追加することは、特定のコミットを「2012年2月14日の週次リリース」として公式にマークする行為です。また、`weekly`というエイリアスタグを同時に更新することで、常に最新の週次リリースを指し示すシンボリックな参照を提供していました。これにより、ユーザーは特定の週次リリースを簡単に参照できるだけでなく、常に最新の週次ビルドを取得するための安定した参照を持つことができました。

## 前提知識の解説

### Goプロジェクトのバージョン管理の歴史

Go言語プロジェクトは、その初期段階において分散型バージョン管理システムであるMercurial（Hg）を使用していました。MercurialはGitと同様に、リポジトリのクローン、コミット、ブランチ、マージなどの機能を提供します。Goプロジェクトは後にGitに移行しましたが、このコミットが作成された2012年時点ではMercurialが主要なバージョン管理システムでした。GitHub上のリポジトリは、Mercurialリポジトリのミラーとして機能していました。

### Mercurialのタグと`.hgtags`ファイル

Mercurialにおける「タグ（tag）」は、特定のコミットに人間が読める意味のある名前を付けるためのメカニズムです。これにより、プロジェクトの特定の時点（例：リリースバージョン、重要なマイルストーン）を簡単に参照できるようになります。Mercurialでは、タグ情報はリポジトリ内の`.hgtags`という特殊なファイルに保存されます。

`.hgtags`ファイルは、各行が「コミットハッシュ」と「タグ名」のペアで構成されるシンプルなテキストファイルです。Mercurialは、このファイルを読み込むことで、どのコミットにどのタグが付けられているかを認識します。タグは、リポジトリの履歴をナビゲートしたり、特定のバージョンのソースコードを取得したりする際に非常に便利です。

### 週次リリース（Weekly Snapshots）

Goプロジェクトは、安定版リリース（例：Go 1.0、Go 1.1など）とは別に、開発版の「週次スナップショット」を定期的に公開していました。これは、開発中の最新の変更をコミュニティに提供し、早期のテストとフィードバックを促すための戦略でした。週次スナップショットは、通常、特定の曜日（この場合は火曜日）に作成され、その日付に基づいて命名されていました（例：`weekly.YYYY-MM-DD`）。

また、`weekly`というタグは、常に最新の週次スナップショットを指すように更新されるエイリアスとして機能していました。これにより、ユーザーは特定の週次スナップショット（例：`go get golang.org/x/tools@weekly.2012-02-14`）を指定することも、常に最新版（例：`go get golang.org/x/tools@weekly`）を取得することも可能でした。

## 技術的詳細

このコミットの核心は、Mercurialのタグ管理ファイルである`.hgtags`への変更です。

1.  **`.hgtags`ファイルの構造**:
    `.hgtags`ファイルは、Mercurialリポジトリのルートに存在するプレーンテキストファイルです。各行は、特定のコミットのハッシュ値と、そのコミットに関連付けられたタグ名で構成されます。フォーマットは以下の通りです。
    ```
    <コミットハッシュ> <タグ名>
    ```
    このコミットでは、`43cf9b39b6477d3144b0353ee91096e55db6107f`というコミットハッシュに対して、2つのタグが追加されています。

2.  **追加されたタグの意味**:
    *   `43cf9b39b6477d3144b0353ee91096e55db6107f weekly.2012-02-14`:
        これは、2012年2月14日の週次スナップショットを示す具体的なタグです。このタグは、特定の時点のGoソースコードを正確に参照するために使用されます。日付が含まれているため、過去の特定の週次ビルドを再現したい場合に役立ちます。
    *   `43cf9b39b6477d3144b0353ee91096e55db6107f weekly`:
        これは、`weekly.2012-02-14`と同じコミットハッシュを指す`weekly`というタグです。この`weekly`タグは、常に最新の週次スナップショットを指すように、新しい週次スナップショットが作成されるたびに更新されていました。これにより、ユーザーは常に最新の開発版を簡単に取得できる便利なエイリアスとして機能しました。

この変更は、Goプロジェクトの継続的な開発とリリースプロセスの一部であり、ユーザーが最新の安定した開発版にアクセスできるようにするための重要なステップでした。Mercurialのタグ機能は、このような定期的なスナップショットの管理を効率的に行うための基盤を提供していました。

## コアとなるコードの変更箇所

```diff
--- a/.hgtags
+++ b/.hgtags
@@ -104,3 +104,5 @@ b4a91b6933748db1a7150c06a1b55ad506e52906 weekly.2011-11-18
 9f2be4fbbf690b9562c6e98b91daa0003f0913c7 weekly.2012-01-20
 1107a7d3cb075836387adfab5ce56d1b3e56637d weekly.2012-01-27
 52ba9506bd993663a0a033c2bd68699e25d061ab weekly.2012-02-07
+43cf9b39b6477d3144b0353ee91096e55db6107f weekly.2012-02-14
+43cf9b39b6477d3144b0353ee91096e55db6107f weekly
```

## コアとなるコードの解説

上記のdiffは、`.hgtags`ファイルに2行が追加されたことを示しています。

1.  `+43cf9b39b6477d3144b0353ee91096e55db6107f weekly.2012-02-14`
    この行は、コミットハッシュ`43cf9b39b6477d3144b0353ee91096e55db6107f`に`weekly.2012-02-14`というタグを関連付けています。これは、2012年2月14日の週次スナップショットとして、この特定のコミットをマークするものです。

2.  `+43cf9b39b6477d3144b0353ee91096e55db6107f weekly`
    この行は、同じコミットハッシュ`43cf9b39b6477d3144b0353ee91096e55db6107f`に`weekly`というタグを関連付けています。この`weekly`タグは、常に最新の週次スナップショットを指すように更新される「移動するタグ」として機能します。つまり、新しい週次スナップショットがリリースされるたびに、この`weekly`タグは新しいコミットハッシュを指すように更新されます。これにより、ユーザーは常に最新の週次ビルドを簡単に取得できる便利な参照ポイントを得ることができました。

これらの変更は、Goプロジェクトの週次リリースプロセスにおける標準的な手順であり、開発の進捗をコミュニティに効率的に提供するための重要な側面でした。

## 関連リンク

-   Gerrit Change-ID: [https://golang.org/cl/5676046](https://golang.org/cl/5676046)

## 参考にした情報源リンク

-   Mercurial Documentation on Tags: [https://www.mercurial-scm.org/wiki/Tag](https://www.mercurial-scm.org/wiki/Tag)
-   Go Project Release History: [https://go.dev/doc/devel/release](https://go.dev/doc/devel/release)
-   Go Blog: [https://go.dev/blog/](https://go.dev/blog/)

