commit de83ef67acaaf5c2ce12dd831e8d3d04f02a6fc9
Merge: de23549a39 5e6a7e9b86
Author: Michael Matloob <matloob@golang.org>
Date:   Thu Aug 26 15:04:40 2021 -0400

    [dev.cmdgo] all: merge master (5e6a7e9) into dev.cmdgo
    
    Merge List:
    
    + 2021-08-26 5e6a7e9b86 embed: remove reference to global variables in docs
    + 2021-08-26 166b691b65 cmd/compile/internal/types2: remove need for instance (struct)
    + 2021-08-26 d6bdae33e9 cmd/compile/internal/types2: address some TODOs (cleanup)
    + 2021-08-26 770df2e18d crypto/tls: fix typo in PreferServerCipherSuites comment
    + 2021-08-26 a6ff433d6a cmd/go: pass -gcflags after other flags generated by the go command
    + 2021-08-25 4f2620285d cmd/compile/internal/types2: fix type set printing and add test
    + 2021-08-25 0ac64f6d70 cmd/compile/internal/types2: rename IsMethodSet to IsConstraint (cleanup)
    + 2021-08-25 4068fb6c21 cmd/compile: always accept 1.18 syntax but complain if not 1.18
    + 2021-08-25 bf0bc4122f go/types, types2: don't re-evaluate context string for each function argument (optimization)
    + 2021-08-25 4158e88f64 cmd/compile/internal/syntax: fix position of type parameter field
    + 2021-08-25 647bef6c59 go/types: implement NewTypeList and use it instead of composite literals
    + 2021-08-25 6cf1d5d0fa cmd/compile: generic SSA rules for simplifying 2 and 3 operand integer arithmetic expressions
    + 2021-08-25 5baf60d472 bytes, strings: optimize Trim for single byte cutsets
    + 2021-08-25 3d667671ad cmd/compile: fix function contains no TParam in generic function
    + 2021-08-25 4f2ebfe34b cmd/compile: allow embed into any byte slice type
    + 2021-08-25 d2f002cb39 time/format: avoid growslice in time.String()/time.GoString()
    + 2021-08-25 08d4cc20ca cmd/compile: fix stencil call expression.
    + 2021-08-25 099b819085 cmd/compile: fix CheckSize() calculation for -G=3 and stencils
    + 2021-08-25 e1fcf8857e test: add test that caused gofrontend compiler crash
    + 2021-08-25 d37b8dedf7 test: add test case that gofrontend miscompiled
    + 2021-08-25 41b99dab0f os/user: don't skip TestLookupGroup if supported
    + 2021-08-25 de1c934b97 cmd/compile: fix checkptr false positive for (*[Big]T)(ptr)[:n:n] pattern
    + 2021-08-24 54cdef1f10 reflect: add MapIter.SetKey and MapIter.SetValue
    + 2021-08-24 5d863f89fe cmd/compile: simplify bad conversion check
    
    Change-Id: I29ab927f0e47f44d82f9307c642900f75f4f678f

 src/bytes/bytes.go                                 |  28 +-
 src/bytes/bytes_test.go                            |   9 +
 src/cmd/compile/internal/ir/expr.go                |   9 +-
 src/cmd/compile/internal/noder/noder.go            |   2 +-
 src/cmd/compile/internal/noder/stencil.go          |  27 +-
 src/cmd/compile/internal/noder/types.go            |  24 +-
 src/cmd/compile/internal/ssa/gen/generic.rules     |   4 +
 src/cmd/compile/internal/ssa/rewritegeneric.go     | 328 +++++++++++++++++++++
 src/cmd/compile/internal/ssagen/ssa.go             |   3 +
 src/cmd/compile/internal/staticdata/embed.go       |   2 +-
 src/cmd/compile/internal/syntax/parser.go          |   6 +-
 src/cmd/compile/internal/typecheck/subr.go         |  55 ++--
 src/cmd/compile/internal/types2/call.go            |  18 +-
 src/cmd/compile/internal/types2/check_test.go      |   3 -
 src/cmd/compile/internal/types2/decl.go            |  23 +-
 src/cmd/compile/internal/types2/expr.go            |   4 +-
 src/cmd/compile/internal/types2/hilbert_test.go    |   3 +-
 src/cmd/compile/internal/types2/instantiate.go     |  51 ++--
 src/cmd/compile/internal/types2/interface.go       |   2 +-
 src/cmd/compile/internal/types2/named.go           |  20 +-
 src/cmd/compile/internal/types2/resolver.go        |  40 ++-
 src/cmd/compile/internal/types2/self_test.go       |   7 +-
 src/cmd/compile/internal/types2/signature.go       |   7 +-
 src/cmd/compile/internal/types2/stmt.go            |   6 -
 src/cmd/compile/internal/types2/subst.go           |   2 +-
 .../internal/types2/testdata/check/decls0.src      |   2 +-
 .../internal/types2/testdata/check/issues.src      |   6 +-
 .../internal/types2/testdata/check/main.go2        |   2 +-
 .../internal/types2/testdata/check/tinference.go2  |   6 +-
 .../internal/types2/testdata/check/typeparams.go2  |   4 +-
 .../types2/testdata/fixedbugs/issue47818.go2       |  59 ++++
 src/cmd/compile/internal/types2/tuple.go           |   2 -
 src/cmd/compile/internal/types2/type.go            |   1 -
 src/cmd/compile/internal/types2/typeset.go         |  29 +-
 src/cmd/compile/internal/types2/typeset_test.go    |  67 ++++-
 src/cmd/compile/internal/types2/typestring.go      |   3 +-
 src/cmd/compile/internal/types2/typexpr.go         |  17 +-
 src/cmd/compile/internal/types2/unify.go           |   3 -
 src/cmd/compile/internal/walk/convert.go           |  13 +-
 src/cmd/compile/internal/walk/expr.go              |   2 +-
 src/cmd/go/internal/work/gc.go                     |  24 +-
 src/cmd/go/testdata/script/build_gcflags_order.txt |  20 ++
 .../go/testdata/script/build_runtime_gcflags.txt   |   2 +-
 src/cmd/go/testdata/script/gcflags_patterns.txt    |  22 +-
 src/crypto/tls/common.go                           |   2 +-
 src/embed/embed.go                                 |   3 +-
 src/embed/internal/embedtest/embed_test.go         |  40 +++
 src/go/types/call.go                               |   7 +-
 src/go/types/check.go                              |   2 +-
 src/go/types/instantiate.go                        |   2 +-
 src/go/types/predicates.go                         |   8 +-
 src/go/types/subst.go                              |   2 +-
 src/go/types/typelists.go                          |   8 +
 src/os/user/lookup_plan9.go                        |   1 +
 src/os/user/lookup_stubs.go                        |   2 +-
 src/os/user/lookup_unix.go                         |   8 +-
 src/os/user/user.go                                |   7 +-
 src/os/user/user_test.go                           |   9 +-
 src/reflect/all_test.go                            |  41 +++
 src/reflect/value.go                               |  62 +++-
 src/strings/strings.go                             |  28 +-
 src/strings/strings_test.go                        |   9 +
 src/time/format.go                                 |   5 +-
 test/codegen/arithmetic.go                         |  24 ++
 test/fixedbugs/gcc101994.go                        |  16 +
 test/fixedbugs/issue10975.go                       |   2 +-
 test/fixedbugs/issue46938.go                       |  29 ++
 test/fixedbugs/issue47771.go                       |  19 ++
 test/typeparam/issue47878.go                       |  46 +++
 test/typeparam/issue47901.go                       |  21 ++
 test/typeparam/issue47929.go                       |  29 ++
 test/typeparam/issue47948.go                       |  18 ++
 72 files changed, 1161 insertions(+), 256 deletions(-)
