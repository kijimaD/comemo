commit 2ba76155cd0762375b8e19a500a5b1fb875ff73b
Author: Russ Cox <rsc@golang.org>
Date:   Tue Sep 19 23:50:50 2017 -0400

    [dev.boringcrypto] crypto/internal/boring: fix finalizer-induced crashes
    
    All the finalizer-enabled C wrappers must be careful to use
    runtime.KeepAlive to ensure the C wrapper object (a Go object)
    lives through the end of every C call using state that the
    wrapper's finalizer would free.
    
    This CL makes the wrappers appropriately careful.
    
    The test proves that this is the bug I was chasing in a
    separate real program, and that the KeepAlives fix it.
    I did not write a test of every possible operation.
    
    Change-Id: I627007e480f16adf8396e7f796b54e5525d9ea80
    Reviewed-on: https://go-review.googlesource.com/64870
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Adam Langley <agl@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/crypto/internal/boring/aes.go   |  6 ++++++
 src/crypto/internal/boring/ecdsa.go | 13 +++++++++++-
 src/crypto/internal/boring/hmac.go  |  6 ++++++
 src/crypto/internal/boring/rsa.go   | 29 +++++++++++++++++++-------
 src/crypto/rsa/boring_test.go       | 41 +++++++++++++++++++++++++++++++++++++
 5 files changed, 87 insertions(+), 8 deletions(-)
