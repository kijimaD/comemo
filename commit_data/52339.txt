commit da4687923b8c2d42c23f61fa3db9f4d3ce0c5f54
Author: Yi Yang <y1yang0x@gmail.com>
Date:   Sun Mar 19 07:24:04 2023 +0000

    cmd/compile: add rewrite rules for arithmetic operations
    
    Add the following common local transformations
    
    (t + x) - (t + y) == x - y
    (t + x) - (y + t) == x - y
    (x + t) - (y + t) == x - y
    (x + t) - (t + y) == x - y
    (x - t) + (t + y) == x + y
    (x - t) + (y + t) == x + y
    
    The compiler itself matches such patterns many times. This also aligns with other popular compilers.
    
    Fixes #59111
    
    Change-Id: Ibdfdb414782f8fcaa20b84ac5d43d0d9ae2c7b60
    GitHub-Last-Rev: 1aad82e62e61e89789932c2070851a023f130dd8
    GitHub-Pull-Request: golang/go#59119
    Reviewed-on: https://go-review.googlesource.com/c/go/+/477555
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Heschi Kreinick <heschi@google.com>
    Auto-Submit: Keith Randall <khr@golang.org>
    Reviewed-by: Keith Randall <khr@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssa/_gen/generic.rules |  10 ++
 src/cmd/compile/internal/ssa/rewritegeneric.go  | 228 ++++++++++++++++++++++++
 test/codegen/arithmetic.go                      |  16 ++
 3 files changed, 254 insertions(+)
