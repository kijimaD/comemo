commit dfc86e922cd033155339c22aff64e109f6c8cc89
Author: Michael Anthony Knyszek <mknyszek@google.com>
Date:   Thu Apr 4 04:50:13 2024 +0000

    internal/weak: add package implementing weak pointers
    
    This change adds the internal/weak package, which exposes GC-supported
    weak pointers to the standard library. This is for the upcoming weak
    package, but may be useful for other future constructs.
    
    For #62483.
    
    Change-Id: I4aa8fa9400110ad5ea022a43c094051699ccab9d
    Reviewed-on: https://go-review.googlesource.com/c/go/+/576297
    Auto-Submit: Michael Knyszek <mknyszek@google.com>
    Reviewed-by: David Chase <drchase@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/go/build/deps_test.go         |   1 +
 src/internal/abi/escape.go        |  11 +++
 src/internal/weak/pointer.go      |  83 ++++++++++++++++++
 src/internal/weak/pointer_test.go | 130 +++++++++++++++++++++++++++++
 src/runtime/mgcmark.go            |  45 ++++++----
 src/runtime/mgcsweep.go           |  43 ++++++----
 src/runtime/mheap.go              | 171 ++++++++++++++++++++++++++++++++++++--
 src/runtime/proc.go               |  12 +++
 8 files changed, 457 insertions(+), 39 deletions(-)
