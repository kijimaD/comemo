commit f2d8da1a353b493548e211b06fdf47bd998ad4b6
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Apr 24 12:13:11 2020 -0400

    [dev.link] cmd/link: set HeadType early
    
    So we can use it to set per-OS flags.
    
    Also set flagnewDoData after archinit, where IsELF is set.
    
    This should correct the logic of setting flagnewDoData.
    
    Change-Id: I18c7252f141aa35119005c252becc9d7cb74f2f7
    Reviewed-on: https://go-review.googlesource.com/c/go/+/229867
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/link/internal/ld/main.go | 22 ++++++++++------------
 1 file changed, 10 insertions(+), 12 deletions(-)
