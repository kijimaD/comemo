commit fced03a5c6dd22dd486106e3dd116510c28c6e4a
Author: Russ Cox <rsc@golang.org>
Date:   Wed Aug 5 22:12:16 2015 -0400

    net/url: allow all valid host chars in RawPath
    
    The old code was only allowing the chars we choose not to escape.
    We sometimes prefer to escape chars that do not strictly need it.
    Allowing those to be used in RawPath lets people override that
    preference, which is in fact the whole point of RawPath (new in Go 1.5).
    
    While we are here, also allow [ ] in RawPath.
    This is not strictly spec-compliant, but it is what modern browers
    do and what at least some people expect, and the [ ] do not cause
    any ambiguity (the usual reason they would be escaped, as they are
    part of the RFC gen-delims class).
    The argument for allowing them now instead of waiting until Go 1.6
    is that this way RawPath has one fixed meaning at the time it is
    introduced, that we should not need to change or expand.
    
    Fixes #5684.
    
    Change-Id: If9c82a18f522d7ee1d10310a22821ada9286ee5c
    Reviewed-on: https://go-review.googlesource.com/13258
    Reviewed-by: Andrew Gerrand <adg@golang.org>

 src/net/url/url.go      | 18 ++++++++++++++++--
 src/net/url/url_test.go | 24 +++++++++++++++++++++++-
 2 files changed, 39 insertions(+), 3 deletions(-)
