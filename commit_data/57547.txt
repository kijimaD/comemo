commit 98c9f271d67b501ecf2ce995539abd2cdc81d505
Author: Russ Cox <rsc@golang.org>
Date:   Wed Jun 28 17:45:26 2023 -0400

    regexp/syntax: use more compact Regexp.String output
    
    Compact the Regexp.String output. It was only ever intended for debugging,
    but there are at least some uses in the wild where regexps are built up
    using regexp/syntax and then formatted using the String method.
    Compact the output to help that use case. Specifically:
    
     - Compact 2-element character class ranges: [a-b] -> [ab].
     - Aggregate flags: (?i:A)(?i:B)*(?i:C)|(?i:D)?(?i:E) -> (?i:AB*C|D?E).
    
    Fixes #57950.
    
    Change-Id: I1161d0e3aa6c3ae5a302677032bb7cd55caae5fb
    Reviewed-on: https://go-review.googlesource.com/c/go/+/507015
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Rob Pike <r@golang.org>
    Auto-Submit: Russ Cox <rsc@golang.org>

 src/regexp/syntax/parse.go         |  16 +++
 src/regexp/syntax/parse_test.go    |  36 ++++++
 src/regexp/syntax/regexp.go        | 217 ++++++++++++++++++++++++++++++++-----
 src/regexp/syntax/simplify_test.go |  16 +--
 4 files changed, 248 insertions(+), 37 deletions(-)
