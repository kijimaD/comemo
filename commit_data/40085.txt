commit 2bdbc942f5ae3da8cad8d0f2bd3f4ce75a821e6c
Author: Jay Conrod <jayconrod@google.com>
Date:   Mon Apr 15 15:34:49 2019 -0400

    cmd/go: print package import chains for some build list errors
    
    When we construct the build list by loading packages (e.g., in
    "go build", "go list", or "go test"), we may load additional modules
    not mentioned in the original build list. If we encounter an error
    loading one of these modules, mvs.BuildList currently returns a
    BuildListError with a chain of requirments. Unfortunately, this is not
    helpful, since the graph is structured such that these missing modules
    are direct requirements of the main module.
    
    With this change, loader.load keeps track of the package that caused
    each "missing" module to be added. If an error occurs in a missing
    module, the chain of package imports is printed instead of the module
    requirements.
    
    Fixes #31475
    
    Change-Id: Ie484814af42ceea3e85fedc38e705ba3a38cd495
    Reviewed-on: https://go-review.googlesource.com/c/go/+/171859
    Run-TryBot: Jay Conrod <jayconrod@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bryan C. Mills <bcmills@google.com>

 src/cmd/go/internal/modload/load.go                | 34 ++++++++++++++++------
 src/cmd/go/internal/mvs/mvs.go                     | 15 ++++++++--
 src/cmd/go/testdata/script/mod_load_badchain.txt   | 33 ++++++++++++++++++++-
 .../testdata/script/mod_missingpkg_prerelease.txt  |  2 +-
 4 files changed, 70 insertions(+), 14 deletions(-)
