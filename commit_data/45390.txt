commit 6f7b553c82b69b47becbe36d9115971d30fdab48
Author: Quim Muntal <quimmuntal@gmail.com>
Date:   Thu Oct 15 23:12:49 2020 +0200

    cmd/cgo: avoid exporting all symbols on windows buildmode=c-shared
    
    Disable default symbol auto-export behaviour by marking exported
    function with the __declspec(dllexport) attribute. Old behaviour can
    still be used by setting -extldflags=-Wl,--export-all-symbols.
    
    See https://sourceware.org/binutils/docs/ld/WIN32.html for more info.
    
    This change cuts 50kb of a "hello world" dll.
    
    Updates #6853
    Fixes #30674
    
    Change-Id: I9c7fb09c677cc760f24d0f7d199740ae73981413
    Reviewed-on: https://go-review.googlesource.com/c/go/+/262797
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Alex Brainman <alex.brainman@gmail.com>
    Trust: Alex Brainman <alex.brainman@gmail.com>

 misc/cgo/testcshared/cshared_test.go | 96 ++++++++++++++++++++++++++++++++++++
 src/cmd/cgo/out.go                   |  6 ++-
 2 files changed, 101 insertions(+), 1 deletion(-)
