commit 5f08b4479930af266d4a84c1533b320ed75edba7
Author: Michael Anthony Knyszek <mknyszek@google.com>
Date:   Fri Nov 10 21:23:38 2023 +0000

    runtime: call enableMetadataHugePages and its callees on the systemstack
    
    These functions acquire the heap lock. If they're not called on the
    systemstack, a stack growth could cause a self-deadlock since stack
    growth may allocate memory from the page heap.
    
    This has been a problem for a while. If this is what's plaguing the
    ppc64 port right now, it's very surprising (and probably just
    coincidental) that it's showing up now.
    
    For #64050.
    For #64062.
    Fixes #64067.
    
    Change-Id: I2b95dc134d17be63b9fe8f7a3370fe5b5438682f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/541635
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Run-TryBot: Michael Knyszek <mknyszek@google.com>
    Auto-Submit: Michael Knyszek <mknyszek@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Michael Pratt <mpratt@google.com>
    Reviewed-by: Paul Murphy <murp@ibm.com>

 src/runtime/malloc.go     | 4 ++++
 src/runtime/mgc.go        | 4 +++-
 src/runtime/mpagealloc.go | 4 ++++
 3 files changed, 11 insertions(+), 1 deletion(-)
