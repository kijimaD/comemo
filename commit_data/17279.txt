commit bc2126507472e51a6820aecce9f07df6e4231a0a
Author: Nigel Tao <nigeltao@golang.org>
Date:   Fri Aug 16 11:23:35 2013 +1000

    database/sql: make Rows.Next returning false always implicitly call
    Rows.Close.
    
    Previously, callers that followed the example code (but not call
    rows.Close after "for rows.Next() { ... }") could leak statements if
    the driver returned an error other than io.EOF.
    
    R=bradfitz, alex.brainman
    CC=golang-dev, rsc
    https://golang.org/cl/12677050

 src/pkg/database/sql/fakedb_test.go | 14 +++++++++++---
 src/pkg/database/sql/sql.go         | 22 +++++++++-------------
 src/pkg/database/sql/sql_test.go    | 29 +++++++++++++++++++++++++++++
 3 files changed, 49 insertions(+), 16 deletions(-)
