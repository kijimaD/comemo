commit 9f928f9318efb9e6a9d45e7ed959afaaee4b7315
Author: Rob Findley <rfindley@google.com>
Date:   Fri Jul 23 10:00:10 2021 -0400

    [dev.typeparams] go/types, types2: set tset when constructing interfaces in the universe
    
    As of CL 334894, type sets are lazily evaluated on interfaces. For the
    universe interfaces error and comparable, this can lead to data races
    when type checking concurrently. Fix this by computing their type set
    when they are defined.
    
    Tested using the repro from #47345. I considered checking this in as a
    test, but it probably wouldn't add much value going forward.
    
    Fixes #47345
    
    Change-Id: I014a511b8e3c092c86201a8bfc7f5f494f8f20e8
    Reviewed-on: https://go-review.googlesource.com/c/go/+/336910
    Trust: Robert Findley <rfindley@google.com>
    Run-TryBot: Robert Findley <rfindley@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/cmd/compile/internal/types2/universe.go | 8 ++++++--
 src/go/types/universe.go                    | 8 ++++++--
 2 files changed, 12 insertions(+), 4 deletions(-)
