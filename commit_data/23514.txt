commit 32fddadd98f938018485fba6253d30273db4e5e9
Author: Russ Cox <rsc@golang.org>
Date:   Thu Jun 25 19:27:20 2015 -0400

    runtime: reduce slice growth during append to 2x
    
    The new inlined code for append assumed that it could pass the
    desired new cap to growslice, not the number of new elements.
    But growslice still interpreted the argument as the number of new elements,
    making it always grow by >2x (more precisely, 2x+1 rounded up
    to the next malloc block size). At the time, I had intended to change
    the other callers to use the new cap as well, but it's too late for that.
    Instead, introduce growslice_n for the old callers and keep growslice
    for the inlined (common case) caller.
    
    Fixes #11403.
    
    Filed #11419 to merge them.
    
    Change-Id: I1338b1e5b352f3be4e43641f44b652ef7195251b
    Reviewed-on: https://go-review.googlesource.com/11541
    Reviewed-by: Austin Clements <austin@google.com>

 src/cmd/compile/internal/gc/builtin.go         |  3 +-
 src/cmd/compile/internal/gc/builtin/runtime.go |  3 +-
 src/cmd/compile/internal/gc/walk.go            | 14 ++++-----
 src/runtime/runtime_test.go                    | 40 ++++++++++++++++++++++++++
 src/runtime/slice.go                           | 14 +++++++--
 5 files changed, 63 insertions(+), 11 deletions(-)
