commit 58c73de7d09ca750f5d1927448f086ee25977dad
Author: Ian Lance Taylor <iant@golang.org>
Date:   Mon Dec 28 11:29:22 2015 -0800

    os, runtime: better EPIPE behavior for command line programs
    
    Old behavior: 10 consecutive EPIPE errors on any descriptor cause the
    program to exit with a SIGPIPE signal.
    
    New behavior: an EPIPE error on file descriptors 1 or 2 cause the
    program to raise a SIGPIPE signal.  If os/signal.Notify was not used to
    catch SIGPIPE signals, this will cause the program to exit with SIGPIPE.
    An EPIPE error on a file descriptor other than 1 or 2 will simply be
    returned from Write.
    
    Fixes #11845.
    Update #9896.
    
    Change-Id: Ic85d77e386a8bb0255dc4be1e4b3f55875d10f18
    Reviewed-on: https://go-review.googlesource.com/18151
    Reviewed-by: Russ Cox <rsc@golang.org>

 src/os/file_unix.go         |  13 ++---
 src/os/pipe_test.go         | 114 ++++++++++++++++++++++++++++++++++++++++++++
 src/os/signal/doc.go        |  12 +++++
 src/runtime/signal1_unix.go |   3 ++
 4 files changed, 134 insertions(+), 8 deletions(-)
