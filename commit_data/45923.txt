commit 4eaef981b5b5bac873256d63ffecaaa73fb5f28b
Author: Russ Cox <rsc@golang.org>
Date:   Thu Nov 26 00:47:44 2020 -0500

    [dev.regabi] cmd/compile: add ir.Closure, ir.ClosureRead
    
    Closures are another reference to Funcs,
    and it cleans up the code quite a bit to be clear about types.
    
    OCLOSUREVAR is renamed to OCLOSUREREAD to make
    clearer that it is unrelated to the list Func.ClosureVars.
    
    Passes buildall w/ toolstash -cmp.
    
    Change-Id: Id0d28df2d4d6e9954e34df7a39ea226995eee937
    Reviewed-on: https://go-review.googlesource.com/c/go/+/274098
    Trust: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

 src/cmd/compile/internal/gc/closure.go     | 32 ++++++++++--------------
 src/cmd/compile/internal/gc/escape.go      |  4 +--
 src/cmd/compile/internal/gc/inl.go         |  4 +--
 src/cmd/compile/internal/gc/ssa.go         |  4 +--
 src/cmd/compile/internal/gc/typecheck.go   |  6 ++---
 src/cmd/compile/internal/gc/walk.go        |  2 +-
 src/cmd/compile/internal/ir/expr.go        | 39 ++++++++++++++++++++++++++++++
 src/cmd/compile/internal/ir/func.go        |  4 +--
 src/cmd/compile/internal/ir/node.go        | 30 +++++++++++------------
 src/cmd/compile/internal/ir/op_string.go   |  6 ++---
 src/cmd/compile/internal/ir/sizeof_test.go |  2 +-
 11 files changed, 82 insertions(+), 51 deletions(-)
