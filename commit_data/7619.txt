commit 5bd284e86840eba5e4ace473a3f7341a40332db6
Author: Roger Peppe <rogpeppe@gmail.com>
Date:   Thu Mar 3 10:43:29 2011 -0800

    fmt: make recursive scan more efficient.
    Detect when scan is being called recursively and
    re-use the same scan state.
    
    On my machine, for a recursion-heavy benchmark, this
    results in 44x speed up. This does impose a 4% penalty
    on the non-recursive case, which can be removed by
    heap-allocating the saved state, at 40% performance penalty
    on the recursive case. Either way is fine with me.
    
    R=r
    CC=golang-dev
    https://golang.org/cl/4253049

 src/pkg/fmt/scan.go      |  81 ++++++++++++++++++++++----------
 src/pkg/fmt/scan_test.go | 117 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 173 insertions(+), 25 deletions(-)
