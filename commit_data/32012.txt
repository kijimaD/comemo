commit 9664bc1d1ff8ee2ddcea37d335ca4510a57a1e0c
Author: David Chase <drchase@google.com>
Date:   Wed Jun 14 17:28:28 2017 -0400

    cmd/compile: fix phi-function updates for preemptible loops
    
    Previous code failed to account for particular control flow
    involving nested loops when updating phi function inputs.
    Fix involves:
    1) remove incorrect shortcut
    2) generate a "better" order for children in dominator tree
    3) note inner-loop updates and check before applying
       outer-loop updates.
    
    Fixes #20675.
    
    Change-Id: I2fe21470604b5c259e777ad8b15de95f7706894d
    Reviewed-on: https://go-review.googlesource.com/45791
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

 src/cmd/compile/internal/ssa/loopreschedchecks.go | 72 ++++++++++++++++-------
 src/cmd/compile/internal/ssa/sparsetree.go        | 18 ++++++
 2 files changed, 69 insertions(+), 21 deletions(-)
