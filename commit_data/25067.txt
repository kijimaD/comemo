commit 7b767f4e521c2481e08051c843badd0382fde3b0
Author: Dmitry Vyukov <dvyukov@google.com>
Date:   Wed Sep 23 10:03:54 2015 +0200

    internal/race: add package
    
    Factor out duplicated race thunks from sync, syscall net
    and fmt packages into a separate package and use it.
    
    Fixes #8593
    
    Change-Id: I156869c50946277809f6b509463752e7f7d28cdb
    Reviewed-on: https://go-review.googlesource.com/14870
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Dmitry Vyukov <dvyukov@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/dist/deps.go           | 83 +++++++++++++++++++++---------------------
 src/fmt/fmt_test.go            |  3 +-
 src/fmt/norace_test.go         |  9 -----
 src/fmt/race_test.go           |  9 -----
 src/go/build/deps_test.go      | 11 +++---
 src/internal/race/doc.go       | 11 ++++++
 src/internal/race/norace.go    | 40 ++++++++++++++++++++
 src/internal/race/race.go      | 50 +++++++++++++++++++++++++
 src/net/fd_windows.go          |  9 +++--
 src/net/race.go                | 31 ----------------
 src/net/race0.go               | 26 -------------
 src/sync/cond.go               | 21 ++++++-----
 src/sync/export_test.go        |  2 -
 src/sync/mutex.go              | 13 ++++---
 src/sync/pool.go               |  5 ++-
 src/sync/race.go               | 42 ---------------------
 src/sync/race0.go              | 34 -----------------
 src/sync/rwmutex.go            | 49 +++++++++++++------------
 src/sync/waitgroup.go          | 33 +++++++++--------
 src/sync/waitgroup_test.go     |  3 +-
 src/syscall/race.go            | 30 ---------------
 src/syscall/race0.go           | 25 -------------
 src/syscall/syscall_unix.go    | 19 +++++-----
 src/syscall/syscall_windows.go | 15 ++++----
 24 files changed, 239 insertions(+), 334 deletions(-)
