commit bfe3c678ab70d9a033b219276636c3f4669c1dc9
Author: Cherry Mui <cherryyz@google.com>
Date:   Fri Mar 31 19:16:12 2023 +0000

    Revert "runtime/cgo: store M for C-created thread in pthread key"
    
    This reverts CL 392854.
    
    Reason for revert: caused #59294, which was derived from google
    internal tests. The attempted fix of #59294 caused more breakage.
    
    Change-Id: I5a061561ac2740856b7ecc09725ac28bd30f8bba
    Reviewed-on: https://go-review.googlesource.com/c/go/+/481060
    Reviewed-by: Heschi Kreinick <heschi@google.com>
    Run-TryBot: Cherry Mui <cherryyz@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 misc/cgo/test/cgo_test.go                 |  7 +--
 misc/cgo/test/cthread_unix.c              | 24 --------
 misc/cgo/test/cthread_windows.c           | 22 --------
 misc/cgo/test/testx.go                    | 14 -----
 src/runtime/asm_386.s                     | 41 ++------------
 src/runtime/asm_amd64.s                   | 38 ++-----------
 src/runtime/asm_arm.s                     | 37 ++-----------
 src/runtime/asm_arm64.s                   | 32 ++---------
 src/runtime/asm_loong64.s                 | 32 ++---------
 src/runtime/asm_mips64x.s                 | 32 ++---------
 src/runtime/asm_mipsx.s                   | 32 ++---------
 src/runtime/asm_ppc64x.s                  | 35 ++----------
 src/runtime/asm_riscv64.s                 | 32 ++---------
 src/runtime/asm_s390x.s                   | 32 ++---------
 src/runtime/cgo.go                        |  7 ---
 src/runtime/cgo/asm_386.s                 |  8 ---
 src/runtime/cgo/asm_amd64.s               |  8 ---
 src/runtime/cgo/asm_arm.s                 |  8 ---
 src/runtime/cgo/asm_arm64.s               |  8 ---
 src/runtime/cgo/asm_loong64.s             |  8 ---
 src/runtime/cgo/asm_mips64x.s             |  8 ---
 src/runtime/cgo/asm_mipsx.s               |  8 ---
 src/runtime/cgo/asm_ppc64x.s              | 24 --------
 src/runtime/cgo/asm_riscv64.s             |  8 ---
 src/runtime/cgo/asm_s390x.s               |  8 ---
 src/runtime/cgo/asm_wasm.s                |  3 -
 src/runtime/cgo/callbacks.go              | 36 ------------
 src/runtime/cgo/gcc_libinit.c             | 35 ------------
 src/runtime/cgo/gcc_libinit_windows.c     |  9 ---
 src/runtime/cgo/libcgo.h                  |  5 --
 src/runtime/cgocall.go                    |  6 --
 src/runtime/crash_cgo_test.go             | 13 -----
 src/runtime/proc.go                       | 92 ++++---------------------------
 src/runtime/runtime2.go                   |  1 -
 src/runtime/signal_unix.go                | 16 +-----
 src/runtime/stubs.go                      |  3 -
 src/runtime/testdata/testprogcgo/bindm.go | 89 ------------------------------
 37 files changed, 61 insertions(+), 760 deletions(-)
