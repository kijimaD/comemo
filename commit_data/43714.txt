commit 300ff5d8ac12a5515234e68aa8a03637ba181937
Author: Michael Pratt <mpratt@google.com>
Date:   Fri Apr 17 15:36:13 2020 -0400

    runtime: allow proflock and mheap.speciallock above globalAlloc.mutex
    
    During schedinit, these may occur in:
    
    mProf_Malloc
      stkbucket
        newBucket
          persistentalloc
            persistentalloc1
    
    mProf_Malloc
      setprofilebucket
        fixalloc.alloc
          persistentalloc
            persistentalloc1
    
    These seem to be legitimate lock orderings.
    
    Additionally, mheap.speciallock had a defined rank, but it was never
    actually used. That is fixed now.
    
    Updates #38474
    
    Change-Id: I0f6e981852eac66dafb72159f426476509620a65
    Reviewed-on: https://go-review.googlesource.com/c/go/+/228786
    Run-TryBot: Michael Pratt <mpratt@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dan Scales <danscales@google.com>

 src/runtime/lockrank.go | 12 ++++++------
 src/runtime/mheap.go    |  1 +
 2 files changed, 7 insertions(+), 6 deletions(-)
