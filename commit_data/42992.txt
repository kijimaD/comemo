commit e9056a6a7388a0124209fe2a69a083b8a34d416c
Author: Jeremy Faller <jeremy@golang.org>
Date:   Mon Feb 24 20:59:02 2020 -0500

    [dev.link] cmd/link: create Target in order to make relocsym threadsafe
    
    In its current form, relocsym requires the Link context -- largely in a
    readonly state. Rather than passing around such heavy-weight object to
    the function, this CL separates out the link target. From here, the
    number of touchpoints (and thread unsafe portions) of relocing symbols
    can be mentally reasoned about.
    
    (NB: My personal intent is to make this more universal -- passing only
    the necessary variables/state to reloc functions. This is a taste to see
    if we like this form.)
    
    Change-Id: Id9177d03267fedf0bb572a9d61bc07b64309c3b9
    Reviewed-on: https://go-review.googlesource.com/c/go/+/220837
    Run-TryBot: Jeremy Faller <jeremy@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/link/internal/ld/data.go   | 122 +++++++++++++++++++------------------
 src/cmd/link/internal/ld/dwarf2.go |   1 -
 src/cmd/link/internal/ld/link.go   |  11 +---
 src/cmd/link/internal/ld/sym.go    |   2 +-
 src/cmd/link/internal/ld/target.go | 104 +++++++++++++++++++++++++++++++
 5 files changed, 168 insertions(+), 72 deletions(-)
