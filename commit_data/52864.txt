commit d4fb93be87c38aaf0f68ad91852f9f83be726262
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Jun 7 10:33:01 2022 -0700

    go/types, types2: use | rather than âˆª when printing term lists
    
    With this change, the termlist String() function prints termlists
    in the usual Go notation and thus we can use it in error reporting.
    Preparation for fixing #40350.
    
    For #40350.
    
    Change-Id: Ia28318841305de234a71af3146ce0c59f5e601a5
    Reviewed-on: https://go-review.googlesource.com/c/go/+/410894
    Reviewed-by: Robert Griesemer <gri@google.com>
    Reviewed-by: Robert Findley <rfindley@google.com>
---
 src/cmd/compile/internal/types2/termlist.go      |   2 +-
 src/cmd/compile/internal/types2/termlist_test.go | 140 +++++++++++------------
 src/cmd/compile/internal/types2/typeset_test.go  |   6 +-
 src/go/types/termlist.go                         |   2 +-
 src/go/types/termlist_test.go                    | 140 +++++++++++------------
 src/go/types/typeset_test.go                     |   6 +-
 6 files changed, 148 insertions(+), 148 deletions(-)

diff --git a/src/cmd/compile/internal/types2/termlist.go b/src/cmd/compile/internal/types2/termlist.go
index a0108c4638..43e43ce87c 100644
--- a/src/cmd/compile/internal/types2/termlist.go
+++ b/src/cmd/compile/internal/types2/termlist.go
@@ -25,7 +25,7 @@ func (xl termlist) String() string {
 	var buf bytes.Buffer
 	for i, x := range xl {
 		if i > 0 {
-			buf.WriteString(" âˆª ")
+			buf.WriteString(" | ")
 		}
 		buf.WriteString(x.String())
 	}
diff --git a/src/cmd/compile/internal/types2/termlist_test.go b/src/cmd/compile/internal/types2/termlist_test.go
index d1e3bdf88e..3005d0edea 100644
--- a/src/cmd/compile/internal/types2/termlist_test.go
+++ b/src/cmd/compile/internal/types2/termlist_test.go
@@ -12,7 +12,7 @@ import (
 // maketl makes a term list from a string of the term list.
 func maketl(s string) termlist {
 	s = strings.ReplaceAll(s, " ", "")
-	names := strings.Split(s, "âˆª")
+	names := strings.Split(s, "|")
 	r := make(termlist, len(names))
 	for i, n := range names {
 		r[i] = testTerm(n)
@@ -33,10 +33,10 @@ func TestTermlistString(t *testing.T) {
 		"int",
 		"~int",
 		"myInt",
-		"âˆ… âˆª âˆ…",
-		"ğ“¤ âˆª ğ“¤",
-		"âˆ… âˆª ğ“¤ âˆª int",
-		"âˆ… âˆª ğ“¤ âˆª int âˆª myInt",
+		"âˆ… | âˆ…",
+		"ğ“¤ | ğ“¤",
+		"âˆ… | ğ“¤ | int",
+		"âˆ… | ğ“¤ | int | myInt",
 	} {
 		if got := maketl(want).String(); got != want {
 			t.Errorf("(%v).String() == %v", want, got)
@@ -47,12 +47,12 @@ func TestTermlistString(t *testing.T) {
 func TestTermlistIsEmpty(t *testing.T) {
 	for test, want := range map[string]bool{
 		"âˆ…":             true,
-		"âˆ… âˆª âˆ…":         true,
-		"âˆ… âˆª âˆ… âˆª ğ“¤":     false,
-		"âˆ… âˆª âˆ… âˆª myInt": false,
+		"âˆ… | âˆ…":         true,
+		"âˆ… | âˆ… | ğ“¤":     false,
+		"âˆ… | âˆ… | myInt": false,
 		"ğ“¤":             false,
-		"ğ“¤ âˆª int":       false,
-		"ğ“¤ âˆª myInt âˆª âˆ…": false,
+		"ğ“¤ | int":       false,
+		"ğ“¤ | myInt | âˆ…": false,
 	} {
 		xl := maketl(test)
 		got := xl.isEmpty()
@@ -65,13 +65,13 @@ func TestTermlistIsEmpty(t *testing.T) {
 func TestTermlistIsAll(t *testing.T) {
 	for test, want := range map[string]bool{
 		"âˆ…":             false,
-		"âˆ… âˆª âˆ…":         false,
-		"int âˆª ~string": false,
-		"~int âˆª myInt":  false,
-		"âˆ… âˆª âˆ… âˆª ğ“¤":     true,
+		"âˆ… | âˆ…":         false,
+		"int | ~string": false,
+		"~int | myInt":  false,
+		"âˆ… | âˆ… | ğ“¤":     true,
 		"ğ“¤":             true,
-		"ğ“¤ âˆª int":       true,
-		"myInt âˆª ğ“¤":     true,
+		"ğ“¤ | int":       true,
+		"myInt | ğ“¤":     true,
 	} {
 		xl := maketl(test)
 		got := xl.isAll()
@@ -86,17 +86,17 @@ func TestTermlistNorm(t *testing.T) {
 		xl, want string
 	}{
 		{"âˆ…", "âˆ…"},
-		{"âˆ… âˆª âˆ…", "âˆ…"},
-		{"âˆ… âˆª int", "int"},
-		{"âˆ… âˆª myInt", "myInt"},
-		{"ğ“¤ âˆª int", "ğ“¤"},
-		{"ğ“¤ âˆª myInt", "ğ“¤"},
-		{"int âˆª myInt", "int âˆª myInt"},
-		{"~int âˆª int", "~int"},
-		{"~int âˆª myInt", "~int"},
-		{"int âˆª ~string âˆª int", "int âˆª ~string"},
-		{"~int âˆª string âˆª ğ“¤ âˆª ~string âˆª int", "ğ“¤"},
-		{"~int âˆª string âˆª myInt âˆª ~string âˆª int", "~int âˆª ~string"},
+		{"âˆ… | âˆ…", "âˆ…"},
+		{"âˆ… | int", "int"},
+		{"âˆ… | myInt", "myInt"},
+		{"ğ“¤ | int", "ğ“¤"},
+		{"ğ“¤ | myInt", "ğ“¤"},
+		{"int | myInt", "int | myInt"},
+		{"~int | int", "~int"},
+		{"~int | myInt", "~int"},
+		{"int | ~string | int", "int | ~string"},
+		{"~int | string | ğ“¤ | ~string | int", "ğ“¤"},
+		{"~int | string | myInt | ~string | int", "~int | ~string"},
 	} {
 		xl := maketl(test.xl)
 		got := maketl(test.xl).norm()
@@ -116,15 +116,15 @@ func TestTermlistUnion(t *testing.T) {
 		{"âˆ…", "int", "int"},
 		{"ğ“¤", "~int", "ğ“¤"},
 		{"int", "~int", "~int"},
-		{"int", "string", "int âˆª string"},
-		{"int", "myInt", "int âˆª myInt"},
+		{"int", "string", "int | string"},
+		{"int", "myInt", "int | myInt"},
 		{"~int", "myInt", "~int"},
-		{"int âˆª string", "~string", "int âˆª ~string"},
-		{"~int âˆª string", "~string âˆª int", "~int âˆª ~string"},
-		{"~int âˆª string âˆª âˆ…", "~string âˆª int", "~int âˆª ~string"},
-		{"~int âˆª myInt âˆª âˆ…", "~string âˆª int", "~int âˆª ~string"},
-		{"~int âˆª string âˆª ğ“¤", "~string âˆª int", "ğ“¤"},
-		{"~int âˆª string âˆª myInt", "~string âˆª int", "~int âˆª ~string"},
+		{"int | string", "~string", "int | ~string"},
+		{"~int | string", "~string | int", "~int | ~string"},
+		{"~int | string | âˆ…", "~string | int", "~int | ~string"},
+		{"~int | myInt | âˆ…", "~string | int", "~int | ~string"},
+		{"~int | string | ğ“¤", "~string | int", "ğ“¤"},
+		{"~int | string | myInt", "~string | int", "~int | ~string"},
 	} {
 		xl := maketl(test.xl)
 		yl := maketl(test.yl)
@@ -150,12 +150,12 @@ func TestTermlistIntersect(t *testing.T) {
 		{"int", "string", "âˆ…"},
 		{"int", "myInt", "âˆ…"},
 		{"~int", "myInt", "myInt"},
-		{"int âˆª string", "~string", "string"},
-		{"~int âˆª string", "~string âˆª int", "int âˆª string"},
-		{"~int âˆª string âˆª âˆ…", "~string âˆª int", "int âˆª string"},
-		{"~int âˆª myInt âˆª âˆ…", "~string âˆª int", "int"},
-		{"~int âˆª string âˆª ğ“¤", "~string âˆª int", "int âˆª ~string"},
-		{"~int âˆª string âˆª myInt", "~string âˆª int", "int âˆª string"},
+		{"int | string", "~string", "string"},
+		{"~int | string", "~string | int", "int | string"},
+		{"~int | string | âˆ…", "~string | int", "int | string"},
+		{"~int | myInt | âˆ…", "~string | int", "int"},
+		{"~int | string | ğ“¤", "~string | int", "int | ~string"},
+		{"~int | string | myInt", "~string | int", "int | string"},
 	} {
 		xl := maketl(test.xl)
 		yl := maketl(test.yl)
@@ -174,12 +174,12 @@ func TestTermlistEqual(t *testing.T) {
 		{"âˆ…", "âˆ…", true},
 		{"âˆ…", "ğ“¤", false},
 		{"ğ“¤", "ğ“¤", true},
-		{"ğ“¤ âˆª int", "ğ“¤", true},
-		{"ğ“¤ âˆª int", "string âˆª ğ“¤", true},
-		{"ğ“¤ âˆª myInt", "string âˆª ğ“¤", true},
-		{"int âˆª ~string", "string âˆª int", false},
-		{"~int âˆª string", "string âˆª myInt", false},
-		{"int âˆª ~string âˆª âˆ…", "string âˆª int âˆª ~string", true},
+		{"ğ“¤ | int", "ğ“¤", true},
+		{"ğ“¤ | int", "string | ğ“¤", true},
+		{"ğ“¤ | myInt", "string | ğ“¤", true},
+		{"int | ~string", "string | int", false},
+		{"~int | string", "string | myInt", false},
+		{"int | ~string | âˆ…", "string | int | ~string", true},
 	} {
 		xl := maketl(test.xl)
 		yl := maketl(test.yl)
@@ -201,11 +201,11 @@ func TestTermlistIncludes(t *testing.T) {
 		{"int", "string", false},
 		{"~int", "string", false},
 		{"~int", "myInt", true},
-		{"int âˆª string", "string", true},
-		{"~int âˆª string", "int", true},
-		{"~int âˆª string", "myInt", true},
-		{"~int âˆª myInt âˆª âˆ…", "myInt", true},
-		{"myInt âˆª âˆ… âˆª ğ“¤", "int", true},
+		{"int | string", "string", true},
+		{"~int | string", "int", true},
+		{"~int | string", "myInt", true},
+		{"~int | myInt | âˆ…", "myInt", true},
+		{"myInt | âˆ… | ğ“¤", "int", true},
 	} {
 		xl := maketl(test.xl)
 		yl := testTerm(test.typ).typ
@@ -236,12 +236,12 @@ func TestTermlistSupersetOf(t *testing.T) {
 		{"myInt", "~int", false},
 		{"int", "string", false},
 		{"~int", "string", false},
-		{"int âˆª string", "string", true},
-		{"int âˆª string", "~string", false},
-		{"~int âˆª string", "int", true},
-		{"~int âˆª string", "myInt", true},
-		{"~int âˆª string âˆª âˆ…", "string", true},
-		{"~string âˆª âˆ… âˆª ğ“¤", "myInt", true},
+		{"int | string", "string", true},
+		{"int | string", "~string", false},
+		{"~int | string", "int", true},
+		{"~int | string", "myInt", true},
+		{"~int | string | âˆ…", "string", true},
+		{"~string | âˆ… | ğ“¤", "myInt", true},
 	} {
 		xl := maketl(test.xl)
 		y := testTerm(test.typ)
@@ -261,18 +261,18 @@ func TestTermlistSubsetOf(t *testing.T) {
 		{"âˆ…", "ğ“¤", true},
 		{"ğ“¤", "âˆ…", false},
 		{"ğ“¤", "ğ“¤", true},
-		{"int", "int âˆª string", true},
-		{"~int", "int âˆª string", false},
-		{"~int", "myInt âˆª string", false},
-		{"myInt", "~int âˆª string", true},
-		{"~int", "string âˆª string âˆª int âˆª ~int", true},
-		{"myInt", "string âˆª string âˆª ~int", true},
-		{"int âˆª string", "string", false},
-		{"int âˆª string", "string âˆª int", true},
-		{"int âˆª ~string", "string âˆª int", false},
-		{"myInt âˆª ~string", "string âˆª int âˆª ğ“¤", true},
-		{"int âˆª ~string", "string âˆª int âˆª âˆ… âˆª string", false},
-		{"int âˆª myInt", "string âˆª ~int âˆª âˆ… âˆª string", true},
+		{"int", "int | string", true},
+		{"~int", "int | string", false},
+		{"~int", "myInt | string", false},
+		{"myInt", "~int | string", true},
+		{"~int", "string | string | int | ~int", true},
+		{"myInt", "string | string | ~int", true},
+		{"int | string", "string", false},
+		{"int | string", "string | int", true},
+		{"int | ~string", "string | int", false},
+		{"myInt | ~string", "string | int | ğ“¤", true},
+		{"int | ~string", "string | int | âˆ… | string", false},
+		{"int | myInt", "string | ~int | âˆ… | string", true},
 	} {
 		xl := maketl(test.xl)
 		yl := maketl(test.yl)
diff --git a/src/cmd/compile/internal/types2/typeset_test.go b/src/cmd/compile/internal/types2/typeset_test.go
index 69eaff741f..40ca28e525 100644
--- a/src/cmd/compile/internal/types2/typeset_test.go
+++ b/src/cmd/compile/internal/types2/typeset_test.go
@@ -21,13 +21,13 @@ func TestTypeSetString(t *testing.T) {
 		"{}":            "ğ“¤",
 		"{int}":         "{int}",
 		"{~int}":        "{~int}",
-		"{int|string}":  "{int âˆª string}",
+		"{int|string}":  "{int | string}",
 		"{int; string}": "âˆ…",
 
 		"{comparable}":              "{comparable}",
 		"{comparable; int}":         "{int}",
 		"{~int; comparable}":        "{~int}",
-		"{int|string; comparable}":  "{int âˆª string}",
+		"{int|string; comparable}":  "{int | string}",
 		"{comparable; int; string}": "âˆ…",
 
 		"{m()}":                         "{func (p.T).m()}",
@@ -37,7 +37,7 @@ func TestTypeSetString(t *testing.T) {
 		"{m1(); comparable; m2() int }": "{comparable; func (p.T).m1(); func (p.T).m2() int}",
 		"{comparable; error}":           "{comparable; func (error).Error() string}",
 
-		"{m(); comparable; int|float32|string}": "{func (p.T).m(); int âˆª float32 âˆª string}",
+		"{m(); comparable; int|float32|string}": "{func (p.T).m(); int | float32 | string}",
 		"{m1(); int; m2(); comparable }":        "{func (p.T).m1(); func (p.T).m2(); int}",
 
 		"{E}; type E interface{}":           "ğ“¤",
diff --git a/src/go/types/termlist.go b/src/go/types/termlist.go
index 94e49caee0..6d08ddb397 100644
--- a/src/go/types/termlist.go
+++ b/src/go/types/termlist.go
@@ -25,7 +25,7 @@ func (xl termlist) String() string {
 	var buf bytes.Buffer
 	for i, x := range xl {
 		if i > 0 {
-			buf.WriteString(" âˆª ")
+			buf.WriteString(" | ")
 		}
 		buf.WriteString(x.String())
 	}
diff --git a/src/go/types/termlist_test.go b/src/go/types/termlist_test.go
index f0d58ac1bc..0ff687ebda 100644
--- a/src/go/types/termlist_test.go
+++ b/src/go/types/termlist_test.go
@@ -12,7 +12,7 @@ import (
 // maketl makes a term list from a string of the term list.
 func maketl(s string) termlist {
 	s = strings.ReplaceAll(s, " ", "")
-	names := strings.Split(s, "âˆª")
+	names := strings.Split(s, "|")
 	r := make(termlist, len(names))
 	for i, n := range names {
 		r[i] = testTerm(n)
@@ -33,10 +33,10 @@ func TestTermlistString(t *testing.T) {
 		"int",
 		"~int",
 		"myInt",
-		"âˆ… âˆª âˆ…",
-		"ğ“¤ âˆª ğ“¤",
-		"âˆ… âˆª ğ“¤ âˆª int",
-		"âˆ… âˆª ğ“¤ âˆª int âˆª myInt",
+		"âˆ… | âˆ…",
+		"ğ“¤ | ğ“¤",
+		"âˆ… | ğ“¤ | int",
+		"âˆ… | ğ“¤ | int | myInt",
 	} {
 		if got := maketl(want).String(); got != want {
 			t.Errorf("(%v).String() == %v", want, got)
@@ -47,12 +47,12 @@ func TestTermlistString(t *testing.T) {
 func TestTermlistIsEmpty(t *testing.T) {
 	for test, want := range map[string]bool{
 		"âˆ…":             true,
-		"âˆ… âˆª âˆ…":         true,
-		"âˆ… âˆª âˆ… âˆª ğ“¤":     false,
-		"âˆ… âˆª âˆ… âˆª myInt": false,
+		"âˆ… | âˆ…":         true,
+		"âˆ… | âˆ… | ğ“¤":     false,
+		"âˆ… | âˆ… | myInt": false,
 		"ğ“¤":             false,
-		"ğ“¤ âˆª int":       false,
-		"ğ“¤ âˆª myInt âˆª âˆ…": false,
+		"ğ“¤ | int":       false,
+		"ğ“¤ | myInt | âˆ…": false,
 	} {
 		xl := maketl(test)
 		got := xl.isEmpty()
@@ -65,13 +65,13 @@ func TestTermlistIsEmpty(t *testing.T) {
 func TestTermlistIsAll(t *testing.T) {
 	for test, want := range map[string]bool{
 		"âˆ…":             false,
-		"âˆ… âˆª âˆ…":         false,
-		"int âˆª ~string": false,
-		"~int âˆª myInt":  false,
-		"âˆ… âˆª âˆ… âˆª ğ“¤":     true,
+		"âˆ… | âˆ…":         false,
+		"int | ~string": false,
+		"~int | myInt":  false,
+		"âˆ… | âˆ… | ğ“¤":     true,
 		"ğ“¤":             true,
-		"ğ“¤ âˆª int":       true,
-		"myInt âˆª ğ“¤":     true,
+		"ğ“¤ | int":       true,
+		"myInt | ğ“¤":     true,
 	} {
 		xl := maketl(test)
 		got := xl.isAll()
@@ -86,17 +86,17 @@ func TestTermlistNorm(t *testing.T) {
 		xl, want string
 	}{
 		{"âˆ…", "âˆ…"},
-		{"âˆ… âˆª âˆ…", "âˆ…"},
-		{"âˆ… âˆª int", "int"},
-		{"âˆ… âˆª myInt", "myInt"},
-		{"ğ“¤ âˆª int", "ğ“¤"},
-		{"ğ“¤ âˆª myInt", "ğ“¤"},
-		{"int âˆª myInt", "int âˆª myInt"},
-		{"~int âˆª int", "~int"},
-		{"~int âˆª myInt", "~int"},
-		{"int âˆª ~string âˆª int", "int âˆª ~string"},
-		{"~int âˆª string âˆª ğ“¤ âˆª ~string âˆª int", "ğ“¤"},
-		{"~int âˆª string âˆª myInt âˆª ~string âˆª int", "~int âˆª ~string"},
+		{"âˆ… | âˆ…", "âˆ…"},
+		{"âˆ… | int", "int"},
+		{"âˆ… | myInt", "myInt"},
+		{"ğ“¤ | int", "ğ“¤"},
+		{"ğ“¤ | myInt", "ğ“¤"},
+		{"int | myInt", "int | myInt"},
+		{"~int | int", "~int"},
+		{"~int | myInt", "~int"},
+		{"int | ~string | int", "int | ~string"},
+		{"~int | string | ğ“¤ | ~string | int", "ğ“¤"},
+		{"~int | string | myInt | ~string | int", "~int | ~string"},
 	} {
 		xl := maketl(test.xl)
 		got := maketl(test.xl).norm()
@@ -116,15 +116,15 @@ func TestTermlistUnion(t *testing.T) {
 		{"âˆ…", "int", "int"},
 		{"ğ“¤", "~int", "ğ“¤"},
 		{"int", "~int", "~int"},
-		{"int", "string", "int âˆª string"},
-		{"int", "myInt", "int âˆª myInt"},
+		{"int", "string", "int | string"},
+		{"int", "myInt", "int | myInt"},
 		{"~int", "myInt", "~int"},
-		{"int âˆª string", "~string", "int âˆª ~string"},
-		{"~int âˆª string", "~string âˆª int", "~int âˆª ~string"},
-		{"~int âˆª string âˆª âˆ…", "~string âˆª int", "~int âˆª ~string"},
-		{"~int âˆª myInt âˆª âˆ…", "~string âˆª int", "~int âˆª ~string"},
-		{"~int âˆª string âˆª ğ“¤", "~string âˆª int", "ğ“¤"},
-		{"~int âˆª string âˆª myInt", "~string âˆª int", "~int âˆª ~string"},
+		{"int | string", "~string", "int | ~string"},
+		{"~int | string", "~string | int", "~int | ~string"},
+		{"~int | string | âˆ…", "~string | int", "~int | ~string"},
+		{"~int | myInt | âˆ…", "~string | int", "~int | ~string"},
+		{"~int | string | ğ“¤", "~string | int", "ğ“¤"},
+		{"~int | string | myInt", "~string | int", "~int | ~string"},
 	} {
 		xl := maketl(test.xl)
 		yl := maketl(test.yl)
@@ -150,12 +150,12 @@ func TestTermlistIntersect(t *testing.T) {
 		{"int", "string", "âˆ…"},
 		{"int", "myInt", "âˆ…"},
 		{"~int", "myInt", "myInt"},
-		{"int âˆª string", "~string", "string"},
-		{"~int âˆª string", "~string âˆª int", "int âˆª string"},
-		{"~int âˆª string âˆª âˆ…", "~string âˆª int", "int âˆª string"},
-		{"~int âˆª myInt âˆª âˆ…", "~string âˆª int", "int"},
-		{"~int âˆª string âˆª ğ“¤", "~string âˆª int", "int âˆª ~string"},
-		{"~int âˆª string âˆª myInt", "~string âˆª int", "int âˆª string"},
+		{"int | string", "~string", "string"},
+		{"~int | string", "~string | int", "int | string"},
+		{"~int | string | âˆ…", "~string | int", "int | string"},
+		{"~int | myInt | âˆ…", "~string | int", "int"},
+		{"~int | string | ğ“¤", "~string | int", "int | ~string"},
+		{"~int | string | myInt", "~string | int", "int | string"},
 	} {
 		xl := maketl(test.xl)
 		yl := maketl(test.yl)
@@ -174,12 +174,12 @@ func TestTermlistEqual(t *testing.T) {
 		{"âˆ…", "âˆ…", true},
 		{"âˆ…", "ğ“¤", false},
 		{"ğ“¤", "ğ“¤", true},
-		{"ğ“¤ âˆª int", "ğ“¤", true},
-		{"ğ“¤ âˆª int", "string âˆª ğ“¤", true},
-		{"ğ“¤ âˆª myInt", "string âˆª ğ“¤", true},
-		{"int âˆª ~string", "string âˆª int", false},
-		{"~int âˆª string", "string âˆª myInt", false},
-		{"int âˆª ~string âˆª âˆ…", "string âˆª int âˆª ~string", true},
+		{"ğ“¤ | int", "ğ“¤", true},
+		{"ğ“¤ | int", "string | ğ“¤", true},
+		{"ğ“¤ | myInt", "string | ğ“¤", true},
+		{"int | ~string", "string | int", false},
+		{"~int | string", "string | myInt", false},
+		{"int | ~string | âˆ…", "string | int | ~string", true},
 	} {
 		xl := maketl(test.xl)
 		yl := maketl(test.yl)
@@ -201,11 +201,11 @@ func TestTermlistIncludes(t *testing.T) {
 		{"int", "string", false},
 		{"~int", "string", false},
 		{"~int", "myInt", true},
-		{"int âˆª string", "string", true},
-		{"~int âˆª string", "int", true},
-		{"~int âˆª string", "myInt", true},
-		{"~int âˆª myInt âˆª âˆ…", "myInt", true},
-		{"myInt âˆª âˆ… âˆª ğ“¤", "int", true},
+		{"int | string", "string", true},
+		{"~int | string", "int", true},
+		{"~int | string", "myInt", true},
+		{"~int | myInt | âˆ…", "myInt", true},
+		{"myInt | âˆ… | ğ“¤", "int", true},
 	} {
 		xl := maketl(test.xl)
 		yl := testTerm(test.typ).typ
@@ -236,12 +236,12 @@ func TestTermlistSupersetOf(t *testing.T) {
 		{"myInt", "~int", false},
 		{"int", "string", false},
 		{"~int", "string", false},
-		{"int âˆª string", "string", true},
-		{"int âˆª string", "~string", false},
-		{"~int âˆª string", "int", true},
-		{"~int âˆª string", "myInt", true},
-		{"~int âˆª string âˆª âˆ…", "string", true},
-		{"~string âˆª âˆ… âˆª ğ“¤", "myInt", true},
+		{"int | string", "string", true},
+		{"int | string", "~string", false},
+		{"~int | string", "int", true},
+		{"~int | string", "myInt", true},
+		{"~int | string | âˆ…", "string", true},
+		{"~string | âˆ… | ğ“¤", "myInt", true},
 	} {
 		xl := maketl(test.xl)
 		y := testTerm(test.typ)
@@ -261,18 +261,18 @@ func TestTermlistSubsetOf(t *testing.T) {
 		{"âˆ…", "ğ“¤", true},
 		{"ğ“¤", "âˆ…", false},
 		{"ğ“¤", "ğ“¤", true},
-		{"int", "int âˆª string", true},
-		{"~int", "int âˆª string", false},
-		{"~int", "myInt âˆª string", false},
-		{"myInt", "~int âˆª string", true},
-		{"~int", "string âˆª string âˆª int âˆª ~int", true},
-		{"myInt", "string âˆª string âˆª ~int", true},
-		{"int âˆª string", "string", false},
-		{"int âˆª string", "string âˆª int", true},
-		{"int âˆª ~string", "string âˆª int", false},
-		{"myInt âˆª ~string", "string âˆª int âˆª ğ“¤", true},
-		{"int âˆª ~string", "string âˆª int âˆª âˆ… âˆª string", false},
-		{"int âˆª myInt", "string âˆª ~int âˆª âˆ… âˆª string", true},
+		{"int", "int | string", true},
+		{"~int", "int | string", false},
+		{"~int", "myInt | string", false},
+		{"myInt", "~int | string", true},
+		{"~int", "string | string | int | ~int", true},
+		{"myInt", "string | string | ~int", true},
+		{"int | string", "string", false},
+		{"int | string", "string | int", true},
+		{"int | ~string", "string | int", false},
+		{"myInt | ~string", "string | int | ğ“¤", true},
+		{"int | ~string", "string | int | âˆ… | string", false},
+		{"int | myInt", "string | ~int | âˆ… | string", true},
 	} {
 		xl := maketl(test.xl)
 		yl := maketl(test.yl)
diff --git a/src/go/types/typeset_test.go b/src/go/types/typeset_test.go
index 2bbe611376..5156092483 100644
--- a/src/go/types/typeset_test.go
+++ b/src/go/types/typeset_test.go
@@ -22,13 +22,13 @@ func TestTypeSetString(t *testing.T) {
 		"{}":            "ğ“¤",
 		"{int}":         "{int}",
 		"{~int}":        "{~int}",
-		"{int|string}":  "{int âˆª string}",
+		"{int|string}":  "{int | string}",
 		"{int; string}": "âˆ…",
 
 		"{comparable}":              "{comparable}",
 		"{comparable; int}":         "{int}",
 		"{~int; comparable}":        "{~int}",
-		"{int|string; comparable}":  "{int âˆª string}",
+		"{int|string; comparable}":  "{int | string}",
 		"{comparable; int; string}": "âˆ…",
 
 		"{m()}":                         "{func (p.T).m()}",
@@ -38,7 +38,7 @@ func TestTypeSetString(t *testing.T) {
 		"{m1(); comparable; m2() int }": "{comparable; func (p.T).m1(); func (p.T).m2() int}",
 		"{comparable; error}":           "{comparable; func (error).Error() string}",
 
-		"{m(); comparable; int|float32|string}": "{func (p.T).m(); int âˆª float32 âˆª string}",
+		"{m(); comparable; int|float32|string}": "{func (p.T).m(); int | float32 | string}",
 		"{m1(); int; m2(); comparable }":        "{func (p.T).m1(); func (p.T).m2(); int}",
 
 		"{E}; type E interface{}":           "ğ“¤",
