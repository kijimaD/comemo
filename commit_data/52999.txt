commit 6b6c64b1cc918633824e7a9165816c81f0c08b21
Author: Bryan C. Mills <bcmills@google.com>
Date:   Fri Jun 24 17:02:24 2022 -0400

    cmd/internal/archive: don't rely on an erroneous install target in tests
    
    Non-main packages in module mode should not be installed to
    GOPATH/pkg, but due to #37015 they were installed there anyway.
    This change switches the 'go install' command to instead use
    'go build -buildmode=archive' with an explicit archive path.
    
    For #37015.
    
    Change-Id: Ib0c8f213100b6473a7657af96f31395703e28493
    Reviewed-on: https://go-review.googlesource.com/c/go/+/414055
    Auto-Submit: Bryan Mills <bcmills@google.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>
    Run-TryBot: Bryan Mills <bcmills@google.com>

 src/cmd/internal/archive/archive_test.go | 153 +++++++++++++++++--------------
 1 file changed, 82 insertions(+), 71 deletions(-)
