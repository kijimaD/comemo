commit c8000a18d688f65ad229c48a0e8a82435943eb6a
Author: Wayne Zuo <wdvxdr@golangcn.org>
Date:   Wed Aug 3 23:31:29 2022 +0800

    cmd/compile,math: remove all sqrt assembly code
    
    This CL make math.sqrt an intrinsic function, math.Sqrt is not affected
    since compiler can inline it. With this change, we can remove all assembly
    code for math.Sqrt that aims to speed up indirect call. The go compiler can
    generate same or faster code (with regabi) for indirect call.
    
    Benchmark on amd64:
    name                 old time/op  new time/op  delta
    SqrtIndirect         2.60ns ± 3%  1.03ns ± 4%  -60.24%  (p=0.000 n=10+10)
    SqrtLatency          3.40ns ± 1%  3.32ns ± 1%   -2.26%  (p=0.000 n=10+8)
    SqrtIndirectLatency  6.09ns ± 0%  3.31ns ± 0%  -45.67%  (p=0.000 n=10+10)
    SqrtGoLatency        36.1ns ± 6%  34.6ns ± 1%     ~     (p=0.101 n=10+10)
    SqrtPrime            2.53µs ± 2%  2.55µs ± 6%     ~     (p=0.398 n=9+9)
    
    Change-Id: If4be0f242c1d9d4feca7d269fc9cd6e6066f163d
    Reviewed-on: https://go-review.googlesource.com/c/go/+/421074
    Run-TryBot: Wayne Zuo <wdvxdr@golangcn.org>
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/compile/internal/ssagen/ssa.go |  2 +-
 src/math/sqrt.go                       |  7 +------
 src/math/sqrt_386.s                    | 12 ------------
 src/math/sqrt_amd64.s                  | 12 ------------
 src/math/sqrt_arm.s                    | 20 --------------------
 src/math/sqrt_arm64.s                  | 12 ------------
 src/math/sqrt_asm.go                   | 11 -----------
 src/math/sqrt_mipsx.s                  | 19 -------------------
 src/math/sqrt_noasm.go                 | 13 -------------
 src/math/sqrt_ppc64x.s                 | 15 ---------------
 src/math/sqrt_riscv64.s                | 12 ------------
 src/math/sqrt_s390x.s                  | 12 ------------
 src/math/sqrt_wasm.s                   | 12 ------------
 13 files changed, 2 insertions(+), 157 deletions(-)
