commit 4160a71d4206e11d2122d1d9520c55a5b95c2085
Author: Bryan C. Mills <bcmills@google.com>
Date:   Fri Nov 15 12:26:09 2019 -0500

    cmd/dist: fix GOROOT permissions on failure
    
    While running various tests for #28387, I keep ending up with an
    unwritable GOROOT after a failure.
    
    While the unwritable GOROOT is a fairly exotic condition (normally
    only happens on builders), it's somewhat annoying when debugging, so
    I'm switching all of the log.Fatal* call sites to use the existing
    fatalf function, which supports general atexit-like cleanup.
    
    Updates #28387
    
    Change-Id: I473cda7eacd9ad82bdeab647766373126dc7390e
    Reviewed-on: https://go-review.googlesource.com/c/go/+/207341
    Run-TryBot: Bryan C. Mills <bcmills@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

 src/cmd/dist/test.go | 31 ++++++++++++++-----------------
 1 file changed, 14 insertions(+), 17 deletions(-)
