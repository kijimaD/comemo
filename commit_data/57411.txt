commit 5858205831117498e7b65ded82e398b28cff6c37
Author: Michael Matloob <matloob@golang.org>
Date:   Fri Sep 6 13:59:16 2024 -0400

    cmd/go: add an exception for 'go telemetry off' to not open counters
    
    There is the expectation that if 'go telemetry off' is run with a clean
    home directory that no counter files are written. But we were writing
    counters in that case because the act of turning telemetry off was done
    after the act of opening the counter files, so the counter files were
    opened depending on what the previous mode was. Add a special check that
    the command is not 'go telemetry off' before opening counter files.
    
    Fixes #69269
    
    Change-Id: I8fc37dfe24ec7f454676cc2fdd4b79a13a7aba9d
    Reviewed-on: https://go-review.googlesource.com/c/go/+/611456
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Robert Findley <rfindley@google.com>
    Auto-Submit: Michael Matloob <matloob@golang.org>

 src/cmd/go/main.go                       | 44 ++++++++++++++++++++++++++++++--
 src/cmd/go/testdata/script/telemetry.txt | 20 ++++++++++++++-
 2 files changed, 61 insertions(+), 3 deletions(-)
