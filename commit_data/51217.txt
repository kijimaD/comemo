commit 14018c8becc385f79f62f9cdf24cab93fe3e0cdc
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Nov 1 16:04:50 2022 -0700

    runtime: retry thread creation on EAGAIN
    
    This copies the logic we use in runtime/cgo, when calling pthread_create,
    into runtime proper, when calling newosproc.
    
    We only do this in newosproc, not newosproc0, because in newosproc0 we
    need a nosplit function literal, and we need to pass arguments to it through
    newosproc, which is a pain. Also newosproc0 is only called at process
    startup, when thread creation is less likely to fail anyhow.
    
    Fixes #49438
    
    Change-Id: Ia26813952fdbae8aaad5904c9102269900a07ba9
    Reviewed-on: https://go-review.googlesource.com/c/go/+/447175
    Reviewed-by: Michael Knyszek <mknyszek@google.com>
    Auto-Submit: Ian Lance Taylor <iant@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@google.com>
    Reviewed-by: Ian Lance Taylor <iant@google.com>

 src/runtime/os3_solaris.go        |  6 ++++--
 src/runtime/os_aix.go             | 13 +++----------
 src/runtime/os_darwin.go          |  4 +++-
 src/runtime/os_dragonfly.go       |  5 ++++-
 src/runtime/os_freebsd.go         | 10 +++++++---
 src/runtime/os_linux.go           | 16 ++++++++++++----
 src/runtime/os_netbsd.go          | 12 ++++++++----
 src/runtime/os_openbsd_libc.go    |  4 +++-
 src/runtime/os_openbsd_syscall.go | 12 ++++++++----
 src/runtime/retry.go              | 23 +++++++++++++++++++++++
 10 files changed, 75 insertions(+), 30 deletions(-)
