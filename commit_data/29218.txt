commit 1c53a1b1975adf69c594fbbd5b1ca13d783f9817
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Sep 1 07:22:23 2016 -0400

    cmd/compile: fix scheduling of memory-producing tuple ops
    
    Intrinsified atomic op produces <value,memory>. Make sure this
    memory is considered in the store chain calculation.
    
    Fixes #16948.
    
    Change-Id: I029f164b123a7e830214297f8373f06ea0bf1e26
    Reviewed-on: https://go-review.googlesource.com/28350
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssa/schedule.go |  6 +++++-
 test/fixedbugs/issue16948.go             | 34 ++++++++++++++++++++++++++++++++
 2 files changed, 39 insertions(+), 1 deletion(-)
