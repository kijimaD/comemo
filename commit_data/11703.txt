commit fff732ea2c4d3cb449c4383a6957ff80ca75c70a
Author: Jamie Gennis <jgennis@google.com>
Date:   Wed Feb 8 10:25:13 2012 -0500

    6g,8g: make constant propagation inlining-friendly.
    
    This changes makes constant propagation compare 'from' values using node
    pointers rather than symbol names when checking to see whether a set
    operation is redundant. When a function is inlined multiple times in a
    calling function its arguments will share symbol names even though the values
    are different. Prior to this fix the bug409 test would hit a case with 6g
    where an LEAQ instruction was incorrectly eliminated from the second inlined
    function call. 8g appears to have had the same bug, but the test did not fail
    there.
    
    R=golang-dev, rsc
    CC=golang-dev
    https://golang.org/cl/5646044

 src/cmd/6g/peep.c         |  2 +-
 src/cmd/8g/peep.c         |  2 +-
 test/fixedbugs/bug409.go  | 20 ++++++++++++++++++++
 test/fixedbugs/bug409.out |  1 +
 4 files changed, 23 insertions(+), 2 deletions(-)
