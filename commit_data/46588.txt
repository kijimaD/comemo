commit 983ac4b08663ea9655abe99ca30faf47e54fdc16
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Jan 13 15:02:16 2021 -0800

    [dev.regabi] cmd/compile: fix ICE when initializing blank vars
    
    CL 278914 introduced NameOffsetExpr to avoid copying ONAME nodes and
    hacking up their offsets, but evidently staticinit subtly depended on
    the prior behavior to allow dynamic initialization of blank variables.
    
    This CL refactors the code somewhat to avoid using NameOffsetExpr with
    blank variables, and to instead create dynamic assignments directly to
    the global blank node. It also adds a check to NewNameOffsetExpr to
    guard against misuse like this, since I suspect there could be other
    cases still lurking within staticinit. (This code is overdue for an
    makeover anyway.)
    
    Thanks to thanm@ for bisect and test case minimization.
    
    Fixes #43677.
    
    Change-Id: Ic71cb5d6698382feb9548dc3bb9fd606b207a172
    Reviewed-on: https://go-review.googlesource.com/c/go/+/283537
    Trust: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/compile/internal/ir/expr.go          |  3 +++
 src/cmd/compile/internal/staticinit/sched.go | 33 ++++++++++++++++------------
 test/fixedbugs/issue43677.go                 | 18 +++++++++++++++
 3 files changed, 40 insertions(+), 14 deletions(-)
