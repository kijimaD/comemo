commit 0cf71f7f92c2623a132ab3257690826643d548af
Author: Cuong Manh Le <cuong.manhle.vn@gmail.com>
Date:   Fri Jun 25 22:24:29 2021 +0700

    [dev.typeparams] cmd/compile: rewrite method calls during typecheck
    
    CL 330671 move rewriting method call to method expression to escape
    analysis. This CL move the rewriting up further, into typecheck. It
    helps simplify the code for dowstream passes, as they now only have to
    deal with OCALLFUNC.
    
    There're two notes:
    
     - For -G=3, we can't rewrite d.M() where d is an instantiated receiver
       in transformCall, but let irgen.stencil to rewrite it.
    
     - Escape analysis still have to check for rewriting method calls, as
       the devirtualization pass can still generate OCALLMETH.
    
    Does not pass toolstash, since when the export data now contains method
    expression calls instead of method calls.
    
    Change-Id: I77465ef04d50dc4efedddca7eb55b3fc9483db0e
    Reviewed-on: https://go-review.googlesource.com/c/go/+/330831
    Trust: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    Run-TryBot: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

 src/cmd/compile/internal/escape/call.go     |  2 +-
 src/cmd/compile/internal/inline/inl.go      | 79 +++++++++++++----------------
 src/cmd/compile/internal/noder/reader.go    |  3 +-
 src/cmd/compile/internal/noder/transform.go |  3 ++
 src/cmd/compile/internal/typecheck/func.go  |  1 +
 src/cmd/compile/internal/walk/convert.go    |  4 +-
 src/cmd/compile/internal/walk/expr.go       | 11 ++--
 src/cmd/compile/internal/walk/order.go      | 19 +++++--
 src/cmd/compile/internal/walk/stmt.go       |  1 -
 src/cmd/compile/internal/walk/walk.go       |  2 +-
 10 files changed, 65 insertions(+), 60 deletions(-)
