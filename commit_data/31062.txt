commit 62aeb77764dcb5487e6557d207aa19879745e03e
Author: Rob Pike <r@golang.org>
Date:   Sat Apr 8 20:31:09 2017 -0700

    cmd/go: allow full flag processing in go vet
    
    This allows the go tool to run "go vet" with both the build flags
    that make sense, such as -x and -tags, and vet with all its flags.
    
    To do this, create a new package cmd/go/internal/cmdflag to
    hold functionality common to flag handling for test and vet.
    
    Fixes #19350
    
    RELNOTES=yes
    
    Change-Id: Ia1ae213bd3f6cab1c5e492501c8d43ce61a7ee89
    Reviewed-on: https://go-review.googlesource.com/40112
    Reviewed-by: Russ Cox <rsc@golang.org>

 src/cmd/dist/deps.go                 |   5 +-
 src/cmd/go/alldocs.go                |   6 +-
 src/cmd/go/go_test.go                |  25 ++++-
 src/cmd/go/internal/cmdflag/flag.go  | 123 +++++++++++++++++++++++
 src/cmd/go/internal/test/testflag.go | 187 +++++++++--------------------------
 src/cmd/go/internal/vet/vet.go       |  27 +++--
 src/cmd/go/internal/vet/vetflag.go   |  99 +++++++++++++++++++
 src/cmd/vet/main.go                  |   2 +
 8 files changed, 306 insertions(+), 168 deletions(-)
