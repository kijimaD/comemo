commit f75b5e99ed19e97ea78e62a406d03c1632efa7d4
Author: Michael Munday <munday@ca.ibm.com>
Date:   Wed Apr 12 18:37:27 2017 -0400

    cmd/compile: fix s390x unsigned comparison constant merging rules
    
    On s390x unsigned integer comparisons with immediates require the immediate
    to be an unsigned 32-bit integer. The rule was checking that the immediate
    was a signed 32-bit integer.
    
    This CL also adds a test for comparisons that could be turned into compare
    with immediate or equivalent instructions (depending on architecture and
    optimizations applied).
    
    Fixes #19940.
    
    Change-Id: Ifd6aa989fd3d50e282f7d30fec9db462c28422b1
    Reviewed-on: https://go-review.googlesource.com/40433
    Run-TryBot: Michael Munday <munday@ca.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

 src/cmd/compile/internal/gc/ssa_test.go            |    3 +
 src/cmd/compile/internal/gc/testdata/cmpConst.go   | 2217 ++++++++++++++++++++
 .../internal/gc/testdata/gen/cmpConstGen.go        |  248 +++
 src/cmd/compile/internal/ssa/gen/S390X.rules       |    4 +-
 src/cmd/compile/internal/ssa/rewriteS390X.go       |    8 +-
 5 files changed, 2474 insertions(+), 6 deletions(-)
