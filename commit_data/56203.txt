commit f7f56ded0179cd27f21afdd09014a51795db6419
Author: Guoqi Chen <chenguoqi@loongson.cn>
Date:   Wed Aug 16 02:09:49 2023 +0800

    cmd/internal/obj/loong64: recheck jump offset boundary after auto-aligning loop heads
    
    After the alignment of the loop header is performed, the offset of the checked
    conditional branch instruction may overflow, so it needs to be checked again.
    
    When checking whether the offset of the branch jump instruction overflows, it
    can be classified and processed according to the range of the immediate field
    of the specific instruction, which can reduce the introduction of unnecessary
    jump instructions.
    
    Fixes #61819
    
    Change-Id: I772a5b5b8b8de21c78d7566be30be8ff65fdbce8
    Reviewed-on: https://go-review.googlesource.com/c/go/+/519915
    Reviewed-by: sophie zhao <zhaoxiaolin@loongson.cn>
    Reviewed-by: Michael Knyszek <mknyszek@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Meidan Li <limeidan@loongson.cn>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Run-TryBot: qiu laidongfeng2 <2645477756@qq.com>
    Reviewed-by: WANG Xuerui <git@xen0n.name>

 src/cmd/internal/obj/loong64/asm.go      | 41 +++++++++------
 src/cmd/internal/obj/loong64/asm_test.go | 85 ++++++++++++++++++++++++++++++++
 2 files changed, 112 insertions(+), 14 deletions(-)
