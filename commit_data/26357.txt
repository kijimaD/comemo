commit 3425295e915bc16236f2c021317705aca34319af
Author: Keith Randall <khr@golang.org>
Date:   Tue Jan 5 14:56:26 2016 -0800

    [dev.ssa] cmd/compile: clean up comparisons
    
    Add new constant-flags opcodes.  These can be generated from
    comparisons that we know the result of, like x&31 < 32.
    
    Constant-fold the constant-flags opcodes into all flag users.
    
    Reorder some CMPxconst args so they read in the comparison direction.
    
    Reorg deadcode removal a bit - it needs to remove the OpCopy ops it
    generates when strength-reducing Phi ops.  So it needs to splice out all
    the dead blocks and do a copy elimination before it computes live
    values.
    
    Change-Id: Ie922602033592ad8212efe4345394973d3b94d9f
    Reviewed-on: https://go-review.googlesource.com/18267
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

 src/cmd/compile/internal/gc/ssa.go           |    2 +
 src/cmd/compile/internal/ssa/copyelim.go     |   14 +
 src/cmd/compile/internal/ssa/deadcode.go     |  144 +-
 src/cmd/compile/internal/ssa/gen/AMD64.rules |  287 ++-
 src/cmd/compile/internal/ssa/gen/AMD64Ops.go |   13 +
 src/cmd/compile/internal/ssa/lower.go        |    2 +-
 src/cmd/compile/internal/ssa/opGen.go        |   25 +
 src/cmd/compile/internal/ssa/rewriteAMD64.go | 3213 +++++++++++++++++++++-----
 8 files changed, 3019 insertions(+), 681 deletions(-)
