commit 850c602ed62fb36430b872f31ac86142d8eaa5f3
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Apr 6 15:58:21 2020 -0400

    [dev.link] cmd/link: convert text address assignment to new style
    
    Implement text address assignment and trampoline generation using
    the loader.
    
    Note: the trampoline insertion part doesn't actually work. It
    also needs to propagate Aux symbols for external symbols in
    LoadFull.  But it won't be needed after converting pclntab
    generation, so I'll leave it out for now. This could break
    linking large binaries on PPC64 and ARM.
    
    Change-Id: Ie46a35b25d7c027983dd877207cfa8f67c32530b
    Reviewed-on: https://go-review.googlesource.com/c/go/+/227482
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/link/internal/arm/asm.go              | 142 +++++++++++++-----------
 src/cmd/link/internal/ld/data.go              | 152 ++++++++++++++------------
 src/cmd/link/internal/ld/lib.go               |   7 +-
 src/cmd/link/internal/ld/link.go              |   2 +-
 src/cmd/link/internal/ld/main.go              |   5 +-
 src/cmd/link/internal/loader/loader.go        |  45 +++++++-
 src/cmd/link/internal/loader/symbolbuilder.go |   3 +-
 src/cmd/link/internal/ppc64/asm.go            | 103 +++++++++--------
 src/cmd/link/internal/wasm/asm.go             |   6 +-
 9 files changed, 270 insertions(+), 195 deletions(-)
