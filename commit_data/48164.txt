commit 1ed30ca537a05b887f8479027b6363a03f957610
Author: Cherry Mui <cherryyz@google.com>
Date:   Mon Feb 14 12:43:27 2022 -0500

    cmd/compile: correct type of pointer difference on RISCV64
    
    Pointer comparison is lowered to the following on RISCV64
    
    (EqPtr x y) => (SEQZ (SUB <x.Type> x y))
    
    The difference of two pointers (the SUB) should not be pointer
    type. Otherwise it can cause the GC to find a bad pointer.
    
    Should fix #51101.
    
    Change-Id: I7e73c2155c36ff403c032981a9aa9cccbfdf0f64
    Reviewed-on: https://go-review.googlesource.com/c/go/+/385655
    Trust: Cherry Mui <cherryyz@google.com>
    Run-TryBot: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/compile/internal/ssa/gen/RISCV64.rules |  4 +--
 src/cmd/compile/internal/ssa/rewriteRISCV64.go | 10 ++++---
 test/fixedbugs/issue51101.go                   | 36 ++++++++++++++++++++++++++
 3 files changed, 44 insertions(+), 6 deletions(-)
