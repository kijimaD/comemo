commit 8cd35e00bd413e68e6b9ae6403aa4209fc89b90f
Author: Cherry Zhang <cherryyz@google.com>
Date:   Sat Nov 21 21:24:57 2020 -0500

    cmd/internal/buildid: update Mach-O code signature when rewriting buildid
    
    As the code signature contains hashes of the entire file (except
    the signature itself), rewriting buildid will invalidate the
    signature. This CL makes it regenerate the signature when
    rewriting the buildid. It only does it when the file already has
    a code signature, with proper size (darwin/arm64 binaries
    generated by the Go linker should have).
    
    Updates #38485, #42684.
    
    Change-Id: I082d9e5808b0ee6a35f9c362d7262aadd9113c81
    Reviewed-on: https://go-review.googlesource.com/c/go/+/272257
    Trust: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/buildid/buildid.go          |  2 +-
 src/cmd/go/internal/work/buildid.go |  2 +-
 src/cmd/internal/buildid/rewrite.go | 39 ++++++++++++++++++++++++++++---------
 3 files changed, 32 insertions(+), 11 deletions(-)
