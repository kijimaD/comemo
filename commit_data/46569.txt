commit 12ee55ba7bf22157267e735e8e4bbf651c5b4e7d
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Jan 11 15:07:09 2021 -0800

    [dev.regabi] cmd/compile: stop using Vargen for import/export
    
    Historically, inline function bodies were exported as plain Go source
    code, and symbol mangling was a convenient hack because it allowed
    variables to be re-imported with largely the same names as they were
    originally exported as.
    
    However, nowadays we use a binary format that's more easily extended,
    so we can simply serialize all of a function's declared objects up
    front, and then refer to them by index later on. This also allows us
    to easily report unmangled names all the time (e.g., error message
    from issue7921.go).
    
    Fixes #43633.
    
    Change-Id: I46c88f5a47cb921f70ab140976ba9ddce38df216
    Reviewed-on: https://go-review.googlesource.com/c/go/+/283193
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Dan Scales <danscales@google.com>
    Trust: Dan Scales <danscales@google.com>
    Trust: Matthew Dempsky <mdempsky@google.com>

 src/cmd/compile/internal/ir/func.go             |   6 ++
 src/cmd/compile/internal/ir/name.go             |   8 +-
 src/cmd/compile/internal/typecheck/dcl.go       |  27 +------
 src/cmd/compile/internal/typecheck/iexport.go   |  58 +++++++------
 src/cmd/compile/internal/typecheck/iimport.go   | 103 +++++++++++++++++-------
 src/cmd/compile/internal/typecheck/typecheck.go |   2 +-
 test/fixedbugs/issue43633.dir/a.go              |  28 +++++++
 test/fixedbugs/issue43633.dir/main.go           |  18 +++++
 test/fixedbugs/issue43633.go                    |   7 ++
 test/fixedbugs/issue7921.go                     |   2 +-
 10 files changed, 171 insertions(+), 88 deletions(-)
