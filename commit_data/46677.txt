commit 665626928807c484d31a4bcb3b4b553a7a9d80eb
Author: fanzha02 <fannie.zhang@arm.com>
Date:   Tue Sep 28 13:46:14 2021 +0800

    cmd/asm: add error check for move constant instructions on arm64
    
    The current Go assembler encodes "MOVK $(0<<16|32|48), Rd" as the
    same binary with "MOVK $0, Rd", but for arm64 move constant instructions
    MOVK, MOVN and MOVZ, "op $0, Rd" and "op $(0<<16|32|48), Rd" have
    different semantics. In order not to change the way the assembler
    frontend parses constants, this patch adds a check for the zero shifts.
    
    Change-Id: Ia844c419ce49f63605b549e3a2e98d9075dd1cf1
    Reviewed-on: https://go-review.googlesource.com/c/go/+/275812
    Run-TryBot: Cherry Mui <cherryyz@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Trust: fannie zhang <Fannie.Zhang@arm.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>

 src/cmd/asm/internal/asm/testdata/arm64error.s | 2 ++
 src/cmd/internal/obj/arm64/asm7.go             | 3 +++
 2 files changed, 5 insertions(+)
