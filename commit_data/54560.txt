commit 0de57ebf88b4386810bd4ad42d9ff9c16f15d970
Author: Kir Kolyshkin <kolyshkin@gmail.com>
Date:   Fri Sep 22 13:42:50 2023 -0700

    log/slog: fix time regexp in test
    
    CL 525556 started using timeRE regexp to match time output from JSON
    handler, and relaxed it to allow arbitrary (rather than fixed 3 digit)
    precision.
    
    What it missed is in JSON handler the fractional part is omitted
    entirely (together with the decimal dot) when the nanoseconds field is
    0.
    
    As a result, there are occasional CI failures in js/wasm (which, I guess,
    has better chances to return zero nanoseconds).
    
    To fix the flaky test, let's use two different regular expressions,
    tailored to text and JSON.
    
    Change-Id: Ie98990fcf278bb0916ab31c9177e6b22a523062a
    Reviewed-on: https://go-review.googlesource.com/c/go/+/530675
    Run-TryBot: Kirill Kolyshkin <kolyshkin@gmail.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Auto-Submit: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>
    Reviewed-by: Andy Pan <panjf2000@gmail.com>
    Reviewed-by: Jonathan Amsterdam <jba@google.com>

 src/log/slog/logger_test.go | 22 ++++++++++++++--------
 1 file changed, 14 insertions(+), 8 deletions(-)
