commit 6c631ae227cb6f15d5b0b8cc39c1715b8f4e9187
Author: Denys Smirnov <denis.smirnov.91@gmail.com>
Date:   Fri Oct 19 19:04:29 2018 +0000

    cmd/compile: in wasm, allocate approximately right number of locals for functions
    
    Currently, WASM binary writer requests 16 int registers (locals) and
    16 float registers for every function regardless of how many locals the
    function uses.
    
    This change counts the number of used registers and requests a number
    of locals matching the highest register index. The change has no effect
    on performance and neglectable binary size improvement, but it makes
    WASM code more readable and easy to analyze.
    
    Change-Id: Ic1079623c0d632b215c68482db909fa440892700
    GitHub-Last-Rev: 184634fa918aff74e280904dc2efafcc80735a8b
    GitHub-Pull-Request: golang/go#28116
    Reviewed-on: https://go-review.googlesource.com/c/140999
    Reviewed-by: Richard Musiol <neelance@gmail.com>
    Run-TryBot: Richard Musiol <neelance@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/internal/obj/wasm/wasmobj.go | 73 +++++++++++++++++++++++++++++++-----
 1 file changed, 63 insertions(+), 10 deletions(-)
