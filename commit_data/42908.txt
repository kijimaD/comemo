commit 721819e7bad078ac350bdebebb28793e13081e82
Author: Changkun Ou <hi@changkun.us>
Date:   Fri Aug 28 12:13:37 2020 +0200

    testing: make TempDir idempotent for both Cleanup and Benchmark
    
    Ensures that calling TempDir() in either of Cleanup or Benchmark
    doesn't cause test failures which were previously caused by the
    created directory having been deleted after the first run, yet
    we prevented the recreation of the directory due to our selection
    of concurrency primitive sync.Once. This change recreates the
    temporary directory if it doesn't exist, regardless of how
    many times Cleanup and Benchmark are invoked.
    
    Fixes #41062
    
    Change-Id: I925d9f7207d7c369a193d1e17da7a59a586244a7
    Reviewed-on: https://go-review.googlesource.com/c/go/+/251297
    Reviewed-by: Emmanuel Odeke <emm.odeke@gmail.com>
    Run-TryBot: Emmanuel Odeke <emm.odeke@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/testing/testing.go      | 26 ++++++++++++++++++++------
 src/testing/testing_test.go | 32 ++++++++++++++++++++++++++++++++
 2 files changed, 52 insertions(+), 6 deletions(-)
