commit c24cc40075d77b96bbf1f217dcdcff651229e89b
Author: Hyang-Ah (Hana) Kim <hyangah@gmail.com>
Date:   Mon Aug 8 17:24:07 2016 -0400

    cmd/trace: fix a runnable goroutine count bug
    
    When starting tracing, EvGoCreate events are added for existing
    goroutines that may have been blocking in syscall. EvGoCreate
    increments the runnable goroutine count. This change makes the
    following EvGoInSyscall event decrement the runnable goroutine count
    because we now know that goroutine is in syscall, and not runnable.
    
    Made generateTrace return an error, at any given time, the number
    of runnable/running/insyscall goroutines becomes non-negative.
    
    Added a basic test that checks the number of runnable/running
    goroutines don't include the goroutines in syscall - the test failed
    before this change.
    
    Change-Id: Ib732c382e7bd17158a437576f9d589ab89097ce6
    Reviewed-on: https://go-review.googlesource.com/25552
    Run-TryBot: Hyang-Ah Hana Kim <hyangah@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

 src/cmd/trace/main.go             |  5 +++-
 src/cmd/trace/trace.go            | 49 +++++++++++++++++++------------
 src/cmd/trace/trace_test.go       | 62 +++++++++++++++++++++++++++++++++++++++
 src/internal/trace/parser_test.go | 47 +++--------------------------
 src/internal/trace/writer.go      | 45 ++++++++++++++++++++++++++++
 5 files changed, 145 insertions(+), 63 deletions(-)
