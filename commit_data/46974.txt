commit 016d5eea118445f5b3ca46f85b65c6afd180c946
Author: Michael Anthony Knyszek <mknyszek@google.com>
Date:   Mon Oct 18 23:14:20 2021 +0000

    runtime: retype mheap.reclaimCredit as atomic.Uintptr
    
    [git-generate]
    cd src/runtime
    mv export_test.go export.go
    GOROOT=$(dirname $(dirname $PWD)) rf '
      add mheap.reclaimCredit \
    // reclaimCredit is spare credit for extra pages swept. Since \
    // the page reclaimer works in large chunks, it may reclaim \
    // more than requested. Any spare pages released go to this \
    // credit pool. \
    reclaimCredit_ atomic.Uintptr
      ex {
        import "runtime/internal/atomic"
    
        var t mheap
        var v, w uintptr
        var d uintptr
    
        t.reclaimCredit -> t.reclaimCredit_.Load()
        t.reclaimCredit = v -> t.reclaimCredit_.Store(v)
        atomic.Loaduintptr(&t.reclaimCredit) -> t.reclaimCredit_.Load()
        atomic.LoadAcquintptr(&t.reclaimCredit) -> t.reclaimCredit_.LoadAcquire()
        atomic.Storeuintptr(&t.reclaimCredit, v) -> t.reclaimCredit_.Store(v)
        atomic.StoreReluintptr(&t.reclaimCredit, v) -> t.reclaimCredit_.StoreRelease(v)
        atomic.Casuintptr(&t.reclaimCredit, v, w) -> t.reclaimCredit_.CompareAndSwap(v, w)
        atomic.Xchguintptr(&t.reclaimCredit, v) -> t.reclaimCredit_.Swap(v)
        atomic.Xadduintptr(&t.reclaimCredit, d) -> t.reclaimCredit_.Add(d)
      }
      rm mheap.reclaimCredit
      mv mheap.reclaimCredit_ mheap.reclaimCredit
    '
    mv export.go export_test.go
    
    Change-Id: I2c567781a28f5d8c2275ff18f2cf605b82f22d09
    Reviewed-on: https://go-review.googlesource.com/c/go/+/356712
    Trust: Michael Knyszek <mknyszek@google.com>
    Run-TryBot: Michael Knyszek <mknyszek@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

 src/runtime/mgc.go      |  2 +-
 src/runtime/mgcsweep.go |  2 +-
 src/runtime/mheap.go    | 11 +++++------
 3 files changed, 7 insertions(+), 8 deletions(-)
