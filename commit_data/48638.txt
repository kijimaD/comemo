commit f5290ef947b2471db27c35321a49b4e3b756e56e
Author: erifan01 <eric.fang@arm.com>
Date:   Wed Aug 12 17:41:54 2020 +0800

    cmd/asm: refactor some operands that are not special registers on arm64
    
    The previous code treats some operands such as EQ, LT, etc. as special
    registers. However, they are not. This CL adds a new AddrType TYPE_SPOPD
    and a new class C_SPOPD to support this kind of special operands, and
    refactors the relevant code.
    
    This patch is a copy of CL 260861, contributed by Junchen Li(junchen.li@arm.com).
    
    Co-authored-by: Junchen Li(junchen.li@arm.com)
    Change-Id: I57b28da458ee3332f610602632e7eda03af435f5
    Reviewed-on: https://go-review.googlesource.com/c/go/+/302849
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Trust: Eric Fang <eric.fang@arm.com>
    Run-TryBot: Eric Fang <eric.fang@arm.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/asm/internal/arch/arch.go                  |  41 +------
 src/cmd/asm/internal/arch/arm64.go                 |  31 +++++-
 src/cmd/asm/internal/asm/parse.go                  |  16 ++-
 src/cmd/asm/internal/asm/testdata/arm64.s          |   3 +-
 src/cmd/compile/internal/arm64/ssa.go              |  66 ++++++------
 src/cmd/internal/obj/addrtype_string.go            |  25 ++++-
 src/cmd/internal/obj/arm64/a.out.go                |  96 ++++++++++-------
 src/cmd/internal/obj/arm64/anames7.go              |   1 +
 src/cmd/internal/obj/arm64/asm7.go                 | 119 ++++++++++-----------
 src/cmd/internal/obj/arm64/list7.go                |  51 ++-------
 .../internal/obj/arm64/specialoperand_string.go    |  60 +++++++++++
 src/cmd/internal/obj/link.go                       |   7 ++
 src/cmd/internal/obj/pass.go                       |   5 +
 src/cmd/internal/obj/util.go                       |  30 ++++++
 14 files changed, 331 insertions(+), 220 deletions(-)
