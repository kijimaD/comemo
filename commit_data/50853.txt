commit bfbe5ac9ce58fb59aa38ef69dee4933f20aac039
Author: Robert Findley <rfindley@google.com>
Date:   Tue Nov 9 22:31:59 2021 -0500

    go/types: deduplicate signatures with the context
    
    Extend the type checking context to allow de-duplicating *Signature
    instances, in addition to *Named instances.
    
    Naively we would deduplicate instances of different-but-identical origin
    *Signature types. That may be OK, but it seems a bit strange to get the
    same signature when instantiating two different functions. For now,
    differentiate *Signature types by prepending a unique identifier for the
    origin pointer, thus guaranteeing that instances de-duplicated if they
    come from the exact same (pointer identical) origin type.
    
    Updates #47103
    
    Change-Id: I93cc3cacad195267fe0a5801f9c5a3b1e61eb907
    Reviewed-on: https://go-review.googlesource.com/c/go/+/362801
    Trust: Robert Findley <rfindley@google.com>
    Run-TryBot: Robert Findley <rfindley@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/go/types/api_test.go         |  14 +++--
 src/go/types/context.go          |  39 +++++++------
 src/go/types/instantiate.go      |  43 +++++++-------
 src/go/types/instantiate_test.go | 118 ++++++++++++++++++++++++++++++---------
 src/go/types/named.go            |   2 +-
 src/go/types/subst.go            |   2 +-
 src/go/types/typestring.go       |   2 +-
 src/go/types/typexpr.go          |   2 +-
 8 files changed, 150 insertions(+), 72 deletions(-)
