commit a0f3129466744d22746b93e65ff3714f1507b6a3
Author: Robert Findley <rfindley@google.com>
Date:   Fri Sep 10 16:28:01 2021 -0400

    go/types: instantiate methods when instantiating Named types
    
    In the API proposal we decided that instantiation must also instantiate
    methods. This CL does that, and eliminates the special handling for lazy
    instantiation in lookupMethod.
    
    It is possible that we expand an instance before all method signatures
    have been type-checked, so for simplicity we introduce a new flag on
    Func, 'isIncompleteMethod', which controls whether we must fully
    substitute methods before using them. We could avoid this flag by using
    some convention for the structure of an incomplete method (such as the
    receiver has no position), but in practice using a flag was cleaner and
    didn't increase the size of the Func struct.
    
    Updates #47916
    
    Change-Id: I352baa6664cd07f61b06924744382897805f9d29
    Reviewed-on: https://go-review.googlesource.com/c/go/+/349412
    Trust: Robert Findley <rfindley@google.com>
    Run-TryBot: Robert Findley <rfindley@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/go/types/call.go             | 48 ------------------------
 src/go/types/decl.go             |  6 +++
 src/go/types/infer.go            |  1 +
 src/go/types/instantiate_test.go | 39 ++++++++++++++++++++
 src/go/types/lookup.go           | 24 ------------
 src/go/types/named.go            | 79 ++++++++++++++++++++++++++++++++++------
 src/go/types/object.go           |  5 ++-
 src/go/types/sizeof_test.go      |  2 +-
 src/go/types/subst.go            |  4 +-
 9 files changed, 119 insertions(+), 89 deletions(-)
