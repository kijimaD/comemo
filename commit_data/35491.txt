commit 8aa57f1e9dec8f7fc032aea82ecc19e2bb74cdcb
Author: Richard Musiol <mail@richard-musiol.de>
Date:   Thu May 24 04:11:05 2018 +0200

    cmd/compile: fix write barrier control value on wasm
    
    This commit fixes a regression with wasm caused by a367f44c18.
    It adds optimizations to the lowering rules of wasm to ensure
    that the lowered version of the code generated for write barriers
    is simple enough so it can be processed by Liveness.markUnsafePoints.
    
    Change-Id: Ic98f0dd3791fe1df23dcb34d2457fbde7ffce441
    Reviewed-on: https://go-review.googlesource.com/114375
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

 src/cmd/compile/internal/gc/plive.go        |   2 +-
 src/cmd/compile/internal/ssa/gen/Wasm.rules |  15 +-
 src/cmd/compile/internal/ssa/rewriteWasm.go | 276 ++++++++++++++++++++++++++++
 3 files changed, 291 insertions(+), 2 deletions(-)
