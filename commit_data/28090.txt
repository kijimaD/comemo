commit 0c6c3d1de7bfe40d3589109bf2adb1726d6caca8
Author: Keith Randall <khr@golang.org>
Date:   Sun Aug 28 11:17:37 2016 -0700

    cmd/compile: fix noopt build
    
    Atomic add rules were depending on CSE to combine duplicate atomic ops.
    With -N, CSE doesn't run.
    
    Redo the rules for atomic add so there's only one atomic op.
    Introduce an add-to-first-part-of-tuple pseudo-ops to make the atomic add result correct.
    
    Change-Id: Ib132247051abe5f80fefad6c197db8df8ee06427
    Reviewed-on: https://go-review.googlesource.com/27991
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

 src/cmd/compile/internal/amd64/ssa.go        |   2 +
 src/cmd/compile/internal/ssa/gen/AMD64.rules |  10 ++-
 src/cmd/compile/internal/ssa/gen/AMD64Ops.go |   2 +
 src/cmd/compile/internal/ssa/opGen.go        |  12 +++
 src/cmd/compile/internal/ssa/rewriteAMD64.go | 110 ++++++++++++++++-----------
 5 files changed, 88 insertions(+), 48 deletions(-)
