commit 21e441c461a79be41de20a99e6001098142946e6
Author: Michael Matloob <matloob@golang.org>
Date:   Wed Oct 14 16:21:39 2020 -0400

    cmd/go: rewrite paths for overlaid files using -trimpath
    
    Pass the trimpath flag to cmd/compile to use the correct file paths
    for files that are overlaid: that is, the "destination" path in the
    overlay's Replace mapping rather than the "source" path.
    
    Also fix paths to go source files provided to the gccgo compiler.
    
    For #39958
    
    Change-Id: I3741aeb2272bd0d5aa32cb28133b61e58264fd39
    Reviewed-on: https://go-review.googlesource.com/c/go/+/257198
    Trust: Michael Matloob <matloob@golang.org>
    Trust: Bryan C. Mills <bcmills@google.com>
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Jay Conrod <jayconrod@google.com>
    Reviewed-by: Bryan C. Mills <bcmills@google.com>

 src/cmd/go/internal/work/exec.go              |  2 +
 src/cmd/go/internal/work/gc.go                | 25 ++++++++----
 src/cmd/go/internal/work/gccgo.go             | 33 +++++++++++++--
 src/cmd/go/testdata/script/build_overlay.txt  | 58 +++++++++++++++++++++++----
 src/cmd/go/testdata/script/build_trimpath.txt | 28 ++++++++++++-
 5 files changed, 125 insertions(+), 21 deletions(-)
