commit da0c375c571037ec5ea6f8ef2be8f07593b40eb6
Author: Bryan C. Mills <bcmills@google.com>
Date:   Fri Jan 27 15:25:57 2023 -0500

    cmd/dist: leave cgo enabled if external linking is required
    
    Certain ios and android configurations do not yet support internal
    linking.
    
    On ios, attempting to build without cgo causes tests to fail on
    essentially every run (#57961).
    
    On android, it produces a lot of warning spam from the linker,
    obscuring real problems.
    
    Since external linking makes the result of `go install` depend on the
    installed C toolchain either way, the reproducibility benefit of
    disabling cgo seems minimal on these platforms anyway.
    
    Fixes #57961.
    For #24904.
    Updates #57007.
    
    Change-Id: Ied2454804e958dd670467db3d5e9ab50a40bb899
    Reviewed-on: https://go-review.googlesource.com/c/go/+/463739
    Reviewed-by: Russ Cox <rsc@golang.org>
    Run-TryBot: Bryan Mills <bcmills@google.com>
    Auto-Submit: Bryan Mills <bcmills@google.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    TryBot-Bypass: Bryan Mills <bcmills@google.com>

 src/cmd/dist/build.go      | 88 +++++++++++++++++++++++++++++++---------------
 src/cmd/dist/build_test.go | 24 +++++++++++++
 src/cmd/dist/test.go       |  8 ++---
 3 files changed, 87 insertions(+), 33 deletions(-)
