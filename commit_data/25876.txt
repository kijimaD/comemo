commit a4cd0a49c7d1b9b09c3da15c62a5915eb4b45fa0
Author: Aleksandr Demakin <alexander.demakin@gmail.com>
Date:   Tue Oct 20 23:05:50 2015 +0300

    go/types: fix race-y initialization of Struct.offsets
    
    Use sync.Once to ensure, that 'offsets' field is initialized
    once only in a threadsafe way.
    
    Fixes #12887
    
    Change-Id: I90ef929c421ccd3094339c67a39b02d8f2e47211
    Reviewed-on: https://go-review.googlesource.com/16013
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/go/types/sizes.go | 48 +++++++++++++++++++++++++++++-------------------
 src/go/types/type.go  | 15 ++++++++-------
 2 files changed, 37 insertions(+), 26 deletions(-)
