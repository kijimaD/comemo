commit ef3122e909f8c14a6bddcd77092d36710e16989f
Author: Austin Clements <austin@google.com>
Date:   Fri Apr 2 15:57:46 2021 -0400

    cmd/internal/obj/x86: simplify huge frame prologue
    
    For stack frames larger than StackBig, the stack split prologue needs
    to guard against potential wraparound. Currently, it carefully
    arranges to avoid underflow, but this is complicated and requires a
    special check for StackPreempt. StackPreempt is no longer the only
    stack poison value, so this check will incorrectly succeed if the
    stack bound is poisoned with any other value.
    
    This CL simplifies the logic of the check, reduces its length, and
    accounts for any possible poison value by directly checking for
    underflow.
    
    Change-Id: I917a313102d6a21895ef7c4b0f304fb84b292c81
    Reviewed-on: https://go-review.googlesource.com/c/go/+/307010
    Trust: Austin Clements <austin@google.com>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/internal/obj/x86/obj6.go | 91 +++++++++++++++-------------------------
 src/runtime/stack.go             | 15 ++++---
 2 files changed, 43 insertions(+), 63 deletions(-)
