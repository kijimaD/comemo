commit 6232dadc63dda3e6f8ce227ed7e003da80f5ba2e
Author: Marwan Sulaiman <marwan.sameer@gmail.com>
Date:   Tue Sep 24 16:34:16 2019 -0400

    cmd/go: consistent output for -json failures
    
    When the -json flag is passed to go mod download,
    the sumdb error is embedded in the json Error field.
    Other errors for the same command behave this way as
    well such as module not found. The fix is done by changing
    base.Fatalf into proper error returns.
    
    Fixes #34485
    
    Change-Id: I2727a5c70c7ab03988cad8661894d0f8ec71a768
    Reviewed-on: https://go-review.googlesource.com/c/go/+/197062
    Run-TryBot: Jay Conrod <jayconrod@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Jay Conrod <jayconrod@google.com>

 src/cmd/go/internal/modfetch/cache.go              |  8 ++-
 src/cmd/go/internal/modfetch/fetch.go              | 61 ++++++++++++++--------
 src/cmd/go/testdata/script/mod_download_json.txt   | 10 ++++
 src/cmd/go/testdata/script/mod_sumdb.txt           |  2 +-
 src/cmd/go/testdata/script/mod_sumdb_file_path.txt |  2 +-
 5 files changed, 57 insertions(+), 26 deletions(-)
