commit dbade774c379393f76105242e69cdcf2ad32e5c3
Author: Michael Pratt <mpratt@google.com>
Date:   Wed Apr 7 09:58:18 2021 -0400

    runtime: refactor findrunnable spinning recheck
    
    Break the main components of the findrunnable spinning -> non-spinning
    recheck out into their own functions, which simplifies both findrunnable
    and the new functions, which can make use of fancy features like early
    returns.
    
    This CL should have no functional changes.
    
    For #43997
    For #44313
    
    Change-Id: I6d3060fcecda9920a3471ff338f73d53b1d848a3
    Reviewed-on: https://go-review.googlesource.com/c/go/+/307914
    Trust: Michael Pratt <mpratt@google.com>
    Run-TryBot: Michael Pratt <mpratt@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Michael Knyszek <mknyszek@google.com>

 src/runtime/proc.go | 177 ++++++++++++++++++++++++++++++++--------------------
 1 file changed, 110 insertions(+), 67 deletions(-)
