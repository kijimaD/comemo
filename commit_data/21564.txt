commit daa64ddfe64dda368e80cf224dc485fa63386f81
Author: Keith Randall <khr@golang.org>
Date:   Thu Jan 15 14:39:58 2015 -0800

    cmd/5g: make sure we normalize after unary ops on small types
    
    We were failing ^uint16(0xffff) == 0, as we computed 0xffff0000 instead.
    
    I could only trigger a failure for the above case, the other two tests
    ^uint16(0xfffe) == 1 and -uint16(0xffff) == 1 didn't seem to fail
    previously.  Somehow they get MOVHUs inserted for other reasons (used
    by CMP instead of TST?).  I fixed OMINUS anyway, better safe than
    sorry.
    
    Fixes #9604
    
    Change-Id: I4c2d5bdc667742873ac029fdbe3db0cf12893c27
    Reviewed-on: https://go-review.googlesource.com/2940
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Minux Ma <minux@golang.org>

 src/cmd/5g/cgen.c           | 11 +++++------
 test/fixedbugs/issue9604.go | 29 +++++++++++++++++++++++++++++
 2 files changed, 34 insertions(+), 6 deletions(-)
