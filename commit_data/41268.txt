commit a11644a26557ea436d456f005f39f4e01902bafe
Author: Bryan C. Mills <bcmills@google.com>
Date:   Wed Sep 18 16:59:17 2019 -0400

    cmd/go/internal/modload: do not prune the module root when walking directories
    
    When walking filesystem paths to locate packages, we normally prune
    out subdirectories with names beginning with ".", "_", or equal to
    "testdata". However, we should not prune out such a directory if it is
    at or above the module root, since its name is not part of the package
    path.
    
    Fixes #28481
    Updates #27852
    
    Change-Id: Ice82b1f908afaab50f5592f6c38ca6a0fe911edf
    Reviewed-on: https://go-review.googlesource.com/c/go/+/196297
    Run-TryBot: Bryan C. Mills <bcmills@google.com>
    Reviewed-by: Daniel Mart√≠ <mvdan@mvdan.cc>
    Reviewed-by: Jay Conrod <jayconrod@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/go/internal/modload/search.go              | 22 ++++++-----
 src/cmd/go/testdata/script/mod_in_testdata_dir.txt | 45 ++++++++++++++++++++++
 2 files changed, 58 insertions(+), 9 deletions(-)
