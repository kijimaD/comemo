commit a7a854b82f99c4fb08e44b3c942a3361894cf4b5
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Mar 28 09:41:57 2011 -0700

    strings: Map: avoid allocation when string is unchanged
    
    This speeds up strings.ToLower, etc.
    
    before/after:
    strings_test.BenchmarkMapNoChanges 1000000 1013 ns/op
    strings_test.BenchmarkMapNoChanges 5000000  442 ns/op
    
    R=r, rog, eh, rsc
    CC=golang-dev
    https://golang.org/cl/4306056

 src/pkg/strings/strings.go      | 17 +++++++++++++++--
 src/pkg/strings/strings_test.go | 22 ++++++++++++++++++++++
 2 files changed, 37 insertions(+), 2 deletions(-)
