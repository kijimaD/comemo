commit fdecaa837cf94f6679a7683c1929e3b22ab1e07d
Author: Than McIntosh <thanm@google.com>
Date:   Mon Dec 11 15:53:31 2017 -0500

    cmd/compile: fixes for bad DWARF abstract origin references
    
    Change the compiler's DWARF inline info generation to be more careful
    about producing consistent instances of abstract function DIEs. The
    new strategy is to insure that the only params/variables created in an
    abstract subprogram DIE are those corresponding to declarations in the
    original pre-inlining version of the code. If a concrete subprogram
    winds up with other vars as part of the compilation process (return
    temps, for example, or scalars generated by splitting a structure into
    pieces) these are emitted as regular param/variable DIEs instead of
    concrete DIEs.
    
    The linker dwarf test now has a couple of new testpoints that include
    checks to make sure that all abstract DIE references are
    sane/resolvable; this will help catch similar problems in the future.
    
    Fixes #23046.
    
    Change-Id: I9b0030da8673fbb80b7ad50461fcf8c6ac823a37
    Reviewed-on: https://go-review.googlesource.com/83675
    Run-TryBot: Than McIntosh <thanm@google.com>
    Run-TryBot: Heschi Kreinick <heschi@google.com>
    Reviewed-by: Heschi Kreinick <heschi@google.com>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/compile/internal/gc/dwinl.go   | 140 +++++++++++++++++++--------
 src/cmd/compile/internal/gc/inl.go     |  33 +------
 src/cmd/compile/internal/gc/pgen.go    |  74 +++++++++------
 src/cmd/internal/dwarf/dwarf.go        |  65 ++++++++-----
 src/cmd/link/internal/ld/dwarf_test.go | 167 +++++++++++++++++++++++++++++----
 5 files changed, 345 insertions(+), 134 deletions(-)
