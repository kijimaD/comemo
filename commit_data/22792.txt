commit b0a85f5d93c3f0f5a53f09cdef1bdb72bfa313de
Author: David Crawshaw <crawshaw@golang.org>
Date:   Wed Apr 8 14:16:26 2015 -0400

    runtime: darwin/amd64 library entry point
    
    This is a practice run for darwin/arm.
    
    Similar to the linux/amd64 shared library entry point. With several
    pending linker changes I am successfully using this to implement
    -buildmode=c-archive on darwin/amd64 with external linking.
    
    The same entry point can be reused to implement -buildmode=c-shared
    on darwin/amd64, however that will require further ld changes to
    remove all text relocations.
    
    One extra runtime change will follow this. According to the Go
    execution modes document, -buildmode=c-archive should ignore the Go
    main function. Right now it is being executed (and the process exits
    if it doesn't block). I'm still searching for the right way to do
    this.
    
    Change-Id: Id97901ddd4d46970996f222bd79731dabff66a3d
    Reviewed-on: https://go-review.googlesource.com/8652
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/runtime/os1_darwin.go      | 32 +++++++++++++++++++++++++++++++-
 src/runtime/os_darwin.go       |  2 +-
 src/runtime/rt0_darwin_amd64.s | 34 ++++++++++++++++++++++++++++++++++
 src/runtime/sys_darwin_amd64.s |  8 ++++----
 4 files changed, 70 insertions(+), 6 deletions(-)
