commit 12610236375e2e981e370508548f3d51920df7e2
Author: Russ Cox <rsc@golang.org>
Date:   Mon May 23 12:21:57 2016 -0400

    encoding/json: additional tests and fixes for []typedByte encoding/decoding
    
    CL 19725 changed the encoding of []typedByte to look for
    typedByte.MarshalJSON and typedByte.MarshalText.
    Previously it was handled like []byte, producing a base64 encoding of the underlying byte data.
    
    CL 19725 forgot to look for (*typedByte).MarshalJSON and (*typedByte).MarshalText,
    as the marshaling of other slices would. Add test and fix for those.
    
    This CL also adds tests that the decoder can handle both the old and new encodings.
    (This was true even in Go 1.6, which is the only reason we can consider this
    not an incompatible change.)
    
    For #13783.
    
    Change-Id: I7cab8b6c0154a7f2d09335b7fa23173bcf856c37
    Reviewed-on: https://go-review.googlesource.com/23294
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Andrew Gerrand <adg@golang.org>

 src/encoding/json/decode_test.go | 212 +++++++++++++++++++++++++++++++++++++--
 src/encoding/json/encode.go      |   9 +-
 2 files changed, 208 insertions(+), 13 deletions(-)
