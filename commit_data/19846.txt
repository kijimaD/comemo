commit 4aa50434e13d12eb9755a992d6d4ad93e201d624
Author: Keith Randall <khr@golang.org>
Date:   Wed Jul 30 09:01:52 2014 -0700

    runtime: rewrite malloc in Go.
    
    This change introduces gomallocgc, a Go clone of mallocgc.
    Only a few uses have been moved over, so there are still
    lots of uses from C. Many of these C uses will be moved
    over to Go (e.g. in slice.goc), but probably not all.
    What should remain of C's mallocgc is an open question.
    
    LGTM=rsc, dvyukov
    R=rsc, khr, dave, bradfitz, dvyukov
    CC=golang-codereviews
    https://golang.org/cl/108840046

 src/cmd/api/goapi.go                     |   2 +-
 src/cmd/cc/godefs.c                      |  28 +-
 src/cmd/gc/builtin.c                     |   2 +-
 src/cmd/gc/runtime.go                    |   2 +-
 src/cmd/gc/walk.c                        |   2 +-
 src/pkg/runtime/asm_386.s                |  50 ++++
 src/pkg/runtime/asm_amd64.s              |  50 ++++
 src/pkg/runtime/asm_amd64p32.s           |  51 ++++
 src/pkg/runtime/asm_arm.s                |  50 ++++
 src/pkg/runtime/extern.go                |  44 ----
 src/pkg/runtime/hashmap.go               |  18 +-
 src/pkg/runtime/{malloc.goc => malloc.c} | 295 +++++----------------
 src/pkg/runtime/malloc.go                | 426 +++++++++++++++++++++++++++++++
 src/pkg/runtime/malloc.h                 |   8 +-
 src/pkg/runtime/mem.go                   |   3 -
 src/pkg/runtime/mgc0.c                   |  90 ++++---
 src/pkg/runtime/mprof.goc                |  31 +++
 src/pkg/runtime/proc.c                   |   1 +
 src/pkg/runtime/race.go                  |   7 -
 src/pkg/runtime/runtime.h                |  17 +-
 src/pkg/runtime/string.go                |  53 ++++
 src/pkg/runtime/stubs.go                 |  61 +++--
 src/pkg/runtime/stubs.goc                |  81 +++---
 src/pkg/runtime/traceback_arm.c          |   6 +
 src/pkg/runtime/traceback_x86.c          |   6 +
 test/live.go                             |  10 +-
 26 files changed, 989 insertions(+), 405 deletions(-)
