commit 8db173b85e1a151b61b38a15c9a4c97beac74191
Merge: 25c140aaa0 b8fcae02b0
Author: Russ Cox <rsc@golang.org>
Date:   Wed Feb 4 16:11:28 2015 -0500

    [dev.cc] all: merge master (b8fcae0) into dev.cc
    
    Change-Id: I2aa1d0b0c4cf7632a54e843810959b468e3812ab

 doc/go1.5.txt                                      |    3 +-
 doc/logo-153x55.png                                |  Bin 3382 -> 0 bytes
 doc/sieve.gif                                      |  Bin 11019 -> 0 bytes
 include/link.h                                     |  258 ++-
 include/u.h                                        |    5 +-
 misc/makerelease/makerelease.go                    |    2 +
 src/archive/tar/example_test.go                    |    1 +
 src/bytes/bytes.go                                 |    3 +-
 src/cmd/5a/a.h                                     |    5 +-
 src/cmd/5a/a.y                                     |  213 ++-
 src/cmd/5a/lex.c                                   |  144 +-
 src/cmd/5a/y.tab.c                                 | 1396 ++++++++--------
 src/cmd/5a/y.tab.h                                 |  152 +-
 src/cmd/5g/cgen.c                                  |   16 +-
 src/cmd/5g/cgen64.c                                |   12 +-
 src/cmd/5g/galign.c                                |   71 +-
 src/cmd/5g/gg.h                                    |   66 +-
 src/cmd/5g/ggen.c                                  |   90 +-
 src/cmd/5g/gobj.c                                  |   87 +-
 src/cmd/5g/gsubr.c                                 |  149 +-
 src/cmd/5g/opt.h                                   |   66 +-
 src/cmd/5g/peep.c                                  |  265 ++-
 src/cmd/5g/prog.c                                  |    4 +-
 src/cmd/5g/reg.c                                   |  177 +-
 src/cmd/5l/5.out.h                                 |  166 +-
 src/cmd/6a/a.h                                     |    1 +
 src/cmd/6a/a.y                                     |  210 ++-
 src/cmd/6a/lex.c                                   |  239 ++-
 src/cmd/6a/y.tab.c                                 | 1059 ++++++------
 src/cmd/6g/cgen.c                                  |   35 +-
 src/cmd/6g/galign.c                                |   75 +-
 src/cmd/6g/gg.h                                    |   63 +-
 src/cmd/6g/ggen.c                                  |  131 +-
 src/cmd/6g/gobj.c                                  |   71 +-
 src/cmd/6g/gsubr.c                                 |  212 ++-
 src/cmd/6g/opt.h                                   |   64 +-
 src/cmd/6g/peep.c                                  |  110 +-
 src/cmd/6g/prog.c                                  |   30 +-
 src/cmd/6g/reg.c                                   |   94 +-
 src/cmd/6l/6.out.h                                 |  218 +--
 src/cmd/8a/a.h                                     |    1 +
 src/cmd/8a/a.y                                     |  218 +--
 src/cmd/8a/lex.c                                   |  169 +-
 src/cmd/8a/y.tab.c                                 | 1111 ++++++------
 src/cmd/8a/y.tab.h                                 |    6 +-
 src/cmd/8g/cgen.c                                  |   33 +-
 src/cmd/8g/cgen64.c                                |   18 +-
 src/cmd/8g/galign.c                                |   69 +-
 src/cmd/8g/gg.h                                    |   62 +-
 src/cmd/8g/ggen.c                                  |  128 +-
 src/cmd/8g/gobj.c                                  |   77 +-
 src/cmd/8g/gsubr.c                                 |  213 +--
 src/cmd/8g/opt.h                                   |   62 -
 src/cmd/8g/peep.c                                  |   92 +-
 src/cmd/8g/prog.c                                  |   30 +-
 src/cmd/8g/reg.c                                   |  100 +-
 src/cmd/8l/8.out.h                                 |  151 +-
 src/cmd/9a/a.h                                     |    1 +
 src/cmd/9a/a.y                                     |  356 ++--
 src/cmd/9a/lex.c                                   |  200 ++-
 src/cmd/9a/y.tab.c                                 | 1767 ++++++++++----------
 src/cmd/9a/y.tab.h                                 |  160 +-
 src/cmd/9g/cgen.c                                  |   31 +-
 src/cmd/9g/galign.c                                |   73 +-
 src/cmd/9g/gg.h                                    |   61 +-
 src/cmd/9g/ggen.c                                  |  136 +-
 src/cmd/9g/gobj.c                                  |   80 +-
 src/cmd/9g/gsubr.c                                 |  179 +-
 src/cmd/9g/opt.h                                   |   62 -
 src/cmd/9g/peep.c                                  |  105 +-
 src/cmd/9g/prog.c                                  |   16 +-
 src/cmd/9g/reg.c                                   |  108 +-
 src/cmd/9l/9.out.h                                 |  278 +--
 src/cmd/cgo/gcc.go                                 |    4 +
 src/cmd/cgo/main.go                                |    4 +
 src/cmd/dist/build.go                              |   31 +-
 src/cmd/dist/buildgc.go                            |   79 +-
 src/cmd/dist/buildruntime.go                       |   17 +-
 src/cmd/dist/vfp_arm.s                             |    4 +-
 src/cmd/gc/align.c                                 |   20 +-
 src/cmd/gc/array.c                                 |   18 +-
 src/cmd/gc/builtin.c                               |   15 +-
 src/cmd/gc/bv.c                                    |    2 +-
 src/cmd/gc/closure.c                               |  184 +-
 src/cmd/gc/cplx.c                                  |   72 +-
 src/cmd/gc/dcl.c                                   |    5 +-
 src/cmd/gc/esc.c                                   |   79 +-
 src/cmd/gc/export.c                                |    6 +-
 src/cmd/gc/fmt.c                                   |    6 +
 src/cmd/gc/gen.c                                   |  122 +-
 src/cmd/gc/go.h                                    |  255 ++-
 src/cmd/gc/inl.c                                   |    9 +-
 src/cmd/gc/lex.c                                   |  162 +-
 src/cmd/gc/obj.c                                   |   24 +-
 src/cmd/gc/order.c                                 |   45 +-
 src/cmd/gc/pgen.c                                  |   82 +-
 src/cmd/gc/plive.c                                 |  141 +-
 src/cmd/gc/popt.c                                  |   81 +-
 src/cmd/gc/popt.h                                  |   46 -
 src/cmd/gc/racewalk.c                              |   15 +-
 src/cmd/gc/range.c                                 |   25 +-
 src/cmd/gc/reflect.c                               |  196 ++-
 src/cmd/gc/runtime.go                              |   15 +-
 src/cmd/gc/sinit.c                                 |   44 +-
 src/cmd/gc/subr.c                                  |   39 +-
 src/cmd/gc/swt.c                                   |    2 +
 src/cmd/gc/typecheck.c                             |   86 +-
 src/cmd/gc/unsafe.c                                |    4 +-
 src/cmd/gc/walk.c                                  |  141 +-
 src/cmd/go/build.go                                |   28 +-
 src/cmd/go/doc.go                                  |   14 +-
 src/cmd/go/fix.go                                  |    2 +-
 src/cmd/go/get.go                                  |    2 +-
 src/cmd/go/pkg.go                                  |    4 +
 src/cmd/go/test.go                                 |    4 +
 src/cmd/go/testflag.go                             |   10 +-
 src/cmd/go/vet.go                                  |    2 +-
 src/cmd/ld/decodesym.c                             |    2 +-
 src/cmd/ld/dwarf.c                                 |    2 +-
 src/cmd/ld/lib.c                                   |    4 +-
 src/crypto/ecdsa/ecdsa.go                          |   59 +-
 src/crypto/ecdsa/ecdsa_test.go                     |   72 +
 src/crypto/tls/cipher_suites.go                    |   40 +-
 src/crypto/tls/handshake_client.go                 |    6 +-
 src/crypto/tls/handshake_client_test.go            |   15 +-
 src/crypto/tls/handshake_server.go                 |   13 +-
 src/crypto/tls/handshake_server_test.go            |    8 +
 src/crypto/tls/prf.go                              |   44 +-
 src/crypto/tls/prf_test.go                         |   10 +-
 .../testdata/Client-TLSv10-ClientCert-ECDSA-ECDSA  |  102 +-
 .../testdata/Client-TLSv10-ClientCert-ECDSA-RSA    |   62 +-
 .../testdata/Client-TLSv10-ClientCert-RSA-ECDSA    |  102 +-
 .../tls/testdata/Client-TLSv10-ClientCert-RSA-RSA  |   62 +-
 .../tls/testdata/Client-TLSv10-ECDHE-ECDSA-AES     |   82 +-
 .../tls/testdata/Client-TLSv10-ECDHE-RSA-AES       |   82 +-
 src/crypto/tls/testdata/Client-TLSv10-RSA-RC4      |   44 +-
 .../tls/testdata/Client-TLSv11-ECDHE-ECDSA-AES     |   84 +-
 .../tls/testdata/Client-TLSv11-ECDHE-RSA-AES       |   82 +-
 src/crypto/tls/testdata/Client-TLSv11-RSA-RC4      |   44 +-
 src/crypto/tls/testdata/Client-TLSv12-ALPN         |   78 +-
 src/crypto/tls/testdata/Client-TLSv12-ALPN-NoMatch |   78 +-
 .../testdata/Client-TLSv12-ClientCert-ECDSA-ECDSA  |  112 +-
 .../testdata/Client-TLSv12-ClientCert-ECDSA-RSA    |   71 +-
 .../testdata/Client-TLSv12-ClientCert-RSA-ECDSA    |  106 +-
 .../tls/testdata/Client-TLSv12-ClientCert-RSA-RSA  |   68 +-
 .../tls/testdata/Client-TLSv12-ECDHE-ECDSA-AES     |   84 +-
 .../tls/testdata/Client-TLSv12-ECDHE-ECDSA-AES-GCM |   78 +-
 .../Client-TLSv12-ECDHE-ECDSA-AES256-GCM-SHA384    |   84 +
 .../tls/testdata/Client-TLSv12-ECDHE-RSA-AES       |   82 +-
 src/crypto/tls/testdata/Client-TLSv12-RSA-RC4      |   44 +-
 .../tls/testdata/Server-TLSv10-ECDHE-ECDSA-AES     |   79 +-
 src/crypto/tls/testdata/Server-TLSv12-ALPN         |  119 +-
 src/crypto/tls/testdata/Server-TLSv12-ALPN-NoMatch |  119 +-
 .../Server-TLSv12-CipherSuiteCertPreferenceECDSA   |  176 +-
 .../Server-TLSv12-CipherSuiteCertPreferenceRSA     |  197 +--
 .../tls/testdata/Server-TLSv12-ECDHE-ECDSA-AES     |   86 +-
 .../testdata/Server-TLSv12-RSA-AES256-GCM-SHA384   |   92 +
 src/crypto/x509/pkix/pkix.go                       |   43 +-
 src/crypto/x509/x509.go                            |  129 +-
 src/crypto/x509/x509_test.go                       |   27 +
 src/database/sql/sql.go                            |  103 +-
 src/database/sql/sql_test.go                       |   78 +-
 src/encoding/json/decode.go                        |   39 +-
 src/encoding/json/decode_test.go                   |    4 +-
 src/expvar/expvar.go                               |   16 +-
 src/fmt/fmt_test.go                                |    9 +
 src/go/ast/filter.go                               |    4 +-
 src/go/doc/exports.go                              |   24 +-
 src/go/doc/testdata/blank.0.golden                 |    6 +-
 src/go/doc/testdata/blank.1.golden                 |    6 +
 src/go/doc/testdata/blank.2.golden                 |    6 +-
 src/go/doc/testdata/blank.go                       |    7 +
 src/go/parser/parser.go                            |   12 +
 src/go/parser/short_test.go                        |    7 +-
 src/go/printer/nodes.go                            |   48 +-
 src/go/printer/printer.go                          |   30 +-
 src/go/printer/testdata/comments.golden            |   62 +
 src/go/printer/testdata/comments.input             |   62 +
 src/go/printer/testdata/declarations.golden        |    9 +
 src/go/printer/testdata/declarations.input         |    9 +
 src/html/template/doc.go                           |    2 +-
 src/image/image.go                                 |    2 +-
 src/internal/syscall/getrandom_linux.go            |    8 +-
 src/lib9/tokenize.c                                |    2 -
 src/liblink/asm5.c                                 |  552 +++---
 src/liblink/asm6.c                                 |  902 +++++-----
 src/liblink/asm8.c                                 |  805 ++++-----
 src/liblink/asm9.c                                 |  245 ++-
 src/liblink/data.c                                 |   10 +-
 src/liblink/go.c                                   |   61 +
 src/liblink/ld.c                                   |    6 +-
 src/liblink/list5.c                                |  113 +-
 src/liblink/list6.c                                |  153 +-
 src/liblink/list8.c                                |  194 ++-
 src/liblink/list9.c                                |  190 +--
 src/liblink/obj5.c                                 |  384 ++---
 src/liblink/obj6.c                                 |  468 +++---
 src/liblink/obj8.c                                 |  328 ++--
 src/liblink/obj9.c                                 |  409 ++---
 src/liblink/objfile.c                              |   46 +-
 src/liblink/objfilego.c                            |   15 +-
 src/liblink/pass.c                                 |   93 +-
 src/liblink/pcln.c                                 |   16 +-
 src/liblink/sym.c                                  |    3 +-
 src/log/log.go                                     |    7 +
 src/make.bash                                      |    7 +-
 src/make.rc                                        |    7 +-
 src/math/big/decimal.go                            |  255 +++
 src/math/big/decimal_test.go                       |  106 ++
 src/math/big/float.go                              |  957 +++++++++++
 src/math/big/float_test.go                         |  684 ++++++++
 src/math/big/floatconv.go                          |  255 +++
 src/math/big/floatconv_test.go                     |  117 ++
 src/math/big/int.go                                |  193 +--
 src/math/big/int_test.go                           |  371 +---
 src/math/big/intconv.go                            |  228 +++
 src/math/big/intconv_test.go                       |  342 ++++
 src/math/big/nat.go                                |  457 +----
 src/math/big/nat_test.go                           |  489 +-----
 src/math/big/natconv.go                            |  489 ++++++
 src/math/big/natconv_test.go                       |  429 +++++
 src/math/big/rat.go                                |  160 +-
 src/math/big/rat_test.go                           |  424 -----
 src/math/big/ratconv.go                            |  238 +++
 src/math/big/ratconv_test.go                       |  451 +++++
 src/net/cgo_bsd.go                                 |    2 +-
 src/net/dnsclient.go                               |   26 +-
 src/net/dnsmsg_test.go                             |   26 +-
 src/net/fd_plan9.go                                |    4 -
 src/net/fd_poll_nacl.go                            |    9 +-
 src/net/fd_poll_runtime.go                         |   15 +-
 src/net/fd_unix.go                                 |   15 +-
 src/net/fd_windows.go                              |   19 -
 src/net/http/main_test.go                          |    2 +-
 src/net/http/pprof/pprof.go                        |   29 +
 src/net/http/request.go                            |    5 +-
 src/net/http/serve_test.go                         |   91 +-
 src/net/http/server.go                             |   10 +-
 src/net/interface_test.go                          |  160 +-
 src/net/ip.go                                      |   10 +-
 src/net/ipraw_test.go                              |  174 +-
 src/net/ipsock.go                                  |    2 +-
 src/net/mockicmp_test.go                           |  116 --
 src/net/net.go                                     |    3 -
 src/net/packetconn_test.go                         |   26 +-
 src/net/parse.go                                   |   53 +-
 src/net/protoconn_test.go                          |   35 +-
 src/net/server_test.go                             |    2 +-
 src/os/os_unix_test.go                             |    4 +
 src/os/path_test.go                                |    9 +-
 src/os/stat_plan9.go                               |   36 +-
 src/path/filepath/path.go                          |    9 +-
 src/path/filepath/path_plan9.go                    |   10 +
 src/path/filepath/path_test.go                     |   28 +-
 src/path/filepath/path_unix.go                     |   10 +
 src/path/filepath/path_windows.go                  |   37 +
 src/reflect/all_test.go                            |   11 +
 src/reflect/export_test.go                         |    4 +-
 src/reflect/makefunc.go                            |    4 +-
 src/reflect/type.go                                |   25 +-
 src/reflect/value.go                               |   55 +-
 src/regexp/exec_test.go                            |    4 +-
 src/runtime/arch1_amd64.go                         |    2 +-
 src/runtime/asm_386.s                              |    6 +
 src/runtime/asm_amd64.s                            |  116 +-
 src/runtime/cgocall.go                             |    5 +
 src/runtime/chan.go                                |   12 +-
 src/runtime/debug.go                               |    4 +-
 src/runtime/defs_linux_arm.go                      |   11 +-
 src/runtime/export_test.go                         |   20 +-
 src/runtime/extern.go                              |    4 +
 src/runtime/hashmap.go                             |   75 +-
 src/runtime/lock_futex.go                          |    2 +-
 src/runtime/lock_sema.go                           |    2 +-
 src/runtime/malloc.go                              |   33 +-
 src/runtime/malloc1.go                             |    3 +
 src/runtime/malloc2.go                             |    5 -
 src/runtime/malloc_test.go                         |   17 +
 src/runtime/mbarrier.go                            |   45 +-
 src/runtime/mem.go                                 |    8 +-
 src/runtime/mem_plan9.go                           |   13 +-
 src/runtime/mfinal.go                              |    8 +-
 src/runtime/mgc.go                                 |  106 +-
 src/runtime/mgc0.go                                |    4 +-
 src/runtime/mheap.go                               |    6 +
 src/runtime/mprof.go                               |    8 +-
 src/runtime/netpoll.go                             |    4 +-
 src/runtime/panic.go                               |    7 +-
 src/runtime/panic1.go                              |    2 +-
 src/runtime/parfor.go                              |   58 +-
 src/runtime/parfor_test.go                         |   21 +-
 src/runtime/pprof/pprof.go                         |   27 +
 src/runtime/pprof/pprof_test.go                    |    9 +
 src/runtime/pprof/trace_parser_test.go             |  656 ++++++++
 src/runtime/pprof/trace_test.go                    |  244 +++
 src/runtime/print1_write_android.go                |  143 +-
 src/runtime/proc.go                                |   23 +-
 src/runtime/proc1.go                               |  321 ++--
 src/runtime/proc_test.go                           |   20 +
 src/runtime/runtime.go                             |    9 +-
 src/runtime/runtime1.go                            |   61 +-
 src/runtime/runtime2.go                            |   39 +-
 src/runtime/select.go                              |    4 +-
 src/runtime/sema.go                                |    6 +-
 src/runtime/stack1.go                              |   29 +-
 src/runtime/string.go                              |   99 +-
 src/runtime/string_test.go                         |   77 +
 src/runtime/stubs.go                               |    5 +
 src/runtime/stubs_android.go                       |   10 +
 src/runtime/sys_dragonfly_amd64.s                  |    6 +-
 src/runtime/sys_freebsd_amd64.s                    |    6 +-
 src/runtime/sys_linux_amd64.s                      |    6 +-
 src/runtime/sys_linux_arm.s                        |   29 +
 src/runtime/sys_netbsd_amd64.s                     |    6 +-
 src/runtime/sys_openbsd_amd64.s                    |    6 +-
 src/runtime/time.go                                |    4 +-
 src/runtime/trace.go                               |  807 +++++++++
 src/runtime/traceback.go                           |    6 +
 src/runtime/type.go                                |   14 +-
 src/strings/strings.go                             |    1 +
 src/syscall/asm_linux_386.s                        |  143 +-
 src/syscall/asm_linux_amd64.s                      |  105 +-
 src/testing/quick/quick.go                         |    8 +
 src/testing/quick/quick_test.go                    |    8 +
 src/testing/testing.go                             |   17 +
 src/unsafe/unsafe.go                               |   22 +-
 test/closure1.go                                   |   19 +
 test/closure2.go                                   |  118 ++
 test/escape2.go                                    |  243 ++-
 test/escape2n.go                                   |  243 ++-
 test/fixedbugs/issue9537.dir/a.go                  |   25 +
 test/fixedbugs/issue9537.dir/b.go                  |   43 +
 test/fixedbugs/issue9537.go                        |   10 +
 test/fixedbugs/issue9634.go                        |   18 +
 test/fixedbugs/issue9691.go                        |   21 +
 test/fixedbugs/issue9731.go                        |   21 +
 test/fixedbugs/issue9738.go                        |   20 +
 test/nosplit.go                                    |   20 +
 338 files changed, 20994 insertions(+), 13919 deletions(-)
