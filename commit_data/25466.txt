commit d2fa937a2188fdfcf1b81857eb297ba53b3a7867
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Nov 2 07:46:44 2015 -0800

    test: update tinyfin test
    
    * use new(int32) to be pedantic about documented SetFinalizer rules:
      "The argument x must be a pointer to an object allocated by calling
      new or by taking the address of a composite literal"
    
    * remove the amd64-only restriction. The GC is fully precise everywhere
      now, even on 32-bit. (keep the gccgo restriction, though)
    
    * remove a data race (perhaps the actual bug) and use atomic.LoadInt32
      for the final check. The race detector is now happy, too.
    
    Updates #13100
    
    Change-Id: I8d05c0ac4f046af9ba05701ad709c57984b34893
    Reviewed-on: https://go-review.googlesource.com/16535
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 test/tinyfin.go | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)
