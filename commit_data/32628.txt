commit 9b8964bf2df0626530a0ca493e3e95d8dc3844dd
Author: Daniel Martí <mvdan@mvdan.cc>
Date:   Wed Sep 6 11:57:16 2017 +0200

    text/template: fix pos info when trimming newlines
    
    The lexer keeps the byte offset and the line for the rune it's currently
    on. This was simple enough up until whitespace trimming was introduced.
    
    With whitespace trimming, we might skip over newlines. In that case, the
    lexer wasn't properly updating the line counter. Fix it.
    
    Also, TestPos now checks that the line is correct too, which it was
    ignoring before. This was necessary to test this scenario in the lexer.
    
    Fixes #21778.
    
    Change-Id: I3880f3adf02662eac8f818d5caa6935cca9cb33b
    Reviewed-on: https://go-review.googlesource.com/61870
    Run-TryBot: Daniel Martí <mvdan@mvdan.cc>
    Reviewed-by: Rob Pike <r@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/text/template/parse/lex.go      |  1 +
 src/text/template/parse/lex_test.go | 26 ++++++++++++++++++++++++--
 2 files changed, 25 insertions(+), 2 deletions(-)
