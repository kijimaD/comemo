commit 6bf8b76b95b22e3a7fbcd7cb95bfdb3f42bba60a
Author: Keith Randall <khr@golang.org>
Date:   Tue Mar 12 12:56:03 2024 -0700

    cmd/compile: don't assume args are always zero-extended
    
    On amd64, we always zero-extend when loading arguments from the stack.
    On arm64, we extend based on the type. This causes problems with
    zeroUpper*Bits, which reports the top bits are zero when they aren't.
    
    Fix it to use the type to decide if the top bits are really zero.
    
    For tests, only f32 currently fails on arm64. Added other tests
    just for future-proofing.
    
    Update #66066
    
    Change-Id: I2f13fb47198e139ef13c9a34eb1edc932eea3ee3
    Reviewed-on: https://go-review.googlesource.com/c/go/+/571135
    Reviewed-by: Keith Randall <khr@google.com>
    Reviewed-by: Than McIntosh <thanm@google.com>
    Reviewed-by: Carlos Amedee <carlos@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/cmd/compile/internal/ssa/rewrite.go |  8 +++--
 test/fixedbugs/issue66066b.go           | 58 +++++++++++++++++++++++++++++++++
 2 files changed, 63 insertions(+), 3 deletions(-)
