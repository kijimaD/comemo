commit 983fca55c0c43ef8cc663e3c0770d62032eac495
Author: Ilya Tocar <ilya.tocar@intel.com>
Date:   Fri Apr 6 16:47:48 2018 -0500

    cmd/compile/internal/ssa: prefer non-indexed stores on amd64
    
    We sometimes generate code like this:
    
    v473 = MOVQconst <uintptr> // constant..
    v580 = MOVBstoreidx1 <mem> v1056 v473 v819 v491 // ..only used as an index
    
    Rewrite indexed stores to non-indexed version, where possible.
    This allows to eliminate  const->register move, reducing codesize and lowering register pressure.
    
    Change-Id: Id5fed801dffe3f1a80876b8d8bd43775a7c942b2
    Reviewed-on: https://go-review.googlesource.com/105295
    Run-TryBot: Ilya Tocar <ilya.tocar@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssa/gen/AMD64.rules |  26 +
 src/cmd/compile/internal/ssa/rewriteAMD64.go | 705 ++++++++++++++++++++++++++-
 2 files changed, 728 insertions(+), 3 deletions(-)
