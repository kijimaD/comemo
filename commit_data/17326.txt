commit d017f578d01fa608d5ed40e343d0ffaf5fc0d476
Author: Dmitriy Vyukov <dvyukov@google.com>
Date:   Mon Aug 19 23:06:46 2013 +0400

    runtime: do not preempt race calls
    In the crash stack trace race cgocall() calls endcgo(),
    this means that m->racecall is wrong.
    Indeed this can happen is a goroutine is rescheduled to another M
    during race call.
    Disable preemption for race calls.
    Fixes #6155.
    
    R=golang-dev, rsc, cshapiro
    CC=golang-dev
    https://golang.org/cl/12866045

 src/pkg/runtime/race.c | 42 ++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 42 insertions(+)
