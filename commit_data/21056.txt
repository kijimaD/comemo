commit 9eded54fa3e7c3d1bc593f83e5c448b908299d0e
Author: Russ Cox <rsc@golang.org>
Date:   Tue Nov 11 16:54:50 2014 -0500

    [dev.garbage] runtime:  concurrent mark fixes
    
    Add missing write barrier when initializing state
    for newly created goroutine. Add write barrier for
    same slot when preempting a goroutine.
    
    Disable write barrier during goroutine death,
    because dopanic does pointer writes.
    
    With concurrent mark enabled (not in this CL), all.bash passed once.
    The second time, TestGoexitCrash-2 failed.
    
    LGTM=rlh
    R=rlh
    CC=golang-codereviews
    https://golang.org/cl/167610043

 src/runtime/mgc0.c    | 3 +--
 src/runtime/mgc0.go   | 2 +-
 src/runtime/runtime.h | 2 ++
 src/runtime/stack.c   | 8 ++++++++
 src/runtime/sys_x86.c | 1 +
 5 files changed, 13 insertions(+), 3 deletions(-)
