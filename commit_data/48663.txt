commit 4c072c94dc2ffedd29d51d04aba2e1a6f2afd93f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Jun 4 10:26:40 2021 -0700

    [dev.typeparams] cmd/compile: refactor import reading
    
    This CL restructures the gcimports importer to mmap the export data
    into memory as a string, and then pass that same string to both the
    typecheck and types2 importers.
    
    This is primarily motivated by preparation for unified IR; but it
    should also improve performance (fewer string copies) and reduces
    divergance between the two importers.
    
    Passes toolstash -cmp.
    
    Change-Id: I397f720693e9e6360bfcb5acb12609ab339d251f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/325210
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Trust: Matthew Dempsky <mdempsky@google.com>
    Trust: Robert Griesemer <gri@golang.org>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 .../internal/{typecheck => base}/mapfile_mmap.go   |   4 +-
 .../internal/{typecheck => base}/mapfile_read.go   |   4 +-
 src/cmd/compile/internal/importer/gcimporter.go    |   2 +-
 src/cmd/compile/internal/importer/iimport.go       |  34 ++-
 src/cmd/compile/internal/noder/decl.go             |  12 +-
 src/cmd/compile/internal/noder/import.go           | 231 +++++++++++++--------
 src/cmd/compile/internal/typecheck/iimport.go      |  39 +---
 7 files changed, 172 insertions(+), 154 deletions(-)
