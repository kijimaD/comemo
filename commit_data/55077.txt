commit 4f55a5af5e5d325a534222050564766c249218aa
Author: Carlo Alberto Ferraris <cafxx@strayorange.com>
Date:   Sun Apr 2 23:54:35 2023 +0900

    sync: do not unnecessarily keep alive functions wrapped by Once(Func|Value|Values)
    
    The function passed to OnceFunc/OnceValue/OnceValues may transitively
    keep more allocations alive. As the passed function is guaranteed to be
    called at most once, it is safe to drop it after the first call is
    complete. This avoids keeping the passed function (and anything it
    transitively references) alive until the returned function is GCed.
    
    Change-Id: I2faf397b481d2f693ab3aea8e2981b02adbc7a21
    Reviewed-on: https://go-review.googlesource.com/c/go/+/481515
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: qiulaidongfeng <2645477756@qq.com>

 src/runtime/export_test.go | 18 +----------------
 src/runtime/mfinal.go      | 21 +++++++++++++++++++
 src/sync/oncefunc.go       |  5 ++++-
 src/sync/oncefunc_test.go  | 50 ++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 76 insertions(+), 18 deletions(-)
