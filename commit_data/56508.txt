commit 33d725e5758bf1fea62e6c77fc70b57a828a49f5
Author: Damien Neil <dneil@google.com>
Date:   Tue May 14 14:39:10 2024 -0700

    archive/zip: treat truncated EOCDR comment as an error
    
    When scanning for an end of central directory record,
    treat an EOCDR signature with a record containing a truncated
    comment as an error. Previously, we would skip over the invalid
    record and look for another one. Other implementations do not
    do this (they either consider this a hard error, or just ignore
    the truncated comment). This parser misalignment allowed
    presenting entirely different archive contents to Go programs
    and other zip decoders.
    
    Fixes #66869
    
    Change-Id: I94e5cb028534bb5704588b8af27f1e22ea49c7c6
    Reviewed-on: https://go-review.googlesource.com/c/go/+/585397
    Reviewed-by: Joseph Tsai <joetsai@digital-static.net>
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/archive/zip/reader.go                      |   8 ++++++--
 src/archive/zip/reader_test.go                 |   8 ++++++++
 src/archive/zip/testdata/comment-truncated.zip | Bin 0 -> 216 bytes
 3 files changed, 14 insertions(+), 2 deletions(-)
