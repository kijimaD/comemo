commit 0575e35e506cb180c5743209684b57dd41b4365f
Author: Russ Cox <rsc@golang.org>
Date:   Fri Jan 8 17:02:41 2021 -0500

    cmd/compile: require 'go 1.16' go.mod line for //go:embed
    
    This will produce better errors when earlier versions of
    Go compile code using //go:embed. (The import will cause
    a compilation error but then the go command will add to
    the output that the Go toolchain in use looks too old
    and maybe that's the problem.)
    
    This CL also adds a test for disallowing embed of a var inside a func.
    It's a bit too difficult to rebase down into that CL.
    
    The build system configuration check is delayed in order to
    make it possible to use errorcheck for these tests.
    
    Change-Id: I12ece4ff2d8d53380b63f54866e8f3497657d54c
    Reviewed-on: https://go-review.googlesource.com/c/go/+/282718
    Trust: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Jay Conrod <jayconrod@google.com>
    Reviewed-by: Bryan C. Mills <bcmills@google.com>

 src/cmd/compile/internal/gc/embed.go | 16 ++++++++++++----
 src/go/types/stdlib_test.go          |  2 ++
 test/embedfunc.go                    | 15 +++++++++++++++
 test/embedvers.go                    | 12 ++++++++++++
 4 files changed, 41 insertions(+), 4 deletions(-)
