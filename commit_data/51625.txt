commit 9088c691dac424540f562d6271c5ee479e9f9d80
Author: Keith Randall <khr@golang.org>
Date:   Tue Jan 17 09:35:21 2023 -0800

    cmd/compile: ensure temp register mask isn't empty
    
    We need to avoid nospill registers at this point in regalloc.
    Make sure that we don't restrict our register set to avoid registers
    desired by other instructions, if the resulting set includes only
    nospill registers.
    
    Fixes #57846
    
    Change-Id: I05478e4513c484755dc2e8621d73dac868e45a27
    Reviewed-on: https://go-review.googlesource.com/c/go/+/461685
    Reviewed-by: Keith Randall <khr@google.com>
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/compile/internal/ssa/regalloc.go |  2 +-
 test/fixedbugs/issue57846.go             | 33 ++++++++++++++++++++++++++++++++
 2 files changed, 34 insertions(+), 1 deletion(-)
