commit f02dda50e8b4e268987d269e22b6d7410a52587b
Author: Adam Langley <agl@golang.org>
Date:   Wed Feb 8 10:06:34 2017 -0800

    crypto/tls: don't hold lock when closing underlying net.Conn.
    
    There's no need to hold the handshake lock across this call and it can
    lead to deadlocks if the net.Conn calls back into the tls.Conn.
    
    Fixes #18426.
    
    Change-Id: Ib1b2813cce385949d970f8ad2e52cfbd1390e624
    Reviewed-on: https://go-review.googlesource.com/36561
    Run-TryBot: Adam Langley <agl@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

 src/crypto/tls/conn.go      |  2 +-
 src/crypto/tls/conn_test.go | 31 +++++++++++++++++++++++++++++++
 2 files changed, 32 insertions(+), 1 deletion(-)
