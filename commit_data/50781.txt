commit fa463cc96d797c218be4e218723f83be47e814c8
Author: Roland Shoemaker <roland@golang.org>
Date:   Mon Oct 3 09:19:32 2022 -0700

    crypto/x509/internal/macos: handle unexpected null returns
    
    SecCreatePolicySSL returns null when called from a binary that has a
    strange path. This seems to be a weirdo macos bug, but we should be
    properly handling those null returns anyway. Also add handling for
    SecTrustGetCertificateAtIndex.
    
    Fixes #54590
    
    Change-Id: I251e74f3b0bf65890a80b094b3e88718e13fd3db
    Reviewed-on: https://go-review.googlesource.com/c/go/+/438135
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Roland Shoemaker <roland@golang.org>
    Reviewed-by: Damien Neil <dneil@google.com>
    Auto-Submit: Roland Shoemaker <roland@golang.org>

 src/crypto/x509/internal/macos/security.go | 22 ++++++++++------------
 src/crypto/x509/internal/macos/security.s  |  2 --
 src/crypto/x509/root_darwin.go             | 10 ++++++++--
 3 files changed, 18 insertions(+), 16 deletions(-)
