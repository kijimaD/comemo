commit 14f929af91c6096e25b5cfe0549110ccc0e3db7b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu May 3 14:22:05 2018 -0400

    runtime/internal/atomic: improve ARM atomics
    
    This is a follow-up of CL 93637. There, when we redirect sync/atomic
    to runtime/internal/atomic, a few good implementations of ARM atomics
    were lost. This CL brings most of them back, with some improvements.
    
    - Change atomic Store to a plain store with memory barrier, as we
      already changed atomic Load to plain load with memory barrier.
    
    - Use native 64-bit atomics on ARMv7, jump to Go implementations
      on older machines. But drop the kernel helper. In particular,
      for Load64, just do loads, not using Cas on the address being
      load from, so it works also for read-only memory (since we have
      already fixed 32-bit Load).
    
    Change-Id: I725cd65cf945ae5200db81a35be3f251c9f7af14
    Reviewed-on: https://go-review.googlesource.com/111315
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

 src/runtime/internal/atomic/asm_arm.s          | 174 ++++++++++++++++++++++++-
 src/runtime/internal/atomic/atomic_arm.go      |  47 +++----
 src/runtime/internal/atomic/sys_linux_arm.s    |  33 ++++-
 src/runtime/internal/atomic/sys_nonlinux_arm.s |  23 +++-
 4 files changed, 240 insertions(+), 37 deletions(-)
