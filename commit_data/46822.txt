commit 52d5cb2822966c00ce2ef97eb08bec4850d76fb2
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Feb 3 18:10:04 2021 -0500

    [dev.regabi] cmd/internal/obj: access Attribute atomically
    
    Symbol's Attributes and ABI are in the same word. In the
    concurrent backend, we may read one symbol's ABI (the callee)
    while setting its attributes in another goroutine.
    
    Fix racecompile build.
    
    Change-Id: I500e869bafdd72080119ab243db94eee3afcf926
    Reviewed-on: https://go-review.googlesource.com/c/go/+/289290
    Trust: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/internal/obj/link.go | 64 +++++++++++++++++++++++++++-----------------
 1 file changed, 40 insertions(+), 24 deletions(-)
