commit 2a98a1849f059ffa94ab23a1ab7d8fa0fd0b48dd
Author: Michael Anthony Knyszek <mknyszek@google.com>
Date:   Wed Oct 23 16:28:52 2024 +0000

    runtime: uphold goroutine profile invariants in coroswitch
    
    Goroutine profiles require checking in with the profiler before any
    goroutine starts running. coroswitch is a place where a goroutine may
    start running, but where we do not check in with the profiler, which
    leads to crashes. Fix this by checking in with the profiler the same way
    execute does.
    
    Fixes #69998.
    
    Change-Id: Idef6dd31b70a73dd1c967b56c307c7a46a26ba73
    Reviewed-on: https://go-review.googlesource.com/c/go/+/622016
    Reviewed-by: David Chase <drchase@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/runtime/coro.go             | 12 +++++++++++
 src/runtime/pprof/pprof_test.go | 45 +++++++++++++++++++++++++++++++++++++++++
 2 files changed, 57 insertions(+)
