commit 6265ed745241da6c04ac8b9463c6feaaf332087b
Author: Than McIntosh <thanm@google.com>
Date:   Thu May 21 07:16:29 2020 -0400

    [dev.link] cmd/compile: emit fewer R_USETYPE relocations
    
    Background: when compiling a function, it's possible that a local
    variable will be optimized away, which could potentially degrade the
    debugging experience if the compiler fails to emit DWARF information
    for the variable's type. To mitigate this situation, the compiler
    emits R_USETYPE relocations for the function's auto/param variables as
    a signal to the linker to generate DWARF for the types in question,
    even if the type is not specifically attached to a DWARF param or var.
    
    This patch change the logic in the compiler to avoid emitting a
    R_USETYPE relocation if the type in question is already referenced by
    a concrete DWARF param or auto record. This cuts down on the amount of
    work the linker has to do, also makes object files a bit smaller on
    average (about 1% for the runtime package).
    
    Change-Id: I4d24da458d0658edf90c5dca0bf21d5ddc3961d8
    Reviewed-on: https://go-review.googlesource.com/c/go/+/234837
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Jeremy Faller <jeremy@golang.org>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>

 src/cmd/compile/internal/gc/pgen.go | 27 +++++++++++++++------------
 1 file changed, 15 insertions(+), 12 deletions(-)
