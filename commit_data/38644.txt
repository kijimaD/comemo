commit e9d12739976cbc25deb9226db25897c4824a8684
Author: Bryan C. Mills <bcmills@google.com>
Date:   Tue Jan 8 10:34:16 2019 -0500

    cmd/go/internal/web: reject insecure redirects from secure origins
    
    We rely on SSL certificates to verify the identity of origin servers.
    If an HTTPS server redirects through a plain-HTTP URL, that hop can be
    compromised. We should allow it only if the user set the -insecure
    flag explicitly.
    
    Fixes #29591
    
    Change-Id: I00639541cca2ca034c01c464385a43b3aa8ee84f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/156838
    Run-TryBot: Bryan C. Mills <bcmills@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

 src/cmd/go/go_test.go                                | 16 ----------------
 src/cmd/go/internal/web/http.go                      | 20 ++++++++++++++------
 src/cmd/go/testdata/script/get_insecure_redirect.txt | 11 +++++++++++
 3 files changed, 25 insertions(+), 22 deletions(-)
