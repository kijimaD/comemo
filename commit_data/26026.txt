commit 498933719287fbba1015c97d177a9bd4cfb9aada
Author: Keith Randall <khr@golang.org>
Date:   Fri Dec 11 14:59:01 2015 -0800

    [dev.ssa] cmd/compile: allow control values to be CSEd
    
    With the separate flagalloc pass, it should be fine to
    allow CSE of control values.  The worst that can happen
    is that the comparison gets un-CSEd by flagalloc.
    
    Fix bug in flagalloc where flag restores were getting
    clobbered by rematerialization during register allocation.
    
    Change-Id: If476cf98b69973e8f1a8eb29441136dd12fab8ad
    Reviewed-on: https://go-review.googlesource.com/17760
    Reviewed-by: David Chase <drchase@google.com>
    Run-TryBot: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssa/cse.go          | 11 ++++++++++-
 src/cmd/compile/internal/ssa/flagalloc.go    |  9 +++++++++
 src/cmd/compile/internal/ssa/gen/AMD64.rules |  2 +-
 src/cmd/compile/internal/ssa/gen/AMD64Ops.go |  2 +-
 src/cmd/compile/internal/ssa/opGen.go        |  2 +-
 src/cmd/compile/internal/ssa/rewriteAMD64.go | 10 +++++-----
 6 files changed, 27 insertions(+), 9 deletions(-)
