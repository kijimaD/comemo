commit b74b43de6830f3024862e1ab1d7c94fa0824a415
Author: Lynn Boger <laboger@linux.vnet.ibm.com>
Date:   Mon Sep 11 10:39:24 2017 -0400

    cmd/compile: request r12 for indirect calls on ppc64le
    
    On ppc64le, functions compiled with -shared expect r12 to
    hold the function's address for indirect calls. Previously
    this was enforced by generating a move instruction if the
    address wasn't already in r12. This change avoids that extra
    move by requesting r12 in the CALL ops that do indirect calls.
    
    As a result of adding support for plugins on ppc64le, it was
    discovered that there would be more cases where this extra
    move was needed, so this seemed like a better solution.
    
    Updates #20756
    
    Change-Id: I6770885a46990f78c6d2902a715dcdaa822192a1
    Reviewed-on: https://go-review.googlesource.com/62890
    Run-TryBot: Lynn Boger <laboger@linux.vnet.ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

 src/cmd/compile/internal/ppc64/ssa.go        | 13 ++-----------
 src/cmd/compile/internal/ssa/gen/PPC64Ops.go |  9 +++++----
 src/cmd/compile/internal/ssa/opGen.go        |  6 +++---
 src/cmd/compile/internal/ssa/regalloc.go     |  8 +-------
 4 files changed, 11 insertions(+), 25 deletions(-)
