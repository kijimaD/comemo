commit fb394017f1b5081f1243688c0686ba5faca96835
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jan 6 19:52:51 2016 +0000

    net/http: fix flaky TestTransportCancelBeforeResponseHeaders test
    
    Add a couple more cases where we convert random network I/O errors
    into errRequestCanceled if the request was forcefully aborted.
    
    It failed ~1/1000 times without -race, or very easily with -race.
    (due to -race randomizing some scheduling)
    
    Fixes #11894
    
    Change-Id: Ib1c123ce1eebdd88642da28a5948ca4f30581907
    Reviewed-on: https://go-review.googlesource.com/18287
    Reviewed-by: Russ Cox <rsc@golang.org>

 src/net/http/transport.go      | 6 ++++++
 src/net/http/transport_test.go | 1 -
 2 files changed, 6 insertions(+), 1 deletion(-)
