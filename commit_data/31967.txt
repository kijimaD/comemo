commit 89ebe5bbca0638567771cb2b0376b059122a77ba
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Mar 27 16:32:04 2017 +0000

    net/http/httptest: don't panic on Close of user-constructed Server value
    
    If the user created an httptest.Server directly without using a
    constructor it won't have the new unexported 'client' field. So don't
    assume it's non-nil.
    
    Fixes #19729
    
    Change-Id: Ie92e5da66cf4e7fb8d95f3ad0f4e3987d3ae8b77
    Reviewed-on: https://go-review.googlesource.com/38710
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Kevin Burke <kev@inburke.com>

 src/net/http/httptest/server.go      |  6 ++++--
 src/net/http/httptest/server_test.go | 17 +++++++++++++++++
 2 files changed, 21 insertions(+), 2 deletions(-)
