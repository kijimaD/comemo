commit 07faf8fab55d74ef6108e56b9e0ccee3e62b0a2d
Author: Dominique Lefevre <domingolefevre@gmail.com>
Date:   Thu Aug 24 10:14:54 2023 +0300

    cmd/compile: do not flag reflect.StructOf() as a ReflectMethod.
    
    StructOf() calls reflect.Type.Method(), but looks up only methods
    accessible via interfaces. DCE does not remove such methods, so
    there is no need to disable the DCE if StructOf() is used.
    
    There is a dependency chain between struct rtype and StructOf():
    
      (*rtype).Method() -> FuncOf() -> initFuncTypes() -> StructOf().
    
    Thus, any use of (*rtype).Method() or (*rtype).MethodByName()
    disables the DCE in the linker. This is not an issue just yet
    because all users of Method() and MethodByName() are flagged
    as ReflectMethods. A subsequent patch avoids this flag on callers
    of MethodByName(string literal). When that patch is applied,
    it becomes important to have no ReflectMethods down the call
    chain of MethodByName().
    
    Change-Id: I9b3e55c495c122ed70ef31f9d978c0e2e0573799
    Reviewed-on: https://go-review.googlesource.com/c/go/+/522435
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Joedian Reid <joedian@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Cherry Mui <cherryyz@google.com>

 src/cmd/compile/internal/walk/expr.go | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)
