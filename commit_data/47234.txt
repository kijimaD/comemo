commit 2e794c2bb1302af764670dba894bbfe537bd63f0
Author: Alexey Vilenski <bynovhack@gmail.com>
Date:   Fri Mar 5 11:37:54 2021 +0000

    testing: add TB.Setenv
    
    Add a new method TB.Setenv that'll set environment variables
    only for the isolated lifetime of the test, and will clean up
    and unset these variables when the test ends.
    This method disables the test or benchmark from running in
    parallel.
    
    Fixes #41260
    
    Change-Id: I0a18f094ec1c6ec3157b4b12993ea3075e2e9867
    GitHub-Last-Rev: 0ca12fa565318f350b927e2ef94f3b4f792c75c2
    GitHub-Pull-Request: golang/go#41857
    Reviewed-on: https://go-review.googlesource.com/c/go/+/260577
    Trust: Daniel Martí <mvdan@mvdan.cc>
    Trust: Emmanuel Odeke <emmanuel@orijtech.com>
    Run-TryBot: Daniel Martí <mvdan@mvdan.cc>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: roger peppe <rogpeppe@gmail.com>

 src/testing/testing.go      | 42 +++++++++++++++++++++++
 src/testing/testing_test.go | 83 +++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 125 insertions(+)
