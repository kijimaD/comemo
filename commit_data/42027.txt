commit 50b11318febd74c26cc466cc4557347bcb53181a
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Mon Apr 20 14:43:30 2020 -0700

    cmd/compile: use oneBit instead of isPowerOfTwo in bit optimization
    
    This optimization works on any integer with exactly one bit set.
    This is identical to being a power of two, except in the
    most negative number. Use oneBit instead.
    
    The rule now triggers in a few more places in std+cmd,
    in packages encoding/asn1, crypto/elliptic, and
    vendor/golang.org/x/crypto/cryptobyte.
    
    This change obviates the need for CL 222479
    by doing this optimization consistently in the compiler.
    
    Change-Id: I983c6235290fdc634fda5e11b10f1f8ce041272f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/229124
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

 src/cmd/compile/internal/ssa/gen/generic.rules | 16 ++++++-------
 src/cmd/compile/internal/ssa/rewrite.go        |  8 ++++---
 src/cmd/compile/internal/ssa/rewritegeneric.go | 32 +++++++++++++-------------
 test/codegen/bits.go                           |  5 ++++
 4 files changed, 34 insertions(+), 27 deletions(-)
