commit 4304fbc4d0e024d948ef637d19d89b0b6359788f
Merge: 75102afce7 2c11164db5
Author: Keith Randall <khr@golang.org>
Date:   Mon Nov 16 13:20:16 2015 -0800

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mergebranch
    
    Conflicts:
            src/cmd/compile/internal/gc/racewalk.go
            src/cmd/internal/obj/stack.go
            src/cmd/internal/obj/x86/obj6.go
            src/runtime/stack.go
            test/nilptr3.go
            test/nosplit.go
    
    Change-Id: Ie6053eb1577fd73e8243651f25c0f1fc765ae660

 .gitignore                                         |    2 +-
 AUTHORS                                            |   49 +-
 CONTRIBUTORS                                       |   58 +-
 api/next.txt                                       |  107 +
 doc/go1.6.txt                                      |   16 +
 doc/go_spec.html                                   |   24 +-
 doc/install-source.html                            |   17 +-
 misc/cgo/errors/ptr.go                             |  412 +++
 misc/cgo/errors/test.bash                          |    4 +
 misc/cgo/test/callback.go                          |   33 +-
 misc/cgo/test/cgo_test.go                          |    2 +
 misc/cgo/test/gcc68255.go                          |   17 +
 misc/cgo/test/gcc68255/a.go                        |   17 +
 misc/cgo/test/gcc68255/c.c                         |    8 +
 .../abs_amd64p32.s => misc/cgo/test/gcc68255/c.h   |    4 +-
 misc/cgo/test/issue10303.go                        |    6 +
 misc/cgo/test/issue9510.go                         |   24 +
 misc/cgo/test/issue9510a/a.go                      |   15 +
 misc/cgo/test/issue9510b/b.go                      |   15 +
 misc/cgo/testcshared/src/libgo2/dup2.go            |   13 +
 misc/cgo/testcshared/src/libgo2/dup3.go            |   13 +
 misc/cgo/testcshared/src/libgo2/libgo2.go          |    2 +-
 misc/cgo/testcshared/test.bash                     |    4 +-
 misc/cgo/testsanitizers/msan.go                    |    7 +-
 misc/cgo/testsanitizers/msan2.go                   |   35 +
 misc/cgo/testsanitizers/msan3.go                   |   32 +
 misc/cgo/testsanitizers/msan4.go                   |   50 +
 misc/cgo/testsanitizers/msan_fail.go               |   36 +
 misc/cgo/testsanitizers/test.bash                  |   42 +-
 misc/cgo/testshared/shared_test.go                 |   38 +-
 misc/ios/go_darwin_arm_exec.go                     |  368 +--
 misc/sortac/sortac.go                              |   79 +
 src/androidtest.bash                               |   19 +-
 src/archive/tar/reader.go                          |   54 +-
 src/archive/tar/reader_test.go                     |  156 +-
 src/archive/tar/testdata/pax-path-hdr.tar          |  Bin 0 -> 1024 bytes
 src/archive/tar/testdata/ustar-file-reg.tar        |  Bin 0 -> 1536 bytes
 src/archive/tar/writer.go                          |   21 +-
 src/archive/tar/writer_test.go                     |   53 +-
 src/cmd/asm/internal/arch/arch.go                  |   63 +
 src/cmd/asm/internal/arch/mips64.go                |   64 +
 src/cmd/asm/internal/asm/asm.go                    |   18 +
 src/cmd/asm/internal/asm/endtoend_test.go          |    4 +
 src/cmd/asm/internal/asm/operand_test.go           |   88 +
 src/cmd/asm/internal/asm/testdata/mips64.out       |   99 +
 src/cmd/asm/internal/asm/testdata/mips64.s         |  392 +++
 src/cmd/asm/internal/lex/input.go                  |    2 +-
 src/cmd/cgo/ast.go                                 |  104 +-
 src/cmd/cgo/doc.go                                 |   50 +-
 src/cmd/cgo/gcc.go                                 |  283 ++
 src/cmd/cgo/main.go                                |   38 +-
 src/cmd/cgo/out.go                                 |   12 +-
 src/cmd/compile/doc.go                             |    6 +-
 src/cmd/compile/internal/amd64/ggen.go             |    9 +-
 src/cmd/compile/internal/amd64/gsubr.go            |  623 ++--
 src/cmd/compile/internal/amd64/peep.go             |    4 +
 src/cmd/compile/internal/amd64/prog.go             |    4 +-
 src/cmd/compile/internal/amd64/reg.go              |    1 +
 src/cmd/compile/internal/arm/cgen64.go             |    6 +-
 src/cmd/compile/internal/arm/ggen.go               |    4 +-
 src/cmd/compile/internal/arm/gsubr.go              |  375 ++-
 src/cmd/compile/internal/arm64/ggen.go             |    4 +-
 src/cmd/compile/internal/arm64/gsubr.go            |  440 +--
 src/cmd/compile/internal/gc/align.go               |  164 +-
 src/cmd/compile/internal/gc/bexport.go             | 1041 ++++++
 src/cmd/compile/internal/gc/bimport.go             |  634 ++++
 src/cmd/compile/internal/gc/builtin.go             |    6 +-
 src/cmd/compile/internal/gc/builtin/runtime.go     |   10 +-
 src/cmd/compile/internal/gc/bv.go                  |    6 +-
 src/cmd/compile/internal/gc/cgen.go                |  295 +-
 src/cmd/compile/internal/gc/closure.go             |   10 +-
 src/cmd/compile/internal/gc/const.go               |  256 +-
 src/cmd/compile/internal/gc/cplx.go                |   23 +-
 src/cmd/compile/internal/gc/dcl.go                 |  287 +-
 src/cmd/compile/internal/gc/esc.go                 |    6 +-
 src/cmd/compile/internal/gc/export.go              |  149 +-
 src/cmd/compile/internal/gc/fmt.go                 |   32 +-
 src/cmd/compile/internal/gc/gen.go                 |   84 +-
 src/cmd/compile/internal/gc/go.go                  |  136 +-
 src/cmd/compile/internal/gc/go.y                   |   21 +-
 src/cmd/compile/internal/gc/gsubr.go               |   39 +-
 src/cmd/compile/internal/gc/init.go                |   46 +-
 src/cmd/compile/internal/gc/inl.go                 |   19 +-
 src/cmd/compile/internal/gc/lex.go                 |  335 +-
 src/cmd/compile/internal/gc/mkbuiltin.go           |    5 +-
 src/cmd/compile/internal/gc/mparith3.go            |   29 +-
 src/cmd/compile/internal/gc/obj.go                 |   14 +-
 src/cmd/compile/internal/gc/order.go               |   15 +-
 src/cmd/compile/internal/gc/parser.go              | 3372 +++++++++++++++++++
 src/cmd/compile/internal/gc/pgen.go                |   11 +-
 src/cmd/compile/internal/gc/plive.go               |   11 +-
 src/cmd/compile/internal/gc/popt.go                |   40 +-
 src/cmd/compile/internal/gc/racewalk.go            |  184 +-
 src/cmd/compile/internal/gc/range.go               |    6 +-
 src/cmd/compile/internal/gc/reflect.go             |   40 +-
 src/cmd/compile/internal/gc/reg.go                 |  124 +-
 src/cmd/compile/internal/gc/select.go              |    6 +-
 src/cmd/compile/internal/gc/sinit.go               |   24 +-
 src/cmd/compile/internal/gc/ssa.go                 |   62 +-
 src/cmd/compile/internal/gc/subr.go                |  282 +-
 src/cmd/compile/internal/gc/swt.go                 |    6 +-
 src/cmd/compile/internal/gc/syntax.go              |   28 +-
 src/cmd/compile/internal/gc/type.go                |    2 +-
 src/cmd/compile/internal/gc/typecheck.go           |  130 +-
 src/cmd/compile/internal/gc/unsafe.go              |   12 +-
 src/cmd/compile/internal/gc/util.go                |    7 -
 src/cmd/compile/internal/gc/walk.go                |  404 +--
 src/cmd/compile/internal/gc/y.go                   |  555 ++--
 src/cmd/compile/internal/mips64/cgen.go            |   60 +-
 src/cmd/compile/internal/mips64/galign.go          |   32 +-
 src/cmd/compile/internal/mips64/ggen.go            |  244 +-
 src/cmd/compile/internal/mips64/gsubr.go           | 1002 +++---
 src/cmd/compile/internal/mips64/opt.go             |   12 -
 src/cmd/compile/internal/mips64/peep.go            |  497 +--
 src/cmd/compile/internal/mips64/prog.go            |  325 +-
 src/cmd/compile/internal/mips64/reg.go             |   20 +-
 src/cmd/compile/internal/ppc64/galign.go           |    5 +
 src/cmd/compile/internal/ppc64/ggen.go             |    4 +-
 src/cmd/compile/internal/ppc64/gsubr.go            |  450 +--
 src/cmd/compile/internal/ppc64/reg.go              |    6 +
 src/cmd/compile/internal/x86/cgen64.go             |   26 +-
 src/cmd/compile/internal/x86/ggen.go               |   40 +-
 src/cmd/compile/internal/x86/gsubr.go              |  523 +--
 src/cmd/compile/main.go                            |    3 +
 src/cmd/dist/build.go                              |   62 +-
 src/cmd/dist/buildruntime.go                       |   22 +-
 src/cmd/dist/buildtool.go                          |    3 +
 src/cmd/dist/deps.go                               |  104 +-
 src/cmd/dist/mkdeps.bash                           |   31 +-
 src/cmd/dist/test.go                               |   27 +-
 src/cmd/dist/util.go                               |   15 +
 src/cmd/go/alldocs.go                              |   15 +-
 src/cmd/go/build.go                                |  278 +-
 src/cmd/go/generate.go                             |   44 +-
 src/cmd/go/generate_test.go                        |    1 +
 src/cmd/go/get.go                                  |    8 +-
 src/cmd/go/go_test.go                              |   53 +-
 src/cmd/go/help.go                                 |    5 +
 src/cmd/go/pkg.go                                  |   36 +-
 src/cmd/go/run.go                                  |    2 +-
 src/cmd/go/test.go                                 |    7 +-
 src/cmd/internal/goobj/read.go                     |    4 +-
 src/cmd/internal/obj/arm/asm5.go                   |   11 +-
 src/cmd/internal/obj/arm/obj5.go                   |  117 +
 src/cmd/internal/obj/arm64/a.out.go                |   13 +
 src/cmd/internal/obj/arm64/anames7.go              |    3 +
 src/cmd/internal/obj/arm64/asm7.go                 |  116 +-
 src/cmd/internal/obj/arm64/obj7.go                 |  117 +
 src/cmd/internal/obj/link.go                       |   92 +
 src/cmd/internal/obj/mips/a.out.go                 |  552 ++--
 src/cmd/internal/obj/mips/anames.go                |  364 +--
 src/cmd/internal/obj/mips/anames0.go               |   18 +-
 src/cmd/internal/obj/mips/asm0.go                  | 3447 ++++++--------------
 src/cmd/internal/obj/mips/list0.go                 |   44 +-
 src/cmd/internal/obj/mips/obj0.go                  | 1229 +++++--
 src/cmd/internal/obj/ppc64/a.out.go                |    4 +
 src/cmd/internal/obj/ppc64/anames9.go              |    3 +
 src/cmd/internal/obj/ppc64/asm9.go                 |  169 +-
 src/cmd/internal/obj/ppc64/obj9.go                 |  239 +-
 src/cmd/internal/obj/util.go                       |   16 +-
 src/cmd/internal/obj/x86/a.out.go                  |    6 +-
 src/cmd/internal/obj/x86/anames.go                 |    5 +
 src/cmd/internal/obj/x86/asm6.go                   |  105 +-
 src/cmd/internal/obj/x86/obj6.go                   |   10 +
 src/cmd/link/doc.go                                |    2 +
 src/cmd/link/internal/amd64/asm.go                 |    4 +-
 src/cmd/link/internal/arm/asm.go                   |   77 +-
 src/cmd/link/internal/arm64/asm.go                 |  121 +-
 src/cmd/link/internal/arm64/obj.go                 |    4 +
 src/cmd/link/internal/ld/ar.go                     |  132 +
 src/cmd/link/internal/ld/arch.go                   |   18 +
 src/cmd/link/internal/ld/data.go                   |   14 +-
 src/cmd/link/internal/ld/decodesym.go              |    8 +
 src/cmd/link/internal/ld/dwarf.go                  |   11 +-
 src/cmd/link/internal/ld/elf.go                    |  630 ++--
 src/cmd/link/internal/ld/go.go                     |   11 +-
 src/cmd/link/internal/ld/ldelf.go                  |   18 +-
 src/cmd/link/internal/ld/lib.go                    |  189 +-
 src/cmd/link/internal/ld/link.go                   |   38 +-
 src/cmd/link/internal/ld/pobj.go                   |    1 +
 src/cmd/link/internal/ld/sym.go                    |   18 +-
 src/cmd/link/internal/ld/symtab.go                 |   37 +-
 src/cmd/link/internal/mips64/asm.go                |  248 ++
 src/cmd/link/internal/mips64/l.go                  |   75 +
 src/cmd/link/internal/mips64/obj.go                |  158 +
 src/cmd/link/internal/ppc64/asm.go                 |  306 +-
 src/cmd/link/internal/ppc64/obj.go                 |   17 +
 src/cmd/link/internal/x86/asm.go                   |    4 +-
 src/cmd/link/main.go                               |    3 +
 src/cmd/newlink/testdata/autosection.6             |  Bin 937 -> 936 bytes
 src/cmd/newlink/testdata/autoweak.6                |  Bin 386 -> 385 bytes
 src/cmd/newlink/testdata/dead.6                    |  Bin 849 -> 848 bytes
 src/cmd/newlink/testdata/hello.6                   |  Bin 229 -> 228 bytes
 src/cmd/newlink/testdata/layout.6                  |  Bin 396 -> 395 bytes
 src/cmd/newlink/testdata/pclntab.6                 |  Bin 3804 -> 3803 bytes
 src/cmd/vet/shadow.go                              |    2 +
 src/cmd/vet/testdata/shadow.go                     |    7 +-
 src/cmd/vet/vet_test.go                            |   19 +-
 src/compress/gzip/gunzip.go                        |    5 +-
 src/compress/gzip/gzip.go                          |    2 +-
 src/crypto/aes/aes_gcm.go                          |   12 +
 src/crypto/cipher/ctr.go                           |    5 +-
 src/crypto/cipher/ctr_test.go                      |   55 +
 src/crypto/ecdsa/ecdsa.go                          |   39 +-
 src/crypto/ecdsa/ecdsa_test.go                     |   35 +
 src/crypto/elliptic/elliptic_test.go               |   12 +
 src/crypto/elliptic/p256.go                        |    2 +
 src/crypto/elliptic/p256_amd64.go                  |  552 ++++
 src/crypto/elliptic/p256_asm_amd64.s               | 2295 +++++++++++++
 src/crypto/md5/md5.go                              |   10 +-
 src/crypto/tls/cipher_suites.go                    |    4 +
 src/crypto/tls/common.go                           |    3 +-
 src/crypto/tls/conn.go                             |   35 +-
 src/crypto/tls/handshake_client.go                 |    9 +-
 src/crypto/tls/handshake_client_test.go            |   43 +
 src/crypto/tls/prf.go                              |   17 +-
 .../testdata/Client-TLSv10-ClientCert-ECDSA-ECDSA  |  104 +-
 .../testdata/Client-TLSv10-ClientCert-ECDSA-RSA    |  167 +-
 .../testdata/Client-TLSv10-ClientCert-RSA-ECDSA    |  100 +-
 .../tls/testdata/Client-TLSv10-ClientCert-RSA-RSA  |  167 +-
 .../tls/testdata/Client-TLSv10-ECDHE-ECDSA-AES     |   84 +-
 .../tls/testdata/Client-TLSv10-ECDHE-RSA-AES       |  165 +-
 src/crypto/tls/testdata/Client-TLSv10-RSA-RC4      |  149 +-
 .../tls/testdata/Client-TLSv11-ECDHE-ECDSA-AES     |   84 +-
 .../tls/testdata/Client-TLSv11-ECDHE-RSA-AES       |  165 +-
 src/crypto/tls/testdata/Client-TLSv11-RSA-RC4      |  149 +-
 .../tls/testdata/Client-TLSv12-AES128-GCM-SHA256   |   81 +
 .../tls/testdata/Client-TLSv12-AES256-GCM-SHA384   |   81 +
 src/crypto/tls/testdata/Client-TLSv12-ALPN         |  164 +-
 src/crypto/tls/testdata/Client-TLSv12-ALPN-NoMatch |  161 +-
 .../testdata/Client-TLSv12-ClientCert-ECDSA-ECDSA  |  111 +-
 .../testdata/Client-TLSv12-ClientCert-ECDSA-RSA    |  171 +-
 .../Client-TLSv12-ClientCert-RSA-AES256-GCM-SHA384 |  183 +-
 .../testdata/Client-TLSv12-ClientCert-RSA-ECDSA    |  107 +-
 .../tls/testdata/Client-TLSv12-ClientCert-RSA-RSA  |  171 +-
 .../tls/testdata/Client-TLSv12-ECDHE-ECDSA-AES     |   84 +-
 .../tls/testdata/Client-TLSv12-ECDHE-ECDSA-AES-GCM |   76 +-
 .../Client-TLSv12-ECDHE-ECDSA-AES256-GCM-SHA384    |   76 +-
 .../tls/testdata/Client-TLSv12-ECDHE-RSA-AES       |  165 +-
 src/crypto/tls/testdata/Client-TLSv12-RSA-RC4      |  149 +-
 src/crypto/tls/testdata/Client-TLSv12-SCT          |  161 +-
 src/crypto/tls/testdata/Server-SSLv3-RSA-3DES      |   60 +-
 src/crypto/tls/testdata/Server-SSLv3-RSA-AES       |   62 +-
 src/crypto/tls/testdata/Server-SSLv3-RSA-RC4       |   52 +-
 .../tls/testdata/Server-TLSv10-ECDHE-ECDSA-AES     |   78 +-
 src/crypto/tls/testdata/Server-TLSv10-RSA-3DES     |   52 +-
 src/crypto/tls/testdata/Server-TLSv10-RSA-AES      |   58 +-
 src/crypto/tls/testdata/Server-TLSv10-RSA-RC4      |   46 +-
 src/crypto/tls/testdata/Server-TLSv11-FallbackSCSV |   28 +-
 src/crypto/tls/testdata/Server-TLSv11-RSA-RC4      |   46 +-
 src/crypto/tls/testdata/Server-TLSv12-ALPN         |   84 +-
 src/crypto/tls/testdata/Server-TLSv12-ALPN-NoMatch |   84 +-
 .../Server-TLSv12-CipherSuiteCertPreferenceECDSA   |   76 +-
 .../Server-TLSv12-CipherSuiteCertPreferenceRSA     |   76 +-
 .../Server-TLSv12-ClientAuthRequestedAndECDSAGiven |   68 +-
 .../Server-TLSv12-ClientAuthRequestedAndGiven      |   68 +-
 .../Server-TLSv12-ClientAuthRequestedNotGiven      |   50 +-
 .../tls/testdata/Server-TLSv12-ECDHE-ECDSA-AES     |   78 +-
 src/crypto/tls/testdata/Server-TLSv12-IssueTicket  |   64 +-
 .../testdata/Server-TLSv12-IssueTicketPreDisable   |   64 +-
 src/crypto/tls/testdata/Server-TLSv12-RSA-3DES     |   56 +-
 src/crypto/tls/testdata/Server-TLSv12-RSA-AES      |   60 +-
 src/crypto/tls/testdata/Server-TLSv12-RSA-AES-GCM  |   67 +-
 .../testdata/Server-TLSv12-RSA-AES256-GCM-SHA384   |   67 +-
 src/crypto/tls/testdata/Server-TLSv12-RSA-RC4      |   50 +-
 src/crypto/tls/testdata/Server-TLSv12-Resume       |   60 +-
 .../tls/testdata/Server-TLSv12-ResumeDisabled      |   70 +-
 src/crypto/tls/testdata/Server-TLSv12-SNI          |   44 +-
 .../tls/testdata/Server-TLSv12-SNI-GetCertificate  |   44 +-
 .../Server-TLSv12-SNI-GetCertificateNotFound       |   44 +-
 src/crypto/x509/root_unix.go                       |    1 +
 src/database/sql/sql.go                            |   10 +-
 src/debug/elf/elf.go                               |  109 +
 src/debug/elf/file.go                              |   54 +
 src/debug/elf/file_test.go                         |   38 +
 .../testdata/go-relocation-test-gcc492-mips64.obj  |  Bin 0 -> 4120 bytes
 .../go-relocation-test-gcc493-mips64le.obj         |  Bin 0 -> 4160 bytes
 src/encoding/asn1/asn1_test.go                     |    2 +-
 src/encoding/json/decode.go                        |    2 +-
 src/encoding/json/decode_test.go                   |   37 +-
 src/encoding/json/encode.go                        |    2 +-
 src/encoding/xml/marshal_test.go                   |   10 +
 src/encoding/xml/typeinfo.go                       |    2 +-
 src/fmt/scan.go                                    |    4 +-
 src/fmt/scan_test.go                               |    2 +
 src/go/build/build.go                              |    4 +-
 src/go/build/deps_test.go                          |   45 +-
 src/go/build/doc.go                                |    1 +
 src/go/internal/gcimporter/bimport.go              |  672 ++++
 src/go/internal/gcimporter/exportdata.go           |    9 +-
 src/go/internal/gcimporter/gcimporter.go           |   18 +-
 src/go/internal/gcimporter/gcimporter_test.go      |   76 +-
 src/go/types/typestring.go                         |    4 +-
 src/go/types/typestring_test.go                    |    1 +
 src/hash/crc32/crc32_generic.go                    |    2 +-
 src/html/template/clone_test.go                    |    2 +-
 src/html/template/template.go                      |    1 +
 src/html/template/template_test.go                 |   29 +
 src/internal/syscall/unix/getrandom_linux.go       |    9 -
 src/internal/syscall/unix/getrandom_linux_386.go   |    7 +
 src/internal/syscall/unix/getrandom_linux_amd64.go |    7 +
 src/internal/syscall/unix/getrandom_linux_arm.go   |    7 +
 .../syscall/unix/getrandom_linux_generic.go        |    9 +
 .../syscall/unix/getrandom_linux_mips64x.go        |    9 +
 .../syscall/unix/getrandom_linux_ppc64x.go         |    9 +
 src/log/syslog/syslog_test.go                      |   43 +-
 src/math/abs.go                                    |   13 +-
 src/math/abs_386.s                                 |   12 -
 src/math/abs_amd64.s                               |   14 -
 src/math/abs_arm.s                                 |   13 -
 src/math/abs_arm64.s                               |   11 -
 src/math/abs_ppc64x.s                              |   14 -
 src/math/all_test.go                               |   20 +
 src/math/big/arith_mips64x.s                       |   46 +
 src/math/big/float.go                              |    2 +-
 src/math/expm1.go                                  |    2 +-
 src/math/rand/rand.go                              |    5 +
 src/math/sqrt.go                                   |    2 +-
 src/math/stubs_mips64x.s                           |   91 +
 src/net/error_test.go                              |   44 +-
 src/net/http/client_test.go                        |   10 +-
 src/net/http/export_test.go                        |    2 +
 src/net/http/fs_test.go                            |   10 +-
 src/net/http/h2_bundle.go                          | 1564 ++++++---
 src/net/http/httptest/recorder.go                  |   37 +-
 src/net/http/httptest/recorder_test.go             |   38 +-
 src/net/http/httptest/server.go                    |  248 +-
 src/net/http/httptest/server_test.go               |   57 +
 src/net/http/httputil/reverseproxy.go              |   21 +-
 src/net/http/httputil/reverseproxy_test.go         |   68 +
 src/net/http/internal/chunked.go                   |   35 +-
 src/net/http/internal/chunked_test.go              |   15 +
 src/net/http/internal/testcert.go                  |   41 +
 src/net/http/method.go                             |   20 +
 src/net/http/request.go                            |   20 +
 src/net/http/request_test.go                       |   16 +
 src/net/http/serve_test.go                         |   96 +-
 src/net/http/server.go                             |   56 +-
 src/net/http/transport.go                          |   76 +-
 src/net/http/transport_test.go                     |    1 +
 src/net/interface_windows.go                       |    2 +-
 src/net/ipsock.go                                  |    2 +-
 src/net/lookup.go                                  |   13 +-
 src/net/net_test.go                                |   23 +
 src/net/net_windows_test.go                        |   83 +
 src/net/parse.go                                   |   14 +-
 src/net/parse_test.go                              |   22 +
 src/net/port.go                                    |   24 -
 src/net/port_test.go                               |   12 +-
 src/net/rpc/server_test.go                         |   24 +
 src/net/url/url.go                                 |    6 +-
 src/os/error.go                                    |    2 +-
 src/os/exec/exec.go                                |  110 +-
 src/os/exec/exec_test.go                           |   19 +
 src/os/exec/internal_test.go                       |   61 +
 src/os/file_unix.go                                |   25 +-
 src/os/os_test.go                                  |   44 +-
 src/os/path_test.go                                |    2 +-
 src/os/signal/example_test.go                      |    2 +-
 src/os/stat_darwin.go                              |   28 +-
 src/os/stat_dragonfly.go                           |   28 +-
 src/os/stat_freebsd.go                             |   28 +-
 src/os/stat_linux.go                               |   28 +-
 src/os/stat_nacl.go                                |   28 +-
 src/os/stat_netbsd.go                              |   28 +-
 src/os/stat_openbsd.go                             |   28 +-
 src/os/stat_solaris.go                             |   28 +-
 src/os/{types_notwin.go => types_plan9.go}         |    6 +-
 src/os/types_unix.go                               |   27 +
 src/path/filepath/match_test.go                    |    2 +-
 src/path/filepath/path.go                          |    4 +-
 src/path/filepath/path_plan9.go                    |    4 +
 src/path/filepath/path_test.go                     |  107 +-
 src/path/filepath/path_unix.go                     |    4 +
 src/path/filepath/path_windows.go                  |    4 +
 src/path/filepath/path_windows_test.go             |   63 +
 src/path/filepath/symlink.go                       |  125 +-
 src/path/filepath/symlink_windows.go               |    6 +-
 src/reflect/all_test.go                            |  190 ++
 src/reflect/asm_mips64x.s                          |   34 +
 src/reflect/export_test.go                         |    4 +-
 src/reflect/type.go                                |    4 +-
 src/reflect/value.go                               |   27 +-
 src/regexp/all_test.go                             |    6 +
 src/regexp/regexp.go                               |    4 +
 src/runtime/alg.go                                 |   31 +-
 src/runtime/arch_386.go                            |   19 -
 src/runtime/arch_amd64.go                          |   19 -
 src/runtime/arch_amd64p32.go                       |   19 -
 src/runtime/arch_arm.go                            |   19 -
 src/runtime/arch_arm64.go                          |   19 -
 src/runtime/arch_ppc64.go                          |   19 -
 src/runtime/arch_ppc64le.go                        |   19 -
 src/runtime/asm_386.s                              |  176 +-
 src/runtime/asm_amd64.s                            |  452 ++-
 src/runtime/asm_amd64p32.s                         |  146 +-
 src/runtime/asm_arm.s                              |   71 +-
 src/runtime/asm_arm64.s                            |   59 +-
 src/runtime/asm_mips64x.s                          |  820 +++++
 src/runtime/asm_ppc64x.h                           |   14 +-
 src/runtime/asm_ppc64x.s                           |  287 +-
 src/runtime/atomic_arm.go                          |  165 -
 src/runtime/atomic_arm64.s                         |  108 -
 src/runtime/atomic_mips64x.s                       |   13 +
 src/runtime/atomic_pointer.go                      |   11 +-
 src/runtime/atomic_ppc64x.go                       |   57 -
 src/runtime/atomic_ppc64x.s                        |   33 -
 src/runtime/cgo/gcc_android_386.c                  |   87 +
 src/runtime/cgo/gcc_android_amd64.c                |   92 +
 src/runtime/cgo/gcc_linux_386.c                    |   12 +
 src/runtime/cgo/gcc_linux_amd64.c                  |   12 +
 src/runtime/cgo/gcc_ppc64x.S                       |    1 +
 src/runtime/cgo_ppc64x.go                          |   12 +
 src/runtime/cgocall.go                             |  279 +-
 src/runtime/cgocheck.go                            |  243 ++
 src/runtime/chan.go                                |  514 ++-
 src/runtime/cpuprof.go                             |   13 +-
 src/runtime/cputicks.go                            |    2 +
 src/runtime/crash_cgo_test.go                      |    2 +-
 src/runtime/debug.go                               |    7 +-
 src/runtime/debug/garbage_test.go                  |    2 +-
 src/runtime/defs_linux_amd64.go                    |    9 +
 src/runtime/defs_linux_mips64x.go                  |  183 ++
 src/runtime/duff_mips64x.s                         |  268 ++
 src/runtime/env_plan9.go                           |    4 +-
 src/runtime/env_posix.go                           |    3 +-
 src/runtime/error.go                               |    4 +-
 src/runtime/export_test.go                         |   16 +-
 src/runtime/export_windows_test.go                 |    8 +
 src/runtime/extern.go                              |   40 +-
 src/runtime/gc_test.go                             |    6 +-
 src/runtime/gcinfo_test.go                         |    2 +-
 src/runtime/hash64.go                              |    2 +-
 src/runtime/hashmap.go                             |   57 +-
 src/runtime/hashmap_fast.go                        |   74 +-
 src/runtime/heapdump.go                            |   37 +-
 src/runtime/iface.go                               |  209 +-
 src/runtime/internal/atomic/asm.s                  |    8 +
 src/runtime/internal/atomic/asm_386.s              |  166 +
 src/runtime/internal/atomic/asm_amd64.s            |  150 +
 src/runtime/internal/atomic/asm_amd64p32.s         |  150 +
 src/runtime/internal/atomic/asm_arm.s              |   71 +
 src/runtime/internal/atomic/asm_arm64.s            |   58 +
 src/runtime/internal/atomic/asm_mips64x.s          |  231 ++
 src/runtime/internal/atomic/asm_ppc64x.s           |  225 ++
 src/runtime/{ => internal/atomic}/atomic_386.go    |   39 +-
 src/runtime/{ => internal/atomic}/atomic_amd64x.go |   32 +-
 src/runtime/internal/atomic/atomic_arm.go          |  183 ++
 src/runtime/{ => internal/atomic}/atomic_arm64.go  |   39 +-
 src/runtime/internal/atomic/atomic_arm64.s         |  113 +
 src/runtime/internal/atomic/atomic_mips64x.go      |   56 +
 src/runtime/internal/atomic/atomic_mips64x.s       |   36 +
 src/runtime/internal/atomic/atomic_ppc64x.go       |   56 +
 src/runtime/internal/atomic/atomic_ppc64x.s        |   40 +
 src/runtime/{ => internal/atomic}/atomic_test.go   |   15 +-
 src/runtime/internal/atomic/stubs.go               |   35 +
 src/runtime/internal/atomic/sys_darwin_arm.s       |   11 +
 src/runtime/internal/atomic/sys_freebsd_arm.s      |   19 +
 src/runtime/internal/atomic/sys_linux_arm.s        |   42 +
 src/runtime/internal/atomic/sys_nacl_arm.s         |   16 +
 src/runtime/internal/atomic/sys_netbsd_arm.s       |   21 +
 src/runtime/internal/atomic/sys_openbsd_arm.s      |   11 +
 src/runtime/internal/sys/arch_386.go               |   18 +
 src/runtime/internal/sys/arch_amd64.go             |   18 +
 src/runtime/internal/sys/arch_amd64p32.go          |   18 +
 src/runtime/internal/sys/arch_arm.go               |   18 +
 src/runtime/internal/sys/arch_arm64.go             |   18 +
 src/runtime/internal/sys/arch_mips64.go            |   18 +
 src/runtime/internal/sys/arch_mips64le.go          |   18 +
 src/runtime/internal/sys/arch_ppc64.go             |   18 +
 src/runtime/internal/sys/arch_ppc64le.go           |   18 +
 src/runtime/{ => internal/sys}/gengoos.go          |   14 +-
 src/runtime/internal/sys/stubs.go                  |   11 +
 src/runtime/internal/sys/sys.go                    |   15 +
 src/runtime/internal/sys/zgoarch_386.go            |   26 +
 src/runtime/internal/sys/zgoarch_amd64.go          |   26 +
 src/runtime/internal/sys/zgoarch_amd64p32.go       |   26 +
 src/runtime/internal/sys/zgoarch_arm.go            |   26 +
 src/runtime/internal/sys/zgoarch_arm64.go          |   26 +
 src/runtime/internal/sys/zgoarch_mips64.go         |   26 +
 src/runtime/internal/sys/zgoarch_mips64le.go       |   26 +
 src/runtime/internal/sys/zgoarch_ppc64.go          |   26 +
 src/runtime/internal/sys/zgoarch_ppc64le.go        |   26 +
 src/runtime/internal/sys/zgoos_android.go          |   17 +
 src/runtime/internal/sys/zgoos_darwin.go           |   17 +
 src/runtime/internal/sys/zgoos_dragonfly.go        |   17 +
 src/runtime/internal/sys/zgoos_freebsd.go          |   17 +
 src/runtime/internal/sys/zgoos_linux.go            |   19 +
 src/runtime/internal/sys/zgoos_nacl.go             |   17 +
 src/runtime/internal/sys/zgoos_netbsd.go           |   17 +
 src/runtime/internal/sys/zgoos_openbsd.go          |   17 +
 src/runtime/internal/sys/zgoos_plan9.go            |   17 +
 src/runtime/internal/sys/zgoos_solaris.go          |   17 +
 src/runtime/internal/sys/zgoos_windows.go          |   17 +
 src/runtime/lfstack.go                             |   17 +-
 src/runtime/lfstack_linux_mips64x.go               |   32 +
 src/runtime/lock_futex.go                          |   27 +-
 src/runtime/lock_sema.go                           |   65 +-
 src/runtime/malloc.go                              |  112 +-
 src/runtime/malloc_test.go                         |   17 +
 src/runtime/mbarrier.go                            |   51 +-
 src/runtime/mbitmap.go                             |  182 +-
 src/runtime/mcache.go                              |   14 +-
 src/runtime/mcentral.go                            |   72 +-
 src/runtime/mem_bsd.go                             |    7 +-
 src/runtime/mem_linux.go                           |   25 +-
 src/runtime/memclr_386.s                           |   11 +-
 src/runtime/memclr_amd64.s                         |    9 +-
 src/runtime/memclr_mips64x.s                       |   42 +
 src/runtime/memclr_plan9_386.s                     |   11 +-
 src/runtime/memmove_386.s                          |   14 +-
 src/runtime/memmove_amd64.s                        |   10 +-
 src/runtime/memmove_mips64x.s                      |  105 +
 src/runtime/memmove_nacl_amd64p32.s                |    3 +
 src/runtime/memmove_plan9_386.s                    |   14 +-
 src/runtime/memmove_plan9_amd64.s                  |   10 +-
 src/runtime/mfinal.go                              |   49 +-
 src/runtime/mfixalloc.go                           |   14 +-
 src/runtime/mgc.go                                 |  841 ++---
 src/runtime/mgcmark.go                             |  492 ++-
 src/runtime/mgcsweep.go                            |  111 +-
 src/runtime/mgcwork.go                             |  175 +-
 src/runtime/mheap.go                               |  345 +-
 src/runtime/mkduff.go                              |   23 +
 src/runtime/mprof.go                               |   18 +-
 src/runtime/msan.go                                |   55 +
 src/runtime/msan/msan.go                           |   32 +
 src/runtime/msan0.go                               |   22 +
 src/runtime/msan_amd64.s                           |   76 +
 src/runtime/mstats.go                              |   20 +-
 src/runtime/mstkbar.go                             |   17 +-
 src/runtime/netpoll.go                             |   17 +-
 src/runtime/noasm.go                               |    2 +-
 src/runtime/os1_darwin.go                          |   18 +-
 src/runtime/os1_dragonfly.go                       |    4 +-
 src/runtime/os1_freebsd.go                         |   10 +-
 src/runtime/os1_linux.go                           |   32 +-
 src/runtime/os1_linux_generic.go                   |   27 +
 src/runtime/os1_linux_mips64x.go                   |   26 +
 src/runtime/os1_nacl.go                            |   30 +-
 src/runtime/os1_netbsd.go                          |   18 +-
 src/runtime/os1_openbsd.go                         |   18 +-
 src/runtime/os1_plan9.go                           |   10 +-
 src/runtime/os1_windows.go                         |  121 +-
 src/runtime/{os2_linux.go => os2_linux_generic.go} |    4 +
 src/runtime/os2_linux_mips64x.go                   |   25 +
 src/runtime/os3_plan9.go                           |   15 +-
 src/runtime/os3_solaris.go                         |    8 +-
 src/runtime/os_darwin.go                           |    4 +
 src/runtime/os_dragonfly.go                        |    2 +
 src/runtime/os_freebsd.go                          |    2 +
 src/runtime/os_linux.go                            |    2 +
 src/runtime/os_linux_386.go                        |    7 +-
 src/runtime/os_linux_arm.go                        |    7 +-
 src/runtime/os_linux_mips64x.go                    |   18 +
 src/runtime/os_nacl.go                             |    6 +
 src/runtime/os_netbsd.go                           |    4 +
 src/runtime/os_openbsd.go                          |    4 +
 src/runtime/os_plan9.go                            |    6 +
 src/runtime/os_solaris.go                          |   19 +
 src/runtime/os_windows.go                          |    4 +
 src/runtime/panic.go                               |   20 +-
 src/runtime/parfor.go                              |   35 +-
 src/runtime/pprof/mprof_test.go                    |   15 +-
 src/runtime/print.go                               |   22 +-
 src/runtime/proc.go                                |  259 +-
 src/runtime/race/README                            |   11 +-
 src/runtime/race/race_darwin_amd64.syso            |  Bin 314000 -> 300192 bytes
 src/runtime/race/race_freebsd_amd64.syso           |  Bin 316816 -> 368688 bytes
 src/runtime/race/race_linux_amd64.syso             |  Bin 330232 -> 352664 bytes
 src/runtime/race/race_windows_amd64.syso           |  Bin 331489 -> 349411 bytes
 src/runtime/race/testdata/mop_test.go              |    8 +-
 src/runtime/race/testdata/regression_test.go       |    9 +-
 src/runtime/rt0_android_386.s                      |   32 +
 src/runtime/rt0_android_amd64.s                    |   33 +
 src/runtime/rt0_linux_arm64.s                      |   44 +
 src/runtime/rt0_linux_mips64x.s                    |   31 +
 src/runtime/rt0_linux_ppc64le.s                    |    3 +-
 src/runtime/rt0_plan9_386.s                        |    2 -
 src/runtime/rt0_plan9_amd64.s                      |    2 -
 src/runtime/rt0_solaris_amd64.s                    |    3 -
 src/runtime/rt0_windows_386.s                      |    4 -
 src/runtime/rt0_windows_amd64.s                    |    3 -
 src/runtime/runtime-gdb_test.go                    |    2 +-
 src/runtime/runtime.go                             |   11 +-
 src/runtime/runtime1.go                            |  121 +-
 src/runtime/runtime2.go                            |   72 +-
 src/runtime/select.go                              |  138 +-
 src/runtime/sema.go                                |   24 +-
 src/runtime/signal1_unix.go                        |    4 +-
 src/runtime/signal_386.go                          |   15 +-
 src/runtime/signal_amd64x.go                       |   11 +-
 src/runtime/signal_arm.go                          |    4 +-
 src/runtime/signal_arm64.go                        |   11 +-
 src/runtime/signal_linux.go                        |   73 -
 src/runtime/signal_linux_386.go                    |    7 +-
 src/runtime/signal_linux_amd64.go                  |    7 +-
 src/runtime/signal_linux_arm.go                    |    7 +-
 src/runtime/signal_linux_arm64.go                  |    7 +-
 src/runtime/signal_linux_mips64x.go                |   70 +
 src/runtime/signal_linux_ppc64x.go                 |    7 +-
 src/runtime/signal_mips64x.go                      |  183 ++
 src/runtime/signal_plan9.go                        |    3 +
 src/runtime/signal_ppc64x.go                       |   11 +-
 src/runtime/signal_windows.go                      |    4 +-
 src/runtime/sigqueue.go                            |   21 +-
 src/runtime/sigtab_linux_generic.go                |   82 +
 src/runtime/sigtab_linux_mips64x.go                |   81 +
 src/runtime/slice.go                               |   14 +-
 src/runtime/sqrt.go                                |    2 +-
 src/runtime/sqrt_test.go                           |    2 +
 src/runtime/stack.go                               |   93 +-
 src/runtime/string.go                              |   32 +-
 src/runtime/stubs.go                               |   42 -
 src/runtime/stubs_android.go                       |    8 +-
 src/runtime/symtab.go                              |   81 +-
 src/runtime/sys_darwin_386.s                       |    4 +-
 src/runtime/sys_darwin_arm.s                       |   10 +-
 src/runtime/sys_darwin_arm64.s                     |    4 +-
 src/runtime/sys_freebsd_386.s                      |    2 +-
 src/runtime/sys_freebsd_arm.s                      |   14 -
 src/runtime/sys_linux_386.s                        |  128 +-
 src/runtime/sys_linux_amd64.s                      |   38 +-
 src/runtime/sys_linux_arm.s                        |   29 -
 src/runtime/sys_linux_mips64x.s                    |  427 +++
 src/runtime/sys_linux_ppc64x.s                     |    2 +
 src/runtime/sys_mips64x.go                         |   43 +
 src/runtime/sys_nacl_arm.s                         |   15 -
 src/runtime/sys_netbsd_arm.s                       |   14 -
 src/runtime/sys_nonppc64x.go                       |   10 +
 src/runtime/sys_openbsd_amd64.s                    |    2 +-
 src/runtime/sys_openbsd_arm.s                      |    7 -
 src/runtime/sys_plan9_386.s                        |    2 +-
 src/runtime/sys_plan9_amd64.s                      |    2 +-
 src/runtime/sys_ppc64x.go                          |    2 +
 src/runtime/sys_solaris_amd64.s                    |   14 +-
 src/runtime/sys_x86.go                             |   11 +-
 src/runtime/syscall_windows.go                     |    8 +-
 src/runtime/syscall_windows_test.go                |  153 +
 src/runtime/tls_arm64.s                            |   12 +-
 src/runtime/tls_mips64x.s                          |   23 +
 src/runtime/tls_ppc64x.s                           |   21 +-
 src/runtime/trace.go                               |  253 +-
 src/runtime/traceback.go                           |   54 +-
 src/runtime/type.go                                |   24 +-
 src/runtime/unaligned2.go                          |    2 +-
 src/runtime/vdso_linux_amd64.go                    |    7 +-
 src/runtime/{print1_write.go => write_err.go}      |    0
 ...rint1_write_android.go => write_err_android.go} |    2 +-
 src/runtime/zgoarch_386.go                         |   13 -
 src/runtime/zgoarch_amd64.go                       |   13 -
 src/runtime/zgoarch_amd64p32.go                    |   13 -
 src/runtime/zgoarch_arm.go                         |   13 -
 src/runtime/zgoarch_arm64.go                       |   13 -
 src/runtime/zgoarch_ppc64.go                       |   13 -
 src/runtime/zgoarch_ppc64le.go                     |   13 -
 src/runtime/zgoos_android.go                       |   17 -
 src/runtime/zgoos_darwin.go                        |   17 -
 src/runtime/zgoos_dragonfly.go                     |   17 -
 src/runtime/zgoos_freebsd.go                       |   17 -
 src/runtime/zgoos_linux.go                         |   19 -
 src/runtime/zgoos_nacl.go                          |   17 -
 src/runtime/zgoos_netbsd.go                        |   17 -
 src/runtime/zgoos_openbsd.go                       |   17 -
 src/runtime/zgoos_plan9.go                         |   17 -
 src/runtime/zgoos_solaris.go                       |   17 -
 src/runtime/zgoos_windows.go                       |   17 -
 src/strings/example_test.go                        |   22 +
 src/strings/strings.go                             |   37 -
 src/strings/strings_amd64.go                       |   49 +
 src/strings/strings_generic.go                     |   47 +
 src/strings/strings_test.go                        |   53 +
 src/sync/atomic/asm_linux_arm.s                    |    2 +-
 src/sync/atomic/asm_mips64x.s                      |  181 +
 src/syscall/asm_linux_mips64x.s                    |  104 +
 src/syscall/errors_plan9.go                        |   10 +
 src/syscall/exec_bsd.go                            |    1 +
 src/syscall/exec_linux.go                          |    1 +
 src/syscall/exec_plan9.go                          |    1 +
 src/syscall/exec_solaris.go                        |    1 +
 src/syscall/msan.go                                |   22 +
 src/syscall/msan0.go                               |   19 +
 src/syscall/net_nacl.go                            |    4 +-
 src/syscall/syscall_linux.go                       |    4 +-
 src/syscall/syscall_linux_386.go                   |    5 +-
 src/syscall/syscall_linux_amd64.go                 |    5 +-
 src/syscall/syscall_linux_arm.go                   |    5 +-
 src/syscall/syscall_linux_arm64.go                 |    5 +-
 src/syscall/syscall_linux_mips64x.go               |  210 ++
 src/syscall/syscall_linux_ppc64x.go                |    5 +-
 src/syscall/syscall_unix.go                        |    6 +
 src/syscall/syscall_windows.go                     |    6 +
 src/syscall/types_linux.go                         |    2 +
 src/syscall/zerrors_linux_mips64.go                | 1817 +++++++++++
 src/syscall/zerrors_linux_mips64le.go              | 1817 +++++++++++
 src/syscall/zsyscall_linux_386.go                  |    2 +-
 src/syscall/zsyscall_linux_amd64.go                |    2 +-
 src/syscall/zsyscall_linux_arm.go                  |    2 +-
 src/syscall/zsyscall_linux_arm64.go                |    2 +-
 src/syscall/zsyscall_linux_mips64.go               | 1765 ++++++++++
 src/syscall/zsyscall_linux_mips64le.go             | 1765 ++++++++++
 src/syscall/zsyscall_linux_ppc64.go                |    2 +-
 src/syscall/zsyscall_linux_ppc64le.go              |    2 +-
 src/syscall/zsysnum_linux_mips64.go                |  323 ++
 src/syscall/zsysnum_linux_mips64le.go              |  323 ++
 src/syscall/ztypes_linux_mips64.go                 |  602 ++++
 src/syscall/ztypes_linux_mips64le.go               |  602 ++++
 src/testing/testing.go                             |    6 +-
 src/text/template/exec.go                          |    3 +-
 src/unicode/utf8/utf8.go                           |   24 +-
 src/unicode/utf8/utf8_test.go                      |   56 +-
 src/vendor/golang.org/x/net/http2/hpack/hpack.go   |    6 +
 test/finprofiled.go                                |   74 +
 test/fixedbugs/bug358.go                           |    7 +-
 test/fixedbugs/bug401.go                           |    3 +-
 test/fixedbugs/bug484.go                           |   26 +-
 test/fixedbugs/gcc67968.dir/a.go                   |   12 +
 test/fixedbugs/gcc67968.dir/b.go                   |   12 +
 test/fixedbugs/gcc67968.go                         |   14 +
 test/fixedbugs/issue10441.go                       |    2 +-
 test/fixedbugs/issue10607.go                       |    2 +-
 test/fixedbugs/issue11359.go                       |   11 +
 test/fixedbugs/issue11590.go                       |   11 +
 test/fixedbugs/issue11656.go                       |    4 +
 test/fixedbugs/issue11699.go                       |   12 +
 test/fixedbugs/issue11987.go                       |   23 +
 test/fixedbugs/issue12133.go                       |    4 +-
 test/fixedbugs/issue12413.go                       |   19 +
 test/fixedbugs/issue12577.go                       |   66 +
 test/fixedbugs/issue13160.go                       |   70 +
 test/fixedbugs/issue13169.go                       |   49 +
 test/fixedbugs/issue13171.go                       |   34 +
 test/fixedbugs/issue4518.go                        |    6 +-
 test/fixedbugs/issue4964.dir/a.go                  |    6 +-
 test/fixedbugs/issue7995b.dir/x1.go                |    6 +-
 test/fixedbugs/issue8036.go                        |    4 +-
 test/func8.go                                      |    6 +-
 test/heapsampling.go                               |    6 +
 test/inline.go                                     |    9 +
 test/nilptr3.go                                    |    3 +-
 test/nosplit.go                                    |   63 +-
 test/reorder2.go                                   |   24 +-
 test/syntax/chan.go                                |    6 +-
 test/syntax/forvar.go                              |    1 +
 test/syntax/semi4.go                               |    2 +-
 test/syntax/semi6.go                               |    6 +-
 test/syntax/semi7.go                               |    2 +-
 test/syntax/vareq1.go                              |    2 +-
 test/tinyfin.go                                    |   66 +-
 749 files changed, 47530 insertions(+), 17099 deletions(-)
