commit 41352fd401f4f22eceeca375361e018ea787f0fd
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Jan 12 12:12:27 2021 -0800

    [dev.regabi] cmd/compile: transform closures during walk
    
    We used to transform directly called closures in a separate pass
    before walk, because we couldn't guarantee whether we'd see the
    closure call or the closure itself first. As of the last CL, this
    ordering is always guaranteed, so we can rewrite calls and the closure
    at the same time.
    
    Change-Id: Ia6f4d504c24795e41500108589b53395d301123b
    Reviewed-on: https://go-review.googlesource.com/c/go/+/283315
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Trust: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/gc/main.go      | 15 -----
 src/cmd/compile/internal/walk/closure.go | 99 +++++++++++++++++++-------------
 src/cmd/compile/internal/walk/expr.go    | 23 +-------
 3 files changed, 61 insertions(+), 76 deletions(-)
