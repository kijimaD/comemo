commit cb7d0efc2380b1231bc858058ac9f0032a8002ea
Author: Russ Cox <rsc@golang.org>
Date:   Thu Aug 9 16:16:43 2018 -0400

    cmd/go: fix go.mod corruption using -mod=vendor
    
    If we're using -mod=vendor then we effectively load
    a fake build list from vendor/modules.txt.
    Do not write it back to go.mod.
    
    Fixes #26704.
    
    Change-Id: Ie79f2103dc16d0b7fe0c884e77ba726c7e04f2e4
    Reviewed-on: https://go-review.googlesource.com/128899
    Reviewed-by: Bryan C. Mills <bcmills@google.com>

 src/cmd/go/internal/modload/init.go             |  5 ++++-
 src/cmd/go/testdata/script/mod_vendor_build.txt | 27 +++++++++++++++++++++++++
 2 files changed, 31 insertions(+), 1 deletion(-)
