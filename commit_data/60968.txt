commit 2c5b707b3b30ea194877600151a7c299671cab3a
Author: Xiaolin Zhao <zhaoxiaolin@loongson.cn>
Date:   Mon Aug 12 17:20:44 2024 +0800

    cmd/compile: optimize RotateLeft8/16 on loong64
    
    goos: linux
    goarch: loong64
    pkg: math/bits
    cpu: Loongson-3A6000 @ 2500.00MHz
                 │  bench.old   │              bench.new               │
                 │    sec/op    │    sec/op     vs base                │
    RotateLeft8     1.401n ± 0%    1.201n ± 0%  -14.28% (p=0.000 n=20)
    RotateLeft16   1.4010n ± 0%   0.8032n ± 0%  -42.67% (p=0.000 n=20)
    geomean         1.401n        0.9822n       -29.90%
    
    goos: linux
    goarch: loong64
    pkg: math/bits
    cpu: Loongson-3A5000 @ 2500.00MHz
                 │  bench.old  │              bench.new              │
                 │   sec/op    │   sec/op     vs base                │
    RotateLeft8    1.576n ± 0%   1.310n ± 0%  -16.88% (p=0.000 n=20)
    RotateLeft16   1.576n ± 0%   1.166n ± 0%  -26.02% (p=0.000 n=20)
    geomean        1.576n        1.236n       -21.58%
    
    Change-Id: I39c18306be0b8fd31b57bd0911714abd1783b50e
    Reviewed-on: https://go-review.googlesource.com/c/go/+/604738
    Auto-Submit: abner chenc <chenguoqi@loongson.cn>
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    Reviewed-by: abner chenc <chenguoqi@loongson.cn>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Tim King <taking@google.com>

 src/cmd/compile/internal/ssa/_gen/LOONG64.rules |  2 ++
 src/cmd/compile/internal/ssa/rewrite.go         |  4 +--
 src/cmd/compile/internal/ssa/rewriteLOONG64.go  | 47 +++++++++++++++++++++++--
 test/codegen/mathbits.go                        |  7 ++++
 4 files changed, 56 insertions(+), 4 deletions(-)
