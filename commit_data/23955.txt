commit 8c46aa54817063a39dc25bad343d6322e65f8598
Author: Keith Randall <khr@golang.org>
Date:   Fri Jun 19 21:02:28 2015 -0700

    [dev.ssa] cmd/compile/internal/ssa: Handle variables correctly
    
    Use *Node of type ONAME instead of string as the key for variable maps.
    This will prevent aliasing between two identically named but
    differently scoped variables.
    
    Introduce an Aux value that encodes the offset of a variable
    from a base pointer (either global base pointer or stack pointer).
    
    Allow LEAQ and derivatives (MOVQ, etc.) to also have such an Aux field.
    
    Allocate space for AUTO variables in stackalloc.
    
    Change-Id: Ibdccdaea4bbc63a1f4882959ac374f2b467e3acd
    Reviewed-on: https://go-review.googlesource.com/11238
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

 src/cmd/compile/internal/gc/ssa.go             | 171 ++++++++++++++++++-------
 src/cmd/compile/internal/ssa/TODO              |   8 ++
 src/cmd/compile/internal/ssa/check.go          |   6 +
 src/cmd/compile/internal/ssa/deadstore.go      |   2 +-
 src/cmd/compile/internal/ssa/deadstore_test.go |  10 +-
 src/cmd/compile/internal/ssa/gen/AMD64.rules   |  10 +-
 src/cmd/compile/internal/ssa/gen/AMD64Ops.go   |  27 ++--
 src/cmd/compile/internal/ssa/gen/generic.rules |   2 +-
 src/cmd/compile/internal/ssa/gen/genericOps.go |  16 ++-
 src/cmd/compile/internal/ssa/lower.go          |   2 +-
 src/cmd/compile/internal/ssa/opGen.go          | 156 +++++++++++-----------
 src/cmd/compile/internal/ssa/regalloc.go       |  22 ++--
 src/cmd/compile/internal/ssa/rewrite.go        |  11 ++
 src/cmd/compile/internal/ssa/rewriteAMD64.go   |  94 +++++++++++---
 src/cmd/compile/internal/ssa/rewritegeneric.go |  21 +--
 src/cmd/compile/internal/ssa/shift_test.go     |   6 +-
 src/cmd/compile/internal/ssa/stackalloc.go     |  58 +++------
 src/cmd/compile/internal/ssa/value.go          |  37 ++++++
 18 files changed, 425 insertions(+), 234 deletions(-)
