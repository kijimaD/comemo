commit d6d467372854124795cdd11429244ef1e28b809c
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Jan 12 23:55:08 2021 -0800

    [dev.regabi] cmd/compile: fix GOEXPERIMENT=regabi builder
    
    I misread the FIXME comment in InitLSym the first time. It's referring
    to how InitLSym is supposed to be called exactly once per
    function (see function documentation), but this is evidently not
    actually the case currently in GOEXPERIMENT=regabi mode.
    
    So just move the NeedFuncSym call below the GOEXPERIMENT=regabi
    workaround.
    
    Also, to fix the linux-arm64-{aws,packet} builders, move the call to
    reflectdata.WriteFuncSyms() to after the second batch of functions are
    compiled. This is necessary to make sure we catch all the funcsyms
    that can be added by late function compilation.
    
    Change-Id: I6d6396d48e2ee29c1fb007fa2b99e065b36375db
    Reviewed-on: https://go-review.googlesource.com/c/go/+/283552
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Trust: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/compile/internal/gc/obj.go     | 2 +-
 src/cmd/compile/internal/ssagen/abi.go | 3 +--
 2 files changed, 2 insertions(+), 3 deletions(-)
