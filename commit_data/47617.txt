commit 51cd074c59c770484e7db4788d968c408a278607
Author: Michael Anthony Knyszek <mknyszek@google.com>
Date:   Tue Mar 30 22:33:28 2021 +0000

    reflect: undo register count increments on register assignment failure
    
    Currently when register assignment fails we roll back all the abiParts
    that were generated in the process. However, the total number of
    registers also increases, but does not get rolled back. The result is
    a very incorrect register assignment.
    
    For #40724.
    For #44816.
    
    Change-Id: I1934ea5f95f7608ff2067166255099dbc9135e8c
    Reviewed-on: https://go-review.googlesource.com/c/go/+/306109
    Trust: Michael Knyszek <mknyszek@google.com>
    Run-TryBot: Michael Knyszek <mknyszek@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

 src/reflect/abi.go      | 8 +++++++-
 src/reflect/abi_test.go | 9 +++++++++
 2 files changed, 16 insertions(+), 1 deletion(-)
