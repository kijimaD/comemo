commit ffe48e00adf3078944015186819a1ed5c6aa8bec
Author: Russ Cox <rsc@golang.org>
Date:   Wed Jan 26 16:56:00 2022 -0500

    sync/atomic: add typed atomic values
    
    These implementations will inline to the lower-level primitives,
    but they hide the underlying values so that all accesses are
    forced to use the atomic APIs. They also allow the use of shorter
    names (methods instead of functions) at call sites, making code
    more readable.
    
    Pointer[T] also avoids conversions using unsafe.Pointer at call sites.
    
    Discussed on #47141.
    See also https://research.swtch.com/gomm for background.
    
    Fixes #50860.
    
    Change-Id: I0b178ee0c7747fa8985f8e48cd7b01063feb7dcc
    Reviewed-on: https://go-review.googlesource.com/c/go/+/381317
    Reviewed-by: Michael Pratt <mpratt@google.com>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 api/next/50860.txt                        |   40 +
 src/cmd/compile/internal/test/inl_test.go |   38 +
 src/cmd/compile/internal/types/size.go    |    9 +
 src/sync/atomic/atomic_test.go            | 1149 ++++++++++++++++++++++++++++-
 src/sync/atomic/type.go                   |  191 +++++
 5 files changed, 1415 insertions(+), 12 deletions(-)
