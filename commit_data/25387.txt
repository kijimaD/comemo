commit 31115a5c98935b5dee2de73b991bc391141dfb9d
Author: Keith Randall <khr@golang.org>
Date:   Fri Oct 23 19:12:49 2015 -0700

    [dev.ssa] cmd/compile: optimize nil checks
    
    Use faulting loads instead of test/jeq to do nil checks.
    Fold nil checks into a following load/store if possible.
    
    Makes binaries about 2% smaller.
    
    Change-Id: I54af0f0a93c853f37e34e0ce7e3f01dd2ac87f64
    Reviewed-on: https://go-review.googlesource.com/16287
    Reviewed-by: David Chase <drchase@google.com>

 src/cmd/compile/internal/gc/ssa.go             | 70 +++++++++++++++++---------
 src/cmd/compile/internal/gc/type.go            |  1 +
 src/cmd/compile/internal/ssa/check.go          | 10 ++++
 src/cmd/compile/internal/ssa/dom.go            |  2 +-
 src/cmd/compile/internal/ssa/gen/AMD64.rules   |  2 +-
 src/cmd/compile/internal/ssa/gen/AMD64Ops.go   |  4 +-
 src/cmd/compile/internal/ssa/gen/generic.rules |  2 +-
 src/cmd/compile/internal/ssa/gen/genericOps.go |  4 +-
 src/cmd/compile/internal/ssa/gen/rulegen.go    |  2 +-
 src/cmd/compile/internal/ssa/nilcheck.go       | 24 +++++++--
 src/cmd/compile/internal/ssa/opGen.go          | 25 +++++----
 src/cmd/compile/internal/ssa/regalloc.go       |  2 +-
 src/cmd/compile/internal/ssa/rewriteAMD64.go   | 36 ++++++-------
 src/cmd/compile/internal/ssa/rewritegeneric.go | 26 +++++-----
 src/cmd/compile/internal/ssa/type.go           |  4 ++
 src/cmd/compile/internal/ssa/type_test.go      |  1 +
 16 files changed, 136 insertions(+), 79 deletions(-)
