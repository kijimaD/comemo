commit 583419e5d2a893e369095355035f4ebb18bb85f8
Author: Bryan C. Mills <bcmills@google.com>
Date:   Wed Dec 11 09:12:25 2019 -0500

    cmd/go/internal/{test,vet}: use a standard flag.FlagSet to parse flags
    
    This removes much of the complexity of the implementation and use of
    the cmd/go/internal/cmdflag package, and makes the behavior of GOFLAGS
    in 'go test' and 'go vet' more consistent with other subcommands.
    
    Some of the complexity reduction has been offset by code comments and
    bug fixes, particularly for the handling of GOPATH arguments and flag
    terminators ('--').
    
    Fixes #32471
    Fixes #18682
    
    Change-Id: I1f6e46a7c679062e1e409e44a2b9f03b9172883b
    Reviewed-on: https://go-review.googlesource.com/c/go/+/211358
    Reviewed-by: Jay Conrod <jayconrod@google.com>

 doc/go1.15.html                           |  11 +
 src/cmd/go/internal/base/goflags.go       |  12 +-
 src/cmd/go/internal/cmdflag/flag.go       | 203 ++++++-------
 src/cmd/go/internal/test/flagdefs.go      |  34 +++
 src/cmd/go/internal/test/flagdefs_test.go |  34 +++
 src/cmd/go/internal/test/genflags.go      |  90 ++++++
 src/cmd/go/internal/test/test.go          | 149 +++++-----
 src/cmd/go/internal/test/testflag.go      | 463 +++++++++++++++++++-----------
 src/cmd/go/internal/vet/vet.go            |   8 +-
 src/cmd/go/internal/vet/vetflag.go        | 163 ++++++-----
 src/cmd/go/internal/work/build.go         |   5 +-
 src/cmd/go/main.go                        |   2 +-
 src/cmd/go/testdata/script/test_flags.txt | 103 +++++++
 src/cmd/go/testdata/script/vet_flags.txt  |  58 +++-
 14 files changed, 881 insertions(+), 454 deletions(-)
