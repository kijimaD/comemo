commit a7526bbf72dfe0fde00d88f85fd6cddccdb3a345
Author: Meng Zhuo <mzh@golangcn.org>
Date:   Thu Jan 21 22:53:30 2021 +0800

    encoding/json: marshal maps using reflect.Value.MapRange
    
    Map serialization using reflect.Value.MapIndex cannot retrieve
    map keys that contain a NaN, resulting in a panic.
    Switch the implementation to use the reflect.Value.MapRange method
    instead, which iterates over all map entries regardless of whether
    they are directly retrievable.
    
    Note that according to RFC 8259, section 4, a JSON object should
    have unique names, but does not forbid the occurrence of duplicate names.
    
    Fixes #43207
    
    Change-Id: If4bc55229b1f64b8ca4b0fed37549725efdace39
    Reviewed-on: https://go-review.googlesource.com/c/go/+/278632
    Trust: Meng Zhuo <mzh@golangcn.org>
    Trust: Joe Tsai <thebrokentoaster@gmail.com>
    Trust: Bryan C. Mills <bcmills@google.com>
    Run-TryBot: Meng Zhuo <mzh@golangcn.org>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Reviewed-by: Daniel Mart√≠ <mvdan@mvdan.cc>

 src/encoding/json/encode.go      | 36 +++++++++++++++++++-----------------
 src/encoding/json/encode_test.go | 21 +++++++++++++++++++++
 2 files changed, 40 insertions(+), 17 deletions(-)
