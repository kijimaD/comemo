commit a17c092c2c5e8ad45482ebbb9e17ef7f92edb96c
Author: Damien Neil <dneil@google.com>
Date:   Mon Mar 17 15:43:47 2025 -0700

    net/http: add onClose hook to fake net listener
    
    Avoids a race condition: If we set an onClose hook on a conn
    created by a listener, then setting the hook can race with
    the connection closing.
    
    Change-Id: Ibadead3abbe4335d41f1e2cf84f4696fe98166b3
    Reviewed-on: https://go-review.googlesource.com/c/go/+/658655
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Jonathan Amsterdam <jba@google.com>
    Auto-Submit: Damien Neil <dneil@google.com>

 src/net/http/netconn_test.go   | 9 ++++++---
 src/net/http/transport_test.go | 8 ++++----
 2 files changed, 10 insertions(+), 7 deletions(-)
