commit 30ff0636b77f0e64084cc976e927355edb6d6f36
Author: Nigel Tao <nigeltao@golang.org>
Date:   Mon Jan 7 16:16:11 2013 +1100

    image/jpeg: handle those (unusual) grayscale images whose sampling
    ratio isn't 1x1.
    
    Fixes #4259.
    
    The test data was generated by
    cjpeg -quality 50 -sample 2x2 video-005.gray.pgm > video-005.gray.q50.2x2.jpeg
    cjpeg -quality 50 -sample 2x2 -progressive video-005.gray.pgm > video-005.gray.q50.2x2.progressive.jpeg
    
    similarly to video-005.gray.q50.* from
    http://code.google.com/p/go/source/detail?r=51f26e36ba98
    the key difference being the "-sample 2x2".
    
    R=rsc
    CC=golang-dev
    https://golang.org/cl/7069045

 src/pkg/image/jpeg/reader.go                         |  19 ++++++++++++++++---
 src/pkg/image/jpeg/reader_test.go                    |   1 +
 src/pkg/image/testdata/video-005.gray.q50.2x2.jpeg   | Bin 0 -> 2782 bytes
 .../testdata/video-005.gray.q50.2x2.progressive.jpeg | Bin 0 -> 2699 bytes
 4 files changed, 17 insertions(+), 3 deletions(-)
