commit 7e60bdd7aada492c2f4a492d92439040974af2c5
Author: qmuntal <quimmuntal@gmail.com>
Date:   Wed Apr 2 12:47:32 2025 +0200

    os: support overlapped IO with NewFile
    
    The runtime/poll package has just gained support for overlapped IO,
    see CL 660595 and CL 661955. The only remaining piece was making it
    visible to user code via os.NewFile.
    
    Some of the poll.FD.Init responsibility has been moved to os.NewFile
    to avoid unnecessary syscalls for the common case of using os.Open,
    os.Create, os.OpenFile, and os.Pipe, where we know that the file
    is not opened for overlapped IO.
    
    Some internal/poll tests have been moved to the os package to exercise
    public APIs rather than internal ones.
    
    The os.NewFile function definition has been moved into an OS-agnostic
    file to avoid having duplicated documentation and ensure that the
    caller is aware of its behavior across all platforms.
    
    Closes #19098.
    
    Cq-Include-Trybots: luci.golang.try:gotip-windows-amd64-longtest,gotip-windows-amd64-race,gotip-windows-arm64
    Change-Id: If043f8b34d588cd4b481777203107ed92d660fd9
    Reviewed-on: https://go-review.googlesource.com/c/go/+/662236
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Damien Neil <dneil@google.com>
    Reviewed-by: Carlos Amedee <carlos@golang.org>
    Auto-Submit: Damien Neil <dneil@google.com>

 doc/next/6-stdlib/99-minor/os/15388.md |  20 +-
 src/internal/poll/fd_windows.go        |  59 +++--
 src/internal/poll/fd_windows_test.go   | 334 +--------------------------
 src/os/file.go                         |  19 ++
 src/os/file_plan9.go                   |   6 +-
 src/os/file_unix.go                    |  12 +-
 src/os/file_windows.go                 |  23 +-
 src/os/os_windows_test.go              | 398 ++++++++++++++++++++++++++++++---
 src/os/removeall_windows.go            |   2 +-
 src/os/root_windows.go                 |   3 +-
 10 files changed, 449 insertions(+), 427 deletions(-)
