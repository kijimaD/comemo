commit bdf2db7255565db3d7ca1ffb721203e6d9460ccc
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Aug 24 11:53:42 2022 -0700

    go/internal/gcimporter: call Interface.Complete in unified importer
    
    To support concurrent use of the go/types API, importers need to call
    Interface.Complete on constructed interfaces before returning.
    
    There's an issue that the interfaces may contain embedded defined
    types, whose underlying type isn't known yet. This issue will
    eventually go away once CL 424876 lands, but that CL needs to wait for
    CL 424854 to re-land, which needs to wait for CL 421879 to land...
    
    In the mean time, this CL implements the same solution used by the
    indexed importer: maintaining a list of constructed interfaces, and
    calling Interface.Complete on them after the SetUnderlying loop and
    just before returning the imported package.
    
    Updates #54653.
    
    Change-Id: I0f42c915a4b7d28c628bbab7ac2eab2415c7858f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/425360
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Robert Griesemer <gri@google.com>

 src/go/internal/gcimporter/ureader.go | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)
