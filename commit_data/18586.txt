commit 258c278e12ba90502bb4805343592a926b6d9a7a
Author: Russ Cox <rsc@golang.org>
Date:   Thu Feb 20 15:50:30 2014 -0500

    cmd/pack: fix match
    
    Match used len(ar.files) == 0 to mean "match everything"
    but it also deleted matched things from the list, so once you
    had matched everything you asked for, match returned true
    for whatever was left in the archive too.
    
    Concretely, if you have an archive containing f1, f2, then
            pack t foo.a f1
    would match f1 and then, because len(ar.files) == 0 after
    deleting f1 from the match list, also match f2.
    
    Avoid the problem by recording explicitly whether match
    matches everything.
    
    LGTM=r, dsymonds
    R=r, dsymonds
    CC=golang-codereviews
    https://golang.org/cl/65630046

 src/cmd/pack/pack.go      | 14 ++++++++------
 src/cmd/pack/pack_test.go | 16 ++++++++++++++++
 2 files changed, 24 insertions(+), 6 deletions(-)
