commit 0f58a7be8a4a13d20af2519501f54bb56889ebc5
Author: limeidan <limeidan@loongson.cn>
Date:   Thu Jul 18 10:17:42 2024 +0800

    cmd/compile/internal: optimize condition branch implementation
    
    os: linux
    goarch: loong64
    pkg: test/bench/go1
    cpu: Loongson-3A6000 @ 2500.00MHz
                          │     old      │                new                 │
                          │    sec/op    │   sec/op     vs base               │
    BinaryTree17              7.521 ± 1%    7.551 ± 2%       ~ (p=0.190 n=10)
    Fannkuch11                2.736 ± 0%    2.667 ± 0%  -2.51% (p=0.000 n=10)
    FmtFprintfEmpty          34.42n ± 0%   35.22n ± 0%  +2.32% (p=0.000 n=10)
    FmtFprintfString         61.24n ± 0%   56.84n ± 0%  -7.18% (p=0.000 n=10)
    FmtFprintfInt            68.04n ± 0%   65.65n ± 0%  -3.51% (p=0.000 n=10)
    FmtFprintfIntInt         111.9n ± 0%   106.0n ± 0%  -5.32% (p=0.000 n=10)
    FmtFprintfPrefixedInt    131.4n ± 0%   122.5n ± 0%  -6.77% (p=0.000 n=10)
    FmtFprintfFloat          241.1n ± 0%   235.1n ± 0%  -2.51% (p=0.000 n=10)
    FmtManyArgs              553.7n ± 0%   518.9n ± 0%  -6.28% (p=0.000 n=10)
    GobDecode                7.223m ± 1%   7.291m ± 1%  +0.94% (p=0.004 n=10)
    GobEncode                6.741m ± 1%   6.622m ± 2%  -1.77% (p=0.011 n=10)
    Gzip                     288.9m ± 0%   280.3m ± 0%  -3.00% (p=0.000 n=10)
    Gunzip                   34.07m ± 0%   33.33m ± 0%  -2.18% (p=0.000 n=10)
    HTTPClientServer         60.15µ ± 0%   60.63µ ± 0%  +0.80% (p=0.000 n=10)
    JSONEncode              10.052m ± 1%   9.840m ± 0%  -2.12% (p=0.000 n=10)
    JSONDecode               50.96m ± 0%   51.32m ± 0%  +0.70% (p=0.002 n=10)
    Mandelbrot200            4.525m ± 0%   4.602m ± 0%  +1.69% (p=0.000 n=10)
    GoParse                  5.018m ± 0%   4.996m ± 0%  -0.44% (p=0.000 n=10)
    RegexpMatchEasy0_32      58.74n ± 0%   59.95n ± 0%  +2.06% (p=0.000 n=10)
    RegexpMatchEasy0_1K      464.9n ± 0%   466.1n ± 0%  +0.26% (p=0.000 n=10)
    RegexpMatchEasy1_32      64.88n ± 0%   59.64n ± 0%  -8.08% (p=0.000 n=10)
    RegexpMatchEasy1_1K      557.2n ± 0%   564.4n ± 0%  +1.29% (p=0.000 n=10)
    RegexpMatchMedium_32     879.3n ± 0%   912.8n ± 1%  +3.81% (p=0.000 n=10)
    RegexpMatchMedium_1K     28.08µ ± 0%   28.70µ ± 0%  +2.20% (p=0.000 n=10)
    RegexpMatchHard_32       1.456µ ± 0%   1.414µ ± 0%  -2.88% (p=0.000 n=10)
    RegexpMatchHard_1K       43.81µ ± 0%   42.23µ ± 0%  -3.61% (p=0.000 n=10)
    Revcomp                  472.4m ± 0%   474.5m ± 1%  +0.45% (p=0.000 n=10)
    Template                 83.45m ± 0%   83.39m ± 0%       ~ (p=0.481 n=10)
    TimeParse                291.3n ± 0%   283.8n ± 0%  -2.57% (p=0.000 n=10)
    TimeFormat               322.8n ± 0%   313.1n ± 0%  -3.02% (p=0.000 n=10)
    geomean                  54.32µ        53.45µ       -1.61%
    
    Change-Id: If68fdd952ec6137c77e25ce8932358cac28da324
    Reviewed-on: https://go-review.googlesource.com/c/go/+/620977
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    Reviewed-by: abner chenc <chenguoqi@loongson.cn>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Michael Pratt <mpratt@google.com>
    Reviewed-by: sophie zhao <zhaoxiaolin@loongson.cn>

 src/cmd/compile/internal/loong64/ssa.go         |  39 +++++--
 src/cmd/compile/internal/ssa/_gen/LOONG64.rules |  71 +++++++------
 src/cmd/compile/internal/ssa/_gen/LOONG64Ops.go |  18 ++--
 src/cmd/compile/internal/ssa/opGen.go           |  28 +++--
 src/cmd/compile/internal/ssa/rewriteLOONG64.go  | 134 ++++++++++++++++++++----
 5 files changed, 216 insertions(+), 74 deletions(-)
