commit 6effdd28deec546798c00fd83c2a7b5b328ac5ab
Author: Keith Randall <khr@golang.org>
Date:   Sat Jun 18 19:40:57 2016 -0700

    cmd/compile: keep heap pointer for escaping output parameters live
    
    Make sure the pointer to the heap copy of an output parameter is kept
    live throughout the function.  The function could panic at any point,
    and then a defer could recover.  Thus, we need the pointer to the heap
    copy always available so the post-deferreturn code can copy the return
    value back to the stack.
    
    Before this CL, the pointer to the heap copy could be considered dead in
    certain situations, like code which is reverse dominated by a panic call.
    
    Fixes #16095.
    
    Change-Id: Ic3800423e563670e5b567b473bf4c84cddb49a4c
    Reviewed-on: https://go-review.googlesource.com/24213
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

 src/cmd/compile/internal/gc/gen.go    |   8 +++
 src/cmd/compile/internal/gc/plive.go  |  12 ++++
 src/cmd/compile/internal/gc/syntax.go |  12 ++++
 test/fixedbugs/issue16095.go          | 104 ++++++++++++++++++++++++++++++++++
 4 files changed, 136 insertions(+)
