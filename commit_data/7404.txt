commit 4521782514725fb4ac904c545e58ba0959148925
Author: Gustavo Niemeyer <gustavo@niemeyer.net>
Date:   Tue Feb 8 23:50:14 2011 -0500

    cgo: fix handling of signed enumerations
    
    Structs defined in C as containing a field with
    an enum type are currently translated to Go as
    a struct with an unsigned integer field, even if
    some of the values contained in the enum are
    negative.
    
    This modification takes in consideration the values
    defined in the enum, and conditionally defines the
    Go type as signed if necessary.
    
    The logic introduced was tested with gcc, which
    will increase the type size if it contains both
    negative numbers and values greater than 2^b/2-1,
    and refuses to compile values which would be
    problematic (2^64-1, but in fact the ISO C
    restricts the range to the size of int).
    
    R=rsc
    CC=golang-dev
    https://golang.org/cl/4119058

 src/cmd/cgo/gcc.go | 32 +++++++++++++++++++++++---------
 1 file changed, 23 insertions(+), 9 deletions(-)
