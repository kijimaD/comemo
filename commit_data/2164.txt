commit 93bbbf90ef652c144801fb677de458f8ab7e1ded
Author: Rob Pike <r@golang.org>
Date:   Thu May 7 17:15:24 2009 -0700

    make go/src/lib/hash one directory per package
    (slipped through the cracks last time)
    
    R=rsc
    DELTA=2436  (1337 added, 1090 deleted, 9 changed)
    OCL=28427
    CL=28443
---
 src/lib/Makefile                           | 27 +++++++----
 src/lib/hash/adler32/Makefile              | 68 ++++++++++++++++++++++++++
 src/lib/hash/{ => adler32}/adler32.go      |  0
 src/lib/hash/{ => adler32}/adler32_test.go |  0
 src/lib/hash/crc32/Makefile                | 68 ++++++++++++++++++++++++++
 src/lib/hash/{ => crc32}/crc32.go          |  0
 src/lib/hash/{ => crc32}/crc32_test.go     |  0
 src/lib/hash/md5/Makefile                  | 76 ++++++++++++++++++++++++++++++
 src/lib/hash/{ => md5}/md5.go              |  0
 src/lib/hash/{ => md5}/md5_test.go         |  0
 src/lib/hash/{ => md5}/md5block.go         |  0
 src/lib/hash/{ => sha1}/Makefile           | 23 ++-------
 src/lib/hash/{ => sha1}/sha1.go            |  0
 src/lib/hash/{ => sha1}/sha1_test.go       |  0
 src/lib/hash/{ => sha1}/sha1block.go       |  0
 15 files changed, 234 insertions(+), 28 deletions(-)

diff --git a/src/lib/Makefile b/src/lib/Makefile
index aee267dc99..d4072e6453 100644
--- a/src/lib/Makefile
+++ b/src/lib/Makefile
@@ -14,12 +14,16 @@ DIRS=\
 	exvar\
 	flag\
 	fmt\
-	go/ast \
-	go/doc \
-	go/parser \
-	go/scanner \
-	go/token \
-	hash\
+	go/ast\
+	go/doc\
+	go/parser\
+	go/scanner\
+	go/token\
+	hash/adler32\
+	hash/crc32\
+	hash/md5\
+	hash/sha1\
+	hash/sum\
 	http\
 	io\
 	json\
@@ -54,7 +58,10 @@ TEST=\
 	fmt\
 	go/parser\
 	go/scanner\
-	hash\
+	hash/adler32\
+	hash/crc32\
+	hash/md5\
+	hash/sha1\
 	http\
 	io\
 	json\
@@ -123,7 +130,11 @@ go/parser.install: go/ast.install go/scanner.install go/token.install $(GODEPS)
 go/doc.install: go/ast.install go/token.install $(GODEPS)
 go/ast.install: go/token.install $(GODEPS)
 go/token.install: $(GODEPS)
-hash.install: os.install
+hash/adler32.install: os.install
+hash/crc32.install: os.install
+hash/md5.install: os.install
+hash/sha1.install: os.install
+hash/sum.install: io.install os.install
 http.install: bufio.install io.install net.install os.install path.install strings.install log.install
 io.install: os.install sync.install
 json.install: container/vector.install fmt.install io.install math.install \
diff --git a/src/lib/hash/adler32/Makefile b/src/lib/hash/adler32/Makefile
new file mode 100644
index 0000000000..2b47ef1558
--- /dev/null
+++ b/src/lib/hash/adler32/Makefile
@@ -0,0 +1,68 @@
+# Copyright 2009 The Go Authors. All rights reserved.
+# Use of this source code is governed by a BSD-style
+# license that can be found in the LICENSE file.
+
+# DO NOT EDIT.  Automatically generated by gobuild.
+# gobuild -m >Makefile
+
+D=/hash/
+
+O_arm=5
+O_amd64=6
+O_386=8
+OS=568vq
+
+O=$(O_$(GOARCH))
+GC=$(O)g -I_obj
+CC=$(O)c -FVw
+AS=$(O)a
+AR=6ar
+
+default: packages
+
+clean:
+	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
+
+test: packages
+	gotest
+
+coverage: packages
+	gotest
+	6cov -g `pwd` | grep -v '_test\.go:'
+
+%.$O: %.go
+	$(GC) $*.go
+
+%.$O: %.c
+	$(CC) $*.c
+
+%.$O: %.s
+	$(AS) $*.s
+
+O1=\
+	adler32.$O\
+
+
+phases: a1
+_obj$D/adler32.a: phases
+
+a1: $(O1)
+	$(AR) grc _obj$D/adler32.a adler32.$O
+	rm -f $(O1)
+
+
+newpkg: clean
+	mkdir -p _obj$D
+	$(AR) grc _obj$D/adler32.a
+
+$(O1): newpkg
+$(O2): a1
+
+nuke: clean
+	rm -f $(GOROOT)/pkg$D/adler32.a
+
+packages: _obj$D/adler32.a
+
+install: packages
+	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
+	cp _obj$D/adler32.a $(GOROOT)/pkg$D/adler32.a
diff --git a/src/lib/hash/adler32.go b/src/lib/hash/adler32/adler32.go
similarity index 100%
rename from src/lib/hash/adler32.go
rename to src/lib/hash/adler32/adler32.go
diff --git a/src/lib/hash/adler32_test.go b/src/lib/hash/adler32/adler32_test.go
similarity index 100%
rename from src/lib/hash/adler32_test.go
rename to src/lib/hash/adler32/adler32_test.go
diff --git a/src/lib/hash/crc32/Makefile b/src/lib/hash/crc32/Makefile
new file mode 100644
index 0000000000..b9fd5f9524
--- /dev/null
+++ b/src/lib/hash/crc32/Makefile
@@ -0,0 +1,68 @@
+# Copyright 2009 The Go Authors. All rights reserved.
+# Use of this source code is governed by a BSD-style
+# license that can be found in the LICENSE file.
+
+# DO NOT EDIT.  Automatically generated by gobuild.
+# gobuild -m >Makefile
+
+D=/hash/
+
+O_arm=5
+O_amd64=6
+O_386=8
+OS=568vq
+
+O=$(O_$(GOARCH))
+GC=$(O)g -I_obj
+CC=$(O)c -FVw
+AS=$(O)a
+AR=6ar
+
+default: packages
+
+clean:
+	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
+
+test: packages
+	gotest
+
+coverage: packages
+	gotest
+	6cov -g `pwd` | grep -v '_test\.go:'
+
+%.$O: %.go
+	$(GC) $*.go
+
+%.$O: %.c
+	$(CC) $*.c
+
+%.$O: %.s
+	$(AS) $*.s
+
+O1=\
+	crc32.$O\
+
+
+phases: a1
+_obj$D/crc32.a: phases
+
+a1: $(O1)
+	$(AR) grc _obj$D/crc32.a crc32.$O
+	rm -f $(O1)
+
+
+newpkg: clean
+	mkdir -p _obj$D
+	$(AR) grc _obj$D/crc32.a
+
+$(O1): newpkg
+$(O2): a1
+
+nuke: clean
+	rm -f $(GOROOT)/pkg$D/crc32.a
+
+packages: _obj$D/crc32.a
+
+install: packages
+	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
+	cp _obj$D/crc32.a $(GOROOT)/pkg$D/crc32.a
diff --git a/src/lib/hash/crc32.go b/src/lib/hash/crc32/crc32.go
similarity index 100%
rename from src/lib/hash/crc32.go
rename to src/lib/hash/crc32/crc32.go
diff --git a/src/lib/hash/crc32_test.go b/src/lib/hash/crc32/crc32_test.go
similarity index 100%
rename from src/lib/hash/crc32_test.go
rename to src/lib/hash/crc32/crc32_test.go
diff --git a/src/lib/hash/md5/Makefile b/src/lib/hash/md5/Makefile
new file mode 100644
index 0000000000..f9320faaf5
--- /dev/null
+++ b/src/lib/hash/md5/Makefile
@@ -0,0 +1,76 @@
+# Copyright 2009 The Go Authors. All rights reserved.
+# Use of this source code is governed by a BSD-style
+# license that can be found in the LICENSE file.
+
+# DO NOT EDIT.  Automatically generated by gobuild.
+# gobuild -m >Makefile
+
+D=/hash/
+
+O_arm=5
+O_amd64=6
+O_386=8
+OS=568vq
+
+O=$(O_$(GOARCH))
+GC=$(O)g -I_obj
+CC=$(O)c -FVw
+AS=$(O)a
+AR=6ar
+
+default: packages
+
+clean:
+	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
+
+test: packages
+	gotest
+
+coverage: packages
+	gotest
+	6cov -g `pwd` | grep -v '_test\.go:'
+
+%.$O: %.go
+	$(GC) $*.go
+
+%.$O: %.c
+	$(CC) $*.c
+
+%.$O: %.s
+	$(AS) $*.s
+
+O1=\
+	md5.$O\
+
+O2=\
+	md5block.$O\
+
+
+phases: a1 a2
+_obj$D/md5.a: phases
+
+a1: $(O1)
+	$(AR) grc _obj$D/md5.a md5.$O
+	rm -f $(O1)
+
+a2: $(O2)
+	$(AR) grc _obj$D/md5.a md5block.$O
+	rm -f $(O2)
+
+
+newpkg: clean
+	mkdir -p _obj$D
+	$(AR) grc _obj$D/md5.a
+
+$(O1): newpkg
+$(O2): a1
+$(O3): a2
+
+nuke: clean
+	rm -f $(GOROOT)/pkg$D/md5.a
+
+packages: _obj$D/md5.a
+
+install: packages
+	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
+	cp _obj$D/md5.a $(GOROOT)/pkg$D/md5.a
diff --git a/src/lib/hash/md5.go b/src/lib/hash/md5/md5.go
similarity index 100%
rename from src/lib/hash/md5.go
rename to src/lib/hash/md5/md5.go
diff --git a/src/lib/hash/md5_test.go b/src/lib/hash/md5/md5_test.go
similarity index 100%
rename from src/lib/hash/md5_test.go
rename to src/lib/hash/md5/md5_test.go
diff --git a/src/lib/hash/md5block.go b/src/lib/hash/md5/md5block.go
similarity index 100%
rename from src/lib/hash/md5block.go
rename to src/lib/hash/md5/md5block.go
diff --git a/src/lib/hash/Makefile b/src/lib/hash/sha1/Makefile
similarity index 60%
rename from src/lib/hash/Makefile
rename to src/lib/hash/sha1/Makefile
index f168fc584b..0f09259b48 100644
--- a/src/lib/hash/Makefile
+++ b/src/lib/hash/sha1/Makefile
@@ -5,7 +5,7 @@
 # DO NOT EDIT.  Automatically generated by gobuild.
 # gobuild -m >Makefile
 
-D=/hash
+D=/hash/
 
 O_arm=5
 O_amd64=6
@@ -40,40 +40,26 @@ coverage: packages
 	$(AS) $*.s
 
 O1=\
-	adler32.$O\
 	sha1.$O\
-	md5.$O\
-	crc32.$O\
 
 O2=\
 	sha1block.$O\
-	md5block.$O\
 
 
 phases: a1 a2
-_obj$D/adler32.a: phases
-_obj$D/crc32.a: phases
-_obj$D/md5.a: phases
 _obj$D/sha1.a: phases
 
 a1: $(O1)
-	$(AR) grc _obj$D/adler32.a adler32.$O
 	$(AR) grc _obj$D/sha1.a sha1.$O
-	$(AR) grc _obj$D/md5.a md5.$O
-	$(AR) grc _obj$D/crc32.a crc32.$O
 	rm -f $(O1)
 
 a2: $(O2)
 	$(AR) grc _obj$D/sha1.a sha1block.$O
-	$(AR) grc _obj$D/md5.a md5block.$O
 	rm -f $(O2)
 
 
 newpkg: clean
 	mkdir -p _obj$D
-	$(AR) grc _obj$D/adler32.a
-	$(AR) grc _obj$D/crc32.a
-	$(AR) grc _obj$D/md5.a
 	$(AR) grc _obj$D/sha1.a
 
 $(O1): newpkg
@@ -81,13 +67,10 @@ $(O2): a1
 $(O3): a2
 
 nuke: clean
-	rm -f $(GOROOT)/pkg$D/adler32.a $(GOROOT)/pkg$D/crc32.a $(GOROOT)/pkg$D/md5.a $(GOROOT)/pkg$D/sha1.a
+	rm -f $(GOROOT)/pkg$D/sha1.a
 
-packages: _obj$D/adler32.a _obj$D/crc32.a _obj$D/md5.a _obj$D/sha1.a
+packages: _obj$D/sha1.a
 
 install: packages
 	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
-	cp _obj$D/adler32.a $(GOROOT)/pkg$D/adler32.a
-	cp _obj$D/crc32.a $(GOROOT)/pkg$D/crc32.a
-	cp _obj$D/md5.a $(GOROOT)/pkg$D/md5.a
 	cp _obj$D/sha1.a $(GOROOT)/pkg$D/sha1.a
diff --git a/src/lib/hash/sha1.go b/src/lib/hash/sha1/sha1.go
similarity index 100%
rename from src/lib/hash/sha1.go
rename to src/lib/hash/sha1/sha1.go
diff --git a/src/lib/hash/sha1_test.go b/src/lib/hash/sha1/sha1_test.go
similarity index 100%
rename from src/lib/hash/sha1_test.go
rename to src/lib/hash/sha1/sha1_test.go
diff --git a/src/lib/hash/sha1block.go b/src/lib/hash/sha1/sha1block.go
similarity index 100%
rename from src/lib/hash/sha1block.go
rename to src/lib/hash/sha1/sha1block.go
