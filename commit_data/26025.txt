commit c140df03267ab2e73ffd076002811aaa00fdc80e
Author: Keith Randall <khr@golang.org>
Date:   Wed Dec 9 15:58:18 2015 -0800

    [dev.ssa] cmd/compile: allocate the flag register in a separate pass
    
    Spilling/restoring flag values is a pain to do during regalloc.
    Instead, allocate the flag register in a separate pass.  Regalloc then
    operates normally on any flag recomputation instructions.
    
    Change-Id: Ia1c3d9e6eff678861193093c0b48a00f90e4156b
    Reviewed-on: https://go-review.googlesource.com/17694
    Reviewed-by: David Chase <drchase@google.com>

 src/cmd/compile/internal/ssa/compile.go       |  11 ++-
 src/cmd/compile/internal/ssa/flagalloc.go     | 123 ++++++++++++++++++++++++++
 src/cmd/compile/internal/ssa/func_test.go     |   5 ++
 src/cmd/compile/internal/ssa/regalloc.go      |  55 +++---------
 src/cmd/compile/internal/ssa/regalloc_test.go |   9 +-
 src/cmd/compile/internal/ssa/value.go         |   9 ++
 6 files changed, 162 insertions(+), 50 deletions(-)
