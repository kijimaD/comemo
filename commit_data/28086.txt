commit d610d304f86021cc5f388b8f02d99bc73fca0d9b
Author: Keith Randall <khr@golang.org>
Date:   Wed Apr 27 16:58:50 2016 -0700

    cmd/compile: reorg copyelim to avoid O(n^2) problem
    
    Make sure we don't do O(n^2) work to eliminate a chain
    of n copies.
    
    benchmark                     old ns/op       new ns/op     delta
    BenchmarkCopyElim1-8          1418            1406          -0.85%
    BenchmarkCopyElim10-8         5289            5162          -2.40%
    BenchmarkCopyElim100-8        52618           41684         -20.78%
    BenchmarkCopyElim1000-8       2473878         424339        -82.85%
    BenchmarkCopyElim10000-8      269373954       6367971       -97.64%
    BenchmarkCopyElim100000-8     31272781165     104357244     -99.67%
    
    Change-Id: I680f906f70f2ee1a8615cb1046bc510c77d59284
    Reviewed-on: https://go-review.googlesource.com/22535
    Reviewed-by: Alexandru Mo»ôoi <alexandru@mosoi.ro>

 src/cmd/compile/internal/ssa/copyelim.go      | 91 ++++++++++++++++-----------
 src/cmd/compile/internal/ssa/copyelim_test.go | 41 ++++++++++++
 src/cmd/compile/internal/ssa/export_test.go   |  3 +-
 src/cmd/compile/internal/ssa/rewrite.go       | 18 +-----
 4 files changed, 99 insertions(+), 54 deletions(-)
