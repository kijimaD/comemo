commit 0104a31b8fbcbe52728a08867b26415d282c35d2
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Thu Mar 24 16:49:47 2016 +1100

    vendor: move golang.org/x/net/http2/hpack back to vendor
    
    Updates #14047
    
    Change-Id: I7e314e2c7e3e8da18ab023729740fbc9ea3f661e
    Reviewed-on: https://go-review.googlesource.com/21063
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>
---
 src/go/build/build_test.go                                        | 1 -
 src/go/build/deps_test.go                                         | 2 +-
 src/net/http/h2_bundle.go                                         | 5 +++--
 src/vendor/README                                                 | 8 --------
 src/{internal => vendor}/golang.org/x/net/http2/hpack/encode.go   | 0
 .../golang.org/x/net/http2/hpack/encode_test.go                   | 0
 src/{internal => vendor}/golang.org/x/net/http2/hpack/hpack.go    | 0
 .../golang.org/x/net/http2/hpack/hpack_test.go                    | 0
 src/{internal => vendor}/golang.org/x/net/http2/hpack/huffman.go  | 0
 src/{internal => vendor}/golang.org/x/net/http2/hpack/tables.go   | 0
 10 files changed, 4 insertions(+), 12 deletions(-)

diff --git a/src/go/build/build_test.go b/src/go/build/build_test.go
index 4d6fc2423e..537d8d1e2d 100644
--- a/src/go/build/build_test.go
+++ b/src/go/build/build_test.go
@@ -300,7 +300,6 @@ func TestShellSafety(t *testing.T) {
 }
 
 func TestImportVendor(t *testing.T) {
-	t.Skip("skipping; hpack has moved to internal for now; golang.org/issue/14047")
 	testenv.MustHaveGoBuild(t) // really must just have source
 	ctxt := Default
 	ctxt.GOPATH = ""
diff --git a/src/go/build/deps_test.go b/src/go/build/deps_test.go
index 1bd1f4ec20..32fa09ffd9 100644
--- a/src/go/build/deps_test.go
+++ b/src/go/build/deps_test.go
@@ -358,7 +358,7 @@ var pkgDeps = map[string][]string{
 		"L4", "NET", "OS",
 		"compress/gzip", "crypto/tls", "mime/multipart", "runtime/debug",
 		"net/http/internal",
-		"internal/golang.org/x/net/http2/hpack",
+		"golang.org/x/net/http2/hpack",
 	},
 	"net/http/internal": {"L4"},
 
diff --git a/src/net/http/h2_bundle.go b/src/net/http/h2_bundle.go
index 1e9088c9c3..db137b24b9 100644
--- a/src/net/http/h2_bundle.go
+++ b/src/net/http/h2_bundle.go
@@ -1,5 +1,5 @@
 // Code generated by golang.org/x/tools/cmd/bundle.
-//go:generate bundle -o h2_bundle.go -prefix http2 -import golang.org/x/net/http2/hpack=internal/golang.org/x/net/http2/hpack golang.org/x/net/http2
+//go:generate bundle -o h2_bundle.go -prefix http2 golang.org/x/net/http2
 
 // Package http2 implements the HTTP/2 protocol.
 //
@@ -24,7 +24,6 @@ import (
 	"encoding/binary"
 	"errors"
 	"fmt"
-	"internal/golang.org/x/net/http2/hpack"
 	"io"
 	"io/ioutil"
 	"log"
@@ -39,6 +38,8 @@ import (
 	"strings"
 	"sync"
 	"time"
+
+	"golang.org/x/net/http2/hpack"
 )
 
 // ClientConnPool manages a pool of HTTP/2 client connections.
diff --git a/src/vendor/README b/src/vendor/README
deleted file mode 100644
index e540318bb2..0000000000
--- a/src/vendor/README
+++ /dev/null
@@ -1,8 +0,0 @@
-This file needs to exist because the vendor directory needs
-to exist for some go/build tests to pass, and git can't track
-empty directories.
-
-In Go 1.7 we'll use this directory again. (In Go 1.6 we tried but
-reverted).
-
-See http://golang.org/issue/14047 for details.
diff --git a/src/internal/golang.org/x/net/http2/hpack/encode.go b/src/vendor/golang.org/x/net/http2/hpack/encode.go
similarity index 100%
rename from src/internal/golang.org/x/net/http2/hpack/encode.go
rename to src/vendor/golang.org/x/net/http2/hpack/encode.go
diff --git a/src/internal/golang.org/x/net/http2/hpack/encode_test.go b/src/vendor/golang.org/x/net/http2/hpack/encode_test.go
similarity index 100%
rename from src/internal/golang.org/x/net/http2/hpack/encode_test.go
rename to src/vendor/golang.org/x/net/http2/hpack/encode_test.go
diff --git a/src/internal/golang.org/x/net/http2/hpack/hpack.go b/src/vendor/golang.org/x/net/http2/hpack/hpack.go
similarity index 100%
rename from src/internal/golang.org/x/net/http2/hpack/hpack.go
rename to src/vendor/golang.org/x/net/http2/hpack/hpack.go
diff --git a/src/internal/golang.org/x/net/http2/hpack/hpack_test.go b/src/vendor/golang.org/x/net/http2/hpack/hpack_test.go
similarity index 100%
rename from src/internal/golang.org/x/net/http2/hpack/hpack_test.go
rename to src/vendor/golang.org/x/net/http2/hpack/hpack_test.go
diff --git a/src/internal/golang.org/x/net/http2/hpack/huffman.go b/src/vendor/golang.org/x/net/http2/hpack/huffman.go
similarity index 100%
rename from src/internal/golang.org/x/net/http2/hpack/huffman.go
rename to src/vendor/golang.org/x/net/http2/hpack/huffman.go
diff --git a/src/internal/golang.org/x/net/http2/hpack/tables.go b/src/vendor/golang.org/x/net/http2/hpack/tables.go
similarity index 100%
rename from src/internal/golang.org/x/net/http2/hpack/tables.go
rename to src/vendor/golang.org/x/net/http2/hpack/tables.go
