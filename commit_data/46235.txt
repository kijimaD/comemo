commit 3b5918c757eb32b4a05a0b4ba4bbab001175ebf0
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Dec 15 17:48:51 2020 -0800

    [dev.typeparams] cmd/compile/internal/types2: review of predicates.go
    
    Make predicates.go match the corresponding and reviewed go/types version.
    
    The remaining diffs are due to the difference in the implementations
    of the type conversion methods/functions:
    
    $ diff $GOROOT/src/cmd/compile/internal/types2/predicates.go $GOROOT/src/go/types/predicates.go
    7c7
    < package types2
    ---
    > package types
    9a10
    >       "go/token"
    32c33
    <       switch t := optype(typ.Under()).(type) {
    ---
    >       switch t := optype(typ).(type) {
    63c64
    <       // set up. Must not call Basic()!
    ---
    >       // set up. Must not call asBasic()!
    79c80
    <       t := typ.Basic()
    ---
    >       t := asBasic(typ)
    85c86
    <       return typ.Interface() != nil
    ---
    >       return asInterface(typ) != nil
    110c111
    <       if t := T.TypeParam(); t != nil && optype(t) == theTop {
    ---
    >       if t := asTypeParam(T); t != nil && optype(t) == theTop {
    114c115
    <       switch t := optype(T.Under()).(type) {
    ---
    >       switch t := optype(T).(type) {
    143c144
    <       switch t := optype(typ.Under()).(type) {
    ---
    >       switch t := optype(typ).(type) {
    300,301c301,302
    <                               check.completeInterface(nopos, x)
    <                               check.completeInterface(nopos, y)
    ---
    >                               check.completeInterface(token.NoPos, x)
    >                               check.completeInterface(token.NoPos, y)
    
    Change-Id: I174d8a8a22fbd8814ede25002cb2705588912329
    Reviewed-on: https://go-review.googlesource.com/c/go/+/278474
    Trust: Robert Griesemer <gri@golang.org>
    Reviewed-by: Robert Findley <rfindley@google.com>

 src/cmd/compile/internal/types2/predicates.go | 28 ++++++++++++++-------------
 1 file changed, 15 insertions(+), 13 deletions(-)
