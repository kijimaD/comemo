commit 6a4739ccc5198449d58d2e90a040c4fb908b3cb0
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Jan 24 23:39:16 2021 -0800

    [dev.regabi] cmd/compile: enable rational constant arithmetic
    
    This allows more precision and matches types2's behavior.
    
    For backwards compatibility with gcimporter, for now we still need to
    write out declared constants as limited-precision floating-point
    values. To ensure consistent behavior of constant arithmetic whether
    it spans package boundaries or not, we include the full-precision
    rational representation in the compiler's extension section of the
    export data.
    
    Also, this CL simply uses the math/big.Rat.String text representation
    as the encoding. This is inefficient, but because it's only in the
    compiler's extension section, we can easily revisit this in the
    future.
    
    Declaring exported untyped float and complex constants isn't very
    common anyway. Within the standard library, only package math declares
    any at all, containing just 15. And those 15 are only imported a total
    of 12 times elsewhere in the standard library.
    
    Change-Id: I85ea23ab712e93fd3b68e52d60cbedce9be696a0
    Reviewed-on: https://go-review.googlesource.com/c/go/+/286215
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Trust: Matthew Dempsky <mdempsky@google.com>
    Trust: Robert Griesemer <gri@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/cmd/compile/internal/noder/noder.go       |  8 -----
 src/cmd/compile/internal/typecheck/iexport.go | 51 +++++++++++++++++++++++++--
 src/cmd/compile/internal/typecheck/iimport.go | 27 ++++++++++++--
 test/fixedbugs/issue7740.go                   |  2 +-
 test/float_lit3.go                            |  5 ++-
 5 files changed, 76 insertions(+), 17 deletions(-)
