commit 904ec0098137f742e0dd96da3bc033d6a0b615d1
Merge: d42328c9f7 c65a47f890
Author: Russ Cox <rsc@golang.org>
Date:   Fri Oct 3 12:22:19 2014 -0400

    [dev.garbage] merge default into dev.garbage

 .hgignore                                          |     5 -
 .hgtags                                            |     4 +-
 AUTHORS                                            |     5 +
 CONTRIBUTORS                                       |     7 +
 doc/devel/release.html                             |    10 +
 doc/go1.4.txt                                      |    12 +-
 doc/go_faq.html                                    |    66 +-
 doc/go_spec.html                                   |   173 +-
 doc/gopher/biplane.jpg                             |   Bin 0 -> 203420 bytes
 include/link.h                                     |     3 +-
 misc/cgo/test/backdoor/backdoor.go                 |     3 +-
 misc/cgo/test/backdoor/runtime.c                   |    18 -
 misc/cgo/test/basic.go                             |     5 +
 misc/cgo/test/callback.go                          |    45 +
 misc/cgo/test/callback_c.c                         |    16 +
 misc/cgo/test/cgo_test.go                          |    96 +-
 misc/cgo/test/issue7695_test.go                    |    30 -
 misc/cgo/test/issue7978.go                         |    99 +
 misc/cgo/test/issue8694.go                         |    32 +
 misc/nacl/README                                   |     6 +-
 src/bufio/scan.go                                  |     4 +-
 src/bufio/scan_test.go                             |    36 +
 src/bytes/bytes.go                                 |     2 +
 src/bytes/bytes.s                                  |     5 -
 src/cmd/5g/gsubr.c                                 |     4 +-
 src/cmd/8g/gsubr.c                                 |     2 +-
 src/cmd/cc/dcl.c                                   |     9 +-
 src/cmd/cc/lex.c                                   |     2 +
 src/cmd/cgo/ast.go                                 |     3 +
 src/cmd/cgo/out.go                                 |    29 +-
 src/cmd/dist/buildruntime.c                        |     2 +
 src/cmd/gc/align.c                                 |     4 +-
 src/cmd/gc/fmt.c                                   |    22 +-
 src/cmd/gc/gen.c                                   |     6 +-
 src/cmd/gc/go.y                                    |     2 +
 src/cmd/gc/lex.c                                   |     8 +-
 src/cmd/gc/order.c                                 |    14 +-
 src/cmd/gc/subr.c                                  |     3 +-
 src/cmd/gc/typecheck.c                             |    35 +-
 src/cmd/gc/y.tab.c                                 |   526 +-
 src/cmd/go/build.go                                |   132 +-
 src/cmd/go/doc.go                                  |    30 +-
 src/cmd/go/get.go                                  |    12 +
 src/cmd/go/go_windows_test.go                      |    55 +
 src/cmd/go/help.go                                 |     3 +-
 src/cmd/go/pkg.go                                  |    28 +-
 src/cmd/go/test.bash                               |   267 +-
 src/cmd/go/test.go                                 |   143 +-
 src/cmd/go/testdata/src/badc/x.c                   |     1 +
 src/cmd/go/testdata/src/badc/x.go                  |     1 +
 src/cmd/go/testdata/src/badtest/badexec/x_test.go  |     5 +
 src/cmd/go/testdata/src/badtest/badsyntax/x.go     |     1 +
 .../go/testdata/src/badtest/badsyntax/x_test.go    |     3 +
 src/cmd/go/testdata/src/badtest/badvar/x.go        |     1 +
 src/cmd/go/testdata/src/badtest/badvar/x_test.go   |     5 +
 src/cmd/go/testflag.go                             |     7 +-
 src/cmd/go/testgo.go                               |    21 +
 src/cmd/go/vcs.go                                  |    92 +-
 src/cmd/gofmt/gofmt.go                             |   184 +-
 src/cmd/gofmt/long_test.go                         |     4 +-
 src/cmd/gofmt/testdata/stdin6.golden               |    19 +
 src/cmd/gofmt/testdata/stdin6.input                |    21 +
 src/cmd/gofmt/testdata/stdin7.golden               |    19 +
 src/cmd/gofmt/testdata/stdin7.input                |    21 +
 src/cmd/internal/rsc.io/arm/armasm/Makefile        |     2 +
 src/cmd/internal/rsc.io/arm/armasm/decode.go       |   567 +
 src/cmd/internal/rsc.io/arm/armasm/decode_test.go  |    69 +
 src/cmd/internal/rsc.io/arm/armasm/ext_test.go     |   614 +
 src/cmd/internal/rsc.io/arm/armasm/gnu.go          |   164 +
 src/cmd/internal/rsc.io/arm/armasm/inst.go         |   438 +
 src/cmd/internal/rsc.io/arm/armasm/objdump_test.go |   258 +
 .../internal/rsc.io/arm/armasm/objdumpext_test.go  |   260 +
 src/cmd/internal/rsc.io/arm/armasm/plan9x.go       |   211 +
 src/cmd/internal/rsc.io/arm/armasm/tables.go       |  9448 +++++++++++++
 .../internal/rsc.io/arm/armasm/testdata/Makefile   |     5 +
 .../internal/rsc.io/arm/armasm/testdata/decode.txt |   306 +
 src/cmd/internal/rsc.io/x86/x86asm/Makefile        |     3 +
 src/cmd/internal/rsc.io/x86/x86asm/decode.go       |  1616 +++
 src/cmd/internal/rsc.io/x86/x86asm/decode_test.go  |    71 +
 src/cmd/internal/rsc.io/x86/x86asm/ext_test.go     |   811 ++
 src/cmd/internal/rsc.io/x86/x86asm/gnu.go          |   926 ++
 src/cmd/internal/rsc.io/x86/x86asm/inst.go         |   641 +
 src/cmd/internal/rsc.io/x86/x86asm/inst_test.go    |    20 +
 src/cmd/internal/rsc.io/x86/x86asm/intel.go        |   518 +
 src/cmd/internal/rsc.io/x86/x86asm/objdump_test.go |   383 +
 .../internal/rsc.io/x86/x86asm/objdumpext_test.go  |   314 +
 .../internal/rsc.io/x86/x86asm/plan9ext_test.go    |   120 +
 src/cmd/internal/rsc.io/x86/x86asm/plan9x.go       |   346 +
 src/cmd/internal/rsc.io/x86/x86asm/plan9x_test.go  |    54 +
 src/cmd/internal/rsc.io/x86/x86asm/tables.go       |  9760 +++++++++++++
 .../internal/rsc.io/x86/x86asm/testdata/Makefile   |    12 +
 .../internal/rsc.io/x86/x86asm/testdata/decode.txt |  6731 +++++++++
 src/cmd/internal/rsc.io/x86/x86asm/xed_test.go     |   211 +
 src/cmd/internal/rsc.io/x86/x86asm/xedext_test.go  |   206 +
 src/cmd/ld/data.c                                  |    21 +-
 src/cmd/ld/lib.c                                   |    10 +-
 src/cmd/ld/pobj.c                                  |     9 +
 src/cmd/objdump/armasm.go                          | 10821 ---------------
 src/cmd/objdump/main.go                            |    11 +-
 src/cmd/objdump/x86.go                             | 13800 -------------------
 src/cmd/pack/doc.go                                |     4 +
 src/cmd/pack/pack.go                               |    50 +-
 src/cmd/pack/pack_test.go                          |    23 +-
 src/cmd/pprof/internal/commands/commands.go        |   197 +
 src/cmd/pprof/internal/driver/driver.go            |  1036 ++
 src/cmd/pprof/internal/driver/interactive.go       |   492 +
 src/cmd/pprof/internal/fetch/fetch.go              |    82 +
 src/cmd/pprof/internal/plugin/plugin.go            |   213 +
 src/cmd/pprof/internal/profile/encode.go           |   470 +
 src/cmd/pprof/internal/profile/filter.go           |   157 +
 src/cmd/pprof/internal/profile/legacy_profile.go   |  1250 ++
 src/cmd/pprof/internal/profile/profile.go          |   567 +
 src/cmd/pprof/internal/profile/proto.go            |   298 +
 src/cmd/pprof/internal/profile/prune.go            |    97 +
 src/cmd/pprof/internal/report/report.go            |  1718 +++
 src/cmd/pprof/internal/report/source.go            |   450 +
 src/cmd/pprof/internal/report/source_html.go       |    77 +
 src/cmd/pprof/internal/svg/svg.go                  |    75 +
 src/cmd/pprof/internal/symbolizer/symbolizer.go    |   191 +
 src/cmd/pprof/internal/symbolz/symbolz.go          |   111 +
 src/cmd/pprof/internal/tempfile/tempfile.go        |    45 +
 src/cmd/pprof/pprof.go                             |   202 +
 src/cmd/yacc/testdata/expr/expr.y                  |     2 +
 src/cmd/yacc/yacc.go                               |    90 +-
 src/compress/bzip2/bzip2.go                        |     2 +
 src/compress/flate/inflate.go                      |     8 +-
 src/compress/gzip/gunzip.go                        |     3 +-
 src/compress/lzw/reader.go                         |     2 +
 src/compress/zlib/reader.go                        |     1 +
 src/crypto/tls/handshake_server.go                 |     4 +
 src/crypto/tls/handshake_server_test.go            |    26 +
 .../testdata/Server-TLSv12-IssueTicketPreDisable   |    87 +
 .../tls/testdata/Server-TLSv12-ResumeDisabled      |    87 +
 src/crypto/tls/ticket.go                           |     3 +-
 src/crypto/x509/pkix/pkix.go                       |     2 +-
 src/crypto/x509/root_unix.go                       |    25 +
 src/crypto/x509/x509.go                            |     2 +-
 src/crypto/x509/x509_test.go                       |    11 +
 src/database/sql/sql.go                            |    41 +-
 src/database/sql/sql_test.go                       |    31 +
 src/debug/dwarf/type.go                            |    11 +
 src/encoding/asn1/asn1.go                          |    12 +-
 src/encoding/asn1/asn1_test.go                     |     5 +
 src/encoding/binary/binary.go                      |    77 +-
 src/encoding/binary/binary_test.go                 |    23 +-
 src/encoding/gob/decode.go                         |    13 +-
 src/encoding/gob/decoder.go                        |     9 +-
 src/encoding/gob/encode.go                         |    77 +-
 src/encoding/gob/encoder.go                        |     4 -
 src/encoding/gob/encoder_test.go                   |    22 +
 src/encoding/gob/type.go                           |    76 +-
 src/encoding/json/decode.go                        |     6 +-
 src/encoding/json/decode_test.go                   |    12 +-
 src/flag/flag.go                                   |    15 +-
 src/flag/flag_test.go                              |    10 +
 src/fmt/doc.go                                     |    24 +-
 src/fmt/fmt_test.go                                |   123 +-
 src/fmt/format.go                                  |    52 +-
 src/fmt/print.go                                   |   179 +-
 src/go/build/build.go                              |     6 +-
 src/go/build/doc.go                                |     1 +
 src/go/doc/exports.go                              |    26 +-
 src/go/doc/testdata/blank.0.golden                 |    37 +
 src/go/doc/testdata/blank.1.golden                 |    46 +
 src/go/doc/testdata/blank.2.golden                 |    37 +
 src/go/doc/testdata/blank.go                       |    38 +
 src/go/format/format.go                            |   221 +-
 src/go/format/format_test.go                       |     6 +-
 src/image/gif/reader.go                            |     7 +-
 src/image/gif/reader_test.go                       |    64 +-
 src/image/gif/writer.go                            |    18 +-
 src/image/gif/writer_test.go                       |    23 +
 src/lib9/tempdir_windows.c                         |    19 +-
 src/liblink/obj5.c                                 |    21 +-
 src/liblink/objfile.c                              |    36 +-
 src/log/syslog/syslog_unix.go                      |     2 +-
 src/math/big/int.go                                |     6 +
 src/math/big/int_test.go                           |    14 +-
 src/math/sincos_amd64.s                            |    13 +-
 src/net/dial_test.go                               |    14 +-
 src/net/dnsclient_unix.go                          |     2 +-
 src/net/dnsconfig_unix.go                          |     2 +-
 src/net/empty.c                                    |     8 -
 src/net/file_stub.go                               |    38 +
 src/net/file_test.go                               |     2 +-
 src/net/file_unix.go                               |     2 +-
 src/net/http/cookie.go                             |    10 +-
 src/net/http/cookie_test.go                        |    32 +
 src/net/http/export_test.go                        |    25 +
 src/net/http/httputil/dump.go                      |    12 +-
 src/net/http/httputil/dump_test.go                 |    30 +-
 src/net/http/{z_last_test.go => main_test.go}      |    30 +-
 src/net/http/request.go                            |     3 +-
 src/net/http/serve_test.go                         |    52 +
 src/net/http/server.go                             |    37 +-
 src/net/http/transport.go                          |    46 +-
 src/net/http/transport_test.go                     |    90 +-
 src/net/ipraw_test.go                              |     5 +
 src/net/lookup_stub.go                             |    49 +
 src/net/lookup_unix.go                             |     2 +-
 src/net/mail/message.go                            |    13 +-
 src/net/mail/message_test.go                       |    10 +
 src/net/net.go                                     |     1 -
 src/net/port_test.go                               |     6 +
 src/net/port_unix.go                               |     2 +-
 src/net/rpc/server.go                              |    25 +-
 src/net/sock_bsd.go                                |     2 +-
 src/net/{sock_solaris.go => sock_stub.go}          |     2 +
 src/net/sockopt_bsd.go                             |     2 +-
 src/net/sockopt_posix.go                           |     2 +-
 src/net/sockopt_stub.go                            |    37 +
 src/net/sockoptip_bsd.go                           |     2 +-
 src/net/sockoptip_posix.go                         |     2 +-
 src/net/sockoptip_stub.go                          |    14 +-
 src/net/tcpsockopt_openbsd.go                      |    16 +
 src/net/tcpsockopt_posix.go                        |     2 +-
 src/net/tcpsockopt_stub.go                         |     8 +-
 src/os/env.go                                      |     5 +
 src/os/env_test.go                                 |    26 +
 src/os/error_plan9.go                              |     2 +-
 src/os/exec/exec_test.go                           |     5 +-
 src/os/os_test.go                                  |    50 +
 src/os/path.go                                     |    10 +-
 src/os/proc.go                                     |    15 +-
 src/os/signal/signal_test.go                       |     6 +-
 src/path/filepath/match.go                         |     8 +-
 src/reflect/all_test.go                            |    68 +
 src/reflect/type.go                                |    18 +-
 src/reflect/value.go                               |     6 +-
 src/regexp/syntax/parse.go                         |    34 +
 src/regexp/syntax/parse_test.go                    |    13 +
 src/run.bash                                       |    15 +-
 src/run.bat                                        |     7 +
 src/runtime/asm_386.s                              |    21 +-
 src/runtime/asm_amd64.s                            |    22 +-
 src/runtime/asm_amd64p32.s                         |     2 -
 src/runtime/asm_arm.s                              |    28 +-
 src/runtime/cgo/callbacks.c                        |     3 +
 src/runtime/cgo/dragonfly.c                        |     4 +
 src/runtime/cgo/freebsd.c                          |     4 +
 src/runtime/cgo/gcc_setenv.c                       |     7 +
 src/runtime/cgo/netbsd.c                           |     4 +
 src/runtime/cgo/openbsd.c                          |     4 +
 src/runtime/cgo/setenv.c                           |     3 +
 src/runtime/cgocall.go                             |    12 +-
 src/runtime/crash_test.go                          |    88 +
 src/runtime/debug.go                               |    30 +-
 src/runtime/debug/{debug.c => debug.s}             |     0
 src/runtime/defs_windows.go                        |     1 -
 src/runtime/defs_windows_386.h                     |     1 -
 src/runtime/defs_windows_amd64.h                   |     1 -
 src/runtime/env_posix.go                           |    13 +-
 src/runtime/error.go                               |    22 -
 src/runtime/heapdump.c                             |    28 +-
 src/runtime/malloc.c                               |    28 +-
 src/runtime/malloc.go                              |     2 +-
 src/runtime/malloc.h                               |     5 +-
 src/runtime/mcache.c                               |    10 +-
 src/runtime/mem.go                                 |    43 +-
 src/runtime/mem_plan9.c                            |     1 +
 src/runtime/mem_windows.c                          |    12 +
 src/runtime/mgc0.c                                 |   157 +-
 src/runtime/mheap.c                                |     4 +
 src/runtime/os_windows.c                           |    12 +-
 src/runtime/os_windows_386.c                       |    28 -
 src/runtime/os_windows_amd64.c                     |    25 -
 src/runtime/panic.go                               |    80 +-
 src/runtime/proc.c                                 |   164 +-
 src/runtime/proc.go                                |     8 +
 src/runtime/rt0_linux_386.s                        |     2 +-
 src/runtime/rt0_linux_arm.s                        |     2 +-
 src/runtime/rt0_plan9_386.s                        |     8 +-
 src/runtime/rt0_plan9_amd64.s                      |     8 +-
 src/runtime/rt0_solaris_amd64.s                    |     2 +-
 src/runtime/rt0_windows_386.s                      |     2 +-
 src/runtime/rt0_windows_amd64.s                    |     2 +-
 src/runtime/runtime.c                              |    47 +-
 src/runtime/runtime.go                             |    11 +
 src/runtime/runtime.h                              |    44 +-
 src/runtime/runtime_test.go                        |    26 +-
 src/runtime/sema.go                                |     5 +
 src/runtime/signals_darwin.h                       |     3 +
 src/runtime/signals_dragonfly.h                    |     3 +
 src/runtime/signals_freebsd.h                      |     3 +
 src/runtime/signals_linux.h                        |     3 +
 src/runtime/signals_nacl.h                         |     3 +
 src/runtime/signals_netbsd.h                       |     3 +
 src/runtime/signals_openbsd.h                      |     3 +
 src/runtime/signals_plan9.h                        |     3 +
 src/runtime/signals_solaris.h                      |     3 +
 src/runtime/stack.c                                |    92 +-
 src/runtime/stack.h                                |    21 +-
 src/runtime/stack_test.go                          |     4 -
 src/runtime/stubs.go                               |     7 +-
 src/runtime/sys_dragonfly_386.s                    |     2 +-
 src/runtime/sys_freebsd_386.s                      |     2 +-
 src/runtime/sys_netbsd_386.s                       |     2 +-
 src/runtime/sys_openbsd_386.s                      |     2 +-
 src/runtime/sys_windows_386.s                      |     2 +-
 src/runtime/sys_windows_amd64.s                    |     2 +-
 src/runtime/syscall_windows_test.go                |     6 +
 src/runtime/thunk.s                                |    20 +-
 src/runtime/tls_arm.s                              |     6 +-
 src/runtime/traceback.go                           |    48 +-
 src/runtime/vdso_linux_amd64.c                     |     9 +-
 src/strings/strings.go                             |     2 +
 src/sync/atomic/64bit_arm.go                       |    12 +
 src/sync/atomic/asm_arm.s                          |     2 +-
 src/sync/atomic/asm_linux_arm.s                    |     2 +-
 src/sync/atomic/export_linux_arm_test.go           |     2 -
 src/sync/atomic/value.go                           |    85 +
 src/sync/atomic/value_test.go                      |   195 +
 src/sync/once.go                                   |     7 +-
 src/sync/once_test.go                              |    26 +-
 src/syscall/asm_darwin_386.s                       |     5 -
 src/syscall/asm_darwin_amd64.s                     |     4 -
 src/syscall/asm_dragonfly_386.s                    |     5 -
 src/syscall/asm_dragonfly_amd64.s                  |     5 -
 src/syscall/asm_freebsd_386.s                      |     5 -
 src/syscall/asm_freebsd_amd64.s                    |     5 -
 src/syscall/asm_freebsd_arm.s                      |     5 -
 src/syscall/asm_linux_386.s                        |     7 -
 src/syscall/asm_linux_amd64.s                      |     5 -
 src/syscall/asm_linux_arm.s                        |     5 -
 src/syscall/asm_nacl_386.s                         |     1 -
 src/syscall/asm_nacl_amd64p32.s                    |     1 -
 src/syscall/asm_nacl_arm.s                         |     1 -
 src/syscall/asm_netbsd_386.s                       |     5 -
 src/syscall/asm_netbsd_amd64.s                     |     5 -
 src/syscall/asm_netbsd_arm.s                       |     5 -
 src/syscall/asm_openbsd_386.s                      |     5 -
 src/syscall/asm_openbsd_amd64.s                    |     5 -
 src/syscall/asm_plan9_386.s                        |     6 -
 src/syscall/asm_plan9_amd64.s                      |     6 -
 src/syscall/env_plan9.go                           |    39 +-
 src/syscall/env_unix.go                            |    48 +-
 src/syscall/env_windows.go                         |     8 +
 src/syscall/exec_linux.go                          |   123 +-
 .../syscall/export_test.go                         |     8 +-
 src/syscall/mksyscall_windows.go                   |    24 +-
 src/syscall/str.go                                 |     6 +-
 src/syscall/syscall_test.go                        |    17 +
 src/syscall/syscall_unix.go                        |     2 +-
 src/syscall/zsyscall_windows.go                    |    15 +-
 src/testing/allocs_test.go                         |    29 +
 src/testing/testing.go                             |    58 +-
 src/testing/testing_test.go                        |    18 +
 src/text/template/doc.go                           |     9 +-
 src/text/template/exec.go                          |     2 +
 src/text/template/exec_test.go                     |    74 +-
 src/text/template/funcs.go                         |    86 +-
 src/time/sleep.go                                  |     1 +
 src/time/time.go                                   |     5 +
 test/escape2.go                                    |     2 +
 test/escape2n.go                                   |  1494 ++
 test/fixedbugs/bug491.go                           |   110 +
 test/fixedbugs/issue4232.go                        |    29 +-
 test/fixedbugs/issue8280.dir/a.go                  |     3 +
 test/fixedbugs/issue8280.dir/b.go                  |     5 +
 test/fixedbugs/issue8280.go                        |     9 +
 test/fixedbugs/issue8311.go                        |    16 +
 test/fixedbugs/issue8507.go                        |    16 +
 test/fixedbugs/issue8761.go                        |    26 +
 test/linkx.go                                      |     2 +-
 test/live.go                                       |    20 +-
 test/live2.go                                      |    10 +-
 test/nosplit.go                                    |    13 +-
 367 files changed, 50092 insertions(+), 26680 deletions(-)
