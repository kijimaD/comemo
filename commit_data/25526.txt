commit 21b4f234c716cb35ca0c7e02f81b760cce8f7f37
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sat Dec 26 09:51:59 2015 -0800

    runtime: for c-archive/c-shared, install signal handlers synchronously
    
    The previous behaviour of installing the signal handlers in a separate
    thread meant that Go initialization raced with non-Go initialization if
    the non-Go initialization also wanted to install signal handlers.  Make
    installing signal handlers synchronous so that the process-wide behavior
    is predictable.
    
    Update #9896.
    
    Change-Id: Ice24299877ec46f8518b072a381932d273096a32
    Reviewed-on: https://go-review.googlesource.com/18150
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Crawshaw <crawshaw@golang.org>

 misc/cgo/testcarchive/main.c   | 39 +++++++++++++++++++++++++++++++++++++++
 src/os/signal/doc.go           |  5 ++++-
 src/runtime/os1_darwin.go      | 17 +++++++++++++++++
 src/runtime/os1_dragonfly.go   |  8 ++++++++
 src/runtime/os1_freebsd.go     |  8 ++++++++
 src/runtime/os1_linux.go       | 22 ++++++++++++++++++----
 src/runtime/os1_nacl.go        |  2 +-
 src/runtime/os1_netbsd.go      |  8 ++++++++
 src/runtime/os1_openbsd.go     |  8 ++++++++
 src/runtime/os1_plan9.go       |  2 +-
 src/runtime/os3_solaris.go     | 13 +++++++++++++
 src/runtime/proc.go            |  2 +-
 src/runtime/rt0_darwin_386.s   |  4 ++++
 src/runtime/rt0_darwin_amd64.s |  4 ++++
 src/runtime/rt0_darwin_arm.s   |  4 ++++
 src/runtime/rt0_darwin_arm64.s |  5 +++++
 src/runtime/rt0_linux_386.s    |  4 ++++
 src/runtime/rt0_linux_amd64.s  |  4 ++++
 src/runtime/rt0_linux_arm.s    |  4 ++++
 src/runtime/rt0_linux_arm64.s  |  4 ++++
 src/runtime/signal1_unix.go    | 29 ++++++++++++++++++++++++++---
 src/runtime/signal2_unix.go    | 14 ++++++++++++++
 src/runtime/signal_windows.go  |  2 +-
 23 files changed, 200 insertions(+), 12 deletions(-)
