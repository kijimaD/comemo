commit f00e947cdf5cdac794d571c87a81ea8878a6fe4f
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sun Apr 23 12:25:47 2023 -0700

    runtime: add raceFiniLock to lock ranking
    
    Also preserve the PC/SP in reentersyscall when doing lock ranking.
    The test is TestDestructorCallbackRace with the staticlockranking
    experiment enabled.
    
    For #59711
    
    Change-Id: I87ac1d121ec0d399de369666834891ab9e7d11b0
    Reviewed-on: https://go-review.googlesource.com/c/go/+/487955
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Michael Knyszek <mknyszek@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@google.com>
    Auto-Submit: Ian Lance Taylor <iant@google.com>
    Run-TryBot: Ian Lance Taylor <iant@google.com>

 src/runtime/lockrank.go     |  3 +++
 src/runtime/lockrank_off.go |  2 ++
 src/runtime/lockrank_on.go  | 10 ++++++++--
 src/runtime/mklockrank.go   |  2 ++
 src/runtime/proc.go         |  6 ++++++
 src/runtime/race.go         |  4 ++--
 6 files changed, 23 insertions(+), 4 deletions(-)
