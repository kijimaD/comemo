commit 644628536f248cf3d5c977ed49abe51243d69ae6
Author: Filippo Valsorda <filippo@golang.org>
Date:   Mon Nov 4 12:56:04 2024 +0100

    crypto/rand: move OS interaction to crypto/internal/sysrand
    
    We're going to use that package as the passive entropy source for the
    FIPS module, and we need to import it from a package that will be
    imported by crypto/rand.
    
    Since there is no overridable Reader now, introduced a mechanism to test
    the otherwise impossible failure of the OS entropy source.
    
    For #69536
    
    Change-Id: I558687ed1ec896dba05b99b937970bb809de3fe7
    Reviewed-on: https://go-review.googlesource.com/c/go/+/624976
    Reviewed-by: Daniel McCarney <daniel@binaryparadox.net>
    Reviewed-by: Roland Shoemaker <roland@golang.org>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Auto-Submit: Filippo Valsorda <filippo@golang.org>
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>

 .../sysrand}/internal/seccomp/seccomp_linux.go     |   0
 .../internal/seccomp/seccomp_unsupported.go        |   0
 src/crypto/internal/sysrand/rand.go                |  77 +++++++++++
 src/crypto/{rand => internal/sysrand}/rand_aix.go  |   2 +-
 .../{rand => internal/sysrand}/rand_arc4random.go  |   2 +-
 .../{rand => internal/sysrand}/rand_getrandom.go   |   2 +-
 src/crypto/{rand => internal/sysrand}/rand_js.go   |   2 +-
 .../{rand => internal/sysrand}/rand_linux_test.go  |   5 +-
 .../{rand => internal/sysrand}/rand_netbsd.go      |   2 +-
 .../{rand => internal/sysrand}/rand_plan9.go       |   2 +-
 src/crypto/internal/sysrand/rand_test.go           | 142 +++++++++++++++++++++
 .../{rand => internal/sysrand}/rand_wasip1.go      |   2 +-
 .../{rand => internal/sysrand}/rand_windows.go     |   2 +-
 src/crypto/rand/rand.go                            |  48 +------
 src/crypto/rand/rand_test.go                       |  31 +----
 src/go/build/deps_test.go                          |   5 +-
 src/runtime/panic.go                               |   5 +
 17 files changed, 245 insertions(+), 84 deletions(-)
