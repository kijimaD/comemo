commit 8f194bf5ff15e3f62ce02669bf48d54a6342260e
Author: Russ Cox <rsc@golang.org>
Date:   Thu Mar 12 19:04:38 2009 -0700

    make 6g constants behave as ken proposes.  (i hope.)
    various bug fixes and tests involving constants.
    
    test/const1.go is the major new test case.
    
    R=ken
    OCL=26216
    CL=26224

 src/cmd/6g/cgen.c                |  12 +-
 src/cmd/6g/gsubr.c               |  13 +-
 src/cmd/gc/const.c               | 769 ++++++++++++++++++++++++---------------
 src/cmd/gc/dcl.c                 |  20 +-
 src/cmd/gc/export.c              |  18 +-
 src/cmd/gc/go.h                  |  48 +--
 src/cmd/gc/go.y                  |  60 ++-
 src/cmd/gc/lex.c                 |  20 +-
 src/cmd/gc/mparith1.c            |  30 +-
 src/cmd/gc/mparith2.c            |   1 +
 src/cmd/gc/subr.c                | 157 ++------
 src/cmd/gc/swt.c                 |  36 +-
 src/cmd/gc/walk.c                | 236 ++++++------
 src/lib/syscall/errstr_darwin.go |   2 +-
 src/lib/syscall/errstr_linux.go  |   2 +-
 test/const.go                    |   6 +
 test/const1.go                   |  79 ++++
 test/const2.go                   |  12 +
 test/const3.go                   |  29 ++
 test/convert.go                  |  53 +++
 test/convlit.go                  |   8 +-
 test/errchk                      |   4 +-
 test/fixedbugs/bug090.go         |   9 +-
 test/fixedbugs/bug127.go         |   4 +-
 test/golden.out                  |  46 +--
 25 files changed, 966 insertions(+), 708 deletions(-)
