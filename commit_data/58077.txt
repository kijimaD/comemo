commit 3e7cb78800c662b36f9aebf9312ab25b42c2da2a
Author: Austin Clements <austin@google.com>
Date:   Mon Nov 18 14:56:43 2024 -0500

    cmd/go: re-enable build JSON from go test -json, now with GODEBUG
    
    This re-enables the behavior of CL 536399 (by effectively reverting CL
    628955), so now go test -json again includes build output and failures
    as JSON rather than text.
    
    However, since this behavior is clearly enough to trip up some build
    systems, this CL includes a GODEBUG=gotestjsonbuildtext that can be
    set to 1 to revert to the old behavior.
    
    Fixes #70402.
    Updates #62067.
    
    Cq-Include-Trybots: luci.golang.try:gotip-darwin-arm64_13,gotip-linux-amd64-longtest,gotip-windows-amd64-longtest
    Change-Id: I84e778cd844783dacfc83433e391b5ccb5925127
    Reviewed-on: https://go-review.googlesource.com/c/go/+/629335
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Dmitri Shuralyov <dmitshur@golang.org>
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    Auto-Submit: Austin Clements <austin@google.com>

 doc/godebug.md                                 |  8 ++++++++
 doc/next/3-tools.md                            | 10 +++++++---
 src/cmd/go/internal/test/testflag.go           | 12 +++++++++---
 src/cmd/go/testdata/script/test_json_build.txt | 15 ++++++++++++---
 src/internal/godebugs/table.go                 |  1 +
 src/runtime/metrics/doc.go                     |  5 +++++
 6 files changed, 42 insertions(+), 9 deletions(-)
