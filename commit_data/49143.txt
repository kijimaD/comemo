commit 6f57139c7a6bc776f1335aca13d276d36343cf7c
Author: Rob Findley <rfindley@google.com>
Date:   Wed Jul 21 10:21:23 2021 -0400

    [dev.typeparams] go/types: set type parameter indices when they are bound
    
    It is invalid to use a type parameter for more than one type, so we can
    avoid passing the type parameter index to NewTypeParam and just set it
    when type parameters are bound to a type via SetTParams or during type
    checking.
    
    In order to enforce the correctness of this change, introduce a
    TypeParams type to represent a list of type parameters that have been
    associated with a type. For now, expose this new type as the API for
    type parameters, but this is of course not necessarily a final API.
    
    Allowing *TypeParams to be nil also decreases the size of Named and
    Signature, which is good as most instances of these types will not be
    parameterized.
    
    Change-Id: Ia1e39ba51edb05bb535eb5f41c34e9dd02d39c38
    Reviewed-on: https://go-review.googlesource.com/c/go/+/336249
    Trust: Robert Findley <rfindley@google.com>
    Run-TryBot: Robert Findley <rfindley@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/go/types/api_test.go    |  2 +-
 src/go/types/assignments.go |  2 +-
 src/go/types/builtins.go    |  3 ++-
 src/go/types/call.go        | 20 +++++++++---------
 src/go/types/decl.go        |  8 ++++----
 src/go/types/index.go       |  2 +-
 src/go/types/instance.go    |  2 +-
 src/go/types/instantiate.go | 10 ++++-----
 src/go/types/lookup.go      | 18 ++++++++--------
 src/go/types/named.go       | 16 +++++++--------
 src/go/types/object.go      |  4 ++--
 src/go/types/predicates.go  |  2 +-
 src/go/types/signature.go   | 25 +++++++++++++----------
 src/go/types/sizeof_test.go |  4 ++--
 src/go/types/subst.go       |  4 ++--
 src/go/types/typeparam.go   | 50 +++++++++++++++++++++++++++++++++++++++++----
 src/go/types/typestring.go  |  4 ++--
 17 files changed, 111 insertions(+), 65 deletions(-)
