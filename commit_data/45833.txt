commit b30c7a80443c6aed5a7f57ae4c57d691ea88ad9a
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Nov 22 13:47:55 2020 -0800

    [dev.regabi] cmd/compile/internal/gc: add MethodName for getting referenced method
    
    A common operation throughout the front end is getting the ONAME for a
    method used in a method selector, method expression, or method value.
    This CL adds MethodName as a uniform API for doing this for all of
    these kinds of nodes.
    
    For method selectors (ODOTMETH) and method expressions (ONAMEs where
    isMethodExpression reports true), we take advantage of the Node.Opt
    field to save the types.Field. This is the approach we already started
    taking in golang.org/cl/271217 (caching types.Field in Node.Opt for
    ODOT).
    
    For method values (OCALLPART), we continue using the existing
    callpartMethod helper function. Escape analysis already uses Node.Opt
    for tracking the method value's closure's data flow.
    
    A subsequent, automated refactoring CL will make more use of this
    method. For now, we just address a few cases in inl.go that aren't
    easily automated.
    
    Passes toolstash-check.
    
    Change-Id: Ic92b288b2d8b2fa7e18e3b68634326b8ef0d869b
    Reviewed-on: https://go-review.googlesource.com/c/go/+/272387
    Trust: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/cmd/compile/fmtmap_test.go           |  1 -
 src/cmd/compile/internal/gc/closure.go   |  1 +
 src/cmd/compile/internal/gc/inl.go       | 11 ++---------
 src/cmd/compile/internal/gc/syntax.go    |  6 +++++-
 src/cmd/compile/internal/gc/typecheck.go | 21 +++++++++++++++++++++
 5 files changed, 29 insertions(+), 11 deletions(-)
