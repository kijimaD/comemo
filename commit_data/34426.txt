commit 2baed3856deb9b077cc9b604c8247865bd3adec0
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Feb 14 19:35:03 2018 -0500

    cmd/asm: fix assembling return jump
    
    In RET instruction, the operand is the return jump's target,
    which should be put in Prog.To.
    
    Add an action "buildrundir" to the test driver, which builds
    (compile+assemble+link) the code in a directory and runs the
    resulting binary.
    
    Fixes #23838.
    
    Change-Id: I7ebe7eda49024b40a69a24857322c5ca9c67babb
    Reviewed-on: https://go-review.googlesource.com/94175
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>

 src/cmd/asm/internal/asm/asm.go            |  2 +-
 src/cmd/asm/internal/asm/testdata/386.s    |  1 +
 src/cmd/asm/internal/asm/testdata/amd64.s  |  1 +
 src/cmd/asm/internal/asm/testdata/arm.s    |  2 ++
 src/cmd/asm/internal/asm/testdata/arm64.s  |  1 +
 src/cmd/asm/internal/asm/testdata/mips.s   |  1 +
 src/cmd/asm/internal/asm/testdata/mips64.s |  1 +
 src/cmd/asm/internal/asm/testdata/ppc64.s  |  1 +
 src/cmd/asm/internal/asm/testdata/s390x.s  |  1 +
 test/retjmp.dir/a.s                        | 12 +++++++++++
 test/retjmp.dir/main.go                    | 32 ++++++++++++++++++++++++++++++
 test/retjmp.go                             |  9 +++++++++
 test/run.go                                | 17 +++++++++++++---
 13 files changed, 77 insertions(+), 4 deletions(-)
