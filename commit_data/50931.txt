commit 4fb35d6cee036fa2583512940de91a03f7f029e9
Author: Than McIntosh <thanm@google.com>
Date:   Tue Oct 18 11:28:52 2022 -0400

    cmd/compile: special case coverage vars in pkg init order
    
    When computing package initialization order, special case the counter
    variables inserted by "cmd/cover" for coverage instrumentation, since
    their presence can perturb the order in which variables are
    initialized in ways that are user-visible and incorrect with respect
    to the original (uninstrumented) program.
    
    Fixes #56293.
    
    Change-Id: Ieec9239ded4f8e2503ff9bbe0fe171afb771b335
    Reviewed-on: https://go-review.googlesource.com/c/go/+/443715
    Run-TryBot: Than McIntosh <thanm@google.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Reviewed-by: David Chase <drchase@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/compile/internal/coverage/cover.go         | 98 +++++++++++++---------
 src/cmd/compile/internal/gc/main.go                | 11 ++-
 src/cmd/compile/internal/pkginit/initorder.go      |  9 ++
 .../go/testdata/script/cover_var_init_order.txt    | 55 ++++++++++++
 4 files changed, 132 insertions(+), 41 deletions(-)
