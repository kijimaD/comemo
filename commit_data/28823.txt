commit 6a1153acb4aff2d481be1611862be0f9f5203e62
Author: Josh Bleecher Snyder <josharian@gmail.com>
Date:   Fri Jul 1 11:05:29 2016 -0700

    [dev.ssa] cmd/compile: refactor out rulegen value parsing
    
    Previously, genMatch0 and genResult0 contained
    lots of duplication: locating the op, parsing
    the value, validation, etc.
    Parsing and validation was mixed in with code gen.
    
    Extract a helper, parseValue. It is responsible
    for parsing the value, locating the op, and doing
    shared validation.
    
    As a bonus (and possibly as my original motivation),
    make op selection pay attention to the number
    of args present.
    This allows arch-specific ops to share a name
    with generic ops as long as there is no ambiguity.
    It also detects and reports unresolved ambiguity,
    unlike before, where it would simply always
    pick the generic op, with no warning.
    
    Also use parseValue when generating the top-level
    op dispatch, to ensure its opinion about ops
    matches genMatch0 and genResult0.
    
    The order of statements in the generated code used
    to depend on the exact rule. It is now somewhat
    independent of the rule. That is the source
    of some of the generated code changes in this CL.
    See rewritedec64 and rewritegeneric for examples.
    It is a one-time change.
    
    The op dispatch switch and functions used to be
    sorted by opname without architecture. The sort
    now includes the architecture, leading to further
    generated code changes.
    See rewriteARM and rewriteAMD64 for examples.
    Again, it is a one-time change.
    
    There are no functional changes.
    
    Change-Id: I22c989183ad5651741ebdc0566349c5fd6c6b23c
    Reviewed-on: https://go-review.googlesource.com/24649
    Run-TryBot: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssa/gen/rulegen.go    |   402 +-
 src/cmd/compile/internal/ssa/rewrite386.go     | 15042 ++++++++--------
 src/cmd/compile/internal/ssa/rewriteAMD64.go   | 21862 +++++++++++------------
 src/cmd/compile/internal/ssa/rewriteARM.go     | 16988 +++++++++---------
 src/cmd/compile/internal/ssa/rewriteARM64.go   |  4026 ++---
 src/cmd/compile/internal/ssa/rewritePPC64.go   |  1258 +-
 src/cmd/compile/internal/ssa/rewritedec64.go   |    18 +-
 src/cmd/compile/internal/ssa/rewritegeneric.go |    70 +-
 8 files changed, 29830 insertions(+), 29836 deletions(-)
