commit e9eed78dc3f4ab9a87f43c7d902025329f622783
Author: Bryan C. Mills <bcmills@google.com>
Date:   Tue Mar 2 09:52:55 2021 -0500

    cmd/go: resolve std-vendored dependencies as std packages except in 'go get' and 'go mod'
    
    In CL 251159, I removed a hard-coded special case changing the
    rewriting behavior for std dependencies in GOROOT/src/vendor and
    GOROOT/src/cmd/vendor. Unfortunately, that caused packages in 'std' to
    be reported as stale when run within GOROOT/src.
    
    This change restores the special-case behavior, but plumbs it through
    the PackageOpts explicitly instead of comparing strings stored in
    global variables.
    
    Fixes #44725
    
    Change-Id: If084fe74972ce1704715ca79b0b7e092dd90c88b
    Reviewed-on: https://go-review.googlesource.com/c/go/+/297869
    Trust: Bryan C. Mills <bcmills@google.com>
    Run-TryBot: Bryan C. Mills <bcmills@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Jay Conrod <jayconrod@google.com>

 src/cmd/go/internal/modcmd/tidy.go            |  9 ++++----
 src/cmd/go/internal/modcmd/vendor.go          |  9 ++++----
 src/cmd/go/internal/modcmd/why.go             |  9 ++++----
 src/cmd/go/internal/modget/get.go             | 14 ++++++------
 src/cmd/go/internal/modload/load.go           |  9 ++++++--
 src/cmd/go/testdata/script/list_std_stale.txt | 31 +++++++++++++++++++++++++++
 src/cmd/go/testdata/script/mod_list_std.txt   | 14 ++++++------
 src/cmd/go/testdata/script/mod_std_vendor.txt |  6 +++---
 8 files changed, 72 insertions(+), 29 deletions(-)
