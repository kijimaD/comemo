commit 6db970e20acd7caeed268fdff458609570f21c90
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Dec 6 18:13:43 2020 -0800

    [dev.regabi] cmd/compile: rewrite Aux uses of ir.Node to *ir.Name [generated]
    
    Now that the only remaining ir.Node implementation that is stored
    (directly) into ssa.Aux, we can rewrite all of the conversions between
    ir.Node and ssa.Aux to use *ir.Name instead.
    
    rf doesn't have a way to rewrite the type switch case clauses, so we
    just use sed instead. There's only a handful, and they're the only
    times that "case ir.Node" appears anyway.
    
    The next CL will move the tag method declarations so that ir.Node no
    longer implements ssa.Aux.
    
    Passes buildall w/ toolstash -cmp.
    
    Updates #42982.
    
    [git-generate]
    cd src/cmd/compile/internal
    sed -i -e 's/case ir.Node/case *ir.Name/' gc/plive.go */ssa.go
    
    cd ssa
    rf '
    ex . ../gc {
      import "cmd/compile/internal/ir"
    
      var v *Value
      v.Aux.(ir.Node) -> v.Aux.(*ir.Name)
    
      var n ir.Node
      var asAux func(Aux)
      strict n        # only match ir.Node-typed expressions; not *ir.Name
      implicit asAux  # match implicit assignments to ssa.Aux
      asAux(n)        -> n.(*ir.Name)
    }
    '
    
    Change-Id: I3206ef5f12a7cfa37c5fecc67a1ca02ea4d52b32
    Reviewed-on: https://go-review.googlesource.com/c/go/+/275789
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Trust: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>

 src/cmd/compile/internal/arm/ssa.go       |  2 +-
 src/cmd/compile/internal/arm64/ssa.go     |  2 +-
 src/cmd/compile/internal/gc/pgen.go       |  2 +-
 src/cmd/compile/internal/gc/plive.go      |  6 ++---
 src/cmd/compile/internal/gc/ssa.go        | 40 +++++++++++++++----------------
 src/cmd/compile/internal/mips/ssa.go      |  2 +-
 src/cmd/compile/internal/mips64/ssa.go    |  2 +-
 src/cmd/compile/internal/riscv64/ssa.go   |  2 +-
 src/cmd/compile/internal/ssa/deadstore.go | 10 ++++----
 src/cmd/compile/internal/ssa/debug.go     |  2 +-
 src/cmd/compile/internal/ssa/nilcheck.go  |  2 +-
 src/cmd/compile/internal/ssa/regalloc.go  |  2 +-
 src/cmd/compile/internal/wasm/ssa.go      |  2 +-
 13 files changed, 38 insertions(+), 38 deletions(-)
