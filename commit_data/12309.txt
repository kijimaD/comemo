commit b03a5f66e8f8a6b36c9d67e82d2edc9b3d4076ba
Author: Russ Cox <rsc@golang.org>
Date:   Thu Mar 1 12:12:22 2012 -0500

    cmd/go: fixes
    * Install tools into tool dir always
      (Fixes issue 3049.  Fixes issue 2868.  Fixes issue 2925.)
    * Make packages depend on compiler, linker (Fixes issue 3036.)
    * Do not recompile packages across roots (Fixes issue 3149.)
    * Allow use of binary-only packages (Fixes issue 2775.)
    * Avoid duplicate cgo dependencies (Fixes issue 3001.)
    * Show less in go get -x.  (Fixes issue 2926.)
    * Do not force repo root for existing checkout (Fixes issue 2969.)
    * Show full syntax error list always (Fixes issue 2811.)
    * Clean arguments before processing (Fixes issue 3034.)
    * Add flags for compiler, linker arguments (Fixes issue 2996.)
    * Pass flags in make.bash (Fixes issue 3091.)
    * Unify build flags, defined in one place.
    * Clean up error messages (Fixes issue 3075.  Fixes issue 2923.)
    * Support local import paths (Fixes issue 3118.)
    * Allow top-level package outside $GOPATH (Fixes issue 3009.)
    
    In addition to these fixes, all commands now take a list of
    go files as a way to specify a single package, just as go build and
    go run always have.  This means you can:
    
            go list -json x.go
            go fix x.go
            go vet x.go
            go test x_test.go
    
    Preliminary tests in test.bash.
    Mainly testing things that the ordinary build does not.
    I don't mind if the script doesn't run on Windows.
    
    I expect that gccgo support is now broken, and I hope that
    people will feel free to file issues and/or send CLs to fix it.  :-)
    
    R=golang-dev, dsymonds, r, rogpeppe
    CC=golang-dev
    https://golang.org/cl/5708054

 src/cmd/go/build.go                          | 442 ++++++++++++--------
 src/cmd/go/clean.go                          |   4 +-
 src/cmd/go/doc.go                            | 173 ++++----
 src/cmd/go/fix.go                            |   4 +-
 src/cmd/go/fmt.go                            |  12 +-
 src/cmd/go/get.go                            |  48 ++-
 src/cmd/go/help.go                           |  19 +-
 src/cmd/go/list.go                           |   4 +-
 src/cmd/go/main.go                           |  49 +--
 src/cmd/go/pkg.go                            | 593 +++++++++++++++++----------
 src/cmd/go/run.go                            |   8 +-
 src/cmd/go/test.bash                         |  54 +++
 src/cmd/go/test.go                           | 114 ++---
 src/cmd/go/testdata/errmsg/x.go              |   3 +
 src/cmd/go/testdata/errmsg/x1_test.go        |   3 +
 src/cmd/go/testdata/errmsg/x_test.go         |   3 +
 src/cmd/go/testdata/local/easy.go            |   7 +
 src/cmd/go/testdata/local/easysub/easysub.go |   7 +
 src/cmd/go/testdata/local/hard.go            |   7 +
 src/cmd/go/testdata/local/sub/sub.go         |  12 +
 src/cmd/go/testdata/local/sub/sub/subsub.go  |   7 +
 src/cmd/go/vcs.go                            |  33 ++
 src/cmd/go/vet.go                            |   4 +-
 src/make.bash                                |  27 +-
 24 files changed, 1043 insertions(+), 594 deletions(-)
