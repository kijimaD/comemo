commit d0dc93c8e1a5be4e0a44b7f8ecb0cb1417de50ce
Author: qmuntal <quimmuntal@gmail.com>
Date:   Fri Jan 19 14:14:17 2024 +0100

    runtime,internal/poll: move websocket handling out of the runtime on Windows
    
    On Windows, the netpoll is currently coupled with the websocket usage
    in the internal/poll package.
    
    This CL moves the websocket handling out of the runtime and puts it into
    the internal/poll package, which already contains most of the async I/O
    logic for websockets.
    
    This is a good refactor per se, as the Go runtime shouldn't know about
    websockets. In addition, it will make it easier (in a future CL) to only
    load ws2_32.dll when the Go program actually uses websockets.
    
    Change-Id: Ic820872cf9bdbbf092505ed7f7504edb6687735e
    Reviewed-on: https://go-review.googlesource.com/c/go/+/556936
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Bryan Mills <bcmills@google.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>

 src/internal/poll/fd_windows.go                  | 11 ++++-----
 src/internal/syscall/windows/syscall_windows.go  |  1 +
 src/internal/syscall/windows/zsyscall_windows.go | 13 +++++++++++
 src/runtime/netpoll_windows.go                   | 29 +++++++-----------------
 src/runtime/os_windows.go                        | 11 ---------
 5 files changed, 27 insertions(+), 38 deletions(-)
