commit 97cb0113a358a24931bc91c956da0cb023f2776c
Author: Dan Scales <danscales@google.com>
Date:   Wed Jun 2 00:03:25 2021 -0700

    [dev.typeparams] cmd/compile: fix export/import of constants with typeparam type
    
    A constant will have a TYPEPARAM type if it appears in a place where it
    must match that typeparam type (e.g. in a binary operation with a
    variable of that typeparam type). If so, then we must write out its
    actual constant kind as well, so its constant val can be read in
    properly during import.
    
    Fixed some export/import tests which were casting some untyped constants
    to avoid this problem.
    
    Change-Id: I285ad8f1c8febbe526769c96e6b27acbd23050f0
    Reviewed-on: https://go-review.googlesource.com/c/go/+/324189
    Run-TryBot: Dan Scales <danscales@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>

 src/cmd/compile/internal/typecheck/iexport.go | 44 +++++++++++++++++++++------
 src/cmd/compile/internal/typecheck/iimport.go | 28 ++++++++++++++---
 test/typeparam/fact.go                        |  6 ++--
 test/typeparam/factimp.dir/a.go               |  6 ++--
 test/typeparam/listimp.dir/a.go               |  3 +-
 5 files changed, 65 insertions(+), 22 deletions(-)
