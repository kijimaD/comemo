commit bdd1e283a914d4d161589adce4f2ad79767d029d
Author: Michael Pratt <mpratt@google.com>
Date:   Wed Nov 2 11:11:03 2022 -0400

    cmd/compile/internal/pgo: match on call line offsets
    
    Rather than matching calls to edges in the profile based directly on
    line number in the source file, use the line offset from the start of
    the function. This makes matching robust to changes in the source file
    above the function containing the call.
    
    The start line in the profile comes from Function.start_line, which is
    included in Go pprof output since CL 438255.
    
    Currently it is an error if no samples set start_line to help users
    detect profiles missing this information. In the future, we should
    fallback to using absolute lines, which is better than nothing.
    
    For #55022.
    
    Change-Id: Ie621950cfee1fef8fb200907a2a3f1ded41d04fa
    Reviewed-on: https://go-review.googlesource.com/c/go/+/447315
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Michael Pratt <mpratt@google.com>
    Auto-Submit: Michael Pratt <mpratt@google.com>

 src/cmd/compile/internal/inline/inl.go             |  15 ++-
 src/cmd/compile/internal/pgo/irgraph.go            | 127 +++++++++++----------
 src/cmd/compile/internal/test/pgo_inl_test.go      | 115 +++++++++++++++++--
 .../test/testdata/pgo/inline/inline_hot.go         |   6 +-
 .../test/testdata/pgo/inline/inline_hot.pprof      | Bin 1423 -> 943 bytes
 .../test/testdata/pgo/inline/inline_hot_test.go    |   6 +-
 6 files changed, 186 insertions(+), 83 deletions(-)
