commit 7914369e64190ce22e6fd6bba685e3f82338875a
Author: Ian Lance Taylor <iant@golang.org>
Date:   Fri Jul 14 08:22:30 2017 -0700

    cmd/go: update BuildContext.GOROOT and build.Tooldir with computed GOROOT
    
    This is necessary to make a relocated GOROOT work correctly.
    
    Fixes #20997
    
    Change-Id: I18624bd2e109721066cd9e4a887a12583ab79f5d
    Reviewed-on: https://go-review.googlesource.com/48550
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

 src/cmd/dist/test.go              | 32 ++++++++++++++++++++++++++++++++
 src/cmd/go/internal/cfg/cfg.go    | 22 +++++++++++++++++++---
 src/cmd/go/internal/work/build.go | 10 ----------
 3 files changed, 51 insertions(+), 13 deletions(-)
