commit a5c79283f79b5f03296fc2037f32d935aaec806f
Author: Michael Matloob <matloob@golang.org>
Date:   Mon Apr 3 16:07:41 2023 -0400

    cmd/go: return and handle errors from loadImport for bad imports
    
    And assign the error to the importing package. Before this change, for
    some errors for bad imports, such as importing a vendored package with
    the wrong path, we would make a dummy package for the imported package
    with the error on it. Instead report the error on the importing
    package where it belongs. Do so by returning an error from loadImport
    and handling it on the importing package.
    
    For #59157
    
    Change-Id: I952e1a82af3857efc5da4fd3f8bc6be473a60cf5
    Reviewed-on: https://go-review.googlesource.com/c/go/+/482877
    Reviewed-by: Bryan Mills <bcmills@google.com>
    Run-TryBot: Michael Matloob <matloob@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/go/internal/get/get.go                 |   8 +-
 src/cmd/go/internal/load/pkg.go                | 144 +++++++++++++++----------
 src/cmd/go/internal/load/test.go               |  15 ++-
 src/cmd/go/internal/work/action.go             |  11 +-
 src/cmd/go/testdata/script/list_import_err.txt |  22 ++++
 5 files changed, 133 insertions(+), 67 deletions(-)
