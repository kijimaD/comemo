commit 30282b091d6c80f4aa37d7c457fa288c3a181573
Author: Robert Griesemer <gri@golang.org>
Date:   Wed May 25 16:38:02 2016 -0700

    cmd/compile: correctly import labels, gotos, and fallthroughs
    
    The importer had several bugs with respect to labels and gotos:
    - it didn't create a new ONAME node for label names (label dcl,
      goto, continue, and break)
    - it overwrote the symbol for gotos with the dclstack
    - it didn't set the dclstack for labels
    
    In the process changed export format slightly to always assume
    a label name for labels and gotos, and never assume a label for
    fallthroughs.
    
    For fallthroughs and switch cases, now also set Xoffset like in
    the parser. (Not setting it, i.e., using 0 was ok since this is
    only used for verifying correct use of fallthroughs, which was
    checked already. But it's an extra level of verification of the
    import.)
    
    Fixes #15838.
    
    Change-Id: I3637f6314b8651c918df0c8cd70cd858c92bd483
    Reviewed-on: https://go-review.googlesource.com/23445
    Run-TryBot: Robert Griesemer <gri@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/compile/internal/gc/bexport.go | 11 +++---
 src/cmd/compile/internal/gc/bimport.go | 17 +++++++---
 test/fixedbugs/issue15838.dir/a.go     | 61 ++++++++++++++++++++++++++++++++++
 test/fixedbugs/issue15838.dir/b.go     |  9 +++++
 test/fixedbugs/issue15838.go           | 12 +++++++
 5 files changed, 100 insertions(+), 10 deletions(-)
