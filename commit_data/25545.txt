commit a4dcc692011bf1ceca9b1a363fd83f3e59e399ee
Author: Adam Langley <agl@golang.org>
Date:   Sun Nov 8 19:10:14 2015 -0800

    crypto/tls: don't send IP literals as SNI values.
    
    https://tools.ietf.org/html/rfc6066#section-3 states:
    
      “Literal IPv4 and IPv6 addresses are not permitted in "HostName".”
    
    However, if an IP literal was set as Config.ServerName (which could
    happen as easily as calling Dial with an IP address) then the code would
    send the IP literal as the SNI value.
    
    This change filters out IP literals, as recognised by net.ParseIP, from
    being sent as the SNI value.
    
    Fixes #13111.
    
    Change-Id: Ie9ec7acc767ae172b48c9c6dd8d84fa27b1cf0de
    Reviewed-on: https://go-review.googlesource.com/16742
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Adam Langley <agl@golang.org>

 src/crypto/tls/common.go                |  3 ++-
 src/crypto/tls/handshake_client.go      |  9 ++++++++-
 src/crypto/tls/handshake_client_test.go | 27 +++++++++++++++++++++++++++
 3 files changed, 37 insertions(+), 2 deletions(-)
