commit 7ded55f941889db8223aca28b319c09d89158ee1
Author: Russ Cox <rsc@golang.org>
Date:   Fri Nov 15 13:49:28 2024 -0500

    cmd/go/internal/fsys: convert to proper ReadDir
    
    Many releases ago we migrated
    from ioutil.ReadDir, which returned []os.FileInfo,
    to os.ReadDir, which returns []fs.DirEntry.
    The latter is faster, but the former is expected by go/build.Context.
    
    Convert fsys to use the new ReadDir signature.
    This should make the go command faster when scanning
    source trees, and it brings cmd/go up to date with the rest
    of the tree.
    
    Similarly, convert Walk to WalkDir.
    
    Change-Id: I767a8548d7ca7cc3c05f2ff073d18070a4e8a0da
    Reviewed-on: https://go-review.googlesource.com/c/go/+/628698
    Auto-Submit: Russ Cox <rsc@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>
    TryBot-Bypass: Russ Cox <rsc@golang.org>
    Reviewed-by: Sam Thanawalla <samthanawalla@google.com>

 src/cmd/go/internal/cfg/cfg.go        | 27 ++++++++++++++++-
 src/cmd/go/internal/fsys/fsys.go      | 36 ++++++++--------------
 src/cmd/go/internal/fsys/fsys_test.go | 57 ++++++++++++++++++-----------------
 src/cmd/go/internal/fsys/walk.go      | 49 ++++++++++++++++++------------
 src/cmd/go/internal/imports/scan.go   | 17 ++++++-----
 src/cmd/go/internal/load/pkg.go       | 10 +++---
 src/cmd/go/internal/modindex/read.go  | 12 +++++---
 src/cmd/go/internal/modindex/scan.go  | 16 +++++-----
 src/cmd/go/internal/modload/search.go |  8 ++---
 src/cmd/go/internal/search/search.go  | 12 ++++----
 src/cmd/go/internal/workcmd/use.go    |  6 ++--
 11 files changed, 141 insertions(+), 109 deletions(-)
