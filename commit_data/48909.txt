commit 3f1a517a45d2e443a327e0b28df17698e299ea50
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Jun 24 11:31:56 2021 -0700

    [dev.typeparams] cmd/compile: refactor "need to emit" logic for types
    
    This CL refactors out a single reflectdata.NeedEmit function that
    reports whether the current compilation unit needs to emit the runtime
    type descriptor and method wrappers for a given type.
    
    As a minor side bonus, this CL also skips compiling the "error.Error"
    wrapper in non-runtime packages. Package runtime already
    unconditionally emitted the runtime type descriptor for error, so we
    just need to make sure it emits the wrapper and other packages don't.
    
    Passes toolstash -cmp.
    
    Change-Id: Ic9ea219dfba8a0a57f2f42f817bdff7618732bff
    Reviewed-on: https://go-review.googlesource.com/c/go/+/330754
    Trust: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>

 src/cmd/compile/internal/reflectdata/reflect.go | 91 +++++++++++++++----------
 1 file changed, 55 insertions(+), 36 deletions(-)
