commit c075d82ccac5eb6fca481efccc798acac00f7dae
Author: Dmitriy Vyukov <dvyukov@google.com>
Date:   Wed May 22 22:22:57 2013 +0400

    runtime: fix and speedup malloc stats
    Currently per-sizeclass stats are lost for destroyed MCache's. This patch fixes this.
    Also, only update mstats.heap_alloc on heap operations, because that's the only
    stat that needs to be promptly updated. Everything else needs to be up-to-date only in ReadMemStats().
    
    R=golang-dev, remyoudompheng, dave, iant
    CC=golang-dev
    https://golang.org/cl/9207047

 src/pkg/runtime/malloc.goc | 8 ++++++++
 src/pkg/runtime/malloc.h   | 7 +++++--
 src/pkg/runtime/mgc0.c     | 6 ------
 src/pkg/runtime/mheap.c    | 6 ++++--
 4 files changed, 17 insertions(+), 10 deletions(-)
