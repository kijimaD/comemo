commit d6ad88b4db454813e1bdf09635cd853fe3b7ef13
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Jan 12 12:00:58 2021 -0800

    [dev.regabi] cmd/compile: compile functions before closures
    
    This CL reorders function compilation to ensure that functions are
    always compiled before any enclosed function literals. The primary
    goal of this is to reduce the risk of race conditions that arise due
    to compilation of function literals needing to inspect data from their
    closure variables. However, a pleasant side effect is that it allows
    skipping the redundant, separate compilation of function literals that
    were inlined into their enclosing function.
    
    Change-Id: I03ee96212988cb578c2452162b7e99cc5e92918f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/282892
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Trust: Matthew Dempsky <mdempsky@google.com>

 src/cmd/compile/internal/gc/compile.go     | 51 +++++++++++++++++++++++-------
 src/cmd/compile/internal/ir/func.go        |  4 +++
 src/cmd/compile/internal/ir/sizeof_test.go |  2 +-
 src/cmd/compile/internal/walk/closure.go   |  2 ++
 src/cmd/compile/internal/walk/expr.go      |  7 ++--
 5 files changed, 52 insertions(+), 14 deletions(-)
