commit d6eb21e331ba73d235b9014ce5b710d5e7bde545
Author: Rob Pike <r@golang.org>
Date:   Thu Jan 29 16:33:36 2015 -0800

    [dev.cc] cmd/asm: rewrite the macro processor
    
    The previous one was too broken, so just rewrite the code that invokes
    a macro. Basically it was evaluating things too early, and mishandling
    nested invocations. It's also easier to understand now.
    
    Keep backslash-newline around in macro definitions. They get
    processed when the body is evaluated.
    
    Write some golden tests.
    
    Change-Id: I27435f77f258a0873f80932bdc8d13ad39821ac1
    Reviewed-on: https://go-review.googlesource.com/3550
    Reviewed-by: Russ Cox <rsc@golang.org>

 src/cmd/asm/internal/asm/parse.go    |   2 +-
 src/cmd/asm/internal/lex/input.go    |  67 ++++++++++--------
 src/cmd/asm/internal/lex/lex_test.go | 130 +++++++++++++++++++++++++++++++++++
 src/cmd/asm/internal/lex/stack.go    |   2 +-
 4 files changed, 171 insertions(+), 30 deletions(-)
