commit 03875bd9bc112d25a4496f7ff22888f23a26baea
Author: Jay Conrod <jayconrod@google.com>
Date:   Fri Sep 11 13:30:43 2020 -0400

    cmd/go: add modload.NeedRoot mode for commands that need module root
    
    This makes error reporting a bit more consistent for 'go mod'
    subcommands. Most of these commands only work in module mode when a
    go.mod file is present.
    
    Setting modload.ForceUseModules reports an error when GO111MODULE=off.
    
    Setting modload.RootMode to modload.NeedRoot reports an error when no
    go.mod file is present.
    
    Change-Id: I1daa8d2971cb8658e0c804765839d903734a412e
    Reviewed-on: https://go-review.googlesource.com/c/go/+/254369
    Reviewed-by: Bryan C. Mills <bcmills@google.com>
    Reviewed-by: Michael Matloob <matloob@golang.org>

 src/cmd/go/internal/modcmd/download.go      |  4 +---
 src/cmd/go/internal/modcmd/graph.go         | 11 ++---------
 src/cmd/go/internal/modcmd/init.go          |  4 +---
 src/cmd/go/internal/modcmd/tidy.go          |  2 ++
 src/cmd/go/internal/modcmd/vendor.go        |  2 ++
 src/cmd/go/internal/modcmd/verify.go        | 11 ++---------
 src/cmd/go/internal/modcmd/why.go           |  2 ++
 src/cmd/go/internal/modload/init.go         |  8 ++++++--
 src/cmd/go/testdata/script/mod_off.txt      |  4 ++--
 src/cmd/go/testdata/script/mod_off_init.txt |  2 +-
 10 files changed, 21 insertions(+), 29 deletions(-)
