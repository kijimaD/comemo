commit 78074f6850c34a955d69f578e363d1d3f3e00e25
Author: Elias Naur <elias.naur@gmail.com>
Date:   Sun Jan 29 15:34:50 2017 +0100

    runtime: handle SIGPIPE in c-archive and c-shared programs
    
    Before this CL, Go programs in c-archive or c-shared buildmodes
    would not handle SIGPIPE. That leads to surprising behaviour where
    writes on a closed pipe or socket would raise SIGPIPE and terminate
    the program. This CL changes the Go runtime to handle
    SIGPIPE regardless of buildmode. In addition, SIGPIPE from non-Go
    code is forwarded.
    
    This is a refinement of CL 32796 that fixes the case where a non-default
    handler for SIGPIPE is installed by the host C program.
    
    Fixes #17393
    
    Change-Id: Ia41186e52c1ac209d0a594bae9904166ae7df7de
    Reviewed-on: https://go-review.googlesource.com/35960
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 misc/cgo/testcarchive/carchive_test.go     | 19 ++++++++++++++++
 misc/cgo/testcarchive/main2.c              | 35 +++++++++++++++++++++++++++++-
 misc/cgo/testcarchive/main3.c              | 33 ++++++++++++++++++++++++++++
 misc/cgo/testcarchive/main5.c              | 18 +++++++++++++++
 misc/cgo/testcarchive/src/libgo2/libgo2.go | 30 +++++++++++++++++++++++++
 misc/cgo/testcarchive/src/libgo3/libgo3.go | 12 ++++++++++
 src/os/signal/doc.go                       |  9 ++++----
 src/runtime/cgocall.go                     |  4 ++++
 src/runtime/runtime2.go                    |  1 +
 src/runtime/signal_unix.go                 | 15 ++++++++-----
 10 files changed, 165 insertions(+), 11 deletions(-)
