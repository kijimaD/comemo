commit e3d7ec006f25385972c89f771d5d577adce3f024
Author: Ian Lance Taylor <iant@golang.org>
Date:   Tue Apr 25 17:47:34 2017 -0700

    os: consistently return ErrClosed for closed file
    
    Catch all the cases where a file operation might return ErrFileClosing,
    and convert to ErrClosed. Use a new method for the conversion, which
    permits us to remove some KeepAlive calls.
    
    Change-Id: I584178f297efe6cb86f3090b2341091b412f1041
    Reviewed-on: https://go-review.googlesource.com/41793
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

 src/os/file.go         | 40 ++++++++++++++++++----------------------
 src/os/file_posix.go   | 16 +++++-----------
 src/os/file_unix.go    |  3 +++
 src/os/file_windows.go |  3 +++
 src/os/os_test.go      | 20 ++++++++++++++++++++
 src/os/pipe_test.go    | 41 +++++++++++++++++++++++++++++++----------
 6 files changed, 80 insertions(+), 43 deletions(-)
