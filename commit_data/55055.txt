commit e8f78cb60caab4f7ca8d0f4c424f14cc74ab49a4
Author: Keith Randall <khr@golang.org>
Date:   Fri Dec 9 10:55:28 2022 -0800

    cmd/compile: fix conditional select rule
    
    ARM64 maintains booleans in the low byte of registers. Upper parts
    of that register are junk.
    This rule is using all 32 bits of a boolean-containing register, which
    is wrong. Change the rule to only look at the low bit.
    
    Fixes #57184
    
    Change-Id: Ibbef86b2be859df3d06d993db00e1231c481c428
    Reviewed-on: https://go-review.googlesource.com/c/go/+/456556
    Auto-Submit: Keith Randall <khr@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssa/_gen/ARM64.rules |  4 +--
 src/cmd/compile/internal/ssa/rewriteARM64.go  |  6 ++--
 test/fixedbugs/issue57184.go                  | 40 +++++++++++++++++++++++++++
 3 files changed, 45 insertions(+), 5 deletions(-)
