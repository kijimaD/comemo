commit 489f508ccfb7f0648852e0fea882b204a5776573
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Aug 25 20:32:27 2022 -0700

    cmd/compile: avoid "not used" errors due to bad go/defer statements
    
    The syntax for go and defer specifies an arbitrary expression, not
    a call; the call requirement is spelled out in prose. Don't to the
    call check in the parser; instead move it to the type checker. This
    is simpler and also allows the type checker to check expressions that
    are not calls, and avoid "not used" errors due to such expressions.
    
    We would like to make the same change in go/parser and go/types
    but the change requires Go/DeferStmt nodes to hold an ast.Expr
    rather than an *ast.CallExpr. We cannot change that for backward-
    compatibility reasons. Since we don't test this behavior for the
    type checkers alone (only for the compiler), we get away with it
    for now.
    
    Follow-up on CL 425675 which introduced the extra errors in the
    first place.
    
    Change-Id: I90890b3079d249bdeeb76d5673246ba44bec1a7b
    Reviewed-on: https://go-review.googlesource.com/c/go/+/425794
    Reviewed-by: Robert Griesemer <gri@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Robert Griesemer <gri@google.com>
    Auto-Submit: Robert Griesemer <gri@google.com>
    Reviewed-by: Alan Donovan <adonovan@google.com>

 src/cmd/compile/internal/syntax/parser.go | 14 --------------
 src/cmd/compile/internal/types2/stmt.go   |  6 ++++++
 test/fixedbugs/issue23586.go              |  8 +++-----
 3 files changed, 9 insertions(+), 19 deletions(-)
