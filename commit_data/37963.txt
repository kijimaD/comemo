commit 85c1798ac60917857fe33dd2722cc56fa323313a
Author: Robert Griesemer <gri@golang.org>
Date:   Mon Jan 14 13:34:42 2019 -0800

    text/scanner: don't crash when calling TokenText in error handler
    
    Make sure Scanner.tokEnd is set before we call Scanner.Error
    and update documentation accordingly.
    (Until now tokEnd was only set before returning from Scan,
    so a call to TokenText during error handling may have crashed.)
    
    While at it, tighten a check in Scanner.TokenText to ensure
    Scanner.tokEnd >= Scanner.tokPos if we have a token.
    
    Also, silence error messages to Stderr in unrelated TestIllegalExponent.
    
    Fixes #29723.
    
    Change-Id: Ia97beeae91eaf9e0ed3dada0a806f1f7122461cc
    Reviewed-on: https://go-review.googlesource.com/c/157819
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

 src/text/scanner/scanner.go      |  6 ++++--
 src/text/scanner/scanner_test.go | 19 +++++++++++++++++++
 2 files changed, 23 insertions(+), 2 deletions(-)
