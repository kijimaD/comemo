commit d89705e08742c0f4fdf5d2bdbab6f344c6be884f
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Jan 3 14:37:06 2021 -0800

    [dev.regabi] cmd/compile: fix re-export of parameters
    
    When exporting signature types, we include the originating package,
    because it's exposed via go/types's API. And as a consistency check,
    we ensure that the parameter names came from that same package.
    
    However, we were getting this wrong in the case of exported variables
    that were initialized with a method value using an imported method. In
    this case, when we created the method value wrapper function's
    type (which is reused as the variable's type if none is explicitly
    provided in the variable declaration), we were reusing the
    original (i.e., imported) parameter names, but the newly created
    signature type was associated with the current package instead.
    
    The correct fix here is really to preserve the original signature
    type's package (along with position and name for its parameters), but
    that's awkward to do at the moment because the DeclFunc API requires
    an ir representation of the function signature, whereas we only
    provide a way to explicitly set packages via the type constructor
    APIs.
    
    As an interim fix, we associate the parameters with the current
    package, to be consistent with the signature type's package.
    
    Fixes #43479.
    
    Change-Id: Id45a10f8cf64165c9bc7d9598f0a0ee199a5e752
    Reviewed-on: https://go-review.googlesource.com/c/go/+/281292
    Trust: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>

 src/cmd/compile/internal/typecheck/dcl.go     |  3 +++
 src/cmd/compile/internal/typecheck/iexport.go | 13 +++++++--
 src/cmd/compile/internal/typecheck/iimport.go | 27 ++++++++++---------
 src/cmd/compile/internal/typecheck/subr.go    |  3 +++
 test/fixedbugs/issue43479.dir/a.go            | 27 +++++++++++++++++++
 test/fixedbugs/issue43479.dir/b.go            | 38 +++++++++++++++++++++++++++
 test/fixedbugs/issue43479.go                  |  7 +++++
 7 files changed, 104 insertions(+), 14 deletions(-)
