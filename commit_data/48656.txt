commit 692399fbaa09578314f8583e49505c6784e8d335
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Jun 3 20:53:08 2021 -0700

    [dev.typeparams] cmd/compile/internal/syntax: not all index expressions can be instantiated types
    
    An index expression followed by an opening "{" may indicate
    a composite literal but only if the index expression can be
    a type. Exclude cases where the index expression cannot be
    a type (e.g. s[0], a[i+j], etc.).
    
    This leads to a better error message in code that is erroneous.
    
    Fixes #46558.
    
    Change-Id: Ida9291ca30683c211812dfb95abe4969f44c474f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/325009
    Trust: Robert Griesemer <gri@golang.org>
    Reviewed-by: Robert Findley <rfindley@google.com>

 src/cmd/compile/internal/syntax/parser.go               | 17 ++++++++++++++++-
 src/cmd/compile/internal/syntax/testdata/issue46558.src | 14 ++++++++++++++
 2 files changed, 30 insertions(+), 1 deletion(-)
