commit 7f90b960a9711b51bf36f49be4274ac5f7e86a95
Author: Keith Randall <khr@golang.org>
Date:   Thu Jun 27 20:45:22 2024 -0700

    cmd/compile: don't elide zero extension on top of signed values
    
    v = ... compute some value, which zeros top 32 bits ...
    w = zero-extend v
    
    We want to remove the zero-extension operation, as it doesn't do anything.
    But if v is typed as a signed value, and it gets spilled/restored, it
    might be re-sign-extended upon restore. So the zero-extend isn't actually
    a NOP when there might be calls or other reasons to spill in between v and w.
    
    Fixes #68227
    
    Change-Id: I3b30b8e56c7d70deac1fb09d2becc7395acbadf8
    Reviewed-on: https://go-review.googlesource.com/c/go/+/595675
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Joedian Reid <joedian@google.com>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>

 src/cmd/compile/internal/ssa/rewrite.go | 17 ++++++++++---
 test/fixedbugs/issue68227.go            | 43 +++++++++++++++++++++++++++++++++
 2 files changed, 57 insertions(+), 3 deletions(-)
