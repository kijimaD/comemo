commit 334f2fc045b7d9d846cccba01b3a0dbf70ddb0db
Author: Rob Findley <rfindley@google.com>
Date:   Fri Jun 11 10:58:43 2021 -0400

    [dev.typeparams] go/*: switch from ListExpr to MultiIndexExpr
    
    When instantiating a generic type or function with multiple type
    arguments, we need to represent an index expression with multiple
    indexes in the AST. Previous to this CL this was done with a new
    ast.ListExpr node, which allowed packing multiple expressions into a
    single ast.Expr. This compositional pattern can be both inefficient and
    cumbersome to work with, and introduces a new node type that only exists
    to augment the meaning of an existing node type.
    
    By comparison, other specializations of syntax are given distinct nodes
    in go/ast, for example variations of switch or for statements, so the
    use of ListExpr was also (arguably) inconsistent.
    
    This CL removes ListExpr, and instead adds a MultiIndexExpr node, which
    is exactly like IndexExpr but allows for multiple index arguments. This
    requires special handling for this new node type, but a new wrapper in
    the typeparams helper package largely mitigates this special handling.
    
    Change-Id: I65eb29c025c599bae37501716284dc7eb953b2ad
    Reviewed-on: https://go-review.googlesource.com/c/go/+/327149
    Trust: Robert Findley <rfindley@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Run-TryBot: Robert Findley <rfindley@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>

 src/go/ast/ast.go                              | 56 +++++++++++--------------
 src/go/ast/walk.go                             | 11 ++---
 src/go/internal/typeparams/typeparams.go       | 58 ++++++++++++++++----------
 src/go/parser/parser.go                        | 22 +++++++---
 src/go/printer/nodes.go                        | 20 ++++-----
 src/go/types/call.go                           | 46 ++++++++++----------
 src/go/types/expr.go                           | 14 +++----
 src/go/types/exprstring.go                     |  8 ++--
 src/go/types/index.go                          | 37 +++++++---------
 src/go/types/resolver.go                       | 10 +++--
 src/go/types/signature.go                      | 27 ++++++------
 src/go/types/testdata/check/typeinst.go2       |  6 +--
 src/go/types/testdata/fixedbugs/issue45635.go2 |  2 +-
 src/go/types/typexpr.go                        | 20 ++++-----
 14 files changed, 170 insertions(+), 167 deletions(-)
