commit 0433f5770b9c92b06d5a15c8d2a70f00597faac4
Author: Bryan C. Mills <bcmills@google.com>
Date:   Tue Mar 8 17:01:12 2022 -0500

    cmd/go: stamp build settings for binaries in cmd
    
    Also update cmd/dist to avoid setting gcflags and ldflags explicitly
    when the set of flags to be set is empty (a verbose way of specifying
    the default behavior).
    
    Stamping was disabled for the Go standard library in CL 356014 due to
    the cmd/dist flags causing cmd/go to (correctly) report the resulting
    binaries as stale.
    
    With cmd/dist fixed, we can also remove the special case in cmd/go,
    which will allow tests of binaries in 'cmd' to read the build info
    embedded in the test binary. That build info may be useful to
    determine (say) whether runtime.GOROOT ought to work without GOROOT
    set in the environment.
    
    For #51483
    Updates #37475
    
    Change-Id: I64d04f5990190094eb6c0522db829d3bdfa50ef3
    Reviewed-on: https://go-review.googlesource.com/c/go/+/391809
    Trust: Bryan Mills <bcmills@google.com>
    Run-TryBot: Bryan Mills <bcmills@google.com>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/dist/build.go           | 24 +++++++----
 src/cmd/dist/test.go            |  4 +-
 src/cmd/go/internal/load/pkg.go | 89 +++++++++++++++++++----------------------
 3 files changed, 61 insertions(+), 56 deletions(-)
