commit f81e4986733bc18ec2bef16549534b9029756444
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Jan 31 15:02:31 2024 -0800

    go/types, types2: better errors for non-existing fields or methods
    
    This CL improves the error messages reported when a field or method
    name is used that doesn't exist. It brings the error messges on par
    (or better) with the respective errors reported before Go 1.18 (i.e.
    before switching to the new type checker):
    
    Make case distinctions based on whether a field/method is exported
    and how it is spelled. Factor out that logic into a new function
    (lookupError) in a new file (errsupport.go), which is generated for
    go/types. Use lookupError when reporting selector lookup errors
    and missing struct field keys.
    
    Add a comprehensive set of tests (lookup2.go) and spot tests for
    the two cases brought up by the issue at hand.
    
    Adjusted existing tests as needed.
    
    Fixes #49736.
    
    Change-Id: I2f439948dcd12f9bd1a258367862d8ff96e32305
    Reviewed-on: https://go-review.googlesource.com/c/go/+/560055
    Run-TryBot: Robert Griesemer <gri@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Robert Findley <rfindley@google.com>
    Reviewed-by: Robert Griesemer <gri@google.com>

 src/cmd/compile/internal/types2/call.go            |  18 +---
 src/cmd/compile/internal/types2/errsupport.go      | 113 ++++++++++++++++++++
 src/cmd/compile/internal/types2/expr.go            |   9 +-
 src/go/types/call.go                               |  18 +---
 src/go/types/errsupport.go                         | 115 +++++++++++++++++++++
 src/go/types/expr.go                               |   7 +-
 src/go/types/generate_test.go                      |   1 +
 .../types/testdata/check/{lookup.go => lookup1.go} |   6 +-
 src/internal/types/testdata/check/lookup2.go       |  94 +++++++++++++++++
 .../types/testdata/fixedbugs/issue49736.go         |  17 +++
 test/fixedbugs/issue22794.go                       |   2 +-
 test/fixedbugs/issue25727.go                       |   4 +-
 12 files changed, 363 insertions(+), 41 deletions(-)
