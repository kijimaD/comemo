commit eba0e866fafe3f8223d654a29fb953e02c07364a
Author: Robert Findley <rfindley@google.com>
Date:   Sun Oct 17 18:27:53 2021 -0400

    go/types: delay expansion of underlying in typeDecl
    
    Even after type-checking the RHS of a type declaration, we may not yet
    be able to expand, if the RHS is itself an instance (see #49043).
    
    We can instead rely on the mechanisms we have in place for delayed
    expansion.
    
    Fixes #49043
    
    Change-Id: Ibffa4c1b1163c824b5c7e151aaac35f3e8c84ec7
    Reviewed-on: https://go-review.googlesource.com/c/go/+/356533
    Trust: Robert Findley <rfindley@google.com>
    Run-TryBot: Robert Findley <rfindley@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/go/types/decl.go                           | 23 ++++++-----------------
 src/go/types/named.go                          | 17 ++++++++++++++++-
 src/go/types/testdata/check/typeinst.go2       |  2 +-
 src/go/types/testdata/fixedbugs/issue49043.go2 | 24 ++++++++++++++++++++++++
 4 files changed, 47 insertions(+), 19 deletions(-)
