commit 89138ce740bf72c7a6c0eae5aa281f10094637cf
Author: Than McIntosh <thanm@google.com>
Date:   Wed May 3 12:38:50 2023 -0400

    cmd/compile: un-hide closure func if parent expr moved to staticinit
    
    If the function referenced by a closure expression is incorporated
    into a static init, be sure to mark it as non-hidden, since otherwise
    it will be live but no longer reachable from the init func, hence it
    will be skipped during escape analysis, which can lead to
    miscompilations.
    
    Fixes #59680.
    
    Change-Id: Ib858aee296efcc0b7655d25c23ab8a6a8dbdc5f9
    Reviewed-on: https://go-review.googlesource.com/c/go/+/492135
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Than McIntosh <thanm@google.com>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>

 src/cmd/compile/internal/staticinit/sched.go |   6 ++
 test/fixedbugs/issue59680.go                 | 100 +++++++++++++++++++++++++++
 2 files changed, 106 insertions(+)
