commit bde0463da3f31934791b0bb2ccacdf6206314073
Author: Joel Sing <joel@sing.id.au>
Date:   Sat Oct 16 03:59:41 2021 +1100

    cmd/internal/obj/riscv: fix trampoline calls from large functions
    
    On riscv64, the JAL instruction is only capable of reaching +/-1MB. In the case where
    a single function and its trampolines exceeds this size, it is possible that the JAL
    is unable to reach the trampoline, which is laid down after the function text. In the
    case of large functions, switch back to using a AUIPC+JALR pairs rather than using
    trampolines.
    
    Fixes #48791
    
    Change-Id: I119cf3bc20ce4933a9b7ab41a8e514437c6addb9
    Reviewed-on: https://go-review.googlesource.com/c/go/+/356250
    Trust: Joel Sing <joel@sing.id.au>
    Reviewed-by: Cherry Mui <cherryyz@google.com>

 src/cmd/internal/obj/riscv/asm_test.go | 95 +++++++++++++++++++++++++++++-----
 src/cmd/internal/obj/riscv/obj.go      | 36 +++++++++++--
 2 files changed, 113 insertions(+), 18 deletions(-)
