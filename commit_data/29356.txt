commit 81ee93679dad4138d1c3431aa66237a31a99f1b2
Author: David Crawshaw <crawshaw@golang.org>
Date:   Mon Sep 5 23:49:53 2016 -0400

    cmd/link: generate dynamic relocs for internal PIE
    
    This reuses the machinery built for dynamic loading of shared
    libraries. The significant difference with PIE is we generate
    dynamic relocations for known internal symbols, not just
    dynamic external symbols.
    
    Part of adding PIE internal linking on linux/amd64.
    
    Change-Id: I4afa24070bfb61f94f8d3648f2433d5343bac3fe
    Reviewed-on: https://go-review.googlesource.com/28539
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/link/internal/amd64/asm.go  | 54 ++++++++++++++++++-------------------
 src/cmd/link/internal/arm/asm.go    | 35 ++++++++++++------------
 src/cmd/link/internal/arm64/asm.go  |  3 ++-
 src/cmd/link/internal/ld/data.go    | 12 ++++++++-
 src/cmd/link/internal/ld/lib.go     |  2 +-
 src/cmd/link/internal/mips64/asm.go |  3 ++-
 src/cmd/link/internal/ppc64/asm.go  | 32 +++++++++++-----------
 src/cmd/link/internal/s390x/asm.go  | 34 ++++++++++++-----------
 src/cmd/link/internal/x86/asm.go    | 48 ++++++++++++++++-----------------
 9 files changed, 117 insertions(+), 106 deletions(-)
