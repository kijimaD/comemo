commit 711ea1e716b0c620cd9bcdd405eccae230d6dcbb
Author: RÃ©my Oudompheng <remyoudompheng@gmail.com>
Date:   Fri Mar 1 23:12:19 2019 +0100

    cmd/cgo: simplify and fix handling of untyped constants
    
    Instead of trying to guess type of constants in the AST,
    which is hard, use the "var cgo%d Type = Constant"
    so that typechecking is left to the Go compiler.
    
    The previous code could still fail in some cases
    for constants imported from other modules
    or defined in other, non-cgo files.
    
    Fixes #30527
    
    Change-Id: I2120cd90e90a74b9d765eeec53f6a3d2cfc1b642
    Reviewed-on: https://go-review.googlesource.com/c/go/+/164897
    Run-TryBot: Emmanuel Odeke <emm.odeke@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 misc/cgo/test/testdata/issue30527.go   | 14 ++++++++
 misc/cgo/test/testdata/issue30527/a.go | 19 +++++++++++
 misc/cgo/test/testdata/issue30527/b.go | 11 +++++++
 src/cmd/cgo/ast.go                     | 12 -------
 src/cmd/cgo/gcc.go                     | 60 ++++------------------------------
 src/cmd/cgo/main.go                    |  3 --
 6 files changed, 51 insertions(+), 68 deletions(-)
