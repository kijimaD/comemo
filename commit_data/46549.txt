commit 950cf4d46c5bc343644e7ef08828b9e5114d4676
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sun Jan 3 21:34:03 2021 -0800

    [dev.regabi] cmd/compile: bind closure vars during SSA constructions
    
    For function literals that aren't inlined or directly called, we need
    to pass their arguments via a closure struct. This also means we need
    to rewrite uses of closure variables to access from this closure
    struct.
    
    Currently we do this rewrite in a pass before walking begins. This CL
    moves the code to SSA construction instead, alongside binding other
    input parameters.
    
    Change-Id: I13538ef3394e2d6f75d5b7b2d0adbb00db812dc2
    Reviewed-on: https://go-review.googlesource.com/c/go/+/281352
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Trust: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssagen/ssa.go   |  41 +++++++++
 src/cmd/compile/internal/walk/closure.go | 139 +++++++++++--------------------
 2 files changed, 91 insertions(+), 89 deletions(-)
