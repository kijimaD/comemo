commit 40ed753ebd6b74747816fde7b130116ff7ef9580
Author: Russ Cox <rsc@golang.org>
Date:   Thu Feb 28 16:21:58 2013 -0500

    cmd/ld: fix symbol table sorting
    runtime: double-check that symbol table is sorted
    
    If the symbol table is unsorted, the binary search in findfunc
    will not find its func, which will make stack traces stop early.
    When the garbage collector starts using the stack tracer,
    that would be a serious problem.
    
    The unsorted symbol addresses came from from two things:
    
    1. The symbols in an ELF object are not necessarily sorted,
       so sort them before adding them to the symbol list.
    
    2. The __i686.get_pc_thunk.bx symbol is present in multiple
       object files and was having its address adjusted multiple
       times, producing an incorrect address in the symbol table.
    
    R=golang-dev, iant
    CC=golang-dev
    https://golang.org/cl/7440044

 src/cmd/ld/data.c        | 51 +++++++++++++++++++++++++-----------------------
 src/cmd/ld/ldelf.c       | 49 +++++++++++++++++++++++++++++++++++-----------
 src/cmd/ld/ldmacho.c     | 35 ++++++++++++++++++++++++---------
 src/cmd/ld/ldpe.c        | 35 ++++++++++++++++++++++++---------
 src/cmd/ld/lib.h         |  3 ++-
 src/pkg/runtime/symtab.c | 10 +++++++++-
 6 files changed, 128 insertions(+), 55 deletions(-)
