commit 591d58a3bb9ea3afea0c898564d972b822212674
Author: Dmitriy Vyukov <dvyukov@google.com>
Date:   Thu Jun 13 16:03:58 2013 +0400

    cmd/gc: properly race-instrument for loops
    Instrumentation of ntest expression should go to ntest->init.
    Same for nincr.
    Fixes #5340.
    
    R=golang-dev, daniel.morsing
    CC=golang-dev
    https://golang.org/cl/10026046

 src/cmd/gc/racewalk.c                            | 30 ++++----
 src/pkg/runtime/race/testdata/mop_test.go        | 88 ++++++++++++++++++++++++
 src/pkg/runtime/race/testdata/regression_test.go | 17 +++++
 3 files changed, 121 insertions(+), 14 deletions(-)
