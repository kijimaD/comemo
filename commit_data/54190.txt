commit 5612215d32643f2a5b729730c3bfdefda78e75d1
Author: Robert Griesemer <gri@golang.org>
Date:   Wed Sep 28 14:49:50 2022 -0700

    go/types, types2: remove (C/c)ompilerErrorMessages flag - not needed anymore
    
    Fixes #55326.
    
    Change-Id: Ic300976ddf504224faadc5bae21736fe94dac6bf
    Reviewed-on: https://go-review.googlesource.com/c/go/+/435416
    Reviewed-by: Robert Findley <rfindley@google.com>
    Auto-Submit: Robert Griesemer <gri@google.com>
    Reviewed-by: Robert Griesemer <gri@google.com>
    Run-TryBot: Robert Griesemer <gri@google.com>
---
 src/cmd/compile/internal/noder/irgen.go | 7 +++----
 src/cmd/compile/internal/types2/api.go  | 5 -----
 src/go/types/check.go                   | 4 ----
 3 files changed, 3 insertions(+), 13 deletions(-)

diff --git a/src/cmd/compile/internal/noder/irgen.go b/src/cmd/compile/internal/noder/irgen.go
index e867594620..4f399066e3 100644
--- a/src/cmd/compile/internal/noder/irgen.go
+++ b/src/cmd/compile/internal/noder/irgen.go
@@ -43,10 +43,9 @@ func checkFiles(noders []*noder) (posMap, *types2.Package, *types2.Info) {
 		packages: make(map[string]*types2.Package),
 	}
 	conf := types2.Config{
-		Context:               ctxt,
-		GoVersion:             base.Flag.Lang,
-		IgnoreBranchErrors:    true, // parser already checked via syntax.CheckBranches mode
-		CompilerErrorMessages: true, // use error strings matching existing compiler errors
+		Context:            ctxt,
+		GoVersion:          base.Flag.Lang,
+		IgnoreBranchErrors: true, // parser already checked via syntax.CheckBranches mode
 		Error: func(err error) {
 			terr := err.(types2.Error)
 			msg := terr.Msg
diff --git a/src/cmd/compile/internal/types2/api.go b/src/cmd/compile/internal/types2/api.go
index 0793948838..cbd49b68c7 100644
--- a/src/cmd/compile/internal/types2/api.go
+++ b/src/cmd/compile/internal/types2/api.go
@@ -131,11 +131,6 @@ type Config struct {
 	// If IgnoreBranchErrors is set, branch/label errors are ignored.
 	IgnoreBranchErrors bool
 
-	// If CompilerErrorMessages is set, errors are reported using
-	// cmd/compile error strings to match $GOROOT/test errors.
-	// TODO(gri) Consolidate error messages and remove this flag.
-	CompilerErrorMessages bool
-
 	// If go115UsesCgo is set, the type checker expects the
 	// _cgo_gotypes.go file generated by running cmd/cgo to be
 	// provided as a package source file. Qualified identifiers
diff --git a/src/go/types/check.go b/src/go/types/check.go
index b787c5c38b..432e1926c8 100644
--- a/src/go/types/check.go
+++ b/src/go/types/check.go
@@ -18,10 +18,6 @@ import (
 const (
 	debug = false // leave on during development
 	trace = false // turn on for detailed type resolution traces
-
-	// TODO(rfindley): add compiler error message handling from types2, guarded
-	// behind this flag, so that we can keep the code in sync.
-	compilerErrorMessages = false // match compiler error messages
 )
 
 // exprInfo stores information about an untyped expression.
