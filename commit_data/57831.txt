commit 5cdb132228b90732d57215893a9910ded694c585
Author: Paul E. Murphy <murp@ibm.com>
Date:   Tue Jun 27 17:17:33 2023 -0500

    cmd/compile/internal/ssa: improve masking codegen on PPC64
    
    Generate RLDIC[LR] instead of MOVD mask, Rx; AND Rx, Ry, Rz.
    This helps reduce code size, and reduces the latency caused
    by the constant load.
    
    Similarly, for smaller-than-register values, truncate constants
    which exceed the range of the value's type to avoid needing to
    load a constant.
    
    Change-Id: I6019684795eb8962d4fd6d9585d08b17c15e7d64
    Reviewed-on: https://go-review.googlesource.com/c/go/+/515576
    Reviewed-by: Lynn Boger <laboger@linux.vnet.ibm.com>
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    Run-TryBot: Paul Murphy <murp@ibm.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Cherry Mui <cherryyz@google.com>

 .../compile/internal/ssa/_gen/PPC64latelower.rules |  13 +++
 src/cmd/compile/internal/ssa/rewrite.go            |  19 ++++
 .../compile/internal/ssa/rewritePPC64latelower.go  | 123 +++++++++++++++++++++
 test/codegen/bits.go                               |  26 +++++
 4 files changed, 181 insertions(+)
