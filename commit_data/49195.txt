commit 473e493d18c277d69e40a4930af045d474ff2be4
Author: Rob Findley <rfindley@google.com>
Date:   Wed Jul 21 12:12:22 2021 -0400

    [dev.typeparams] cmd/compile/internal/types2: merge instance and Named to eliminate sanitization
    
    This is a port of CL 335929 to types2. It differs significantly from
    that CL to handle lazy loading, which wasn't tested in go/types.
    Additionally, the *Checker field was moved out of instance and back
    onto Named. This way we can tell whether a Named type is uninstantiated
    simply by checking whether Named.instance is non-nil, which simplified
    the code considerably.
    
    Fixes #46151
    
    Change-Id: I617263bcfaa768ac5442213cecad8d567c2749fc
    Reviewed-on: https://go-review.googlesource.com/c/go/+/336252
    Trust: Robert Findley <rfindley@google.com>
    Trust: Robert Griesemer <gri@golang.org>
    Run-TryBot: Robert Findley <rfindley@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/cmd/compile/internal/types2/builtins.go        |   2 +-
 src/cmd/compile/internal/types2/check.go           |   5 -
 src/cmd/compile/internal/types2/decl.go            |  12 +-
 src/cmd/compile/internal/types2/infer.go           |   3 -
 src/cmd/compile/internal/types2/instance.go        |  62 +++----
 src/cmd/compile/internal/types2/instantiate.go     |  72 +++++---
 src/cmd/compile/internal/types2/lookup.go          |   2 +-
 src/cmd/compile/internal/types2/named.go           |  45 +++--
 src/cmd/compile/internal/types2/object.go          |   3 +
 src/cmd/compile/internal/types2/predicates.go      |   8 +-
 src/cmd/compile/internal/types2/sanitize.go        | 205 ---------------------
 src/cmd/compile/internal/types2/sizeof_test.go     |   3 +-
 src/cmd/compile/internal/types2/subst.go           |  15 +-
 .../internal/types2/testdata/check/issues.go2      |   4 +-
 src/cmd/compile/internal/types2/typeparam.go       |   3 +-
 src/cmd/compile/internal/types2/typestring.go      |  10 +-
 src/cmd/compile/internal/types2/typexpr.go         |   2 +-
 17 files changed, 127 insertions(+), 329 deletions(-)
