commit a5088e76f108f6470d2a9b3ac56a58ddb9376e4f
Author: Michael Anthony Knyszek <mknyszek@google.com>
Date:   Thu Jul 23 22:07:44 2020 +0000

    runtime: remove mcentral.nmalloc and add mcache.local_nsmallalloc
    
    This change removes mcentral.nmalloc and adds mcache.local_nsmallalloc
    which fulfills the same role but may be accessed non-atomically. It also
    moves responsibility for updating heap_live and local_nsmallalloc into
    mcache functions.
    
    As a result of this change, mcache is now the sole source-of-truth for
    malloc stats. It is also solely responsible for updating heap_live and
    performing the various operations required as a result of updating
    heap_live. The overall improvement here is in code organization:
    previously malloc stats were fairly scattered, and now they have one
    single home, and nearly all the required manipulations exist in a single
    file.
    
    Change-Id: I7e93fa297c1debf17e3f2a0d68aeed28a9c6af00
    Reviewed-on: https://go-review.googlesource.com/c/go/+/246966
    Trust: Michael Knyszek <mknyszek@google.com>
    Run-TryBot: Michael Knyszek <mknyszek@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Michael Pratt <mpratt@google.com>

 src/runtime/mcache.go   | 34 ++++++++++++++++++++++++++++++++++
 src/runtime/mcentral.go | 41 +----------------------------------------
 src/runtime/mstats.go   | 18 ++++++------------
 3 files changed, 41 insertions(+), 52 deletions(-)
