commit 60ad3c48f59c35981dd872ed5dfe74e4d6becab2
Author: Keith Randall <khr@golang.org>
Date:   Wed Aug 3 22:58:30 2022 -0700

    cmd/compile: move SSA rotate instruction detection to arch-independent rules
    
    Detect rotate instructions while still in architecture-independent form.
    It's easier to do here, and we don't need to repeat it in each
    architecture file.
    
    Change-Id: I9396954b3f3b3bfb96c160d064a02002309935bb
    Reviewed-on: https://go-review.googlesource.com/c/go/+/421195
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Eric Fang <eric.fang@arm.com>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    Reviewed-by: David Chase <drchase@google.com>
    Reviewed-by: Joedian Reid <joedian@golang.org>
    Reviewed-by: Ruinan Sun <Ruinan.Sun@arm.com>
    Run-TryBot: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssa/gen/386.rules     |   29 +-
 src/cmd/compile/internal/ssa/gen/386Ops.go     |    3 +
 src/cmd/compile/internal/ssa/gen/AMD64.rules   |   75 -
 src/cmd/compile/internal/ssa/gen/ARM.rules     |    8 -
 src/cmd/compile/internal/ssa/gen/ARM64.rules   |   47 -
 src/cmd/compile/internal/ssa/gen/PPC64.rules   |   35 +-
 src/cmd/compile/internal/ssa/gen/S390X.rules   |    4 -
 src/cmd/compile/internal/ssa/gen/dec64.rules   |    5 +
 src/cmd/compile/internal/ssa/gen/generic.rules |   80 +
 src/cmd/compile/internal/ssa/gen/genericOps.go |   21 +-
 src/cmd/compile/internal/ssa/opGen.go          |   65 +-
 src/cmd/compile/internal/ssa/rewrite.go        |   17 +
 src/cmd/compile/internal/ssa/rewrite386.go     |  345 +-
 src/cmd/compile/internal/ssa/rewriteAMD64.go   | 2392 +------
 src/cmd/compile/internal/ssa/rewriteARM.go     |   96 -
 src/cmd/compile/internal/ssa/rewriteARM64.go   | 1097 +---
 src/cmd/compile/internal/ssa/rewritePPC64.go   |  752 +--
 src/cmd/compile/internal/ssa/rewriteS390X.go   |  114 -
 src/cmd/compile/internal/ssa/rewritedec64.go   |   76 +
 src/cmd/compile/internal/ssa/rewritegeneric.go | 8396 ++++++++++++++++++++----
 src/cmd/compile/internal/test/shift_test.go    |   22 +
 src/cmd/compile/internal/x86/ssa.go            |    1 +
 test/codegen/rotate.go                         |   40 +-
 23 files changed, 7537 insertions(+), 6183 deletions(-)
