commit 24fa7544b08f998ed3dd857342dc7787924276a1
Author: Russ Cox <rsc@golang.org>
Date:   Thu Feb 29 20:14:32 2024 -0500

    runtime: fix spurious race using Ticker.Reset
    
    Ticker.Reset was added in CL 217362 in 2020.
    It added the runtime helper modTimer, which is
    analogous to startTimer and resetTimer but for tickers.
    Unlike those, it does not contain a racerelease, which
    means that code synchronizing by starting a ticker
    will be diagnosed with a spurious race.
    
    Add racerelease to modTimer and add tests of all
    three racereleases (in startTimer, resetTimer, and modTimer).
    
    Also do not call time.resetTimer from elsewhere in runtime,
    since that function is only for package time. Use t.reset instead.
    
    For #33184.
    
    Change-Id: Ie40c1ad24911f21e81b1d3cc608cf086ff2bc83d
    Reviewed-on: https://go-review.googlesource.com/c/go/+/568340
    Auto-Submit: Russ Cox <rsc@golang.org>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Michael Pratt <mpratt@google.com>

 src/runtime/race/testdata/time_test.go | 116 +++++++++++++++++++++++++++++++++
 src/runtime/time.go                    |   3 +
 2 files changed, 119 insertions(+)
