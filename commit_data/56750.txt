commit 2be4b3913a3693958f95b520a309bfc4fda0ee21
Author: Michael Matloob <matloob@golang.org>
Date:   Mon Jun 3 18:42:12 2024 -0400

    cmd/go/internal/modload: respect overlays when loading go.work files
    
    Before this change, we didn't initialize the overlays in the fsys
    package or use the fsys logic to read the files, so overlays were not
    respected for go.work files. Initialize fsys before loading the go.work
    file (initialization is idempotent) and use the new fsys.ReadFile
    function to read the file instead of os.ReadFile.
    
    fsys.ReadFile just opens the file with fsys.Open and then calls
    io.ReadAll on it. (This is less efficient than what os.ReadFile does:
    os.ReadFile reads into a buffer it allocated that's the file's size
    while io.ReadAll doesn't know how big the file is so it just reads in
    512 byte chunks.)
    
    Change-Id: Ic40bcbb483a16c5d4dd1d896306ea99a16f370f3
    Reviewed-on: https://go-review.googlesource.com/c/go/+/590755
    Reviewed-by: Sam Thanawalla <samthanawalla@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Auto-Submit: Michael Matloob <matloob@golang.org>

 src/cmd/go/internal/fsys/fsys.go            | 18 ++++++++-----
 src/cmd/go/internal/modload/init.go         |  7 ++++-
 src/cmd/go/testdata/script/work_overlay.txt | 41 +++++++++++++++++++++++++++++
 3 files changed, 59 insertions(+), 7 deletions(-)
