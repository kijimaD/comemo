commit 70544c91ffac19f5ffa66c59e3097f3f1fe900f8
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Mon Jun 6 17:59:05 2016 -0700

    cmd/compile/internal/syntax: match old parser errors and line numbers
    
    This makes a bunch of changes to package syntax to tweak line numbers
    for AST nodes. For example, short variable declaration statements are
    now associated with the location of the ":=" token, and function calls
    are associated with the location of the final ")" token. These help
    satisfy many unit tests that assume the old parser's behavior.
    
    Because many of these changes are questionable, they're guarded behind
    a new "gcCompat" const to make them easy to identify and revisit in
    the future.
    
    A handful of remaining tests are too difficult to make behave
    identically. These have been updated to execute with -newparser=0 and
    comments explaining why they need to be fixed.
    
    all.bash now passes with both the old and new parsers.
    
    Change-Id: Iab834b71ca8698d39269f261eb5c92a0d55a3bf4
    Reviewed-on: https://go-review.googlesource.com/27199
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/cmd/compile/internal/syntax/parser.go       | 148 +++++++++++++++---------
 src/cmd/compile/internal/syntax/scanner.go      |  54 ++++++---
 src/cmd/compile/internal/syntax/scanner_test.go |  24 ++--
 src/go/types/stdlib_test.go                     |   4 +-
 test/fixedbugs/issue11610.go                    |   6 +-
 test/nul1.go                                    |   7 +-
 test/switch2.go                                 |   4 +-
 test/syntax/chan1.go                            |   6 +-
 test/syntax/semi4.go                            |   9 +-
 9 files changed, 172 insertions(+), 90 deletions(-)
