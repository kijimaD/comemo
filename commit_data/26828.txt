commit c8ef0df06cbab367ab943825ab0677e03d019c3d
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Dec 3 19:17:21 2015 -0800

    cmd/cgo: add hooks for thread sanitizer
    
    When Go code is used with C code compiled with -fsanitize=thread, adds
    thread sanitizer calls so that correctly synchronized Go code does not
    cause spurious failure reports from the thread sanitizer.  This may
    cause some false negatives, but for the thread sanitizer what is most
    important is avoiding false positives.
    
    Change-Id: If670e4a6f2874c7a2be2ff7db8728c6036340a52
    Reviewed-on: https://go-review.googlesource.com/17421
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>

 misc/cgo/testsanitizers/test.bash | 105 ++++++++++++++++++++++++++------------
 misc/cgo/testsanitizers/tsan.go   |  44 ++++++++++++++++
 misc/cgo/testsanitizers/tsan2.go  |  55 ++++++++++++++++++++
 src/cmd/cgo/out.go                |  60 +++++++++++++++++++++-
 4 files changed, 228 insertions(+), 36 deletions(-)
