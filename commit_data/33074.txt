commit a509cae90d93aec3f1c33c9de445721c0bc7c509
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Oct 11 15:25:13 2017 -0700

    cmd/compile: record InlCost in export data
    
    Previously, we were treating cross-package function calls as free for
    inlining budgeting.
    
    In theory, we should be able to recompute InlCost from the
    exported/reimported function bodies. However, that process mutates the
    structure of the Node AST enough that it doesn't preserve InlCost. To
    avoid unexpected issues, just record and restore InlCost in the export
    data.
    
    Fixes #19261.
    
    Change-Id: Iac2bc0d32d4f948b64524aca657051f9fc96d92d
    Reviewed-on: https://go-review.googlesource.com/70151
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/cmd/compile/internal/gc/bexport.go |  1 +
 src/cmd/compile/internal/gc/bimport.go |  2 ++
 test/fixedbugs/issue19261.dir/p.go     | 24 ++++++++++++++++++++++++
 test/fixedbugs/issue19261.dir/q.go     | 17 +++++++++++++++++
 test/fixedbugs/issue19261.go           |  7 +++++++
 5 files changed, 51 insertions(+)
