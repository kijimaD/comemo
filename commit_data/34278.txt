commit 350b74bc4b9f37ba29ef02c2f89d687ae8563a05
Author: David Crawshaw <crawshaw@golang.org>
Date:   Fri Oct 13 12:41:09 2017 -0400

    cmd/link: zero symtab fields correctly
    
    CL 69370 introduced a hasmain field to moduledata after the
    modulehashes slice. However that code was relying on the zeroing
    code after it to cover modulehashes if len(Shlibs) == 0. The
    hasmain field gets in the way of that. So clear modulehashes
    explicitly in that case.
    
    Found when looking at #22250. Not sure if it's related.
    
    Change-Id: I81050cb4554cd49e9f245d261ef422f97d026df4
    Reviewed-on: https://go-review.googlesource.com/70730
    Run-TryBot: David Crawshaw <crawshaw@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/cmd/link/internal/ld/symtab.go | 6 ++++++
 1 file changed, 6 insertions(+)
