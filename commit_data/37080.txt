commit 8997ec1c4e01b01f9950f0869085ef5be6d45ef0
Author: Richard Musiol <mail@richard-musiol.de>
Date:   Sun Jun 24 17:23:38 2018 +0200

    syscall/js: use stable references to JavaScript values
    
    This commit changes how JavaScript values are referenced by Go code.
    After this change, a JavaScript value is always represented by the same
    ref, even if passed multiple times from JavaScript to Go. This allows
    Go's == operator to work as expected on js.Value (strict equality).
    Additionally, the performance of some operations of the syscall/js
    package got improved by saving additional roundtrips to JavaScript code.
    
    Fixes #25802.
    
    Change-Id: Ide6ffe66c6aa1caf5327a2d3ddbe48fe7c180461
    Reviewed-on: https://go-review.googlesource.com/120561
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

 misc/wasm/wasm_exec.js             | 118 ++++++++++++++++++++++---------------
 src/cmd/vet/all/whitelist/wasm.txt |  22 +++----
 src/syscall/js/js.go               | 106 ++++++++++++++++++++-------------
 src/syscall/js/js_js.s             |  24 --------
 src/syscall/js/js_test.go          |  28 +++++++++
 5 files changed, 174 insertions(+), 124 deletions(-)
