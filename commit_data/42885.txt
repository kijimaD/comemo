commit 1cfe8e91b6d742140153d943e1b09ad48c670b1f
Author: Keith Randall <khr@golang.org>
Date:   Sat Nov 30 14:04:35 2019 -0800

    cmd/compile: use ADDQ instead of LEAQ when we can
    
    The address calculations in the example end up doing x << 4 + y + 0.
    Before this CL we use a SHLQ+LEAQ. Since the constant offset is 0,
    we can use SHLQ+ADDQ instead.
    
    Change-Id: Ia048c4fdbb3a42121c7e1ab707961062e8247fca
    Reviewed-on: https://go-review.googlesource.com/c/go/+/209959
    Run-TryBot: Keith Randall <khr@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

 src/cmd/compile/internal/ssa/gen/AMD64.rules |  3 +++
 src/cmd/compile/internal/ssa/rewriteAMD64.go | 17 +++++++++++++++++
 test/codegen/addrcalc.go                     | 14 ++++++++++++++
 3 files changed, 34 insertions(+)
