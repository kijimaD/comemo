commit fcd2d9cd75e6307b5b72fed2201044e231bef40a
Author: Olivier Wulveryck <olivier.wulveryck@gmail.com>
Date:   Mon May 31 08:03:57 2021 +0200

    image/draw: improve performances if mask is *image.Alpha
    
    The existing DrawMask method is generic and is therefore calling the At().RGBA() method for every pixel of the mask and the source.
    Do a specific implementation when the mask is *image.Alpha (which is
    common) and use use the PixOffset method to increase performances.
    
    name                old time/op  new time/op  delta
    RGBA2-12            1.60ms ± 0%  1.13ms ± 1%  -29.16%  (p=0.008 n=5+5)
    GenericMaskOver-12   915µs ± 4%   926µs ± 1%     ~     (p=0.190 n=5+4)
    RGBA64Over-12       1.53ms ± 3%  1.21ms ± 2%  -20.74%  (p=0.008 n=5+5)
    GrayOver-12         1.36ms ± 2%  1.01ms ± 7%  -26.27%  (p=0.008 n=5+5)
    
    Fixes: #46395
    Change-Id: Iaeaa8cfcc6a3fe93eb19b361f3bf076e41cac5b6
    Reviewed-on: https://go-review.googlesource.com/c/go/+/323749
    Reviewed-by: Nigel Tao <nigeltao@golang.org>
    Trust: Nigel Tao <nigeltao@golang.org>
    Trust: Andrew Gerrand <adg@golang.org>
    Run-TryBot: Nigel Tao <nigeltao@golang.org>

 src/image/draw/bench_test.go |   8 +++
 src/image/draw/draw.go       | 159 +++++++++++++++++++++++++++++++++++++++++++
 src/image/draw/draw_test.go  |   4 ++
 3 files changed, 171 insertions(+)
