commit dc8453964a519032bfd338a2cc027d038c9b2e79
Author: Cherry Zhang <cherryyz@google.com>
Date:   Wed Sep 11 16:03:59 2019 -0400

    [dev.link] cmd/compile: finish all data generation before writing object file
    
    Currently, at the end of compilation, the compiler writes out the
    export data, the linker object file header, then does more
    code/data generation, then writes the main content of the linker
    object file. This CL refactors it to finish all the code/data
    generation before writing any output file.
    
    A later CL will inject some code that operates on all defined
    symbols before writing the output. This ensures all the symbols
    are available at that point.
    
    Change-Id: I97d946553fd0ffd298234c520219540d29783576
    Reviewed-on: https://go-review.googlesource.com/c/go/+/196027
    Reviewed-by: Than McIntosh <thanm@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/compile/internal/gc/main.go |  1 +
 src/cmd/compile/internal/gc/obj.go  | 32 +++++++++++++++++---------------
 2 files changed, 18 insertions(+), 15 deletions(-)
