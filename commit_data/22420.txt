commit 8b3670ffc6491ee54245e27f99b2415fbb1287d5
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Mar 6 12:02:24 2015 -0800

    cmd/internal/gc: remove namebuf variable
    
    namebuf was a global char buffer in the C version of gc, which was
    useful for providing common storage for constructing symbol and file
    names.  However, now that it's just a global Go string and the string
    data is dynamically allocated anyway, it doesn't serve any purpose
    except to force extra write barriers everytime it's assigned to.
    
    Also, introduce Lookupf(fmt, args...) as shorthand for
    Lookup(fmt.Sprintf(fmt, args...)), which was a very common pattern for
    using namebuf.
    
    Passes "go build -toolexec 'toolstash -cmp' -a std".
    
    Notably, this CL shrinks 6g's text section by ~15kB:
    
    $ size toolstash/6g tool/linux_amd64/6g
       text    data     bss     dec     hex filename
    4600805  605968  342988 5549761  54aec1 toolstash/6g
    4585547  605968  342956 5534471  547307 tool/linux_amd64/6g
    
    Change-Id: I98abb44fc7f43a2e2e48425cc9f215cd0be37442
    Reviewed-on: https://go-review.googlesource.com/7080
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/cmd/internal/gc/closure.go | 17 ++++-------
 src/cmd/internal/gc/dcl.go     |  7 ++---
 src/cmd/internal/gc/gen.go     |  4 +--
 src/cmd/internal/gc/go.go      |  2 --
 src/cmd/internal/gc/init.go    | 16 +++-------
 src/cmd/internal/gc/inl.go     |  9 ++----
 src/cmd/internal/gc/lex.go     | 67 +++++++++++++++++++-----------------------
 src/cmd/internal/gc/obj.go     | 15 +++++-----
 src/cmd/internal/gc/pgen.go    |  3 +-
 src/cmd/internal/gc/sinit.go   |  3 +-
 src/cmd/internal/gc/subr.go    |  4 +++
 src/cmd/internal/gc/walk.go    | 18 +++++++-----
 12 files changed, 70 insertions(+), 95 deletions(-)
