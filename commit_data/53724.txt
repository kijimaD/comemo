commit c7085329367e14f0aa828a3793cf66d9f82f05c2
Author: cuiweixie <cuiweixie@gmail.com>
Date:   Tue Aug 16 17:52:13 2022 +0800

    cmd/compile: add support for unsafe.{String,StringData,SliceData}
    
    For #53003
    
    Change-Id: I13a761daca8b433b271a1feb711c103d9820772d
    Reviewed-on: https://go-review.googlesource.com/c/go/+/423774
    Reviewed-by: Heschi Kreinick <heschi@google.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>
    Reviewed-by: hopehook <hopehook@golangcn.org>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/compile/internal/escape/call.go            |   4 +-
 src/cmd/compile/internal/escape/expr.go            |   4 +-
 src/cmd/compile/internal/ir/expr.go                |  20 +-
 src/cmd/compile/internal/ir/fmt.go                 | 311 +++++++++++----------
 src/cmd/compile/internal/ir/node.go                |  82 +++---
 src/cmd/compile/internal/ir/node_gen.go            |  28 ++
 src/cmd/compile/internal/ir/op_string.go           | 110 ++++----
 src/cmd/compile/internal/noder/transform.go        |   6 +-
 src/cmd/compile/internal/ssagen/ssa.go             |   8 +-
 src/cmd/compile/internal/typecheck/builtin.go      | 200 ++++++-------
 .../compile/internal/typecheck/builtin/runtime.go  |   3 +
 src/cmd/compile/internal/typecheck/const.go        |   5 +-
 src/cmd/compile/internal/typecheck/expr.go         |  59 ++++
 src/cmd/compile/internal/typecheck/func.go         |  27 +-
 src/cmd/compile/internal/typecheck/iexport.go      |   4 +-
 src/cmd/compile/internal/typecheck/iimport.go      |   8 +-
 src/cmd/compile/internal/typecheck/typecheck.go    |  26 +-
 src/cmd/compile/internal/typecheck/universe.go     |   3 +
 src/cmd/compile/internal/walk/builtin.go           |  66 +++++
 src/cmd/compile/internal/walk/expr.go              |  19 ++
 src/cmd/compile/internal/walk/walk.go              |   2 +-
 src/runtime/checkptr_test.go                       |   2 +
 src/runtime/slice.go                               |  48 ----
 src/runtime/testdata/testprog/checkptr.go          |  13 +
 src/runtime/unsafe.go                              |  98 +++++++
 test/unsafe_slice_data.go                          |  22 ++
 test/unsafe_string.go                              |  18 ++
 test/unsafe_string_data.go                         |  22 ++
 test/unsafebuiltins.go                             |  38 +++
 29 files changed, 842 insertions(+), 414 deletions(-)
