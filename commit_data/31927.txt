commit ae238688d2813e83f16050408487ea34ba1c2fff
Author: Martin Garton <garton@gmail.com>
Date:   Tue Jun 27 18:02:23 2017 +0100

    bufio: make Reader.Peek invalidate Unreads
    
    Since Reader.Peek potentially reads from the underlying io.Reader,
    discarding previous buffers, UnreadRune and UnreadByte cannot
    necessarily work.  Change Peek to invalidate the unread buffers in all
    cases (as allowed according to the documentation) and thus prevent
    hiding bugs in the caller.
    
    Fixes #18556
    
    Change-Id: I8d836db7ce31c4aaecb4f61c24573b0332bbf30d
    Reviewed-on: https://go-review.googlesource.com/46850
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/bufio/bufio.go      |  3 +++
 src/bufio/bufio_test.go | 18 ++++++++++++++++++
 2 files changed, 21 insertions(+)
