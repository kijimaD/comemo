commit 87eaa4cd0c3e33c75bb53d9ea082030cef4da923
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Apr 23 22:26:48 2012 -0700

    mime/multipart: report io.EOF correctly on part ending without newlines
    
    If a part ends with "--boundary--", without a final "\r\n",
    that's also a graceful EOF, and we should return io.EOF instead
    of the fmt-wrapped io.EOF from bufio.Reader.ReadSlice.
    
    I found this bug parsing an image attachment from gmail.
    Minimal test case stripped down from the original
    gmail-generated attachment included.
    
    R=golang-dev, r
    CC=golang-dev
    https://golang.org/cl/6118043

 src/pkg/mime/multipart/multipart.go         |  8 +++++
 src/pkg/mime/multipart/multipart_test.go    | 50 +++++++++++++++++++++++++++++
 src/pkg/mime/multipart/testdata/nested-mime | 29 +++++++++++++++++
 3 files changed, 87 insertions(+)
