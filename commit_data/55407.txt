commit 370f1a88edfec10c071fbf700328048a83bee9fc
Author: Joel Sing <joel@sing.id.au>
Date:   Sun Aug 13 00:14:58 2023 +1000

    crypto/sha512: provide optimised assembly for riscv64
    
    Provide an optimised assembly implementation of sha512 for riscv64.
    This results in significant performance gains.
    
    On a StarFive VisionFive 2:
    
                        │   sha512a   │               sha512b               │
                        │   sec/op    │   sec/op     vs base                │
    Hash8Bytes/New-4      7.998µ ± 0%   6.962µ ± 0%  -12.96% (p=0.000 n=10)
    Hash8Bytes/Sum384-4   8.113µ ± 0%   6.651µ ± 0%  -18.02% (p=0.000 n=10)
    Hash8Bytes/Sum512-4   8.269µ ± 0%   6.748µ ± 0%  -18.39% (p=0.000 n=10)
    Hash1K/New-4          57.38µ ± 0%   36.92µ ± 0%  -35.66% (p=0.000 n=10)
    Hash1K/Sum384-4       57.47µ ± 0%   36.57µ ± 0%  -36.37% (p=0.000 n=10)
    Hash1K/Sum512-4       57.61µ ± 0%   36.75µ ± 0%  -36.21% (p=0.000 n=10)
    Hash8K/New-4          402.5µ ± 0%   245.4µ ± 0%  -39.02% (p=0.000 n=10)
    Hash8K/Sum384-4       402.5µ ± 0%   245.1µ ± 0%  -39.12% (p=0.000 n=10)
    Hash8K/Sum512-4       402.7µ ± 0%   245.3µ ± 0%  -39.09% (p=0.000 n=10)
    
                        │   sha512a    │                sha512b                │
                        │     B/s      │      B/s       vs base                │
    Hash8Bytes/New-4      976.6Ki ± 0%   1123.0Ki ± 0%  +15.00% (p=0.000 n=10)
    Hash8Bytes/Sum384-4   966.8Ki ± 0%   1171.9Ki ± 0%  +21.21% (p=0.000 n=10)
    Hash8Bytes/Sum512-4   947.3Ki ± 0%   1162.1Ki ± 1%  +22.68% (p=0.000 n=10)
    Hash1K/New-4          17.01Mi ± 0%    26.45Mi ± 0%  +55.47% (p=0.000 n=10)
    Hash1K/Sum384-4       16.99Mi ± 0%    26.70Mi ± 0%  +57.13% (p=0.000 n=10)
    Hash1K/Sum512-4       16.95Mi ± 0%    26.57Mi ± 0%  +56.74% (p=0.000 n=10)
    Hash8K/New-4          19.41Mi ± 0%    31.83Mi ± 0%  +63.99% (p=0.000 n=10)
    Hash8K/Sum384-4       19.41Mi ± 0%    31.88Mi ± 0%  +64.28% (p=0.000 n=10)
    Hash8K/Sum512-4       19.40Mi ± 0%    31.85Mi ± 0%  +64.21% (p=0.000 n=10)
    
    Change-Id: I92629a106b75b0526e9f2a8fe3cc4a6f7fc63c8c
    Reviewed-on: https://go-review.googlesource.com/c/go/+/518631
    Auto-Submit: Dmitri Shuralyov <dmitshur@golang.org>
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    Run-TryBot: Joel Sing <joel@sing.id.au>
    Reviewed-by: M Zhuo <mzh@golangcn.org>
    Reviewed-by: Wang Yaduo <wangyaduo@linux.alibaba.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Mark Ryan <markdryan@rivosinc.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>

 src/crypto/sha512/sha512block_decl.go    |   2 +-
 src/crypto/sha512/sha512block_generic.go |   2 +-
 src/crypto/sha512/sha512block_riscv64.s  | 291 +++++++++++++++++++++++++++++++
 3 files changed, 293 insertions(+), 2 deletions(-)
