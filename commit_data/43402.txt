commit 5e9582e3f0d10523d32a25a338cbade21266dca3
Author: Michael Matloob <matloob@golang.org>
Date:   Thu Oct 15 11:45:32 2020 -0400

    cmd/go: support overlays for synthesized packages.
    
    The main missing piece here was supporting Stat in the overlay
    filesystem, in the parts of the package code that determines whether
    an command line argument is a file on disk or a directory.  so this
    change adds a Stat function to the fsys package. It's implemented the
    same way as the already existing fsys.lstat function, but instead of
    os.Lstat, it calls os.Stat on disk files.
    
    Then, the change changes parts of the package code to use the overlay
    Stat instead of the os package's Stat.
    
    For #39958
    
    Change-Id: I8e478ae386f05b48d7dd71bd7e47584f090623df
    Reviewed-on: https://go-review.googlesource.com/c/go/+/262617
    Trust: Michael Matloob <matloob@golang.org>
    Run-TryBot: Michael Matloob <matloob@golang.org>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Bryan C. Mills <bcmills@google.com>
    Reviewed-by: Jay Conrod <jayconrod@google.com>

 src/cmd/go/internal/fsys/fsys.go             |  20 +++-
 src/cmd/go/internal/fsys/fsys_test.go        | 155 ++++++++++++++++++++++++++-
 src/cmd/go/internal/load/pkg.go              |   7 +-
 src/cmd/go/testdata/script/build_overlay.txt |  21 +++-
 4 files changed, 190 insertions(+), 13 deletions(-)
