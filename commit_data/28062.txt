commit 5a6f973565ccb54c77e03cbb4844fd0ea392d3fe
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Aug 25 16:53:10 2016 -0700

    cmd/compile: fail gracefully on export format skew
    
    Import errors due to unexpected format are virtually
    always due to version skew. Don't panic but report a
    good error message (incl. hint that the imported package
    needs to be reinstalled) if not in debugFormat mode.
    
    Recognize export data format version and store it so
    it can be used to automatically handle minor version
    differences. We did this before, but not very well.
    
    No export data format changes.
    
    Manually tested with corrupted export data.
    
    For #16881.
    
    Change-Id: I53ba98ef747b1c81033a914bb61ee52991f35a90
    Reviewed-on: https://go-review.googlesource.com/27814
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

 src/cmd/compile/internal/gc/bexport.go |  10 ++--
 src/cmd/compile/internal/gc/bimport.go | 106 +++++++++++++++++++++------------
 2 files changed, 73 insertions(+), 43 deletions(-)
