commit 0440fb833405a5c61ed0269af9c5897b03390bac
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Nov 17 11:07:44 2021 -0800

    runtime: make faketime more robust against GC
    
    When using faketime, only run the scavenger for one loop.
    It tries to run for 1 ms, but with faketime that calculation fails.
    
    Prohibit write barriers in the faketime write function, in case
    the GC wants to print something (e.g., with GODEBUG=gctrace=1).
    
    Fixes #49614
    
    Change-Id: Iab5097fe78b6e0032ea8b493088264dfb25013c6
    Reviewed-on: https://go-review.googlesource.com/c/go/+/364757
    Trust: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Reviewed-by: Michael Knyszek <mknyszek@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>

 src/runtime/mgcscavenge.go | 5 +++++
 src/runtime/time_fake.go   | 4 ++++
 2 files changed, 9 insertions(+)
