commit 8a2a5013c962e4900eed0a3a4a471df293db3f40
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Wed Jul 11 16:40:44 2012 -0700

    net/http: fix Transport race(s) with high GOMAXPROCS
    
    Also adds a new test for GOMAXPROCS=16 explicitly, which now passes
    reliably in a stress loop like:
    
    $ go test -c
    $ (while ./http.test -test.v -test.run=Concurrency; do echo pass; done ) 2>&1 | tee foo; less foo
    
    (It used to fail very quickly and reliably on at least Linux/amd64)
    
    Fixes #3793
    
    R=golang-dev, adg, r
    CC=golang-dev
    https://golang.org/cl/6347061

 src/pkg/net/http/transport.go      | 56 ++++++++++++++++++++++++++++++++------
 src/pkg/net/http/transport_test.go | 44 ++++++++++++++++++++++++++++++
 2 files changed, 91 insertions(+), 9 deletions(-)
