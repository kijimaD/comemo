commit 1b14bdbf1ccec3e1aee176327988ad6b9d5e329c
Author: Russ Cox <rsc@golang.org>
Date:   Tue Sep 22 16:28:32 2009 -0700

    changes to accommodate nacl:
      * change ldt0setup to set GS itself; nacl won't let us do it.
      * change breakpoint to INT $3 so 8l can translate to HLT for nacl.
      * panic if closure is needed on nacl.
      * do not try to access symbol table on nacl.
      * mmap in 64kB chunks.
    
    nacl support:
      * system calls, threading, locks.
    
    R=r
    DELTA=365  (357 added, 5 deleted, 3 changed)
    OCL=34880
    CL=34906

 src/pkg/runtime/386/asm.s         |   9 +--
 src/pkg/runtime/386/closure.c     |   3 +
 src/pkg/runtime/darwin/386/sys.s  |   6 ++
 src/pkg/runtime/linux/386/sys.s   |   7 ++
 src/pkg/runtime/mheap.c           |   2 +
 src/pkg/runtime/mkasmh.sh         |   1 +
 src/pkg/runtime/nacl/386/defs.h   |  17 ++++
 src/pkg/runtime/nacl/386/rt0.s    |   8 ++
 src/pkg/runtime/nacl/386/signal.c |  14 ++++
 src/pkg/runtime/nacl/386/sys.s    | 110 ++++++++++++++++++++++++++
 src/pkg/runtime/nacl/os.h         |   9 +++
 src/pkg/runtime/nacl/signals.h    |   0
 src/pkg/runtime/nacl/thread.c     | 160 ++++++++++++++++++++++++++++++++++++++
 src/pkg/runtime/runtime.h         |   1 +
 src/pkg/runtime/symtab.c          |  17 ++++
 15 files changed, 358 insertions(+), 6 deletions(-)
