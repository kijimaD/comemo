commit ea12ed4fdd55fd9896066fcf0f7c6121f7d81d0c
Author: Russ Cox <rsc@golang.org>
Date:   Thu Apr 16 23:07:00 2009 -0700

    regenerate makefile with installed gobuild
    
    R=r
    DELTA=23  (8 added, 0 deleted, 15 changed)
    OCL=27577
    CL=27583
---
 src/lib/net/Makefile | 38 +++++++++++++++++++++++---------------
 1 file changed, 23 insertions(+), 15 deletions(-)

diff --git a/src/lib/net/Makefile b/src/lib/net/Makefile
index 466aff8a05..3b6803740b 100644
--- a/src/lib/net/Makefile
+++ b/src/lib/net/Makefile
@@ -3,19 +3,25 @@
 # license that can be found in the LICENSE file.
 
 # DO NOT EDIT.  Automatically generated by gobuild.
-# ../../cmd/gobuild/6.out -m dnsclient.go dnsconfig.go dnsmsg.go fd.go fd_${GOOS}.go ip.go net.go net_${GOOS}.go parse.go port.go >Makefile
+# gobuild -m dnsclient.go dnsconfig.go dnsmsg.go fd.go fd_${GOOS}.go ip.go net.go net_${GOOS}.go parse.go port.go >Makefile
 
-O=6
+D=
+
+O_arm=5
+O_amd64=6
+O_386=8
 OS=568vq
-GC=$(O)g
+
+O=$(O_$(GOARCH))
+GC=$(O)g -I_obj
 CC=$(O)c -FVw
 AS=$(O)a
-AR=$(O)ar
+AR=6ar
 
 default: packages
 
 clean:
-	rm -f *.[$(OS)] *.a [$(OS)].out
+	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
 
 test: packages
 	gotest
@@ -55,31 +61,32 @@ O5=\
 
 
 phases: a1 a2 a3 a4 a5
-net.a: phases
+_obj$D/net.a: phases
 
 a1: $(O1)
-	$(AR) grc net.a dnsmsg.$O fd_$(GOOS).$O parse.$O
+	$(AR) grc _obj$D/net.a dnsmsg.$O fd_$(GOOS).$O parse.$O
 	rm -f $(O1)
 
 a2: $(O2)
-	$(AR) grc net.a fd.$O ip.$O port.$O
+	$(AR) grc _obj$D/net.a fd.$O ip.$O port.$O
 	rm -f $(O2)
 
 a3: $(O3)
-	$(AR) grc net.a dnsconfig.$O net_$(GOOS).$O
+	$(AR) grc _obj$D/net.a dnsconfig.$O net_$(GOOS).$O
 	rm -f $(O3)
 
 a4: $(O4)
-	$(AR) grc net.a net.$O
+	$(AR) grc _obj$D/net.a net.$O
 	rm -f $(O4)
 
 a5: $(O5)
-	$(AR) grc net.a dnsclient.$O
+	$(AR) grc _obj$D/net.a dnsclient.$O
 	rm -f $(O5)
 
 
 newpkg: clean
-	$(AR) grc net.a
+	mkdir -p _obj$D
+	$(AR) grc _obj$D/net.a
 
 $(O1): newpkg
 $(O2): a1
@@ -89,9 +96,10 @@ $(O5): a4
 $(O6): a5
 
 nuke: clean
-	rm -f $(GOROOT)/pkg/net.a
+	rm -f $(GOROOT)/pkg$D/net.a
 
-packages: net.a
+packages: _obj$D/net.a
 
 install: packages
-	cp net.a $(GOROOT)/pkg/net.a
+	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
+	cp _obj$D/net.a $(GOROOT)/pkg$D/net.a
