commit 99eb14a7f4a58843cb23452d069e651b66db337f
Merge: 3fd7d78dec 964fac3ee7
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Feb 28 15:28:43 2020 -0500

    [dev.link] all: merge branch 'master' into dev.link
    
    Clean merge.
    
    Change-Id: I8098f15f249f7a1c054c708d22dac41e5951cddb

 CONTRIBUTORS                                       |   22 +
 api/next.txt                                       |    2 +
 doc/articles/race_detector.html                    |   11 +
 doc/cmd.html                                       |    1 -
 doc/contrib.html                                   |    1 +
 doc/effective_go.html                              |    3 +-
 doc/go1.14.html                                    |   30 +-
 doc/go1.15.html                                    |   35 +
 misc/cgo/testshared/shared_test.go                 |    6 +-
 misc/cgo/testso/so_test.go                         |    4 +-
 misc/cgo/testsovar/so_test.go                      |    4 +-
 misc/wasm/wasm_exec.js                             |    2 +-
 src/bufio/bufio_test.go                            |    2 +-
 src/bytes/buffer_test.go                           |   19 +-
 src/clean.bash                                     |    2 +-
 src/cmd/asm/internal/asm/testdata/arm64enc.s       |    2 +
 src/cmd/asm/internal/asm/testdata/arm64error.s     |    3 +
 src/cmd/compile/internal/gc/const.go               |    8 +-
 src/cmd/compile/internal/gc/inl.go                 |    4 +-
 src/cmd/compile/internal/gc/lex_test.go            |    2 +-
 src/cmd/compile/internal/gc/order.go               |    2 +-
 src/cmd/compile/internal/gc/pgen.go                |   42 +-
 src/cmd/compile/internal/gc/plive.go               |    4 +-
 src/cmd/compile/internal/gc/scope_test.go          |   67 +-
 src/cmd/compile/internal/gc/sinit.go               |   10 +-
 src/cmd/compile/internal/gc/ssa.go                 |   41 +-
 src/cmd/compile/internal/gc/subr.go                |   28 +-
 src/cmd/compile/internal/gc/syntax.go              |   13 +
 .../compile/internal/gc/testdata/dupLoad_test.go   |   20 +-
 src/cmd/compile/internal/gc/typecheck.go           |    2 +-
 src/cmd/compile/internal/gc/walk.go                |    2 +-
 src/cmd/compile/internal/riscv64/ssa.go            |    4 +-
 src/cmd/compile/internal/ssa/check.go              |    2 +-
 src/cmd/compile/internal/ssa/gen/386.rules         |  202 +-
 src/cmd/compile/internal/ssa/gen/AMD64.rules       |  252 +-
 src/cmd/compile/internal/ssa/gen/ARM.rules         |  142 +-
 src/cmd/compile/internal/ssa/gen/ARM64.rules       |  476 +--
 src/cmd/compile/internal/ssa/gen/ARM64Ops.go       |   12 +-
 src/cmd/compile/internal/ssa/gen/MIPS.rules        |  119 +-
 src/cmd/compile/internal/ssa/gen/MIPS64.rules      |  167 +-
 src/cmd/compile/internal/ssa/gen/PPC64.rules       |  191 +-
 src/cmd/compile/internal/ssa/gen/PPC64Ops.go       |    8 +-
 src/cmd/compile/internal/ssa/gen/RISCV64.rules     |  215 +-
 src/cmd/compile/internal/ssa/gen/RISCV64Ops.go     |    2 +
 src/cmd/compile/internal/ssa/gen/S390X.rules       |  354 +-
 src/cmd/compile/internal/ssa/gen/Wasm.rules        |  191 +-
 src/cmd/compile/internal/ssa/gen/dec64.rules       |   54 +-
 src/cmd/compile/internal/ssa/gen/generic.rules     |   64 +-
 src/cmd/compile/internal/ssa/gen/genericOps.go     |   23 +-
 src/cmd/compile/internal/ssa/gen/main.go           |    4 +-
 src/cmd/compile/internal/ssa/gen/rulegen.go        |   76 +-
 src/cmd/compile/internal/ssa/loopbce.go            |    5 -
 src/cmd/compile/internal/ssa/nilcheck.go           |    4 +
 src/cmd/compile/internal/ssa/op.go                 |   35 +-
 src/cmd/compile/internal/ssa/opGen.go              |  144 +-
 src/cmd/compile/internal/ssa/prove.go              |   58 +-
 src/cmd/compile/internal/ssa/rewrite.go            |   61 +-
 src/cmd/compile/internal/ssa/rewrite386.go         | 2579 +++++---------
 src/cmd/compile/internal/ssa/rewriteAMD64.go       | 1151 ++++---
 src/cmd/compile/internal/ssa/rewriteARM.go         | 1774 ++--------
 src/cmd/compile/internal/ssa/rewriteARM64.go       | 3602 +++++---------------
 src/cmd/compile/internal/ssa/rewriteMIPS.go        | 1748 ++--------
 src/cmd/compile/internal/ssa/rewriteMIPS64.go      | 2464 +++----------
 src/cmd/compile/internal/ssa/rewritePPC64.go       | 3341 +++++-------------
 src/cmd/compile/internal/ssa/rewriteRISCV64.go     | 1874 ++--------
 src/cmd/compile/internal/ssa/rewriteS390X.go       | 2736 +++------------
 src/cmd/compile/internal/ssa/rewriteWasm.go        | 2819 +++------------
 src/cmd/compile/internal/ssa/rewrite_rule_idea.txt |   17 -
 src/cmd/compile/internal/ssa/rewritedec64.go       |  254 +-
 src/cmd/compile/internal/ssa/rewritegeneric.go     | 1002 ++----
 src/cmd/compile/internal/ssa/value.go              |    4 +
 src/cmd/compile/internal/syntax/parser.go          |   11 +-
 .../internal/syntax/testdata/issue23385.src        |    9 +-
 src/cmd/dist/test.go                               |   18 +-
 src/cmd/go/go_test.go                              |  370 --
 src/cmd/go/internal/base/goflags.go                |   12 +-
 src/cmd/go/internal/clean/clean.go                 |    2 +-
 src/cmd/go/internal/cmdflag/flag.go                |  203 +-
 src/cmd/go/internal/fmtcmd/fmt.go                  |    7 +-
 src/cmd/go/internal/get/get.go                     |   16 +-
 src/cmd/go/internal/list/list.go                   |    1 +
 src/cmd/go/internal/load/pkg.go                    |  102 +-
 src/cmd/go/internal/modcmd/vendor.go               |    5 +
 src/cmd/go/internal/modfetch/coderepo.go           |   25 -
 src/cmd/go/internal/modfetch/fetch.go              |    6 +-
 src/cmd/go/internal/modget/get.go                  |    6 +-
 src/cmd/go/internal/modload/build.go               |   30 +-
 src/cmd/go/internal/modload/import.go              |   14 +-
 src/cmd/go/internal/modload/load.go                |  231 +-
 src/cmd/go/internal/modload/query.go               |   27 +-
 src/cmd/go/internal/search/search.go               |  181 +-
 src/cmd/go/internal/test/flagdefs.go               |   34 +
 src/cmd/go/internal/test/flagdefs_test.go          |   34 +
 src/cmd/go/internal/test/genflags.go               |   90 +
 src/cmd/go/internal/test/test.go                   |  149 +-
 src/cmd/go/internal/test/testflag.go               |  463 ++-
 src/cmd/go/internal/version/version.go             |    6 +
 src/cmd/go/internal/vet/vet.go                     |    8 +-
 src/cmd/go/internal/vet/vetflag.go                 |  163 +-
 src/cmd/go/internal/work/action.go                 |    2 +-
 src/cmd/go/internal/work/build.go                  |    5 +-
 src/cmd/go/internal/work/exec.go                   |    5 +-
 src/cmd/go/main.go                                 |    2 +-
 .../mod/example.com_printversion_v0.1.0.txt        |    6 +
 .../mod/example.com_printversion_v1.0.0.txt        |    6 +
 src/cmd/go/testdata/norunexample/example_test.go   |   11 -
 src/cmd/go/testdata/norunexample/test_test.go      |   10 -
 src/cmd/go/testdata/rundir/sub/sub.go              |    1 -
 src/cmd/go/testdata/rundir/x.go                    |    1 -
 src/cmd/go/testdata/script/build_arm.txt           |   13 +
 .../testdata/script/build_cd_gopath_different.txt  |   72 +
 src/cmd/go/testdata/script/build_gopath_order.txt  |   35 +
 .../script/build_link_x_import_path_escape.txt     |   18 +
 src/cmd/go/testdata/script/build_n_cgo.txt         |   13 +
 .../build_package_not_stale_trailing_slash.txt     |   13 +
 src/cmd/go/testdata/script/build_tags_no_comma.txt |    4 +
 src/cmd/go/testdata/script/build_vendor.txt        |   41 +
 src/cmd/go/testdata/script/cmd_import_error.txt    |    2 +-
 src/cmd/go/testdata/script/gccgo_link_c.txt        |   16 +
 .../go/testdata/script/get_vcs_error_message.txt   |    8 +
 src/cmd/go/testdata/script/get_vendor.txt          |   94 +
 src/cmd/go/testdata/script/import_cycle.txt        |   12 +
 .../script/install_msan_and_race_require_cgo.txt   |   18 +
 .../go/testdata/script/install_shadow_gopath.txt   |   19 +
 src/cmd/go/testdata/script/list_ambiguous_path.txt |    4 +-
 .../go/testdata/script/list_gofile_in_goroot.txt   |   73 +
 src/cmd/go/testdata/script/list_shadow.txt         |   25 +
 .../go/testdata/script/list_test_non_go_files.txt  |    2 +-
 .../go/testdata/script/mod_ambiguous_import.txt    |    3 +-
 src/cmd/go/testdata/script/mod_dot.txt             |   97 +-
 src/cmd/go/testdata/script/mod_empty_err.txt       |    8 +-
 src/cmd/go/testdata/script/mod_fs_patterns.txt     |    4 +-
 src/cmd/go/testdata/script/mod_get_legacy.txt      |   57 +
 src/cmd/go/testdata/script/mod_goroot_errors.txt   |    4 +-
 src/cmd/go/testdata/script/mod_import_cycle.txt    |   40 +
 src/cmd/go/testdata/script/mod_list_dir.txt        |    4 -
 .../go/testdata/script/mod_list_replace_dir.txt    |    4 +-
 src/cmd/go/testdata/script/mod_readonly.txt        |    4 +-
 src/cmd/go/testdata/script/mod_replace_import.txt  |    5 +-
 .../go/testdata/script/mod_tagged_import_cycle.txt |  106 +
 .../go/testdata/script/mod_vendor_unused_only.txt  |   17 +
 src/cmd/go/testdata/script/noncanonical_import.txt |    4 +-
 src/cmd/go/testdata/script/run_dirs.txt            |   11 +
 src/cmd/go/testdata/script/run_vendor.txt          |   33 +
 src/cmd/go/testdata/script/test_flags.txt          |  103 +
 src/cmd/go/testdata/script/test_no_run_example.txt |   26 +
 .../go/testdata/script/test_race_install_cgo.txt   |   91 +
 src/cmd/go/testdata/script/test_vendor.txt         |   47 +
 .../testdata/script/vendor_gopath_issue11409.txt   |   51 +
 src/cmd/go/testdata/script/vendor_import.txt       |  103 +
 .../go/testdata/script/vendor_import_missing.txt   |    7 +
 src/cmd/go/testdata/script/vendor_import_wrong.txt |    9 +
 src/cmd/go/testdata/script/vendor_issue12156.txt   |   15 +
 .../go/testdata/script/vendor_list_issue11977.txt  |   16 +
 src/cmd/go/testdata/script/vendor_resolve.txt      |   20 +
 .../go/testdata/script/vendor_test_issue11864.txt  |   19 +
 .../go/testdata/script/vendor_test_issue14613.txt  |   21 +
 src/cmd/go/testdata/script/version.txt             |   25 +-
 src/cmd/go/testdata/script/version_replace.txt     |   33 +
 src/cmd/go/testdata/script/vet_flags.txt           |   58 +-
 src/cmd/go/testdata/script/vet_internal.txt        |   71 +
 src/cmd/go/testdata/shadow/root1/src/foo/foo.go    |    1 -
 src/cmd/go/testdata/shadow/root1/src/math/math.go  |    1 -
 src/cmd/go/testdata/shadow/root2/src/foo/foo.go    |    1 -
 src/cmd/go/testdata/src/my.pkg/main/main.go        |    7 -
 src/cmd/go/testdata/src/my.pkg/pkg.go              |    3 -
 src/cmd/go/testdata/src/vend/bad.go                |    3 -
 src/cmd/go/testdata/src/vend/dir1/dir1.go          |    1 -
 src/cmd/go/testdata/src/vend/good.go               |    3 -
 src/cmd/go/testdata/src/vend/hello/hello.go        |   10 -
 src/cmd/go/testdata/src/vend/hello/hello_test.go   |   12 -
 src/cmd/go/testdata/src/vend/hello/hellox_test.go  |   12 -
 src/cmd/go/testdata/src/vend/subdir/bad.go         |    3 -
 src/cmd/go/testdata/src/vend/subdir/good.go        |    3 -
 src/cmd/go/testdata/src/vend/vendor/p/p.go         |    1 -
 src/cmd/go/testdata/src/vend/vendor/q/q.go         |    1 -
 src/cmd/go/testdata/src/vend/vendor/strings/msg.go |    3 -
 .../src/vend/vendor/vend/dir1/dir2/dir2.go         |    1 -
 src/cmd/go/testdata/src/vend/x/invalid/invalid.go  |    3 -
 src/cmd/go/testdata/src/vend/x/vendor/p/p.go       |    1 -
 src/cmd/go/testdata/src/vend/x/vendor/p/p/p.go     |    3 -
 src/cmd/go/testdata/src/vend/x/vendor/r/r.go       |    1 -
 src/cmd/go/testdata/src/vend/x/x.go                |    7 -
 src/cmd/go/testdata/testvendor/src/p/p.go          |    6 -
 src/cmd/go/testdata/testvendor/src/q/vendor/x/x.go |    1 -
 src/cmd/go/testdata/testvendor/src/q/y/y.go        |    3 -
 src/cmd/go/testdata/testvendor/src/q/z/z.go        |    3 -
 src/cmd/go/testdata/testvendor2/src/p/p.go         |    3 -
 src/cmd/go/testdata/testvendor2/vendor/x/x.go      |    1 -
 src/cmd/go/vendor_test.go                          |  412 ---
 src/cmd/gofmt/internal.go                          |    8 +-
 src/cmd/internal/obj/arm64/a.out.go                |    1 +
 src/cmd/internal/obj/arm64/anames.go               |    1 +
 src/cmd/internal/obj/arm64/asm7.go                 |    8 +
 src/cmd/internal/sys/supported.go                  |    4 +-
 src/cmd/link/elf_test.go                           |   12 +-
 src/cmd/link/internal/amd64/asm.go                 |   39 +-
 src/cmd/link/internal/arm64/asm.go                 |   36 +-
 src/cmd/link/internal/arm64/obj.go                 |    3 +-
 src/cmd/link/internal/ld/config.go                 |    7 +-
 src/cmd/link/internal/ld/elf.go                    |   11 +-
 src/cmd/link/internal/ld/lib.go                    |    4 +-
 src/cmd/link/internal/ld/macho_combine_dwarf.go    |  135 +-
 src/crypto/cipher/gcm.go                           |    7 +-
 src/crypto/cipher/gcm_test.go                      |   19 +-
 src/crypto/tls/auth.go                             |   10 +-
 src/crypto/tls/common.go                           |    8 -
 src/crypto/tls/example_test.go                     |   43 +-
 src/crypto/tls/handshake_client.go                 |   30 +-
 src/crypto/tls/handshake_client_test.go            |    2 +-
 src/crypto/tls/handshake_server_test.go            |    5 +-
 src/crypto/tls/tls_test.go                         |   29 +-
 src/crypto/x509/root_unix.go                       |   17 +-
 src/crypto/x509/root_unix_test.go                  |   81 +
 src/crypto/x509/x509.go                            |   13 +-
 src/encoding/base64/base64_test.go                 |    2 +-
 src/encoding/json/decode_test.go                   |   96 +
 src/encoding/json/encode.go                        |    2 +-
 src/encoding/json/scanner.go                       |   31 +-
 src/encoding/xml/xml.go                            |    4 +-
 src/expvar/expvar_test.go                          |    8 +-
 src/flag/flag.go                                   |    2 +-
 src/fmt/fmt_test.go                                |   19 +-
 src/fmt/format.go                                  |   13 +-
 src/fmt/scan.go                                    |    8 +-
 src/go/build/deps_test.go                          |    5 +-
 src/go/format/internal.go                          |    2 +-
 src/go/printer/printer_test.go                     |    2 +-
 src/go/types/builtins.go                           |   10 +-
 src/go/types/builtins_test.go                      |   16 +
 src/go/types/conversions.go                        |    2 +-
 src/go/types/expr.go                               |   42 +-
 src/hash/maphash/example_test.go                   |   37 +
 src/hash/maphash/maphash.go                        |    9 +-
 src/hash/maphash/maphash_test.go                   |   23 +
 src/internal/poll/fd_mutex_test.go                 |   12 +-
 src/internal/syscall/execenv/execenv_default.go    |   19 +
 .../syscall/execenv/execenv_windows.go}            |   18 +-
 src/io/ioutil/tempfile.go                          |   19 +-
 src/io/ioutil/tempfile_test.go                     |   79 +
 src/log/syslog/syslog_test.go                      |    2 +-
 src/math/big/arith_decl.go                         |    2 +-
 src/math/big/arith_decl_pure.go                    |    2 +-
 src/math/big/arith_riscv64.s                       |   51 +
 src/math/sqrt_riscv64.s                            |   14 +
 src/math/stubs_riscv64.s                           |    3 -
 src/mime/type.go                                   |    7 +-
 src/mime/type_test.go                              |   27 +
 src/net/dnsclient_test.go                          |    2 +-
 src/net/dnsclient_unix.go                          |    8 +-
 src/net/http/serve_test.go                         |   10 +-
 src/net/http/transport_test.go                     |   35 +-
 src/net/ipsock_plan9.go                            |    4 +-
 src/net/rpc/jsonrpc/all_test.go                    |    4 +-
 src/net/textproto/pipeline.go                      |   10 +-
 src/os/exec/exec.go                                |   15 +-
 src/os/exec_posix.go                               |    3 +-
 src/os/os_test.go                                  |   19 +-
 src/reflect/all_test.go                            |   29 +
 src/reflect/value.go                               |    8 +-
 src/runtime/alg.go                                 |   10 +-
 src/runtime/callers_test.go                        |    2 +
 src/runtime/cgo/gcc_setenv.c                       |    4 +-
 src/runtime/cpuflags.go                            |    1 +
 src/runtime/debug/mod.go                           |   51 +-
 src/runtime/defs_linux_386.go                      |    1 -
 src/runtime/defs_linux_amd64.go                    |    1 -
 src/runtime/defs_linux_arm.go                      |    1 -
 src/runtime/defs_linux_arm64.go                    |    1 -
 src/runtime/malloc.go                              |   19 +-
 src/runtime/memclr_riscv64.s                       |    0
 src/runtime/memmove_riscv64.s                      |    0
 src/runtime/mgcsweep.go                            |    2 +-
 src/runtime/mheap.go                               |   29 +-
 src/runtime/mkpreempt.go                           |   19 +-
 src/runtime/pprof/internal/profile/proto.go        |    2 +-
 src/runtime/preempt_amd64.s                        |    8 +-
 src/runtime/proc.go                                |   29 +-
 src/runtime/race/testdata/slice_test.go            |   16 +
 src/runtime/runtime1.go                            |    5 -
 src/runtime/runtime2.go                            |    1 -
 src/runtime/select.go                              |    7 +-
 src/runtime/sema_test.go                           |    8 +-
 src/runtime/slice.go                               |    4 +-
 src/runtime/stack.go                               |   12 +-
 src/runtime/string_test.go                         |    4 +-
 src/runtime/sys_windows_amd64.s                    |    4 +
 src/runtime/syscall_windows_test.go                |   76 +
 src/runtime/time.go                                |  224 +-
 src/strconv/quote_test.go                          |   66 +-
 src/strings/strings_test.go                        |    4 +-
 src/sync/atomic/value_test.go                      |    8 +-
 src/sync/map.go                                    |   25 +-
 src/sync/map_bench_test.go                         |   74 +
 src/sync/map_reference_test.go                     |   23 +
 src/sync/map_test.go                               |   13 +-
 src/syscall/exec_linux.go                          |   22 +-
 src/syscall/fs_js.go                               |    6 +-
 src/testing/testing.go                             |    8 +-
 src/text/template/funcs.go                         |  138 +-
 src/time/example_test.go                           |   28 +-
 src/time/format.go                                 |    2 +-
 src/time/format_test.go                            |   14 +
 src/time/sleep.go                                  |    1 +
 src/time/tick.go                                   |    9 +
 src/time/tick_test.go                              |   36 +-
 src/time/time_test.go                              |   40 +-
 src/time/zoneinfo_unix.go                          |    2 +-
 src/os/env_default.go => test/codegen/addrcalc.go  |   13 +-
 test/codegen/compare_and_branch.go                 |    8 +-
 test/codegen/condmove.go                           |    6 +-
 test/defererrcheck.go                              |    4 -
 test/fixedbugs/bug507.dir/a.go                     |   13 +
 test/fixedbugs/bug507.dir/b.go                     |    9 +
 test/fixedbugs/bug507.dir/c.go                     |    9 +
 test/fixedbugs/bug507.go                           |    9 +
 test/fixedbugs/issue18915.go                       |    6 +-
 test/fixedbugs/issue24651a.go                      |    2 +-
 test/fixedbugs/issue24651b.go                      |    4 +-
 test/fixedbugs/issue35576.go                       |   16 +
 test/fixedbugs/issue35576.out                      |    1 +
 test/fixedbugs/issue36259.go                       |   28 +
 test/fixedbugs/issue36705.go                       |   27 +
 test/inline_big.go                                 |    4 +-
 test/prove.go                                      |   52 +-
 test/run.go                                        |   49 +-
 test/syntax/chan1.go                               |    2 +-
 test/syntax/typesw.go                              |    2 +-
 328 files changed, 11782 insertions(+), 23814 deletions(-)

