commit 1d6bd79ceb3dc8f1acc0f223ca5d7fd86c5fd2e2
Author: Robert Griesemer <gri@golang.org>
Date:   Tue May 5 18:38:45 2009 -0700

    new dir structure for lib/go
    
    R=r
    DELTA=9298  (4760 added, 4536 deleted, 2 changed)
    OCL=28317
    CL=28317
---
 src/lib/Makefile                         |   4 +-
 src/lib/go/Makefile                      | 100 -------------------------------
 src/lib/go/ast/Makefile                  |  68 +++++++++++++++++++++
 src/lib/go/{ => ast}/ast.go              |   0
 src/lib/go/doc/Makefile                  |  68 +++++++++++++++++++++
 src/lib/go/{ => doc}/doc.go              |   0
 src/lib/go/parser/Makefile               |  68 +++++++++++++++++++++
 src/lib/go/{ => parser}/parser.go        |   0
 src/lib/go/{ => parser}/parser_test.go   |   0
 src/lib/go/scanner/Makefile              |  68 +++++++++++++++++++++
 src/lib/go/{ => scanner}/scanner.go      |   0
 src/lib/go/{ => scanner}/scanner_test.go |   0
 src/lib/go/token/Makefile                |  68 +++++++++++++++++++++
 src/lib/go/{ => token}/token.go          |   0
 14 files changed, 342 insertions(+), 102 deletions(-)

diff --git a/src/lib/Makefile b/src/lib/Makefile
index cbdc6790af..a03e354a60 100644
--- a/src/lib/Makefile
+++ b/src/lib/Makefile
@@ -111,8 +111,8 @@ strings.install: utf8.install
 testing.install: flag.install fmt.install
 
 fmt.install: io.install reflect.install strconv.install
-go.install: regexp.install sort.install strconv.install strings.install \
-	utf8.install unicode.install fmt.install
+go.install: fmt.install io.install once.install regexp.install sort.install \
+	strconv.install strings.install unicode.install utf8.install container/vector.install
 hash.install: os.install
 http.install: bufio.install io.install net.install os.install path.install strings.install log.install
 io.install: os.install sync.install
diff --git a/src/lib/go/Makefile b/src/lib/go/Makefile
deleted file mode 100644
index 5e56c932ec..0000000000
--- a/src/lib/go/Makefile
+++ /dev/null
@@ -1,100 +0,0 @@
-# Copyright 2009 The Go Authors.  All rights reserved.
-# Use of this source code is governed by a BSD-style
-# license that can be found in the LICENSE file.
-
-# DO NOT EDIT.  Automatically generated by gobuild.
-# gobuild -m >Makefile
-
-D=/go
-
-O_arm=5
-O_amd64=6
-O_386=8
-OS=568vq
-
-O=$(O_$(GOARCH))
-GC=$(O)g -I_obj
-CC=$(O)c -FVw
-AS=$(O)a
-AR=6ar
-
-default: packages
-
-clean:
-	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
-
-test: packages
-	gotest
-
-coverage: packages
-	gotest
-	6cov -g `pwd` | grep -v '_test\.go:'
-
-%.$O: %.go
-	$(GC) $*.go
-
-%.$O: %.c
-	$(CC) $*.c
-
-%.$O: %.s
-	$(AS) $*.s
-
-O1=\
-	token.$O\
-
-O2=\
-	scanner.$O\
-	ast.$O\
-
-O3=\
-	doc.$O\
-	parser.$O\
-
-
-phases: a1 a2 a3
-_obj$D/ast.a: phases
-_obj$D/doc.a: phases
-_obj$D/parser.a: phases
-_obj$D/scanner.a: phases
-_obj$D/token.a: phases
-
-a1: $(O1)
-	$(AR) grc _obj$D/token.a token.$O
-	rm -f $(O1)
-
-a2: $(O2)
-	$(AR) grc _obj$D/scanner.a scanner.$O
-	$(AR) grc _obj$D/ast.a ast.$O
-	rm -f $(O2)
-
-a3: $(O3)
-	$(AR) grc _obj$D/doc.a doc.$O
-	$(AR) grc _obj$D/parser.a parser.$O
-	rm -f $(O3)
-
-
-newpkg: clean
-	mkdir -p _obj$D
-	$(AR) grc _obj$D/ast.a
-	$(AR) grc _obj$D/doc.a
-	$(AR) grc _obj$D/parser.a
-	$(AR) grc _obj$D/scanner.a
-	$(AR) grc _obj$D/token.a
-
-$(O1): newpkg
-$(O2): a1
-$(O3): a2
-$(O4): a3
-
-nuke: clean
-	rm -f $(GOROOT)/pkg$D/ast.a $(GOROOT)/pkg$D/doc.a $(GOROOT)/pkg$D/parser.a $(GOROOT)/pkg$D/scanner.a $(GOROOT)/pkg$D/token.a
-
-packages: _obj$D/ast.a _obj$D/doc.a _obj$D/parser.a _obj$D/scanner.a _obj$D/token.a
-
-install: packages
-	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
-	cp _obj$D/ast.a $(GOROOT)/pkg$D/ast.a
-	cp _obj$D/doc.a $(GOROOT)/pkg$D/doc.a
-	cp _obj$D/parser.a $(GOROOT)/pkg$D/parser.a
-	cp _obj$D/scanner.a $(GOROOT)/pkg$D/scanner.a
-	cp _obj$D/token.a $(GOROOT)/pkg$D/token.a
diff --git a/src/lib/go/ast/Makefile b/src/lib/go/ast/Makefile
new file mode 100644
index 0000000000..e21b05d16f
--- /dev/null
+++ b/src/lib/go/ast/Makefile
@@ -0,0 +1,68 @@
+# Copyright 2009 The Go Authors. All rights reserved.
+# Use of this source code is governed by a BSD-style
+# license that can be found in the LICENSE file.
+
+# DO NOT EDIT.  Automatically generated by gobuild.
+# gobuild -m >Makefile
+
+D=/go/
+
+O_arm=5
+O_amd64=6
+O_386=8
+OS=568vq
+
+O=$(O_$(GOARCH))
+GC=$(O)g -I_obj
+CC=$(O)c -FVw
+AS=$(O)a
+AR=6ar
+
+default: packages
+
+clean:
+	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
+
+test: packages
+	gotest
+
+coverage: packages
+	gotest
+	6cov -g `pwd` | grep -v '_test\.go:'
+
+%.$O: %.go
+	$(GC) $*.go
+
+%.$O: %.c
+	$(CC) $*.c
+
+%.$O: %.s
+	$(AS) $*.s
+
+O1=\
+	ast.$O\
+
+
+phases: a1
+_obj$D/ast.a: phases
+
+a1: $(O1)
+	$(AR) grc _obj$D/ast.a ast.$O
+	rm -f $(O1)
+
+
+newpkg: clean
+	mkdir -p _obj$D
+	$(AR) grc _obj$D/ast.a
+
+$(O1): newpkg
+$(O2): a1
+
+nuke: clean
+	rm -f $(GOROOT)/pkg$D/ast.a
+
+packages: _obj$D/ast.a
+
+install: packages
+	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
+	cp _obj$D/ast.a $(GOROOT)/pkg$D/ast.a
diff --git a/src/lib/go/ast.go b/src/lib/go/ast/ast.go
similarity index 100%
rename from src/lib/go/ast.go
rename to src/lib/go/ast/ast.go
diff --git a/src/lib/go/doc/Makefile b/src/lib/go/doc/Makefile
new file mode 100644
index 0000000000..5810be23e7
--- /dev/null
+++ b/src/lib/go/doc/Makefile
@@ -0,0 +1,68 @@
+# Copyright 2009 The Go Authors. All rights reserved.
+# Use of this source code is governed by a BSD-style
+# license that can be found in the LICENSE file.
+
+# DO NOT EDIT.  Automatically generated by gobuild.
+# gobuild -m >Makefile
+
+D=/go/
+
+O_arm=5
+O_amd64=6
+O_386=8
+OS=568vq
+
+O=$(O_$(GOARCH))
+GC=$(O)g -I_obj
+CC=$(O)c -FVw
+AS=$(O)a
+AR=6ar
+
+default: packages
+
+clean:
+	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
+
+test: packages
+	gotest
+
+coverage: packages
+	gotest
+	6cov -g `pwd` | grep -v '_test\.go:'
+
+%.$O: %.go
+	$(GC) $*.go
+
+%.$O: %.c
+	$(CC) $*.c
+
+%.$O: %.s
+	$(AS) $*.s
+
+O1=\
+	doc.$O\
+
+
+phases: a1
+_obj$D/doc.a: phases
+
+a1: $(O1)
+	$(AR) grc _obj$D/doc.a doc.$O
+	rm -f $(O1)
+
+
+newpkg: clean
+	mkdir -p _obj$D
+	$(AR) grc _obj$D/doc.a
+
+$(O1): newpkg
+$(O2): a1
+
+nuke: clean
+	rm -f $(GOROOT)/pkg$D/doc.a
+
+packages: _obj$D/doc.a
+
+install: packages
+	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
+	cp _obj$D/doc.a $(GOROOT)/pkg$D/doc.a
diff --git a/src/lib/go/doc.go b/src/lib/go/doc/doc.go
similarity index 100%
rename from src/lib/go/doc.go
rename to src/lib/go/doc/doc.go
diff --git a/src/lib/go/parser/Makefile b/src/lib/go/parser/Makefile
new file mode 100644
index 0000000000..27cacfc99a
--- /dev/null
+++ b/src/lib/go/parser/Makefile
@@ -0,0 +1,68 @@
+# Copyright 2009 The Go Authors. All rights reserved.
+# Use of this source code is governed by a BSD-style
+# license that can be found in the LICENSE file.
+
+# DO NOT EDIT.  Automatically generated by gobuild.
+# gobuild -m >Makefile
+
+D=/go/
+
+O_arm=5
+O_amd64=6
+O_386=8
+OS=568vq
+
+O=$(O_$(GOARCH))
+GC=$(O)g -I_obj
+CC=$(O)c -FVw
+AS=$(O)a
+AR=6ar
+
+default: packages
+
+clean:
+	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
+
+test: packages
+	gotest
+
+coverage: packages
+	gotest
+	6cov -g `pwd` | grep -v '_test\.go:'
+
+%.$O: %.go
+	$(GC) $*.go
+
+%.$O: %.c
+	$(CC) $*.c
+
+%.$O: %.s
+	$(AS) $*.s
+
+O1=\
+	parser.$O\
+
+
+phases: a1
+_obj$D/parser.a: phases
+
+a1: $(O1)
+	$(AR) grc _obj$D/parser.a parser.$O
+	rm -f $(O1)
+
+
+newpkg: clean
+	mkdir -p _obj$D
+	$(AR) grc _obj$D/parser.a
+
+$(O1): newpkg
+$(O2): a1
+
+nuke: clean
+	rm -f $(GOROOT)/pkg$D/parser.a
+
+packages: _obj$D/parser.a
+
+install: packages
+	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
+	cp _obj$D/parser.a $(GOROOT)/pkg$D/parser.a
diff --git a/src/lib/go/parser.go b/src/lib/go/parser/parser.go
similarity index 100%
rename from src/lib/go/parser.go
rename to src/lib/go/parser/parser.go
diff --git a/src/lib/go/parser_test.go b/src/lib/go/parser/parser_test.go
similarity index 100%
rename from src/lib/go/parser_test.go
rename to src/lib/go/parser/parser_test.go
diff --git a/src/lib/go/scanner/Makefile b/src/lib/go/scanner/Makefile
new file mode 100644
index 0000000000..fc1ecf9901
--- /dev/null
+++ b/src/lib/go/scanner/Makefile
@@ -0,0 +1,68 @@
+# Copyright 2009 The Go Authors. All rights reserved.
+# Use of this source code is governed by a BSD-style
+# license that can be found in the LICENSE file.
+
+# DO NOT EDIT.  Automatically generated by gobuild.
+# gobuild -m >Makefile
+
+D=/go/
+
+O_arm=5
+O_amd64=6
+O_386=8
+OS=568vq
+
+O=$(O_$(GOARCH))
+GC=$(O)g -I_obj
+CC=$(O)c -FVw
+AS=$(O)a
+AR=6ar
+
+default: packages
+
+clean:
+	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
+
+test: packages
+	gotest
+
+coverage: packages
+	gotest
+	6cov -g `pwd` | grep -v '_test\.go:'
+
+%.$O: %.go
+	$(GC) $*.go
+
+%.$O: %.c
+	$(CC) $*.c
+
+%.$O: %.s
+	$(AS) $*.s
+
+O1=\
+	scanner.$O\
+
+
+phases: a1
+_obj$D/scanner.a: phases
+
+a1: $(O1)
+	$(AR) grc _obj$D/scanner.a scanner.$O
+	rm -f $(O1)
+
+
+newpkg: clean
+	mkdir -p _obj$D
+	$(AR) grc _obj$D/scanner.a
+
+$(O1): newpkg
+$(O2): a1
+
+nuke: clean
+	rm -f $(GOROOT)/pkg$D/scanner.a
+
+packages: _obj$D/scanner.a
+
+install: packages
+	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
+	cp _obj$D/scanner.a $(GOROOT)/pkg$D/scanner.a
diff --git a/src/lib/go/scanner.go b/src/lib/go/scanner/scanner.go
similarity index 100%
rename from src/lib/go/scanner.go
rename to src/lib/go/scanner/scanner.go
diff --git a/src/lib/go/scanner_test.go b/src/lib/go/scanner/scanner_test.go
similarity index 100%
rename from src/lib/go/scanner_test.go
rename to src/lib/go/scanner/scanner_test.go
diff --git a/src/lib/go/token/Makefile b/src/lib/go/token/Makefile
new file mode 100644
index 0000000000..b4e948fc9c
--- /dev/null
+++ b/src/lib/go/token/Makefile
@@ -0,0 +1,68 @@
+# Copyright 2009 The Go Authors. All rights reserved.
+# Use of this source code is governed by a BSD-style
+# license that can be found in the LICENSE file.
+
+# DO NOT EDIT.  Automatically generated by gobuild.
+# gobuild -m >Makefile
+
+D=/go/
+
+O_arm=5
+O_amd64=6
+O_386=8
+OS=568vq
+
+O=$(O_$(GOARCH))
+GC=$(O)g -I_obj
+CC=$(O)c -FVw
+AS=$(O)a
+AR=6ar
+
+default: packages
+
+clean:
+	rm -rf *.[$(OS)] *.a [$(OS)].out _obj
+
+test: packages
+	gotest
+
+coverage: packages
+	gotest
+	6cov -g `pwd` | grep -v '_test\.go:'
+
+%.$O: %.go
+	$(GC) $*.go
+
+%.$O: %.c
+	$(CC) $*.c
+
+%.$O: %.s
+	$(AS) $*.s
+
+O1=\
+	token.$O\
+
+
+phases: a1
+_obj$D/token.a: phases
+
+a1: $(O1)
+	$(AR) grc _obj$D/token.a token.$O
+	rm -f $(O1)
+
+
+newpkg: clean
+	mkdir -p _obj$D
+	$(AR) grc _obj$D/token.a
+
+$(O1): newpkg
+$(O2): a1
+
+nuke: clean
+	rm -f $(GOROOT)/pkg$D/token.a
+
+packages: _obj$D/token.a
+
+install: packages
+	test -d $(GOROOT)/pkg && mkdir -p $(GOROOT)/pkg$D
+	cp _obj$D/token.a $(GOROOT)/pkg$D/token.a
diff --git a/src/lib/go/token.go b/src/lib/go/token/token.go
similarity index 100%
rename from src/lib/go/token.go
rename to src/lib/go/token/token.go
