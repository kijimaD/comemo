commit 0985c1bd2d388834fd43fb95366c673ab9f7c832
Merge: af814af6e7 a413908dd0
Author: Dmitri Shuralyov <dmitshur@golang.org>
Date:   Tue Nov 17 18:32:51 2020 -0500

    [dev.boringcrypto] all: merge master into dev.boringcrypto
    
    Change-Id: I0596a40722bf62952bd2eba85ccf3f104de589e4

 CONTRIBUTORS                                       |  131 +
 api/except.txt                                     |    1 +
 api/go1.15.txt                                     |    2 -
 api/next.txt                                       |   19 +
 doc/articles/wiki/index.html                       |    1 +
 doc/asm.html                                       |    7 +
 doc/contribute.html                                |    4 +-
 doc/go1.14.html                                    |    6 +
 doc/go1.15.html                                    |  133 +-
 doc/go1.16.html                                    |  224 +
 doc/install-source.html                            |   10 +-
 doc/progs/run.go                                   |    2 +-
 misc/cgo/test/issue18146.go                        |    2 +-
 misc/cgo/test/pkg_test.go                          |    2 +-
 misc/cgo/test/sigaltstack.go                       |    2 +-
 misc/cgo/test/test.go                              |   16 +-
 misc/cgo/test/testx.go                             |    2 +-
 misc/cgo/testcarchive/carchive_test.go             |   20 +-
 misc/cgo/testcshared/cshared_test.go               |    8 +-
 misc/cgo/testgodefs/testdata/bitfields.go          |   31 +
 misc/cgo/testgodefs/testdata/main.go               |   28 +
 misc/cgo/testgodefs/testgodefs_test.go             |    1 +
 misc/cgo/testshared/shared_test.go                 |   13 +
 misc/cgo/testso/so_test.go                         |    6 +-
 misc/cgo/testsovar/so_test.go                      |    6 +-
 misc/ios/clangwrap.sh                              |    2 +-
 misc/wasm/wasm_exec.js                             |    4 +-
 src/archive/tar/stat_unix.go                       |    2 +-
 src/bufio/bufio.go                                 |    2 +-
 src/cmd/addr2line/addr2line_test.go                |   24 +-
 src/cmd/api/goapi.go                               |   17 +-
 src/cmd/api/goapi_test.go                          |   13 +
 src/cmd/asm/internal/asm/testdata/arm64.s          |   82 +-
 src/cmd/asm/internal/asm/testdata/arm64enc.s       |    4 +-
 src/cmd/asm/internal/asm/testdata/arm64error.s     |   14 +
 src/cmd/asm/internal/asm/testdata/ppc64.s          |    2 +
 src/cmd/asm/internal/asm/testdata/ppc64enc.s       |    6 +
 src/cmd/asm/internal/flags/flags.go                |    9 +-
 src/cmd/asm/main.go                                |   10 +-
 src/cmd/cgo/doc.go                                 |    7 +
 src/cmd/cgo/gcc.go                                 |   67 +-
 src/cmd/cgo/main.go                                |    3 +-
 src/cmd/cgo/out.go                                 |    8 +-
 src/cmd/compile/internal/amd64/ssa.go              |   10 +-
 src/cmd/compile/internal/arm64/ggen.go             |    2 +-
 src/cmd/compile/internal/arm64/ssa.go              |    2 +-
 src/cmd/compile/internal/gc/alg.go                 |   38 +-
 src/cmd/compile/internal/gc/builtin.go             |  219 +-
 src/cmd/compile/internal/gc/builtin/runtime.go     |    7 +-
 src/cmd/compile/internal/gc/closure.go             |    7 +-
 src/cmd/compile/internal/gc/const.go               |  144 +-
 src/cmd/compile/internal/gc/dcl.go                 |   54 +-
 src/cmd/compile/internal/gc/esc.go                 |   17 +-
 src/cmd/compile/internal/gc/escape.go              |   21 +-
 src/cmd/compile/internal/gc/fmt.go                 |   25 +-
 src/cmd/compile/internal/gc/gsubr.go               |    5 +-
 src/cmd/compile/internal/gc/iexport.go             |   47 +-
 src/cmd/compile/internal/gc/iimport.go             |   39 +-
 src/cmd/compile/internal/gc/init.go                |    9 +-
 src/cmd/compile/internal/gc/main.go                |   26 +-
 src/cmd/compile/internal/gc/noder.go               |   15 +-
 src/cmd/compile/internal/gc/obj.go                 |   35 +-
 src/cmd/compile/internal/gc/order.go               |   23 +-
 src/cmd/compile/internal/gc/pgen.go                |   37 +-
 src/cmd/compile/internal/gc/pgen_test.go           |   10 +-
 src/cmd/compile/internal/gc/plive.go               |  141 +-
 src/cmd/compile/internal/gc/racewalk.go            |    2 +-
 src/cmd/compile/internal/gc/range.go               |    4 +-
 src/cmd/compile/internal/gc/reflect.go             |   24 +-
 src/cmd/compile/internal/gc/select.go              |  147 +-
 src/cmd/compile/internal/gc/sinit.go               |   39 +-
 src/cmd/compile/internal/gc/ssa.go                 |  287 +-
 src/cmd/compile/internal/gc/subr.go                |   33 +-
 src/cmd/compile/internal/gc/syntax.go              |   10 +-
 src/cmd/compile/internal/gc/typecheck.go           |   92 +-
 src/cmd/compile/internal/gc/walk.go                |  187 +-
 src/cmd/compile/internal/ppc64/ssa.go              |   71 +-
 src/cmd/compile/internal/s390x/ssa.go              |    4 +-
 src/cmd/compile/internal/ssa/addressingmodes.go    |   82 +-
 src/cmd/compile/internal/ssa/check.go              |   50 +-
 src/cmd/compile/internal/ssa/compile.go            |    8 +-
 src/cmd/compile/internal/ssa/config.go             |    5 +-
 src/cmd/compile/internal/ssa/debug.go              |    1 +
 src/cmd/compile/internal/ssa/decompose.go          |   10 +-
 src/cmd/compile/internal/ssa/expand_calls.go       |  100 +
 src/cmd/compile/internal/ssa/export_test.go        |    4 +
 src/cmd/compile/internal/ssa/func.go               |  104 +-
 src/cmd/compile/internal/ssa/func_test.go          |    7 +
 src/cmd/compile/internal/ssa/fuse_test.go          |    4 +-
 src/cmd/compile/internal/ssa/gen/386Ops.go         |    6 +-
 src/cmd/compile/internal/ssa/gen/AMD64.rules       | 1013 +--
 src/cmd/compile/internal/ssa/gen/AMD64Ops.go       |   42 +-
 src/cmd/compile/internal/ssa/gen/ARM.rules         | 1938 ++---
 src/cmd/compile/internal/ssa/gen/ARM64.rules       | 1737 ++---
 src/cmd/compile/internal/ssa/gen/ARM64Ops.go       |   12 +-
 src/cmd/compile/internal/ssa/gen/ARMOps.go         |    6 +-
 src/cmd/compile/internal/ssa/gen/MIPS64.rules      |  174 +-
 src/cmd/compile/internal/ssa/gen/MIPS64Ops.go      |    6 +-
 src/cmd/compile/internal/ssa/gen/MIPSOps.go        |    6 +-
 src/cmd/compile/internal/ssa/gen/PPC64.rules       |  106 +-
 src/cmd/compile/internal/ssa/gen/PPC64Ops.go       |   30 +-
 src/cmd/compile/internal/ssa/gen/RISCV64Ops.go     |    6 +-
 src/cmd/compile/internal/ssa/gen/S390X.rules       |  936 +--
 src/cmd/compile/internal/ssa/gen/S390XOps.go       |    6 +-
 src/cmd/compile/internal/ssa/gen/Wasm.rules        |    4 +
 src/cmd/compile/internal/ssa/gen/WasmOps.go        |    8 +-
 src/cmd/compile/internal/ssa/gen/dec.rules         |    4 +-
 src/cmd/compile/internal/ssa/gen/generic.rules     |   74 +-
 src/cmd/compile/internal/ssa/gen/genericOps.go     |   15 +-
 src/cmd/compile/internal/ssa/gen/rulegen.go        |   15 +-
 src/cmd/compile/internal/ssa/html.go               |   51 +-
 src/cmd/compile/internal/ssa/loopreschedchecks.go  |    2 +-
 src/cmd/compile/internal/ssa/lower.go              |    2 +-
 src/cmd/compile/internal/ssa/nilcheck.go           |    2 +-
 src/cmd/compile/internal/ssa/op.go                 |  127 +
 src/cmd/compile/internal/ssa/opGen.go              |  545 +-
 src/cmd/compile/internal/ssa/opt.go                |    2 +-
 src/cmd/compile/internal/ssa/passbm_test.go        |    1 +
 src/cmd/compile/internal/ssa/phiopt.go             |    2 +-
 src/cmd/compile/internal/ssa/prove.go              |   10 +-
 src/cmd/compile/internal/ssa/regalloc.go           |    2 +-
 src/cmd/compile/internal/ssa/regalloc_test.go      |   12 +-
 src/cmd/compile/internal/ssa/rewrite.go            |  131 +-
 src/cmd/compile/internal/ssa/rewriteAMD64.go       | 6437 ++++++++--------
 src/cmd/compile/internal/ssa/rewriteARM.go         | 3504 ++++-----
 src/cmd/compile/internal/ssa/rewriteARM64.go       | 4566 ++++++------
 src/cmd/compile/internal/ssa/rewriteMIPS64.go      |  804 +-
 src/cmd/compile/internal/ssa/rewritePPC64.go       | 1493 +++-
 src/cmd/compile/internal/ssa/rewriteS390X.go       | 6574 ++++-------------
 src/cmd/compile/internal/ssa/rewriteWasm.go        |   66 +
 src/cmd/compile/internal/ssa/rewritedec.go         |    7 +-
 src/cmd/compile/internal/ssa/rewritegeneric.go     |  937 ++-
 src/cmd/compile/internal/ssa/softfloat.go          |    3 +-
 src/cmd/compile/internal/ssa/value.go              |   46 +-
 src/cmd/compile/internal/ssa/writebarrier.go       |   28 +-
 src/cmd/compile/internal/test/mulconst_test.go     |  242 +
 src/cmd/compile/internal/types/etype_string.go     |    7 +-
 src/cmd/compile/internal/types/type.go             |  102 +-
 src/cmd/compile/internal/types/type_test.go        |   28 +
 src/cmd/compile/internal/wasm/ssa.go               |    5 +-
 src/cmd/compile/internal/x86/ssa.go                |    4 +-
 src/cmd/cover/cover_test.go                        |    2 +-
 src/cmd/dist/build.go                              |   14 +-
 src/cmd/dist/buildtool.go                          |    5 +-
 src/cmd/dist/test.go                               |   38 +-
 src/cmd/doc/doc_test.go                            |    4 +-
 src/cmd/fix/fix.go                                 |  292 -
 src/cmd/go.mod                                     |   12 +-
 src/cmd/go.sum                                     |   30 +-
 src/cmd/go/alldocs.go                              |  186 +-
 src/cmd/go/go_test.go                              |    2 +-
 src/cmd/go/init_test.go                            |   26 +-
 src/cmd/go/internal/base/base.go                   |   17 +-
 src/cmd/go/internal/base/flag.go                   |   35 +-
 src/cmd/go/internal/base/goflags.go                |   54 +-
 src/cmd/go/internal/bug/bug.go                     |    5 +-
 src/cmd/go/internal/cfg/cfg.go                     |    6 +-
 src/cmd/go/internal/clean/clean.go                 |    5 +-
 src/cmd/go/internal/doc/doc.go                     |    3 +-
 src/cmd/go/internal/envcmd/env.go                  |    6 +-
 src/cmd/go/internal/fix/fix.go                     |    5 +-
 src/cmd/go/internal/fmtcmd/fmt.go                  |    8 +-
 src/cmd/go/internal/generate/generate.go           |    5 +-
 src/cmd/go/internal/get/get.go                     |   70 +-
 src/cmd/go/internal/get/path.go                    |  192 -
 src/cmd/go/internal/help/helpdoc.go                |    5 +
 src/cmd/go/internal/imports/build.go               |    5 +
 src/cmd/go/internal/list/list.go                   |  143 +-
 src/cmd/go/internal/load/pkg.go                    |  157 +-
 src/cmd/go/internal/load/test.go                   |   22 +-
 .../lockedfile/internal/filelock/filelock_fcntl.go |    2 +-
 .../lockedfile/internal/filelock/filelock_test.go  |    2 +-
 .../lockedfile/internal/filelock/filelock_unix.go  |    2 +-
 src/cmd/go/internal/modcmd/download.go             |   87 +-
 src/cmd/go/internal/modcmd/edit.go                 |  107 +-
 src/cmd/go/internal/modcmd/graph.go                |   38 +-
 src/cmd/go/internal/modcmd/init.go                 |   13 +-
 src/cmd/go/internal/modcmd/tidy.go                 |   76 +-
 src/cmd/go/internal/modcmd/vendor.go               |   27 +-
 src/cmd/go/internal/modcmd/verify.go               |   19 +-
 src/cmd/go/internal/modcmd/why.go                  |   32 +-
 src/cmd/go/internal/modconv/convert.go             |   59 +-
 src/cmd/go/internal/modconv/convert_test.go        |    5 +-
 src/cmd/go/internal/modfetch/fetch.go              |  140 +-
 src/cmd/go/internal/modfetch/insecure.go           |    6 +-
 src/cmd/go/internal/modfetch/proxy.go              |   13 +-
 src/cmd/go/internal/modfetch/repo.go               |   16 +-
 src/cmd/go/internal/modfetch/sumdb.go              |    4 +-
 .../internal/modfetch/zip_sum_test/zip_sum_test.go |    3 +-
 src/cmd/go/internal/modget/get.go                  |  706 +-
 src/cmd/go/internal/modget/mvs.go                  |  202 +
 src/cmd/go/internal/modinfo/info.go                |   17 +-
 src/cmd/go/internal/modload/build.go               |   99 +-
 src/cmd/go/internal/modload/buildlist.go           |  122 +
 src/cmd/go/internal/modload/help.go                |   93 +-
 src/cmd/go/internal/modload/import.go              |  150 +-
 src/cmd/go/internal/modload/import_test.go         |   47 +-
 src/cmd/go/internal/modload/init.go                |  314 +-
 src/cmd/go/internal/modload/list.go                |   71 +-
 src/cmd/go/internal/modload/load.go                | 1021 ++-
 src/cmd/go/internal/modload/modfile.go             |  406 +-
 src/cmd/go/internal/modload/mvs.go                 |  147 +-
 src/cmd/go/internal/modload/query.go               |  185 +-
 src/cmd/go/internal/modload/query_test.go          |   13 +-
 src/cmd/go/internal/modload/search.go              |    5 +-
 src/cmd/go/internal/modload/vendor.go              |    4 +-
 src/cmd/go/internal/mvs/errors.go                  |  101 +
 src/cmd/go/internal/mvs/mvs.go                     |   82 +-
 src/cmd/go/internal/par/queue.go                   |   88 +
 src/cmd/go/internal/par/queue_test.go              |   79 +
 src/cmd/go/internal/run/run.go                     |   11 +-
 src/cmd/go/internal/str/path.go                    |   45 -
 src/cmd/go/internal/str/str_test.go                |   27 +
 src/cmd/go/internal/test/flagdefs_test.go          |   11 +-
 src/cmd/go/internal/test/genflags.go               |    7 +-
 src/cmd/go/internal/test/test.go                   |   61 +-
 src/cmd/go/internal/test/testflag.go               |   29 +-
 src/cmd/go/internal/tool/tool.go                   |    3 +-
 src/cmd/go/internal/trace/trace.go                 |  206 +
 src/cmd/go/internal/{get => vcs}/discovery.go      |    2 +-
 .../{get/pkg_test.go => vcs/discovery_test.go}     |   23 +-
 src/cmd/go/internal/{get => vcs}/vcs.go            |  315 +-
 src/cmd/go/internal/{get => vcs}/vcs_test.go       |   53 +-
 src/cmd/go/internal/version/version.go             |   14 +-
 src/cmd/go/internal/vet/vet.go                     |   35 +-
 src/cmd/go/internal/work/action.go                 |   25 +-
 src/cmd/go/internal/work/build.go                  |  244 +-
 src/cmd/go/internal/work/build_test.go             |    2 +-
 src/cmd/go/internal/work/exec.go                   |   55 +-
 src/cmd/go/internal/work/gc.go                     |   14 +-
 src/cmd/go/internal/work/init.go                   |   32 +-
 src/cmd/go/internal/work/security.go               |    1 +
 src/cmd/go/main.go                                 |   25 +-
 src/cmd/go/proxy_test.go                           |   19 +-
 src/cmd/go/script_test.go                          |   38 +
 .../mod/example.com_cmd_v1.0.0-exclude.txt         |   28 +
 .../mod/example.com_cmd_v1.0.0-newerself.txt       |   28 +
 .../mod/example.com_cmd_v1.0.0-replace.txt         |   28 +
 src/cmd/go/testdata/mod/example.com_cmd_v1.0.0.txt |   27 +
 src/cmd/go/testdata/mod/example.com_cmd_v1.9.0.txt |   30 +
 .../mod/example.com_retract_missingmod_v1.0.0.txt  |   10 +
 .../mod/example.com_retract_missingmod_v1.9.0.txt  |    4 +
 .../example.com_retract_rationale_v1.0.0-block.txt |    6 +
 ...m_retract_rationale_v1.0.0-blockwithcomment.txt |    6 +
 .../example.com_retract_rationale_v1.0.0-empty.txt |    8 +
 .../example.com_retract_rationale_v1.0.0-long.txt  |    8 +
 ...ple.com_retract_rationale_v1.0.0-multiline1.txt |    8 +
 ...ple.com_retract_rationale_v1.0.0-multiline2.txt |    8 +
 .../example.com_retract_rationale_v1.0.0-order.txt |    6 +
 ...le.com_retract_rationale_v1.0.0-unprintable.txt |    8 +
 .../example.com_retract_rationale_v1.0.1-order.txt |    6 +
 .../mod/example.com_retract_rationale_v1.9.0.txt   |   48 +
 .../mod/example.com_retract_rename_v1.0.0-bad.txt  |   16 +
 .../mod/example.com_retract_rename_v1.9.0-new.txt  |   22 +
 .../mod/example.com_retract_self_all_v1.9.0.txt    |   14 +
 .../example.com_retract_self_prerelease_v1.0.0.txt |   16 +
 .../example.com_retract_self_prerelease_v1.9.0.txt |   19 +
 ...mple.com_retract_self_prerelease_v1.9.1-pre.txt |   16 +
 .../example.com_retract_self_prev_v1.0.0-bad.txt   |   14 +
 .../mod/example.com_retract_self_prev_v1.1.0.txt   |   14 +
 .../mod/example.com_retract_self_prev_v1.9.0.txt   |   18 +
 ..._self_pseudo_v0.0.0-20200325131415-0123456789ab |   20 +
 .../example.com_retract_self_pseudo_v1.0.0-bad.txt |   14 +
 .../mod/example.com_retract_self_pseudo_v1.9.0.txt |   16 +
 .../mod/example.com_retract_v1.0.0-bad.txt         |   10 +
 .../mod/example.com_retract_v1.0.0-good.txt        |   10 +
 .../mod/example.com_retract_v1.0.0-unused.txt      |   10 +
 .../go/testdata/mod/example.com_retract_v1.1.0.txt |   13 +
 ...xample.com_split-incompatible_subpkg_v0.1.0.txt |   14 +
 ....com_split-incompatible_v2.0.0+incompatible.txt |   10 +
 ..._split-incompatible_v2.1.0-pre+incompatible.txt |   10 +
 .../testdata/mod/example.net_pkgadded_v1.0.0.txt   |   17 +
 .../testdata/mod/example.net_pkgadded_v1.1.0.txt   |   19 +
 .../testdata/mod/example.net_pkgadded_v1.2.0.txt   |   20 +
 src/cmd/go/testdata/script/README                  |    1 +
 src/cmd/go/testdata/script/build_GOTMPDIR.txt      |   49 +-
 .../go/testdata/script/build_cache_arch_mode.txt   |   10 +-
 .../go/testdata/script/build_cache_disabled.txt    |   50 +
 .../testdata/script/build_cd_gopath_different.txt  |    1 +
 .../script/build_cgo_consistent_results.txt        |    6 +-
 src/cmd/go/testdata/script/build_dash_x.txt        |    2 +-
 src/cmd/go/testdata/script/build_exe.txt           |   12 +-
 src/cmd/go/testdata/script/build_gopath_order.txt  |    3 +-
 .../go/testdata/script/build_import_comment.txt    |   57 +-
 src/cmd/go/testdata/script/build_import_cycle.txt  |    3 +
 src/cmd/go/testdata/script/build_internal.txt      |   45 +-
 src/cmd/go/testdata/script/build_issue6480.txt     |    8 +-
 .../script/build_link_x_import_path_escape.txt     |    8 +-
 src/cmd/go/testdata/script/build_n_cgo.txt         |    4 +
 src/cmd/go/testdata/script/build_no_go.txt         |    4 +
 src/cmd/go/testdata/script/build_output.txt        |   34 +-
 .../script/build_patterns_outside_gopath.txt       |    9 +-
 .../go/testdata/script/build_plugin_non_main.txt   |   17 +-
 src/cmd/go/testdata/script/build_test_only.txt     |    8 +-
 src/cmd/go/testdata/script/build_vendor.txt        |    1 +
 src/cmd/go/testdata/script/cgo_asm_error.txt       |    8 +-
 src/cmd/go/testdata/script/cgo_bad_directives.txt  |   43 +-
 .../go/testdata/script/cgo_depends_on_syscall.txt  |    6 +-
 src/cmd/go/testdata/script/cover_asm.txt           |   10 +-
 .../go/testdata/script/cover_blank_func_decl.txt   |   10 +-
 src/cmd/go/testdata/script/cover_cgo.txt           |    8 +-
 .../go/testdata/script/cover_cgo_extra_file.txt    |   12 +-
 .../go/testdata/script/cover_cgo_extra_test.txt    |   12 +-
 src/cmd/go/testdata/script/cover_cgo_xtest.txt     |   10 +-
 src/cmd/go/testdata/script/cover_dash_c.txt        |   10 +-
 src/cmd/go/testdata/script/cover_dep_loop.txt      |   10 +-
 src/cmd/go/testdata/script/cover_dot_import.txt    |   20 +-
 src/cmd/go/testdata/script/cover_error.txt         |   18 +-
 .../go/testdata/script/cover_import_main_loop.txt  |   10 +-
 src/cmd/go/testdata/script/cover_pattern.txt       |   10 +-
 src/cmd/go/testdata/script/cover_statements.txt    |    4 +
 .../testdata/script/cover_sync_atomic_import.txt   |   12 +-
 .../go/testdata/script/generate_bad_imports.txt    |    6 +-
 src/cmd/go/testdata/script/generate_invalid.txt    |    6 +-
 .../testdata/script/get_custom_domain_wildcard.txt |    3 +-
 src/cmd/go/testdata/script/get_dash_t.txt          |    3 +-
 src/cmd/go/testdata/script/get_domain_root.txt     |    3 +-
 .../go/testdata/script/get_dot_slash_download.txt  |    3 +-
 src/cmd/go/testdata/script/get_goroot.txt          |    3 +-
 .../testdata/script/get_insecure_custom_domain.txt |    3 +-
 .../go/testdata/script/get_insecure_deprecated.txt |   21 +
 src/cmd/go/testdata/script/get_insecure_env.txt    |   29 +
 src/cmd/go/testdata/script/get_insecure_update.txt |    3 +-
 .../go/testdata/script/get_internal_wildcard.txt   |    3 +-
 src/cmd/go/testdata/script/get_issue11307.txt      |    3 +-
 .../script/{mod_get_legacy.txt => get_legacy.txt}  |    3 +-
 src/cmd/go/testdata/script/get_race.txt            |    3 +-
 src/cmd/go/testdata/script/get_test_only.txt       |    3 +-
 src/cmd/go/testdata/script/get_unicode.txt         |   40 -
 src/cmd/go/testdata/script/get_update.txt          |    3 +-
 .../script/get_update_unknown_protocol.txt         |    3 +-
 src/cmd/go/testdata/script/get_update_wildcard.txt |    3 +-
 .../go/testdata/script/get_vcs_error_message.txt   |    1 +
 src/cmd/go/testdata/script/get_vendor.txt          |    3 +-
 .../go/testdata/script/gopath_vendor_dup_err.txt   |    1 +
 .../go/testdata/script/install_cgo_excluded.txt    |    6 +-
 .../script/install_relative_gobin_fail.txt         |    6 +-
 .../go/testdata/script/install_shadow_gopath.txt   |    3 +-
 .../go/testdata/script/link_matching_actionid.txt  |   38 +
 .../go/testdata/script/link_syso_issue33139.txt    |    6 +-
 src/cmd/go/testdata/script/list_bad_import.txt     |   18 +-
 src/cmd/go/testdata/script/list_case_collision.txt |   37 +-
 src/cmd/go/testdata/script/list_dedup_packages.txt |    1 +
 src/cmd/go/testdata/script/list_err_stack.txt      |   27 +
 src/cmd/go/testdata/script/list_symlink.txt        |    1 +
 .../go/testdata/script/list_symlink_internal.txt   |    3 +-
 .../script/list_symlink_vendor_issue14054.txt      |    3 +-
 .../script/list_symlink_vendor_issue15201.txt      |    3 +-
 src/cmd/go/testdata/script/list_test_err.txt       |    3 +
 src/cmd/go/testdata/script/list_test_simple.txt    |   20 +-
 .../script/list_wildcard_skip_nonmatching.txt      |   16 +-
 src/cmd/go/testdata/script/load_test_pkg_err.txt   |   12 +-
 src/cmd/go/testdata/script/mod_all.txt             |  444 ++
 src/cmd/go/testdata/script/mod_auth.txt            |    2 +-
 src/cmd/go/testdata/script/mod_bad_filenames.txt   |    6 +-
 src/cmd/go/testdata/script/mod_build_info_err.txt  |    2 +-
 src/cmd/go/testdata/script/mod_case.txt            |    7 +-
 src/cmd/go/testdata/script/mod_concurrent.txt      |    1 +
 src/cmd/go/testdata/script/mod_doc.txt             |    2 +
 src/cmd/go/testdata/script/mod_domain_root.txt     |    2 +-
 src/cmd/go/testdata/script/mod_download.txt        |   85 +-
 src/cmd/go/testdata/script/mod_download_json.txt   |    3 +-
 .../go/testdata/script/mod_download_partial.txt    |    9 +-
 src/cmd/go/testdata/script/mod_e.txt               |   89 +
 src/cmd/go/testdata/script/mod_edit.txt            |  114 +-
 src/cmd/go/testdata/script/mod_enabled.txt         |    4 +-
 src/cmd/go/testdata/script/mod_find.txt            |    5 +
 .../go/testdata/script/mod_get_ambiguous_arg.txt   |  124 +
 .../testdata/script/mod_get_ambiguous_import.txt   |   60 +
 src/cmd/go/testdata/script/mod_get_commit.txt      |    1 -
 .../testdata/script/mod_get_downgrade_missing.txt  |   33 +
 src/cmd/go/testdata/script/mod_get_errors.txt      |   69 +
 .../go/testdata/script/mod_get_incompatible.txt    |    2 +-
 src/cmd/go/testdata/script/mod_get_indirect.txt    |    2 +-
 .../go/testdata/script/mod_get_latest_pseudo.txt   |    2 +-
 src/cmd/go/testdata/script/mod_get_moved.txt       |    1 -
 src/cmd/go/testdata/script/mod_get_nopkgs.txt      |   40 +
 src/cmd/go/testdata/script/mod_get_retract.txt     |   49 +
 src/cmd/go/testdata/script/mod_get_sum_noroot.txt  |   11 +
 .../go/testdata/script/mod_get_trailing_slash.txt  |    3 +
 src/cmd/go/testdata/script/mod_import.txt          |    2 +-
 .../go/testdata/script/mod_import_issue41113.txt   |   28 +
 src/cmd/go/testdata/script/mod_import_meta.txt     |   45 +
 src/cmd/go/testdata/script/mod_in_testdata_dir.txt |    6 +-
 src/cmd/go/testdata/script/mod_init_dep.txt        |   21 +-
 .../go/testdata/script/mod_install_pkg_version.txt |  187 +
 .../go/testdata/script/mod_install_versioned.txt   |    2 +
 src/cmd/go/testdata/script/mod_internal.txt        |   14 +-
 src/cmd/go/testdata/script/mod_invalid_path.txt    |   40 +
 src/cmd/go/testdata/script/mod_invalid_version.txt |    5 +-
 .../go/testdata/script/mod_lazy_import_allmod.txt  |  172 +
 src/cmd/go/testdata/script/mod_lazy_new_import.txt |  107 +
 .../go/testdata/script/mod_lazy_test_horizon.txt   |  131 +
 .../testdata/script/mod_lazy_test_of_test_dep.txt  |  145 +
 src/cmd/go/testdata/script/mod_list.txt            |    8 +-
 src/cmd/go/testdata/script/mod_list_bad_import.txt |   18 +-
 src/cmd/go/testdata/script/mod_list_dir.txt        |    5 +
 src/cmd/go/testdata/script/mod_list_direct.txt     |    2 +-
 src/cmd/go/testdata/script/mod_list_pseudo.txt     |   21 +-
 .../go/testdata/script/mod_list_replace_dir.txt    |   12 +-
 src/cmd/go/testdata/script/mod_list_retract.txt    |  108 +
 src/cmd/go/testdata/script/mod_list_std.txt        |   64 +-
 src/cmd/go/testdata/script/mod_list_test.txt       |   14 +
 src/cmd/go/testdata/script/mod_list_upgrade.txt    |    4 +
 src/cmd/go/testdata/script/mod_load_badchain.txt   |    4 +-
 src/cmd/go/testdata/script/mod_load_badmod.txt     |    7 +-
 src/cmd/go/testdata/script/mod_load_badzip.txt     |    4 +-
 .../testdata/script/mod_load_replace_mismatch.txt  |    2 +-
 .../testdata/script/mod_missingpkg_prerelease.txt  |    4 +-
 src/cmd/go/testdata/script/mod_modinfo.txt         |    1 +
 src/cmd/go/testdata/script/mod_multirepo.txt       |    1 +
 src/cmd/go/testdata/script/mod_notall.txt          |   99 +
 src/cmd/go/testdata/script/mod_off.txt             |    4 +-
 src/cmd/go/testdata/script/mod_off_init.txt        |    2 +-
 src/cmd/go/testdata/script/mod_outside.txt         |   15 +-
 src/cmd/go/testdata/script/mod_permissions.txt     |    2 +-
 src/cmd/go/testdata/script/mod_proxy_invalid.txt   |    8 +
 src/cmd/go/testdata/script/mod_query.txt           |   10 +
 src/cmd/go/testdata/script/mod_query_empty.txt     |    2 +-
 src/cmd/go/testdata/script/mod_query_exclude.txt   |   41 +-
 src/cmd/go/testdata/script/mod_readonly.txt        |   15 +-
 src/cmd/go/testdata/script/mod_replace.txt         |    4 +-
 src/cmd/go/testdata/script/mod_replace_gopkgin.txt |    3 +-
 src/cmd/go/testdata/script/mod_replace_import.txt  |    6 +-
 src/cmd/go/testdata/script/mod_require_exclude.txt |   62 +-
 src/cmd/go/testdata/script/mod_retention.txt       |    6 +-
 src/cmd/go/testdata/script/mod_retract.txt         |   43 +
 .../go/testdata/script/mod_retract_rationale.txt   |   79 +
 src/cmd/go/testdata/script/mod_retract_rename.txt  |   28 +
 src/cmd/go/testdata/script/mod_retract_replace.txt |   61 +
 src/cmd/go/testdata/script/mod_std_vendor.txt      |    6 +-
 src/cmd/go/testdata/script/mod_sum_lookup.txt      |   34 +
 src/cmd/go/testdata/script/mod_sumdb.txt           |    6 +
 src/cmd/go/testdata/script/mod_sumdb_golang.txt    |   12 +-
 src/cmd/go/testdata/script/mod_symlink.txt         |    5 +-
 src/cmd/go/testdata/script/mod_symlink_dotgo.txt   |   17 +
 src/cmd/go/testdata/script/mod_test.txt            |    1 +
 src/cmd/go/testdata/script/mod_tidy_old.txt        |   46 +
 src/cmd/go/testdata/script/mod_tidy_replace.txt    |    1 +
 src/cmd/go/testdata/script/mod_upgrade_patch.txt   |    1 +
 src/cmd/go/testdata/script/mod_vcs_missing.txt     |    4 +-
 src/cmd/go/testdata/script/mod_vendor_build.txt    |    3 +
 src/cmd/go/testdata/script/mod_verify.txt          |   10 +-
 src/cmd/go/testdata/script/mod_why.txt             |   17 +-
 src/cmd/go/testdata/script/modfile_flag.txt        |    6 +-
 src/cmd/go/testdata/script/run_hello_pkg.txt       |    9 +-
 src/cmd/go/testdata/script/run_vendor.txt          |    1 +
 .../go/testdata/script/test_benchmark_fatal.txt    |    6 +-
 .../go/testdata/script/test_benchmark_labels.txt   |    6 +-
 src/cmd/go/testdata/script/test_build_failure.txt  |   10 +-
 .../go/testdata/script/test_cleanup_failnow.txt    |   33 +
 src/cmd/go/testdata/script/test_deadline.txt       |    4 +
 src/cmd/go/testdata/script/test_empty.txt          |    4 +
 src/cmd/go/testdata/script/test_example_goexit.txt |   29 +
 src/cmd/go/testdata/script/test_exit.txt           |  114 +
 src/cmd/go/testdata/script/test_flags.txt          |   35 +-
 .../go/testdata/script/test_import_error_stack.txt |   11 +
 src/cmd/go/testdata/script/test_json.txt           |   18 +-
 src/cmd/go/testdata/script/test_json_exit.txt      |  102 +
 .../go/testdata/script/test_json_interleaved.txt   |   27 +
 src/cmd/go/testdata/script/test_main_twice.txt     |    6 +-
 .../script/test_match_no_tests_build_failure.txt   |    8 +-
 src/cmd/go/testdata/script/test_no_run_example.txt |    8 +-
 src/cmd/go/testdata/script/test_no_tests.txt       |    6 +-
 src/cmd/go/testdata/script/test_race.txt           |    6 +-
 .../script/test_race_cover_mode_issue20435.txt     |    6 +-
 src/cmd/go/testdata/script/test_race_install.txt   |    6 +-
 .../go/testdata/script/test_race_install_cgo.txt   |    6 +-
 src/cmd/go/testdata/script/test_regexps.txt        |    8 +-
 .../go/testdata/script/test_relative_import.txt    |    3 +-
 .../script/test_relative_import_dash_i.txt         |    3 +-
 .../script/test_syntax_error_says_fail.txt         |   11 +
 src/cmd/go/testdata/script/test_vendor.txt         |   12 +-
 src/cmd/go/testdata/script/test_vet.txt            |   16 +-
 .../script/test_write_profiles_on_timeout.txt      |    9 +-
 .../go/testdata/script/test_xtestonly_works.txt    |    8 +-
 src/cmd/go/testdata/script/testing_issue40908.txt  |   25 +
 .../testdata/script/vendor_gopath_issue11409.txt   |    1 +
 src/cmd/go/testdata/script/vendor_import.txt       |    1 +
 src/cmd/go/testdata/script/vendor_import_wrong.txt |   11 +
 src/cmd/go/testdata/script/vendor_issue12156.txt   |    1 +
 .../go/testdata/script/vendor_list_issue11977.txt  |    3 +-
 src/cmd/go/testdata/script/vendor_resolve.txt      |    1 +
 .../go/testdata/script/vendor_test_issue11864.txt  |    3 +-
 .../go/testdata/script/vendor_test_issue14613.txt  |    1 +
 src/cmd/go/testdata/script/version.txt             |    7 +
 src/cmd/go/testdata/script/version_replace.txt     |    2 +-
 src/cmd/go/testdata/script/vet.txt                 |   18 +-
 src/cmd/gofmt/gofmt.go                             |    8 +-
 src/cmd/internal/archive/archive.go                |  466 ++
 .../goobj_test.go => archive/archive_test.go}      |  163 +-
 .../internal/{goobj => archive}/testdata/go1.go    |    0
 .../internal/{goobj => archive}/testdata/go2.go    |    0
 .../{goobj => archive}/testdata/mycgo/c1.c         |    0
 .../{goobj => archive}/testdata/mycgo/c2.c         |    0
 .../{goobj => archive}/testdata/mycgo/go.go        |    0
 .../{goobj => archive}/testdata/mycgo/go1.go       |    0
 .../{goobj => archive}/testdata/mycgo/go2.go       |    0
 src/cmd/internal/bio/buf.go                        |    7 +-
 src/cmd/internal/dwarf/dwarf.go                    |   20 +-
 src/cmd/internal/{goobj2 => goobj}/builtin.go      |    2 +-
 src/cmd/internal/{goobj2 => goobj}/builtinlist.go  |   40 +-
 src/cmd/internal/{goobj2 => goobj}/funcinfo.go     |   49 +-
 src/cmd/internal/{goobj2 => goobj}/mkbuiltin.go    |   38 +-
 src/cmd/internal/{goobj2 => goobj}/objfile.go      |  239 +-
 src/cmd/internal/{goobj2 => goobj}/objfile_test.go |    2 +-
 src/cmd/internal/goobj/read.go                     |  660 --
 src/cmd/internal/goobj/readnew.go                  |  191 -
 src/cmd/internal/obj/arm/asm5.go                   |   19 +-
 src/cmd/internal/obj/arm/obj5.go                   |   56 +-
 src/cmd/internal/obj/arm64/a.out.go                |   22 +-
 src/cmd/internal/obj/arm64/anames.go               |   15 +
 src/cmd/internal/obj/arm64/anames7.go              |    1 +
 src/cmd/internal/obj/arm64/asm7.go                 |  244 +-
 src/cmd/internal/obj/arm64/obj7.go                 |   82 +-
 src/cmd/internal/obj/dwarf.go                      |  555 +-
 src/cmd/internal/obj/line.go                       |   12 +-
 src/cmd/internal/obj/link.go                       |   98 +-
 src/cmd/internal/obj/mips/asm0.go                  |   27 +-
 src/cmd/internal/obj/mips/obj0.go                  |   38 +-
 src/cmd/internal/obj/objfile.go                    | 1402 ++--
 src/cmd/internal/obj/objfile2.go                   |  485 --
 src/cmd/internal/obj/objfile_test.go               |   87 +
 src/cmd/internal/obj/pass.go                       |   17 +-
 src/cmd/internal/obj/pcln.go                       |   38 +-
 src/cmd/internal/obj/plist.go                      |   30 +-
 src/cmd/internal/obj/ppc64/a.out.go                |    4 +
 src/cmd/internal/obj/ppc64/anames.go               |    4 +
 src/cmd/internal/obj/ppc64/asm9.go                 |  125 +-
 src/cmd/internal/obj/ppc64/obj9.go                 |   25 +-
 src/cmd/internal/obj/riscv/obj.go                  |   72 +-
 src/cmd/internal/obj/s390x/asmz.go                 |   18 +-
 src/cmd/internal/obj/s390x/objz.go                 |   21 +-
 src/cmd/internal/obj/sym.go                        |  100 +-
 src/cmd/internal/obj/util.go                       |    6 +-
 src/cmd/internal/obj/x86/asm6.go                   |   18 +-
 src/cmd/internal/obj/x86/obj6.go                   |   14 +-
 src/cmd/internal/objabi/doc.go                     |  122 -
 src/cmd/internal/objabi/funcdata.go                |    2 +-
 src/cmd/internal/objabi/funcid.go                  |   22 +-
 src/cmd/internal/objabi/head.go                    |    2 +-
 src/cmd/internal/objabi/symkind.go                 |    7 +-
 src/cmd/internal/objabi/symkind_string.go          |   21 +-
 src/cmd/internal/objabi/util.go                    |   14 +-
 src/cmd/internal/objfile/goobj.go                  |  289 +-
 src/cmd/internal/objfile/macho.go                  |    2 +-
 src/cmd/internal/objfile/pe.go                     |   14 +-
 src/cmd/internal/src/xpos.go                       |    4 +-
 src/cmd/internal/sys/supported.go                  |    2 +-
 src/cmd/internal/test2json/test2json.go            |   44 +-
 .../internal/test2json/testdata/benchshort.json    |    1 -
 src/cmd/internal/test2json/testdata/empty.json     |    1 -
 src/cmd/internal/traceviewer/format.go             |   38 +
 src/cmd/link/doc.go                                |    2 +-
 src/cmd/link/dwarf_test.go                         |    9 +
 src/cmd/link/elf_test.go                           |    2 +
 src/cmd/link/internal/amd64/asm.go                 |  331 +-
 src/cmd/link/internal/amd64/obj.go                 |   15 +-
 src/cmd/link/internal/arm/asm.go                   |  405 +-
 src/cmd/link/internal/arm/obj.go                   |   10 +-
 src/cmd/link/internal/arm64/asm.go                 |  474 +-
 src/cmd/link/internal/arm64/obj.go                 |   11 +-
 src/cmd/link/internal/benchmark/bench_test.go      |    1 +
 src/cmd/link/internal/ld/ar.go                     |    2 +-
 src/cmd/link/internal/ld/asmb.go                   |  214 +
 src/cmd/link/internal/ld/config.go                 |    2 +-
 src/cmd/link/internal/ld/data.go                   |  908 +--
 src/cmd/link/internal/ld/data2.go                  |  518 --
 src/cmd/link/internal/ld/data_test.go              |   92 +
 src/cmd/link/internal/ld/deadcode.go               |  156 +-
 src/cmd/link/internal/ld/deadcode_test.go          |   18 +-
 src/cmd/link/internal/ld/decodesym.go              |   10 +-
 src/cmd/link/internal/ld/dwarf.go                  | 1082 +--
 src/cmd/link/internal/ld/dwarf2.go                 |  199 -
 src/cmd/link/internal/ld/dwarf_test.go             |  123 +
 src/cmd/link/internal/ld/elf.go                    |  271 +-
 src/cmd/link/internal/ld/elf2.go                   |   79 -
 src/cmd/link/internal/ld/elf_test.go               |   55 +
 src/cmd/link/internal/ld/errors.go                 |   46 +-
 src/cmd/link/internal/ld/go.go                     |   57 +-
 src/cmd/link/internal/ld/heap.go                   |   54 +
 src/cmd/link/internal/ld/heap_test.go              |   90 +
 src/cmd/link/internal/ld/issue33808_test.go        |    1 +
 src/cmd/link/internal/ld/ld.go                     |   12 +-
 src/cmd/link/internal/ld/ld_test.go                |   33 +
 src/cmd/link/internal/ld/lib.go                    |  828 +--
 src/cmd/link/internal/ld/link.go                   |   56 +-
 src/cmd/link/internal/ld/macho.go                  |  248 +-
 src/cmd/link/internal/ld/macho_combine_dwarf.go    |  112 +-
 src/cmd/link/internal/ld/main.go                   |  139 +-
 src/cmd/link/internal/ld/outbuf.go                 |   36 +-
 src/cmd/link/internal/ld/outbuf_mmap.go            |   26 +-
 src/cmd/link/internal/ld/outbuf_nommap.go          |    9 +-
 src/cmd/link/internal/ld/outbuf_test.go            |    2 +-
 src/cmd/link/internal/ld/outbuf_windows.go         |   15 +
 src/cmd/link/internal/ld/pcln.go                   |  578 +-
 src/cmd/link/internal/ld/pe.go                     |  279 +-
 src/cmd/link/internal/ld/sym.go                    |    3 +-
 src/cmd/link/internal/ld/symtab.go                 |  413 +-
 src/cmd/link/internal/ld/target.go                 |    6 +-
 .../internal/ld/testdata/deadcode/ifacemethod.go   |   23 +
 .../internal/ld/testdata/deadcode/ifacemethod2.go  |   22 +
 .../internal/ld/testdata/deadcode/ifacemethod3.go  |   29 +
 src/cmd/link/internal/ld/testdata/issue39256/x.go  |   20 +
 src/cmd/link/internal/ld/testdata/issue39256/x.s   |   10 +
 .../ld/testdata/issue39757/issue39757main.go       |   15 +
 src/cmd/link/internal/ld/typelink.go               |   26 +-
 src/cmd/link/internal/ld/util.go                   |   16 +-
 src/cmd/link/internal/ld/xcoff.go                  |  392 +-
 src/cmd/link/internal/ld/xcoff2.go                 |  113 -
 src/cmd/link/internal/loadelf/ldelf.go             |    2 +-
 src/cmd/link/internal/loader/loader.go             | 1554 ++--
 src/cmd/link/internal/loader/loader_test.go        |   82 +-
 src/cmd/link/internal/loader/symbolbuilder.go      |  127 +-
 src/cmd/link/internal/loadmacho/ldmacho.go         |    2 +-
 src/cmd/link/internal/loadpe/ldpe.go               |    2 +-
 src/cmd/link/internal/mips/asm.go                  |  166 +-
 src/cmd/link/internal/mips/obj.go                  |    7 +-
 src/cmd/link/internal/mips64/asm.go                |  217 +-
 src/cmd/link/internal/mips64/obj.go                |    7 +-
 src/cmd/link/internal/ppc64/asm.go                 |  540 +-
 src/cmd/link/internal/ppc64/obj.go                 |   19 +-
 src/cmd/link/internal/riscv64/asm.go               |  115 +-
 src/cmd/link/internal/riscv64/obj.go               |    5 +-
 src/cmd/link/internal/s390x/asm.go                 |  192 +-
 src/cmd/link/internal/s390x/obj.go                 |    7 +-
 src/cmd/link/internal/sym/attribute.go             |  129 -
 src/cmd/link/internal/sym/compilation_unit.go      |   38 +-
 src/cmd/link/internal/sym/library.go               |   12 +-
 src/cmd/link/internal/sym/reloc.go                 |   54 -
 src/cmd/link/internal/sym/segment.go               |   11 +-
 src/cmd/link/internal/sym/sizeof_test.go           |   37 -
 src/cmd/link/internal/sym/symbol.go                |  395 -
 src/cmd/link/internal/sym/symbols.go               |   63 -
 src/cmd/link/internal/sym/symkind.go               |   18 +-
 src/cmd/link/internal/sym/symkind_string.go        |   48 +-
 src/cmd/link/internal/wasm/asm.go                  |   59 +-
 src/cmd/link/internal/wasm/obj.go                  |    2 +-
 src/cmd/link/internal/x86/asm.go                   |  297 +-
 src/cmd/link/internal/x86/obj.go                   |   13 +-
 src/cmd/link/link_test.go                          |   95 +-
 src/cmd/link/testdata/testHashedSyms/p.go          |   33 +
 src/cmd/link/testdata/testRO/x.go                  |   22 +
 src/cmd/nm/nm_test.go                              |    2 +-
 src/cmd/objdump/objdump_test.go                    |   34 +-
 src/cmd/objdump/testdata/fmthellocgo.go            |   21 +
 src/cmd/oldlink/doc.go                             |  129 -
 src/cmd/oldlink/internal/amd64/asm.go              |  874 ---
 src/cmd/oldlink/internal/amd64/l.go                |   43 -
 src/cmd/oldlink/internal/amd64/obj.go              |  117 -
 src/cmd/oldlink/internal/arm/asm.go                |  790 --
 src/cmd/oldlink/internal/arm/l.go                  |   75 -
 src/cmd/oldlink/internal/arm/obj.go                |  107 -
 src/cmd/oldlink/internal/arm64/asm.go              |  946 ---
 src/cmd/oldlink/internal/arm64/l.go                |   74 -
 src/cmd/oldlink/internal/arm64/obj.go              |  110 -
 src/cmd/oldlink/internal/ld/ar.go                  |  193 -
 src/cmd/oldlink/internal/ld/config.go              |  272 -
 src/cmd/oldlink/internal/ld/data.go                | 2501 -------
 src/cmd/oldlink/internal/ld/deadcode.go            |  409 --
 src/cmd/oldlink/internal/ld/deadcode2.go           |  441 --
 src/cmd/oldlink/internal/ld/decodesym.go           |  380 -
 src/cmd/oldlink/internal/ld/dwarf.go               | 2044 ------
 src/cmd/oldlink/internal/ld/elf.go                 | 2448 ------
 src/cmd/oldlink/internal/ld/execarchive.go         |   37 -
 src/cmd/oldlink/internal/ld/execarchive_noexec.go  |   13 -
 src/cmd/oldlink/internal/ld/go.go                  |  442 --
 src/cmd/oldlink/internal/ld/ld.go                  |  217 -
 src/cmd/oldlink/internal/ld/lib.go                 | 2751 -------
 src/cmd/oldlink/internal/ld/link.go                |  187 -
 src/cmd/oldlink/internal/ld/macho.go               | 1119 ---
 src/cmd/oldlink/internal/ld/macho_combine_dwarf.go |  462 --
 src/cmd/oldlink/internal/ld/main.go                |  338 -
 src/cmd/oldlink/internal/ld/outbuf.go              |  177 -
 src/cmd/oldlink/internal/ld/outbuf_mmap.go         |   44 -
 src/cmd/oldlink/internal/ld/outbuf_nommap.go       |   15 -
 src/cmd/oldlink/internal/ld/outbuf_windows.go      |   49 -
 src/cmd/oldlink/internal/ld/pcln.go                |  530 --
 src/cmd/oldlink/internal/ld/pe.go                  | 1562 ----
 src/cmd/oldlink/internal/ld/sym.go                 |  109 -
 src/cmd/oldlink/internal/ld/symtab.go              |  713 --
 .../internal/ld/testdata/httptest/main/main.go     |   22 -
 .../internal/ld/testdata/issue10978/main.go        |   27 -
 .../oldlink/internal/ld/testdata/issue10978/main.s |    1 -
 .../oldlink/internal/ld/testdata/issue25459/a/a.go |   27 -
 .../internal/ld/testdata/issue25459/main/main.go   |   10 -
 .../internal/ld/testdata/issue26237/b.dir/b.go     |   16 -
 .../internal/ld/testdata/issue26237/main/main.go   |   16 -
 .../internal/ld/testdata/issue32233/lib/ObjC.m     |   16 -
 .../internal/ld/testdata/issue32233/lib/lib.go     |   19 -
 .../internal/ld/testdata/issue32233/main/main.go   |   11 -
 src/cmd/oldlink/internal/ld/typelink.go            |   49 -
 src/cmd/oldlink/internal/ld/util.go                |   97 -
 src/cmd/oldlink/internal/ld/xcoff.go               | 1685 -----
 src/cmd/oldlink/internal/loadelf/ldelf.go          | 1282 ----
 src/cmd/oldlink/internal/loader/loader.go          |  629 --
 src/cmd/oldlink/internal/loadmacho/ldmacho.go      |  794 --
 src/cmd/oldlink/internal/loadpe/ldpe.go            |  513 --
 src/cmd/oldlink/internal/loadxcoff/ldxcoff.go      |  238 -
 src/cmd/oldlink/internal/mips/asm.go               |  230 -
 src/cmd/oldlink/internal/mips/l.go                 |   74 -
 src/cmd/oldlink/internal/mips/obj.go               |   89 -
 src/cmd/oldlink/internal/mips64/asm.go             |  278 -
 src/cmd/oldlink/internal/mips64/l.go               |   74 -
 src/cmd/oldlink/internal/mips64/obj.go             |   98 -
 src/cmd/oldlink/internal/objfile/objfile.go        |  664 --
 src/cmd/oldlink/internal/ppc64/asm.go              | 1185 ---
 src/cmd/oldlink/internal/ppc64/l.go                |   74 -
 src/cmd/oldlink/internal/ppc64/obj.go              |  106 -
 src/cmd/oldlink/internal/riscv64/asm.go            |  168 -
 src/cmd/oldlink/internal/riscv64/l.go              |   14 -
 src/cmd/oldlink/internal/riscv64/obj.go            |   60 -
 src/cmd/oldlink/internal/s390x/asm.go              |  574 --
 src/cmd/oldlink/internal/s390x/l.go                |   74 -
 src/cmd/oldlink/internal/s390x/obj.go              |   88 -
 src/cmd/oldlink/internal/sym/attribute.go          |  121 -
 src/cmd/oldlink/internal/sym/compilation_unit.go   |   23 -
 src/cmd/oldlink/internal/sym/library.go            |   25 -
 src/cmd/oldlink/internal/sym/reloc.go              |  128 -
 src/cmd/oldlink/internal/sym/segment.go            |   58 -
 src/cmd/oldlink/internal/sym/sizeof_test.go        |   37 -
 src/cmd/oldlink/internal/sym/symbol.go             |  543 --
 src/cmd/oldlink/internal/sym/symbols.go            |  135 -
 src/cmd/oldlink/internal/sym/symkind.go            |  168 -
 src/cmd/oldlink/internal/sym/symkind_string.go     |   76 -
 src/cmd/oldlink/internal/wasm/asm.go               |  583 --
 src/cmd/oldlink/internal/wasm/obj.go               |   35 -
 src/cmd/oldlink/internal/x86/asm.go                |  699 --
 src/cmd/oldlink/internal/x86/l.go                  |   43 -
 src/cmd/oldlink/internal/x86/obj.go                |  113 -
 src/cmd/oldlink/main.go                            |   71 -
 src/cmd/pack/pack.go                               |  418 +-
 src/cmd/pack/pack_test.go                          |   77 +-
 src/cmd/test2json/main.go                          |    6 +-
 src/cmd/trace/trace.go                             |  125 +-
 src/cmd/trace/trace_test.go                        |    7 +-
 src/cmd/trace/trace_unix_test.go                   |    3 +-
 .../golang.org/x/arch/ppc64/ppc64asm/plan9.go      |    4 +-
 .../golang.org/x/arch/ppc64/ppc64asm/tables.go     |    8 +
 src/cmd/vendor/golang.org/x/mod/modfile/read.go    |    8 +
 src/cmd/vendor/golang.org/x/mod/modfile/rule.go    |  243 +-
 src/cmd/vendor/golang.org/x/mod/module/module.go   |   80 +-
 src/cmd/vendor/golang.org/x/mod/zip/zip.go         |  621 +-
 .../golang.org/x/sys/unix/asm_openbsd_mips64.s     |   29 +
 .../vendor/golang.org/x/sys/unix/fcntl_darwin.go   |    6 +
 src/cmd/vendor/golang.org/x/sys/unix/ioctl.go      |    9 +
 src/cmd/vendor/golang.org/x/sys/unix/mkall.sh      |   15 +-
 src/cmd/vendor/golang.org/x/sys/unix/mkerrors.sh   |   12 +-
 .../vendor/golang.org/x/sys/unix/syscall_bsd.go    |   17 +
 .../golang.org/x/sys/unix/syscall_darwin.1_12.go   |    4 +-
 .../vendor/golang.org/x/sys/unix/syscall_darwin.go |    9 +
 .../x/sys/unix/syscall_darwin_386.1_11.go          |    9 -
 .../golang.org/x/sys/unix/syscall_darwin_386.go    |   15 -
 .../x/sys/unix/syscall_darwin_amd64.1_11.go        |    9 -
 .../golang.org/x/sys/unix/syscall_darwin_amd64.go  |   15 -
 .../x/sys/unix/syscall_darwin_arm.1_11.go          |   11 -
 .../golang.org/x/sys/unix/syscall_darwin_arm.go    |   15 -
 .../x/sys/unix/syscall_darwin_arm64.1_11.go        |   11 -
 .../golang.org/x/sys/unix/syscall_darwin_arm64.go  |   15 -
 .../golang.org/x/sys/unix/syscall_illumos.go       |   41 +-
 .../vendor/golang.org/x/sys/unix/syscall_linux.go  |  129 +-
 .../golang.org/x/sys/unix/syscall_linux_arm.go     |    5 -
 .../golang.org/x/sys/unix/syscall_linux_gc_arm.go  |   13 +
 .../x/sys/unix/syscall_openbsd_mips64.go           |   35 +
 .../golang.org/x/sys/unix/zerrors_darwin_386.go    |    2 +
 .../golang.org/x/sys/unix/zerrors_darwin_amd64.go  |    2 +
 .../golang.org/x/sys/unix/zerrors_darwin_arm.go    |    2 +
 .../golang.org/x/sys/unix/zerrors_darwin_arm64.go  |    2 +
 .../golang.org/x/sys/unix/zerrors_freebsd_386.go   |    6 +
 .../golang.org/x/sys/unix/zerrors_freebsd_amd64.go |    6 +
 .../golang.org/x/sys/unix/zerrors_freebsd_arm.go   |    6 +
 .../golang.org/x/sys/unix/zerrors_freebsd_arm64.go |    6 +
 .../vendor/golang.org/x/sys/unix/zerrors_linux.go  |  190 +-
 .../golang.org/x/sys/unix/zerrors_linux_386.go     |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_amd64.go   |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_arm.go     |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_arm64.go   |    3 +
 .../golang.org/x/sys/unix/zerrors_linux_mips.go    |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_mips64.go  |    2 +
 .../x/sys/unix/zerrors_linux_mips64le.go           |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_mipsle.go  |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_ppc64.go   |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_ppc64le.go |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_riscv64.go |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_s390x.go   |    2 +
 .../golang.org/x/sys/unix/zerrors_linux_sparc64.go |    2 +
 .../golang.org/x/sys/unix/zerrors_netbsd_386.go    |    6 +
 .../golang.org/x/sys/unix/zerrors_netbsd_amd64.go  |    6 +
 .../golang.org/x/sys/unix/zerrors_netbsd_arm.go    |    6 +
 .../golang.org/x/sys/unix/zerrors_netbsd_arm64.go  |    6 +
 .../golang.org/x/sys/unix/zerrors_openbsd_386.go   |    7 +
 .../golang.org/x/sys/unix/zerrors_openbsd_amd64.go |    7 +
 .../golang.org/x/sys/unix/zerrors_openbsd_arm.go   |    7 +
 .../golang.org/x/sys/unix/zerrors_openbsd_arm64.go |    7 +
 .../x/sys/unix/zerrors_openbsd_mips64.go           | 1862 +++++
 .../x/sys/unix/zsyscall_darwin_386.1_11.go         | 1811 -----
 .../golang.org/x/sys/unix/zsyscall_darwin_386.go   |  102 +-
 .../golang.org/x/sys/unix/zsyscall_darwin_386.s    |   10 +-
 .../x/sys/unix/zsyscall_darwin_amd64.1_11.go       | 1811 -----
 .../golang.org/x/sys/unix/zsyscall_darwin_amd64.go |  102 +-
 .../golang.org/x/sys/unix/zsyscall_darwin_amd64.s  |   10 +-
 .../x/sys/unix/zsyscall_darwin_arm.1_11.go         | 1784 -----
 .../golang.org/x/sys/unix/zsyscall_darwin_arm.go   |  102 +-
 .../golang.org/x/sys/unix/zsyscall_darwin_arm.s    |   10 +-
 .../golang.org/x/sys/unix/zsyscall_darwin_arm64.go |  102 +-
 .../golang.org/x/sys/unix/zsyscall_darwin_arm64.s  |   10 +-
 .../x/sys/unix/zsyscall_illumos_amd64.go           |   29 +-
 .../vendor/golang.org/x/sys/unix/zsyscall_linux.go |   77 +
 ...in_arm64.1_11.go => zsyscall_openbsd_mips64.go} |  514 +-
 .../golang.org/x/sys/unix/zsysctl_openbsd_386.go   |    3 +-
 .../golang.org/x/sys/unix/zsysctl_openbsd_amd64.go |    1 +
 .../golang.org/x/sys/unix/zsysctl_openbsd_arm.go   |    1 +
 .../x/sys/unix/zsysctl_openbsd_mips64.go           |  279 +
 .../golang.org/x/sys/unix/zsysnum_darwin_386.go    |  436 --
 .../golang.org/x/sys/unix/zsysnum_darwin_amd64.go  |  438 --
 .../golang.org/x/sys/unix/zsysnum_darwin_arm.go    |  436 --
 .../golang.org/x/sys/unix/zsysnum_darwin_arm64.go  |  436 --
 .../golang.org/x/sys/unix/zsysnum_linux_386.go     |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_amd64.go   |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_arm.go     |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_arm64.go   |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_mips.go    |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_mips64.go  |    1 +
 .../x/sys/unix/zsysnum_linux_mips64le.go           |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_mipsle.go  |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_ppc64.go   |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_ppc64le.go |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_riscv64.go |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_s390x.go   |    1 +
 .../golang.org/x/sys/unix/zsysnum_linux_sparc64.go |    1 +
 .../x/sys/unix/zsysnum_openbsd_mips64.go           |  220 +
 .../golang.org/x/sys/unix/ztypes_freebsd_arm.go    |   12 +-
 .../vendor/golang.org/x/sys/unix/ztypes_linux.go   |  553 +-
 .../golang.org/x/sys/unix/ztypes_linux_386.go      |    5 +
 .../golang.org/x/sys/unix/ztypes_linux_amd64.go    |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_arm.go      |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_arm64.go    |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_mips.go     |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_mips64.go   |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_mips64le.go |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_mipsle.go   |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_ppc64.go    |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_ppc64le.go  |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_riscv64.go  |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_s390x.go    |    7 +
 .../golang.org/x/sys/unix/ztypes_linux_sparc64.go  |    7 +
 .../golang.org/x/sys/unix/ztypes_openbsd_mips64.go |  565 ++
 .../vendor/golang.org/x/sys/windows/dll_windows.go |   29 +
 .../vendor/golang.org/x/sys/windows/env_windows.go |   11 +-
 .../golang.org/x/sys/windows/memory_windows.go     |    5 +
 .../golang.org/x/sys/windows/security_windows.go   |   20 +-
 src/cmd/vendor/golang.org/x/sys/windows/service.go |    2 +
 .../golang.org/x/sys/windows/syscall_windows.go    |   40 +-
 .../golang.org/x/sys/windows/types_windows.go      |   12 -
 .../golang.org/x/sys/windows/types_windows_386.go  |   13 +
 .../x/sys/windows/types_windows_amd64.go           |   12 +
 .../golang.org/x/sys/windows/types_windows_arm.go  |   13 +
 .../golang.org/x/sys/windows/zsyscall_windows.go   |   32 +
 .../go/analysis/passes/structtag/structtag.go      |    6 +-
 .../go/analysis/passes/unmarshal/unmarshal.go      |    7 +-
 .../analysis/passes/unusedresult/unusedresult.go   |    2 +-
 .../golang.org/x/tools/go/analysis/validate.go     |   33 +-
 .../x/tools/internal/analysisinternal/analysis.go  |  343 +-
 .../golang.org/x/tools/internal/lsp/fuzzy/input.go |  168 +
 .../x/tools/internal/lsp/fuzzy/matcher.go          |  398 +
 src/cmd/vendor/modules.txt                         |   13 +-
 src/compress/flate/deflate_test.go                 |   56 +-
 src/compress/flate/deflatefast.go                  |   49 +-
 src/compress/flate/huffman_bit_writer.go           |    1 +
 src/compress/flate/writer_test.go                  |   63 +
 src/crypto/des/block.go                            |    2 +-
 src/crypto/ed25519/ed25519.go                      |    6 +-
 src/crypto/ed25519/ed25519_noasm.go                |   15 -
 src/crypto/ed25519/ed25519_s390x.go                |   51 -
 src/crypto/ed25519/ed25519_s390x.s                 |  161 -
 src/crypto/ed25519/ed25519_test.go                 |   44 +-
 src/crypto/elliptic/p256_asm_amd64.s               |    5 +-
 src/crypto/md5/md5block_amd64.s                    |    2 +-
 .../internal/{macOS => macos}/corefoundation.go    |    0
 .../internal/{macOS => macos}/corefoundation.s     |    0
 .../x509/internal/{macOS => macos}/security.go     |    0
 .../x509/internal/{macOS => macos}/security.s      |    0
 src/crypto/x509/root_darwin_amd64.go               |    2 +-
 src/crypto/x509/root_darwin_ios_gen.go             |    7 +-
 .../{root_darwin_ios.go => root_darwin_iosx.go}    |    0
 src/crypto/x509/root_windows.go                    |   46 +-
 src/crypto/x509/verify.go                          |   26 +-
 src/crypto/x509/verify_test.go                     |  890 +--
 src/crypto/x509/x509.go                            |    1 -
 src/database/sql/sql.go                            |   12 +-
 src/database/sql/sql_test.go                       |   35 +
 src/debug/dwarf/entry.go                           |   21 +-
 src/debug/dwarf/entry_test.go                      |   42 +
 src/debug/elf/elf.go                               |  223 +-
 src/debug/elf/file.go                              |   77 +-
 src/debug/elf/file_test.go                         |  625 +-
 ...go-relocation-test-gcc930-ranges-no-rela-x86-64 |  Bin 0 -> 5696 bytes
 ...-relocation-test-gcc930-ranges-with-rela-x86-64 |  Bin 0 -> 7680 bytes
 src/debug/elf/testdata/multiple-code-sections.c    |   28 +
 src/debug/gosym/pclntab.go                         |  150 +-
 src/debug/gosym/pclntab_test.go                    |   50 +
 src/debug/gosym/testdata/pcln115.gz                |  Bin 0 -> 124875 bytes
 src/encoding/asn1/common.go                        |   11 +-
 src/encoding/binary/binary.go                      |    2 +-
 src/encoding/binary/binary_test.go                 |   24 +
 src/encoding/binary/varint.go                      |    7 +-
 src/encoding/binary/varint_test.go                 |   18 +-
 src/flag/example_func_test.go                      |   41 +
 src/flag/flag.go                                   |   22 +-
 src/flag/flag_test.go                              |   50 +-
 src/fmt/fmt_test.go                                |    8 +-
 src/fmt/print.go                                   |    6 +-
 src/go.mod                                         |   10 +-
 src/go.sum                                         |   15 +-
 src/go/ast/ast.go                                  |    6 +
 src/go/build/build.go                              |   18 +-
 src/go/build/build_test.go                         |    4 +-
 src/go/build/deps_test.go                          |   26 +-
 src/go/build/syslist.go                            |    2 +-
 src/go/build/syslist_test.go                       |    2 +-
 src/go/doc/example.go                              |    2 +-
 src/go/doc/example_test.go                         |    9 +-
 src/go/format/format.go                            |    8 +-
 src/go/format/format_test.go                       |    4 +-
 src/go/internal/gccgoimporter/importer.go          |    2 +-
 src/go/printer/nodes.go                            |   18 +-
 src/go/printer/performance_test.go                 |    2 +-
 src/go/printer/printer.go                          |   17 +-
 src/go/printer/printer_test.go                     |    8 +-
 .../{go2numbers.stdfmt => go2numbers.norm}         |    0
 src/go/types/api_test.go                           |   44 +
 src/go/types/assignments.go                        |   17 +-
 src/go/types/check_test.go                         |   32 +-
 src/go/types/errors.go                             |   39 +-
 src/go/types/expr.go                               |  153 +-
 .../types/{testdata => fixedbugs}/issue23203a.src  |    0
 .../types/{testdata => fixedbugs}/issue23203b.src  |    0
 .../types/{testdata => fixedbugs}/issue26390.src   |    2 +
 .../types/{testdata => fixedbugs}/issue28251.src   |    0
 src/go/types/{testdata => fixedbugs}/issue6977.src |    0
 src/go/types/gotype.go                             |    8 +-
 src/go/types/operand.go                            |   43 +-
 src/go/types/self_test.go                          |   25 +-
 src/go/types/stdlib_test.go                        |   51 +-
 src/go/types/testdata/cycles2.src                  |    5 +-
 src/go/types/testdata/shifts.src                   |   23 +-
 src/hash/maphash/maphash_test.go                   |   29 +
 src/html/template/clone_test.go                    |    2 +-
 src/html/template/content_test.go                  |    6 +-
 src/html/template/escape.go                        |    2 +
 src/html/template/escape_test.go                   |    2 +-
 src/html/template/exec_test.go                     | 1708 +++++
 src/html/template/multi_test.go                    |  246 +
 src/html/template/template_test.go                 |   16 +
 src/html/template/testdata/file1.tmpl              |    2 +
 src/html/template/testdata/file2.tmpl              |    2 +
 src/html/template/testdata/tmpl1.tmpl              |    3 +
 src/html/template/testdata/tmpl2.tmpl              |    3 +
 src/image/gif/writer_test.go                       |   73 +-
 src/internal/bytealg/compare_arm64.s               |    3 +-
 src/internal/bytealg/index_amd64.s                 |   52 +-
 src/internal/goversion/goversion.go                |   11 +-
 src/internal/poll/copy_file_range_linux.go         |   10 +-
 src/internal/poll/fd_fsync_posix.go                |    4 +-
 src/internal/poll/fd_opendir_darwin.go             |    8 +-
 src/internal/poll/fd_posix.go                      |   33 +-
 src/internal/poll/fd_unix.go                       |   33 +-
 src/internal/poll/fd_windows.go                    |   27 +
 src/internal/poll/fd_writev_illumos.go             |   16 +
 src/internal/poll/iovec_illumos.go                 |   16 +
 src/internal/poll/iovec_unix.go                    |   13 +
 src/internal/poll/read_test.go                     |    2 +-
 src/internal/poll/writev.go                        |    4 +-
 src/internal/syscall/unix/pipe2_illumos.go         |   34 +
 src/internal/syscall/unix/writev_illumos.go        |   30 +
 src/internal/syscall/windows/syscall_windows.go    |    9 +
 src/internal/syscall/windows/zsyscall_windows.go   |   13 +
 src/internal/testenv/testenv.go                    |    6 +-
 src/internal/testlog/exit.go                       |   33 +
 src/log/syslog/syslog_test.go                      |    2 +-
 src/make.bash                                      |   13 +-
 src/make.bat                                       |    2 +-
 src/math/acosh.go                                  |    5 +-
 src/math/big/arith_arm64.s                         |  113 +-
 src/math/big/arith_ppc64x.s                        |    9 +-
 src/math/big/arith_test.go                         |  106 +-
 src/math/big/example_test.go                       |    7 +
 src/math/big/float.go                              |    7 +-
 src/math/log1p.go                                  |    5 +-
 src/mime/example_test.go                           |   26 +
 src/net/conf.go                                    |    2 +-
 src/net/dial_test.go                               |    4 +-
 src/net/error_test.go                              |   17 +-
 src/net/http/cgi/child.go                          |   39 +-
 src/net/http/cgi/child_test.go                     |   58 +
 src/net/http/cgi/host.go                           |    2 +-
 src/net/http/cgi/integration_test.go               |   74 +-
 src/net/http/client.go                             |    2 +-
 src/net/http/export_test.go                        |   11 +
 src/net/http/fcgi/child.go                         |   42 +-
 src/net/http/fcgi/fcgi_test.go                     |   52 +
 src/net/http/fs.go                                 |   10 +-
 src/net/http/fs_test.go                            |   70 +-
 src/net/http/h2_bundle.go                          |   85 +-
 src/net/http/http_test.go                          |    2 +-
 src/net/http/omithttp2.go                          |    4 -
 src/net/http/requestwrite_test.go                  |   25 +-
 src/net/http/roundtrip_js.go                       |    8 +-
 src/net/http/serve_test.go                         |   70 +-
 src/net/http/server.go                             |  153 +-
 src/net/http/transfer.go                           |    2 +-
 src/net/http/transport.go                          |   91 +-
 src/net/http/transport_test.go                     |  152 +-
 src/net/interface_solaris.go                       |   28 +-
 src/net/interface_unix_test.go                     |    2 +-
 src/net/ipsock_plan9.go                            |   28 +-
 src/net/lookup_test.go                             |    4 +-
 src/net/mail/message.go                            |   13 +-
 src/net/mail/message_test.go                       |   32 +
 src/net/main_test.go                               |    2 +-
 src/net/net.go                                     |   12 +
 src/net/platform_test.go                           |    4 +-
 src/net/rawconn_unix_test.go                       |   20 +-
 src/net/rawconn_windows_test.go                    |   20 +-
 src/net/smtp/smtp.go                               |    6 +-
 src/net/smtp/smtp_test.go                          |  213 +
 src/net/sock_bsd.go                                |    2 +-
 src/net/sock_linux.go                              |   62 +-
 src/net/sock_linux_test.go                         |   22 +
 src/net/tcpsock_test.go                            |    2 +-
 src/net/textproto/reader.go                        |    2 +-
 src/net/udpsock_test.go                            |    2 +-
 src/net/writev_test.go                             |    2 +-
 src/net/writev_unix.go                             |    2 +-
 src/os/dir_darwin.go                               |   11 +-
 src/os/dir_unix.go                                 |    2 +-
 src/os/file.go                                     |    5 +-
 src/os/file_plan9.go                               |    4 +
 src/os/file_posix.go                               |   32 +-
 src/os/file_unix.go                                |   44 +-
 src/os/getwd.go                                    |   13 +-
 src/os/os_test.go                                  |   39 +-
 src/os/path_test.go                                |    2 +-
 src/os/pipe2_illumos.go                            |   25 +
 src/os/pipe_bsd.go                                 |    2 +-
 src/os/pipe_test.go                                |   19 +
 src/os/proc.go                                     |    8 +
 src/os/readfrom_linux.go                           |    5 +
 src/os/readfrom_linux_test.go                      |   30 +
 src/os/removeall_test.go                           |    2 +-
 src/os/signal/example_unix_test.go                 |   47 +
 src/os/signal/signal.go                            |   75 +
 src/os/signal/signal_test.go                       |  162 +
 src/os/stat_unix.go                                |    8 +-
 src/path/example_test.go                           |    5 +
 src/path/filepath/example_unix_test.go             |    4 +
 src/path/filepath/path_test.go                     |    4 +-
 src/reflect/all_test.go                            |   58 +-
 src/reflect/deepequal.go                           |   18 +-
 src/reflect/type.go                                |   12 +-
 src/reflect/value.go                               |   20 +-
 src/runtime/asm.s                                  |   21 -
 src/runtime/asm_ppc64x.s                           |   41 +-
 src/runtime/asm_riscv64.s                          |    2 +-
 src/runtime/cgocall.go                             |   11 +-
 src/runtime/chan.go                                |   47 +-
 src/runtime/chan_test.go                           |   56 +
 src/runtime/checkptr_test.go                       |    1 +
 src/runtime/closure_test.go                        |    1 +
 src/runtime/debug.go                               |    5 +-
 src/runtime/debug/garbage.go                       |    7 +
 src/runtime/debug/panic_test.go                    |   53 +
 src/runtime/debugcall.go                           |    2 +-
 src/runtime/defs_linux_386.go                      |   11 -
 src/runtime/defs_linux_amd64.go                    |   11 -
 src/runtime/defs_linux_arm.go                      |    4 +
 src/runtime/defs_linux_mips64x.go                  |    4 +
 src/runtime/defs_openbsd_arm64.go                  |    4 +
 src/runtime/defs_plan9_386.go                      |    4 +
 src/runtime/defs_plan9_amd64.go                    |    4 +
 src/runtime/error.go                               |   20 +
 src/runtime/export_test.go                         |   56 +-
 src/runtime/gc_test.go                             |    6 +-
 src/runtime/gcinfo_test.go                         |   19 +-
 src/runtime/heapdump.go                            |    2 +-
 src/runtime/internal/atomic/asm_wasm.s             |   10 +
 src/runtime/internal/atomic/atomic_test.go         |   10 +
 src/runtime/internal/atomic/atomic_wasm.go         |   13 +-
 src/runtime/internal/sys/gengoos.go                |    9 +
 src/runtime/internal/sys/zgoos_aix.go              |    1 +
 src/runtime/internal/sys/zgoos_android.go          |    1 +
 src/runtime/internal/sys/zgoos_darwin.go           |    2 +
 src/runtime/internal/sys/zgoos_dragonfly.go        |    1 +
 src/runtime/internal/sys/zgoos_freebsd.go          |    1 +
 src/runtime/internal/sys/zgoos_hurd.go             |    1 +
 src/runtime/internal/sys/zgoos_illumos.go          |    1 +
 src/runtime/internal/sys/zgoos_ios.go              |   25 +
 src/runtime/internal/sys/zgoos_js.go               |    1 +
 src/runtime/internal/sys/zgoos_linux.go            |    1 +
 src/runtime/internal/sys/zgoos_netbsd.go           |    1 +
 src/runtime/internal/sys/zgoos_openbsd.go          |    1 +
 src/runtime/internal/sys/zgoos_plan9.go            |    1 +
 src/runtime/internal/sys/zgoos_solaris.go          |    1 +
 src/runtime/internal/sys/zgoos_windows.go          |    1 +
 src/runtime/internal/sys/zgoos_zos.go              |    1 +
 src/runtime/lockrank.go                            |   18 +-
 src/runtime/lockrank_off.go                        |   22 +
 src/runtime/lockrank_on.go                         |   74 +-
 src/runtime/malloc.go                              |   12 +-
 src/runtime/map.go                                 |   11 +-
 src/runtime/map_benchmark_test.go                  |    1 +
 src/runtime/map_fast32.go                          |   13 +-
 src/runtime/map_fast64.go                          |   13 +-
 src/runtime/map_faststr.go                         |    5 +
 src/runtime/map_test.go                            |   22 +
 src/runtime/mbarrier.go                            |   23 +-
 src/runtime/mbitmap.go                             |  313 +-
 src/runtime/mcache.go                              |    6 +-
 src/runtime/mcentral.go                            |  239 +-
 src/runtime/mcheckmark.go                          |  100 +
 src/runtime/mgc.go                                 |   14 +-
 src/runtime/mgcmark.go                             |  193 +-
 src/runtime/mgcscavenge.go                         |    2 +-
 src/runtime/mgcstack.go                            |    2 -
 src/runtime/mgcsweep.go                            |  237 +-
 src/runtime/mgcsweepbuf.go                         |  176 -
 src/runtime/mheap.go                               |   48 +-
 src/runtime/mkduff.go                              |    1 -
 src/runtime/mkpreempt.go                           |    5 +-
 src/runtime/mksizeclasses.go                       |    6 +-
 src/runtime/mpagealloc.go                          |   56 +-
 src/runtime/mpagealloc_test.go                     |   57 +
 src/runtime/mpallocbits.go                         |  188 +-
 src/runtime/mpallocbits_test.go                    |   69 +-
 src/runtime/mranges.go                             |   19 +
 src/runtime/mstats.go                              |    4 +
 src/runtime/os_linux.go                            |   28 +-
 src/runtime/os_linux_x86.go                        |   85 +-
 src/runtime/os_netbsd.go                           |   28 +-
 src/runtime/os_openbsd.go                          |    1 +
 src/runtime/os_plan9.go                            |   23 +-
 src/runtime/os_windows.go                          |    5 -
 src/runtime/panic.go                               |   15 +-
 src/runtime/pprof/pprof_rusage.go                  |    2 +-
 src/runtime/pprof/pprof_test.go                    |    4 +-
 src/runtime/preempt.go                             |    2 +-
 src/runtime/preempt_arm64.s                        |    3 +
 src/runtime/proc.go                                |  194 +-
 src/runtime/proc_test.go                           |   10 +-
 src/runtime/race/README                            |    6 +-
 src/runtime/race/race_linux_amd64.syso             |  Bin 518680 -> 521752 bytes
 src/runtime/race/race_linux_arm64.syso             |  Bin 497656 -> 500584 bytes
 src/runtime/race/race_linux_ppc64le.syso           |  Bin 619560 -> 623824 bytes
 src/runtime/race/syso_test.go                      |   39 +
 src/runtime/rt0_freebsd_arm64.s                    |    3 +-
 src/runtime/rt0_linux_ppc64.s                      |    4 +
 src/runtime/rt0_linux_ppc64le.s                    |    4 +
 src/runtime/rt0_netbsd_arm64.s                     |    3 +-
 src/runtime/rt0_openbsd_arm64.s                    |    3 +-
 src/runtime/runtime1.go                            |    5 +-
 src/runtime/runtime2.go                            |   33 +-
 src/runtime/select.go                              |  252 +-
 src/runtime/signal_unix.go                         |   31 +-
 src/runtime/signal_windows.go                      |    5 +-
 src/runtime/sigqueue.go                            |    6 +-
 src/runtime/sizeclasses.go                         |  141 +-
 src/runtime/slice.go                               |   44 +-
 src/runtime/slice_test.go                          |    1 +
 src/runtime/stack.go                               |   31 +-
 src/runtime/string.go                              |   50 -
 src/runtime/string_test.go                         |   31 -
 src/runtime/symtab.go                              |   31 +-
 src/runtime/sys_darwin.go                          |    8 +-
 src/runtime/sys_linux_386.s                        |   57 +-
 src/runtime/sys_linux_amd64.s                      |  117 +-
 src/runtime/sys_linux_arm.s                        |   36 +-
 src/runtime/sys_linux_arm64.s                      |   34 +-
 src/runtime/sys_linux_mips64x.s                    |   38 +-
 src/runtime/sys_linux_ppc64x.s                     |   40 +-
 src/runtime/testdata/testprog/checkptr.go          |    8 +
 src/runtime/time.go                                |    2 +-
 src/runtime/time_test.go                           |    2 +-
 src/runtime/tls_arm64.h                            |    6 +
 src/runtime/tls_arm64.s                            |    4 +-
 src/runtime/trace/annotation.go                    |    4 +
 src/runtime/trace/annotation_test.go               |    4 +
 src/runtime/trace/trace_stack_test.go              |    2 +-
 src/runtime/traceback.go                           |   22 +-
 src/strconv/isprint.go                             |   98 +-
 src/strings/strings.go                             |   12 +-
 src/strings/strings_test.go                        |    9 +
 src/sync/cond_test.go                              |    1 +
 src/sync/map.go                                    |    1 +
 src/sync/map_test.go                               |   24 +
 src/sync/mutex_test.go                             |    2 +-
 src/sync/runtime2.go                               |    4 +
 src/sync/runtime2_lockrank.go                      |    4 +
 src/syscall/asm_linux_riscv64.s                    |   22 +
 src/syscall/exec_linux.go                          |    8 +-
 src/syscall/exec_unix.go                           |    2 +-
 src/syscall/export_darwin_test.go                  |   13 +
 src/syscall/export_unix_test.go                    |    2 +-
 src/syscall/sockcmsg_unix_other.go                 |    2 +-
 src/syscall/syscall_aix.go                         |    6 +-
 src/syscall/syscall_bsd.go                         |    2 +-
 src/syscall/syscall_illumos.go                     |   25 +
 src/syscall/syscall_linux_riscv64.go               |    4 +-
 src/syscall/syscall_unix.go                        |    2 +-
 src/syscall/syscall_unix_test.go                   |   16 +-
 src/syscall/types_illumos_amd64.go                 |   17 +
 src/syscall/zsyscall_aix_ppc64.go                  |   26 +-
 src/testing/benchmark.go                           |   18 +-
 src/testing/example.go                             |   11 +-
 src/testing/internal/testdeps/deps.go              |    5 +
 src/testing/iotest/example_test.go                 |   22 +
 src/testing/iotest/logger_test.go                  |   12 +-
 src/testing/iotest/reader.go                       |   14 +
 src/testing/iotest/reader_test.go                  |   25 +
 src/testing/run_example.go                         |    4 +-
 src/testing/run_example_js.go                      |    4 +-
 src/testing/sub_test.go                            |   46 +-
 src/testing/testing.go                             |  267 +-
 src/testing/testing_test.go                        |   32 +
 src/text/template/exec.go                          |    1 +
 src/text/template/multi_test.go                    |    1 +
 src/text/template/parse/lex.go                     |    8 +-
 src/text/template/parse/lex_test.go                |    7 +-
 src/text/template/parse/node.go                    |   33 +
 src/text/template/parse/parse.go                   |   22 +-
 src/text/template/parse/parse_test.go              |   25 +
 src/time/tick_test.go                              |    2 +-
 .../{zoneinfo_ios.go => zoneinfo_darwin_arm64.go}  |    3 -
 src/time/zoneinfo_unix.go                          |   27 +-
 src/time/zoneinfo_unix_test.go                     |   90 +
 src/unicode/tables.go                              |  544 +-
 src/unicode/utf8/example_test.go                   |   20 +
 src/unicode/utf8/utf8.go                           |    1 +
 src/unicode/utf8/utf8_test.go                      |   30 +-
 src/vendor/golang.org/x/sys/cpu/byteorder.go       |   11 +-
 src/vendor/golang.org/x/sys/cpu/cpu.go             |   96 +
 .../x/sys/cpu/{cpu_aix_ppc64.go => cpu_aix.go}     |    6 +-
 src/vendor/golang.org/x/sys/cpu/cpu_arm.go         |   33 +
 src/vendor/golang.org/x/sys/cpu/cpu_arm64.go       |   39 +-
 src/vendor/golang.org/x/sys/cpu/cpu_linux.go       |    2 +-
 .../golang.org/x/sys/cpu/cpu_linux_mips64x.go      |    1 +
 .../golang.org/x/sys/cpu/cpu_linux_ppc64x.go       |    2 -
 src/vendor/golang.org/x/sys/cpu/cpu_linux_s390x.go |    2 -
 src/vendor/golang.org/x/sys/cpu/cpu_mips64x.go     |    6 +
 src/vendor/golang.org/x/sys/cpu/cpu_mipsx.go       |    2 +
 src/vendor/golang.org/x/sys/cpu/cpu_other_arm.go   |    9 +
 src/vendor/golang.org/x/sys/cpu/cpu_ppc64x.go      |   16 +
 src/vendor/golang.org/x/sys/cpu/cpu_riscv64.go     |    2 +
 src/vendor/golang.org/x/sys/cpu/cpu_s390x.go       |   30 +
 src/vendor/golang.org/x/sys/cpu/cpu_wasm.go        |    4 +
 src/vendor/golang.org/x/sys/cpu/cpu_x86.go         |   31 +-
 .../golang.org/x/sys/cpu/syscall_aix_gccgo.go      |   27 +
 .../golang.org/x/text/transform/transform.go       |    6 +-
 .../golang.org/x/text/unicode/bidi/tables12.0.0.go |    2 +-
 .../golang.org/x/text/unicode/bidi/tables13.0.0.go | 1955 +++++
 .../golang.org/x/text/unicode/norm/tables12.0.0.go |    2 +-
 .../golang.org/x/text/unicode/norm/tables13.0.0.go | 7760 ++++++++++++++++++++
 src/vendor/modules.txt                             |    8 +-
 test/README.md                                     |    4 +
 test/alias2.go                                     |   10 +-
 test/cannotassign.go                               |   33 +
 test/codegen/arithmetic.go                         |   91 +-
 test/codegen/bits.go                               |   13 +-
 test/codegen/comparisons.go                        |  129 +
 test/codegen/logic.go                              |   24 +
 test/codegen/mathbits.go                           |   14 +
 test/codegen/memops.go                             |   23 +
 test/codegen/select.go                             |   20 +
 test/codegen/shift.go                              |   55 +
 test/codegen/slices.go                             |   21 +
 test/ddd1.go                                       |    4 +-
 test/escape2.go                                    |   56 +-
 test/escape2n.go                                   |   56 +-
 test/escape5.go                                    |    7 +
 test/escape_calls.go                               |    2 +-
 test/escape_field.go                               |    6 +-
 test/escape_iface.go                               |   50 +-
 test/escape_indir.go                               |   34 +-
 test/escape_map.go                                 |   26 +-
 test/escape_param.go                               |   60 +-
 test/escape_slice.go                               |   14 +-
 test/escape_struct_param1.go                       |  158 +-
 test/escape_struct_param2.go                       |  158 +-
 test/fixedbugs/bug229.go                           |    8 +-
 test/fixedbugs/bug509.go                           |   30 +
 test/fixedbugs/issue12006.go                       |    4 +-
 test/fixedbugs/issue13268.go                       |    6 -
 test/fixedbugs/issue13799.go                       |    4 +-
 test/fixedbugs/issue15281.go                       |    1 +
 test/fixedbugs/issue17645.go                       |    2 +-
 test/fixedbugs/issue17758.go                       |   17 +
 test/fixedbugs/issue21317.go                       |    2 +-
 test/fixedbugs/issue21709.go                       |    4 +-
 test/fixedbugs/issue22660.go                       |    2 +-
 test/fixedbugs/issue22662b.go                      |    2 +-
 test/fixedbugs/issue22921.go                       |   18 +
 test/fixedbugs/issue23732.go                       |    6 +-
 test/fixedbugs/issue24491a.go                      |   68 +
 test/fixedbugs/issue24491b.go                      |   46 +
 test/fixedbugs/issue26855.go                       |    4 +-
 test/fixedbugs/issue30898.go                       |    2 +-
 test/fixedbugs/issue31573.go                       |   24 +-
 test/fixedbugs/issue33308.go                       |   12 +
 test/fixedbugs/issue38125.go                       |   22 +
 test/fixedbugs/issue38745.go                       |   18 +
 test/fixedbugs/issue38905.go                       |   18 +
 test/fixedbugs/issue39292.go                       |   29 +
 test/fixedbugs/issue39505.go                       |   31 +
 test/fixedbugs/issue39505b.go                      |  183 +
 test/fixedbugs/issue40152.go                       |   21 +
 test/fixedbugs/issue40252.dir/a.go                 |   14 +
 test/fixedbugs/issue40252.dir/main.go              |   16 +
 test/fixedbugs/issue40252.go                       |    8 +
 test/fixedbugs/issue40367.go                       |   41 +
 test/fixedbugs/issue40629.go                       |   69 +
 test/fixedbugs/issue40746.go                       |   19 +
 test/fixedbugs/issue40917.go                       |   23 +
 test/fixedbugs/issue40954.go                       |   35 +
 test/fixedbugs/issue41247.go                       |   11 +
 test/fixedbugs/issue41440.go                       |   14 +
 test/fixedbugs/issue41500.go                       |   20 +
 test/fixedbugs/issue6750.go                        |    2 +-
 test/fixedbugs/issue7921.go                        |   10 +-
 test/fixedbugs/issue8606b.go                       |   63 +
 test/fixedbugs/issue9355.go                        |    2 +-
 test/inline.go                                     |    3 +-
 test/inline_variadic.go                            |    2 +-
 test/notinheap.go                                  |   26 +-
 test/notinheap2.go                                 |   48 +-
 test/prove.go                                      |    6 +-
 test/runtime.go                                    |    2 +-
 1335 files changed, 63169 insertions(+), 77637 deletions(-)

diff --cc src/crypto/x509/verify.go
index d47f8382ae,cb8d8f872d..50f4d4ac80
--- a/src/crypto/x509/verify.go
+++ b/src/crypto/x509/verify.go
@@@ -193,13 -193,8 +193,13 @@@ var errNotParsed = errors.New("x509: mi
  
  // VerifyOptions contains parameters for Certificate.Verify.
  type VerifyOptions struct {
 +	// IsBoring is a validity check for BoringCrypto.
 +	// If not nil, it will be called to check whether a given certificate
 +	// can be used for constructing verification chains.
 +	IsBoring func(*Certificate) bool
 +
  	// DNSName, if set, is checked against the leaf certificate with
- 	// Certificate.VerifyHostname.
+ 	// Certificate.VerifyHostname or the platform verifier.
  	DNSName string
  
  	// Intermediates is an optional pool of certificates that are not trust
diff --cc src/go/build/build.go
index 0a606161ca,5c3d876130..d58319583a
--- a/src/go/build/build.go
+++ b/src/go/build/build.go
@@@ -1749,10 -1754,9 +1755,13 @@@ func (ctxt *Context) match(name string
  	if ctxt.GOOS == "illumos" && name == "solaris" {
  		return true
  	}
+ 	if ctxt.GOOS == "ios" && name == "darwin" {
+ 		return true
+ 	}
 +	// Let applications know that the Go+BoringCrypto toolchain is in use.
 +	if name == "boringcrypto" {
 +		return true
 +	}
  
  	// other tags
  	for _, tag := range ctxt.BuildTags {
