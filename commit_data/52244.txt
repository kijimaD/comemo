commit e07d63964b6db13c5439f6d0a5d136e43da74016
Merge: 1f11660f54 d68a8d0f27
Author: Chressie Himpel <chressie@google.com>
Date:   Wed Apr 20 16:56:54 2022 +0200

    [dev.boringcrypto] all: merge master into dev.boringcrypto
    
    Change-Id: I52009bf809dda4fbcff03aa82d0ea8aa2a978fa2

 AUTHORS                                            |    1 +
 CONTRIBUTORS                                       |    1 +
 api/next/35044.txt                                 |    1 +
 api/next/42710.txt                                 |    2 +
 api/next/50340.txt                                 |    1 +
 api/next/50674.txt                                 |    9 +
 api/next/51082.txt                                 |   61 +
 api/next/51644.txt                                 |    2 +
 doc/go1.19.html                                    |   47 +-
 misc/cgo/gmp/gmp.go                                |    7 +-
 misc/cgo/testcshared/cshared_test.go               |   49 +
 .../testcshared/testdata/issue36233/issue36233.go  |   29 +
 misc/ios/go_ios_exec.go                            |    8 +-
 src/archive/tar/common.go                          |    9 +-
 src/archive/tar/reader.go                          |    6 +-
 src/archive/tar/strconv.go                         |    1 +
 src/archive/zip/reader.go                          |    3 +
 src/archive/zip/reader_test.go                     |   27 +
 src/builtin/builtin.go                             |   10 +
 src/bytes/bytes.go                                 |   21 +-
 src/bytes/bytes_test.go                            |    2 +
 src/cmd/addr2line/main.go                          |    1 +
 src/cmd/asm/doc.go                                 |    4 +-
 src/cmd/asm/internal/asm/parse.go                  |    8 +-
 src/cmd/asm/internal/lex/tokenizer.go              |    2 +-
 src/cmd/buildid/doc.go                             |    1 +
 src/cmd/cgo/doc.go                                 |   18 +-
 src/cmd/cgo/gcc.go                                 |   28 +-
 src/cmd/cgo/out.go                                 |   42 +-
 src/cmd/compile/internal/abi/abiutils.go           |    2 +-
 src/cmd/compile/internal/amd64/ssa.go              |   35 +-
 src/cmd/compile/internal/amd64/versions_test.go    |    1 +
 src/cmd/compile/internal/arm/ssa.go                |    2 +-
 src/cmd/compile/internal/arm64/ssa.go              |    4 +-
 src/cmd/compile/internal/deadcode/deadcode.go      |   80 +
 src/cmd/compile/internal/dwarfgen/dwarf.go         |    6 +-
 src/cmd/compile/internal/escape/desugar.go         |    4 +-
 src/cmd/compile/internal/escape/escape.go          |    3 +
 src/cmd/compile/internal/escape/stmt.go            |    3 +
 src/cmd/compile/internal/gc/obj.go                 |    3 +
 src/cmd/compile/internal/inline/inl.go             |    6 +-
 src/cmd/compile/internal/ir/const.go               |    2 +-
 src/cmd/compile/internal/ir/expr.go                |   10 +-
 src/cmd/compile/internal/ir/node.go                |    4 +-
 src/cmd/compile/internal/ir/node_gen.go            |   22 +
 src/cmd/compile/internal/ir/op_string.go           |   21 +-
 src/cmd/compile/internal/ir/stmt.go                |   32 +
 src/cmd/compile/internal/liveness/plive.go         |   12 +-
 src/cmd/compile/internal/mips/ggen.go              |    4 +-
 src/cmd/compile/internal/mips/ssa.go               |    2 +-
 src/cmd/compile/internal/mips64/ssa.go             |    2 +-
 src/cmd/compile/internal/noder/expr.go             |    9 +
 src/cmd/compile/internal/noder/noder.go            |   38 +-
 src/cmd/compile/internal/noder/stencil.go          |    1 +
 src/cmd/compile/internal/noder/unified.go          |   28 +-
 src/cmd/compile/internal/pkginit/init.go           |    6 +-
 src/cmd/compile/internal/ppc64/ggen.go             |    6 +-
 src/cmd/compile/internal/ppc64/ssa.go              |    4 +-
 src/cmd/compile/internal/reflectdata/alg.go        |  114 +-
 src/cmd/compile/internal/reflectdata/alg_test.go   |   76 +
 src/cmd/compile/internal/reflectdata/reflect.go    |   32 +-
 src/cmd/compile/internal/riscv64/ggen.go           |    2 +-
 src/cmd/compile/internal/riscv64/ssa.go            |    4 +-
 src/cmd/compile/internal/s390x/ggen.go             |    2 +-
 src/cmd/compile/internal/s390x/ssa.go              |    8 +-
 src/cmd/compile/internal/ssa/addressingmodes.go    |   37 +-
 src/cmd/compile/internal/ssa/block.go              |   47 +-
 src/cmd/compile/internal/ssa/branchelim.go         |   10 +-
 src/cmd/compile/internal/ssa/check.go              |    4 +
 src/cmd/compile/internal/ssa/compile.go            |    4 +-
 src/cmd/compile/internal/ssa/config.go             |   11 +-
 src/cmd/compile/internal/ssa/cse.go                |   17 +-
 src/cmd/compile/internal/ssa/debug.go              |   38 +-
 src/cmd/compile/internal/ssa/debug_test.go         |    2 +-
 src/cmd/compile/internal/ssa/expand_calls.go       |   42 +-
 src/cmd/compile/internal/ssa/export_test.go        |    3 +
 src/cmd/compile/internal/ssa/func.go               |   17 +-
 src/cmd/compile/internal/ssa/fuse.go               |   18 +-
 .../compile/internal/ssa/fuse_branchredirect.go    |   27 +-
 src/cmd/compile/internal/ssa/fuse_comparisons.go   |   20 +-
 src/cmd/compile/internal/ssa/gen/AMD64.rules       |   99 +-
 src/cmd/compile/internal/ssa/gen/AMD64Ops.go       |   34 +
 src/cmd/compile/internal/ssa/gen/generic.rules     |   14 +-
 src/cmd/compile/internal/ssa/gen/genericOps.go     |   13 +-
 src/cmd/compile/internal/ssa/gen/rulegen.go        |    2 +
 src/cmd/compile/internal/ssa/location.go           |   20 +-
 src/cmd/compile/internal/ssa/loopbce.go            |   28 +-
 src/cmd/compile/internal/ssa/looprotate.go         |   24 +-
 src/cmd/compile/internal/ssa/magic.go              |    6 +-
 src/cmd/compile/internal/ssa/op.go                 |   19 +-
 src/cmd/compile/internal/ssa/opGen.go              |  483 ++-
 src/cmd/compile/internal/ssa/phielim.go            |   16 +-
 src/cmd/compile/internal/ssa/phiopt.go             |   22 +-
 src/cmd/compile/internal/ssa/poset.go              |   10 +-
 src/cmd/compile/internal/ssa/prove.go              |  122 +-
 src/cmd/compile/internal/ssa/rewrite.go            |   24 +-
 src/cmd/compile/internal/ssa/rewriteAMD64.go       | 3472 ++++++++++++++++++--
 src/cmd/compile/internal/ssa/rewriteCond_test.go   |    6 +-
 src/cmd/compile/internal/ssa/rewritegeneric.go     |  500 +++
 src/cmd/compile/internal/ssa/schedule.go           |   16 +-
 src/cmd/compile/internal/ssa/shift_test.go         |    2 +-
 src/cmd/compile/internal/ssa/shortcircuit.go       |   30 +-
 src/cmd/compile/internal/ssa/sparsetree.go         |    1 +
 src/cmd/compile/internal/ssa/trim.go               |   10 +-
 src/cmd/compile/internal/ssa/value.go              |    3 +
 src/cmd/compile/internal/ssa/writebarrier.go       |    6 +-
 src/cmd/compile/internal/ssagen/pgen.go            |    4 +-
 src/cmd/compile/internal/ssagen/ssa.go             |  127 +-
 src/cmd/compile/internal/syntax/branches.go        |    8 +-
 src/cmd/compile/internal/test/float_test.go        |    1 +
 src/cmd/compile/internal/test/inl_test.go          |    1 +
 src/cmd/compile/internal/test/shift_test.go        |   10 +
 src/cmd/compile/internal/test/switch_test.go       |  137 +
 .../internal/test/testdata/addressed_test.go       |    4 +
 .../compile/internal/test/testdata/arith_test.go   |    1 +
 src/cmd/compile/internal/test/testdata/ctl_test.go |    1 +
 src/cmd/compile/internal/test/testdata/fp_test.go  |    2 +
 .../internal/test/testdata/loadstore_test.go       |    1 +
 src/cmd/compile/internal/typecheck/builtin.go      |    1 +
 src/cmd/compile/internal/typecheck/const.go        |    3 +-
 src/cmd/compile/internal/typecheck/expr.go         |    8 +-
 src/cmd/compile/internal/typecheck/iexport.go      |    2 +-
 src/cmd/compile/internal/typecheck/mkbuiltin.go    |    1 +
 src/cmd/compile/internal/typecheck/syms.go         |    3 +-
 src/cmd/compile/internal/typecheck/typecheck.go    |   12 +-
 src/cmd/compile/internal/types/type.go             |   13 +-
 src/cmd/compile/internal/types2/api.go             |    1 -
 src/cmd/compile/internal/types2/api_test.go        |   12 +
 src/cmd/compile/internal/types2/check_test.go      |    2 +-
 src/cmd/compile/internal/types2/expr.go            |   46 +-
 src/cmd/compile/internal/types2/infer.go           |    8 +-
 src/cmd/compile/internal/types2/lookup.go          |   16 +-
 src/cmd/compile/internal/types2/selection.go       |    7 +-
 src/cmd/compile/internal/types2/sizes.go           |   26 +-
 .../types2/testdata/fixedbugs/issue52031.go        |   33 +
 src/cmd/compile/internal/types2/typeterm.go        |    8 +-
 src/cmd/compile/internal/walk/assign.go            |   78 +-
 src/cmd/compile/internal/walk/builtin.go           |   26 +-
 src/cmd/compile/internal/walk/compare.go           |    6 +-
 src/cmd/compile/internal/walk/expr.go              |    3 +-
 src/cmd/compile/internal/walk/order.go             |   30 +-
 src/cmd/compile/internal/walk/stmt.go              |    4 +-
 src/cmd/compile/internal/walk/switch.go            |  115 +-
 src/cmd/compile/internal/x86/ssa.go                |    6 +-
 src/cmd/cover/cover.go                             |    2 +-
 src/cmd/cover/cover_test.go                        |    4 +-
 src/cmd/cover/doc.go                               |    1 +
 src/cmd/dist/build.go                              |   61 +-
 src/cmd/dist/doc.go                                |   20 +-
 src/cmd/dist/test.go                               |    4 +-
 src/cmd/doc/doc_test.go                            |    6 +
 src/cmd/doc/main.go                                |    5 +
 src/cmd/doc/pkg.go                                 |   23 +-
 src/cmd/fix/cftype.go                              |    8 +-
 src/cmd/fix/doc.go                                 |    3 +-
 src/cmd/fix/egltype.go                             |   16 +-
 src/cmd/fix/jnitype.go                             |    8 +-
 src/cmd/go/alldocs.go                              | 2258 +++++++------
 src/cmd/go/go_test.go                              |    4 +
 src/cmd/go/internal/bug/bug.go                     |    2 +-
 src/cmd/go/internal/cfg/cfg.go                     |    6 +-
 src/cmd/go/internal/clean/clean.go                 |    2 +-
 src/cmd/go/internal/doc/doc.go                     |    2 +-
 src/cmd/go/internal/envcmd/env.go                  |   22 +-
 src/cmd/go/internal/fix/fix.go                     |    2 +-
 src/cmd/go/internal/fmtcmd/fmt.go                  |    2 +-
 src/cmd/go/internal/generate/generate.go           |    6 +-
 src/cmd/go/internal/generate/generate_test.go      |   20 +-
 src/cmd/go/internal/get/get.go                     |    2 +-
 src/cmd/go/internal/help/help.go                   |    2 +-
 src/cmd/go/internal/imports/build.go               |   21 +-
 src/cmd/go/internal/list/list.go                   |    4 +-
 src/cmd/go/internal/load/pkg.go                    |   38 +-
 src/cmd/go/internal/load/test.go                   |    6 +-
 src/cmd/go/internal/lockedfile/lockedfile_plan9.go |    6 +-
 src/cmd/go/internal/lockedfile/lockedfile_test.go  |    1 +
 src/cmd/go/internal/lockedfile/transform_test.go   |    1 +
 src/cmd/go/internal/modcmd/mod.go                  |    2 +-
 src/cmd/go/internal/modget/get.go                  |   10 +-
 src/cmd/go/internal/modload/buildlist.go           |   84 +-
 src/cmd/go/internal/modload/edit.go                |   22 +-
 src/cmd/go/internal/modload/load.go                |   16 +-
 src/cmd/go/internal/modload/query.go               |   28 +-
 src/cmd/go/internal/modload/stat_openfile.go       |    2 +-
 src/cmd/go/internal/robustio/robustio.go           |    6 +-
 src/cmd/go/internal/run/run.go                     |    2 +-
 src/cmd/go/internal/str/path.go                    |    9 +-
 src/cmd/go/internal/str/str.go                     |    2 +
 src/cmd/go/internal/str/str_test.go                |   71 +
 src/cmd/go/internal/test/testflag.go               |    1 +
 src/cmd/go/internal/tool/tool.go                   |    2 +-
 src/cmd/go/internal/version/version.go             |    2 +-
 src/cmd/go/internal/vet/vet.go                     |    2 +-
 src/cmd/go/internal/work/build.go                  |   48 +-
 src/cmd/go/internal/work/exec.go                   |    5 +-
 src/cmd/go/internal/work/security.go               |    2 +-
 src/cmd/go/internal/workcmd/work.go                |    2 +-
 src/cmd/go/script_test.go                          |    4 +-
 src/cmd/go/testdata/script/README                  |    2 +
 src/cmd/go/testdata/script/build_buildvcs_auto.txt |   87 +
 .../go/testdata/script/build_trimpath_goroot.txt   |   45 +-
 src/cmd/go/testdata/script/test_buildvcs.txt       |    2 +
 .../script/test_fuzz_minimize_interesting.txt      |  104 +-
 .../go/testdata/script/version_buildvcs_nested.txt |    2 +-
 src/cmd/gofmt/doc.go                               |    8 +-
 src/cmd/internal/bio/buf_mmap.go                   |   12 +-
 src/cmd/internal/gcprog/gcprog.go                  |    3 +-
 src/cmd/internal/goobj/objfile.go                  |   63 +-
 src/cmd/internal/obj/arm64/asm7.go                 |    2 +-
 src/cmd/internal/obj/arm64/asm_arm64_test.go       |   11 +
 src/cmd/internal/obj/arm64/asm_arm64_test.s        |    7 +
 src/cmd/internal/obj/arm64/doc.go                  |  201 +-
 src/cmd/internal/obj/inl.go                        |   38 +-
 src/cmd/internal/obj/link.go                       |   27 +-
 src/cmd/internal/obj/mips/asm0.go                  |    6 +-
 src/cmd/internal/obj/mips/obj0.go                  |   10 +-
 src/cmd/internal/obj/objfile.go                    |   16 +-
 src/cmd/internal/obj/ppc64/asm9.go                 |    4 +-
 src/cmd/internal/obj/ppc64/doc.go                  |  151 +-
 src/cmd/internal/obj/ppc64/obj9.go                 |    9 +-
 src/cmd/internal/obj/riscv/obj.go                  |   76 +-
 src/cmd/internal/obj/s390x/asmz.go                 |    4 +-
 src/cmd/internal/obj/s390x/objz.go                 |    6 +-
 src/cmd/internal/obj/x86/asm6.go                   |   47 +-
 src/cmd/internal/obj/x86/evex.go                   |    9 +-
 src/cmd/internal/objabi/funcid.go                  |   40 +-
 src/cmd/internal/objabi/symkind.go                 |    1 +
 src/cmd/internal/src/pos.go                        |    6 +-
 src/cmd/internal/sys/arch.go                       |  255 +-
 src/cmd/internal/test2json/test2json.go            |    2 +-
 src/cmd/link/doc.go                                |    4 +-
 src/cmd/link/internal/benchmark/bench.go           |   40 +-
 src/cmd/link/internal/ld/asmb.go                   |   10 +-
 src/cmd/link/internal/ld/data.go                   |   11 +-
 src/cmd/link/internal/ld/deadcode.go               |   15 +-
 src/cmd/link/internal/ld/decodesym.go              |    1 +
 src/cmd/link/internal/ld/dwarf.go                  |    2 +-
 src/cmd/link/internal/ld/dwarf_test.go             |    4 +-
 src/cmd/link/internal/ld/elf.go                    |   53 +-
 src/cmd/link/internal/ld/lib.go                    |  222 --
 src/cmd/link/internal/ld/link.go                   |   18 -
 src/cmd/link/internal/ld/main.go                   |    5 +-
 src/cmd/link/internal/ld/outbuf.go                 |   44 +-
 src/cmd/link/internal/ld/outbuf_darwin.go          |    1 +
 src/cmd/link/internal/ld/pcln.go                   |   24 +-
 src/cmd/link/internal/ld/stackcheck.go             |  421 +++
 src/cmd/link/internal/ld/stackcheck_test.go        |   89 +
 src/cmd/link/internal/ld/symtab.go                 |    2 +-
 .../link/internal/ld/testdata/stackcheck/main.go   |   20 +
 .../link/internal/ld/testdata/stackcheck/main.s    |   40 +
 src/cmd/link/internal/ld/xcoff.go                  |    4 +-
 src/cmd/link/internal/loader/loader.go             |   55 +-
 src/cmd/link/internal/ppc64/asm.go                 |   51 +-
 src/cmd/link/internal/sym/symkind.go               |    1 +
 src/cmd/link/link_test.go                          |   98 +-
 src/cmd/nm/doc.go                                  |    2 +-
 src/cmd/pack/doc.go                                |    3 +-
 src/cmd/test2json/main.go                          |    3 +-
 src/cmd/trace/annotations_test.go                  |    6 +-
 src/cmd/trace/doc.go                               |   20 +-
 src/cmd/vet/doc.go                                 |   52 +-
 src/compress/bzip2/bzip2.go                        |    4 +-
 src/compress/flate/dict_decoder.go                 |   24 +-
 src/compress/flate/huffman_bit_writer.go           |   12 +-
 src/compress/lzw/reader.go                         |    4 +-
 src/container/heap/heap.go                         |    1 -
 src/container/list/list.go                         |    2 +-
 src/context/context.go                             |   16 +-
 src/crypto/aes/asm_ppc64le.s                       |  321 +-
 src/crypto/aes/cbc_ppc64le.go                      |    6 +-
 src/crypto/aes/cbc_s390x.go                        |    1 +
 src/crypto/aes/cipher_ppc64le.go                   |   43 +-
 src/crypto/aes/cipher_s390x.go                     |    1 +
 src/crypto/aes/ctr_s390x.go                        |    1 +
 src/crypto/aes/gcm_s390x.go                        |    3 +
 src/crypto/cipher/gcm.go                           |    9 +-
 src/crypto/crypto.go                               |   14 +-
 src/crypto/ecdsa/ecdsa_s390x.go                    |    1 +
 src/crypto/ed25519/internal/edwards25519/doc.go    |    2 +-
 .../internal/edwards25519/field/fe_alias_test.go   |    4 +-
 .../internal/edwards25519/field/fe_amd64.go        |    2 +
 src/crypto/ed25519/internal/edwards25519/scalar.go |   22 +-
 src/crypto/elliptic/elliptic_test.go               |    4 +-
 src/crypto/elliptic/fuzz_test.go                   |   53 -
 src/crypto/elliptic/internal/fiat/p224_fiat64.go   |  123 +-
 src/crypto/elliptic/internal/fiat/p384_fiat64.go   |  123 +-
 src/crypto/elliptic/internal/fiat/p521_fiat64.go   |  123 +-
 src/crypto/elliptic/p256.go                        |   50 +-
 src/crypto/elliptic/p256_asm.go                    |   12 +
 src/crypto/rand/rand_batched_test.go               |   50 +-
 src/crypto/rand/rand_dragonfly.go                  |    9 -
 src/crypto/rand/rand_freebsd.go                    |    9 -
 src/crypto/rand/rand_getentropy.go                 |   20 +-
 .../rand/{rand_batched.go => rand_getrandom.go}    |   40 +-
 src/crypto/rand/rand_linux.go                      |   14 -
 src/crypto/rand/rand_solaris.go                    |   10 -
 src/crypto/rand/rand_unix.go                       |   57 +-
 src/crypto/rsa/pkcs1v15.go                         |   14 +-
 src/crypto/rsa/pkcs1v15_test.go                    |    3 +-
 src/crypto/subtle/constant_time.go                 |    3 +-
 src/crypto/tls/cipher_suites.go                    |   54 +-
 src/crypto/tls/conn.go                             |    6 +-
 src/crypto/tls/handshake_client_test.go            |    2 +-
 src/crypto/tls/handshake_server_test.go            |    2 +-
 src/crypto/x509/cert_pool.go                       |    8 +-
 src/crypto/x509/cert_pool_test.go                  |  124 +-
 src/crypto/x509/internal/macos/corefoundation.go   |    1 +
 src/crypto/x509/internal/macos/security.go         |    1 +
 src/crypto/x509/parser.go                          |  225 +-
 src/crypto/x509/pkcs8_test.go                      |   15 +-
 src/crypto/x509/pkix/pkix.go                       |   18 +-
 src/crypto/x509/root.go                            |    1 +
 src/crypto/x509/sec1.go                            |    6 +-
 src/crypto/x509/verify.go                          |  208 +-
 src/crypto/x509/verify_test.go                     |  449 +++
 src/crypto/x509/x509.go                            |  183 +-
 src/crypto/x509/x509_test.go                       |  315 +-
 src/database/sql/driver/driver.go                  |   32 +-
 src/database/sql/driver/types.go                   |   30 +-
 src/database/sql/fakedb_test.go                    |   21 +-
 src/database/sql/sql.go                            |   82 +-
 src/debug/dwarf/entry.go                           |   35 +-
 src/debug/dwarf/line.go                            |    2 +-
 src/debug/dwarf/line_test.go                       |   29 +
 src/debug/dwarf/type.go                            |    2 +-
 src/debug/pe/string.go                             |   25 +-
 src/embed/embed.go                                 |    9 +-
 src/encoding/asn1/asn1.go                          |    2 +-
 src/encoding/base32/base32.go                      |    2 +-
 src/encoding/binary/varint.go                      |   32 +-
 src/encoding/binary/varint_test.go                 |   12 +
 src/encoding/gob/debug.go                          |   28 +
 src/encoding/gob/decoder.go                        |    2 +
 src/encoding/gob/doc.go                            |    6 +-
 src/encoding/json/decode.go                        |    2 +-
 src/encoding/json/encode.go                        |   30 +-
 src/encoding/json/fold.go                          |    5 +-
 src/encoding/pem/pem.go                            |  182 +-
 src/encoding/pem/pem_test.go                       |   28 +-
 src/encoding/xml/marshal.go                        |   60 +-
 src/encoding/xml/read.go                           |   88 +-
 src/expvar/expvar.go                               |    2 +-
 src/flag/flag.go                                   |   23 +-
 src/fmt/doc.go                                     |   48 +-
 src/fmt/print.go                                   |    2 +-
 src/go/ast/ast.go                                  |    6 +-
 src/go/ast/ast_test.go                             |    3 +
 src/go/build/build.go                              |   23 +-
 src/go/build/deps_test.go                          |   16 +-
 src/go/build/doc.go                                |    9 +-
 src/go/build/read.go                               |    2 +-
 src/go/constant/value.go                           |   33 +-
 src/go/doc/comment.go                              |  543 +--
 src/go/doc/comment/html.go                         |  169 +
 src/go/doc/comment/markdown.go                     |  188 ++
 src/go/doc/comment/mkstd.sh                        |   24 +
 src/go/doc/comment/old_test.go                     |   80 +
 src/go/doc/comment/parse.go                        | 1151 +++++++
 src/go/doc/comment/parse_test.go                   |   12 +
 src/go/doc/comment/print.go                        |  290 ++
 src/go/doc/comment/std.go                          |   44 +
 src/go/doc/comment/std_test.go                     |   35 +
 src/go/doc/comment/testdata/README.md              |   42 +
 src/go/doc/comment/testdata/blank.txt              |   12 +
 src/go/doc/comment/testdata/code.txt               |   94 +
 src/go/doc/comment/testdata/code2.txt              |   31 +
 src/go/doc/comment/testdata/code3.txt              |   33 +
 src/go/doc/comment/testdata/doclink.txt            |   21 +
 src/go/doc/comment/testdata/doclink2.txt           |    8 +
 src/go/doc/comment/testdata/doclink3.txt           |    8 +
 src/go/doc/comment/testdata/doclink4.txt           |    7 +
 src/go/doc/comment/testdata/doclink5.txt           |    5 +
 src/go/doc/comment/testdata/doclink6.txt           |    5 +
 src/go/doc/comment/testdata/doclink7.txt           |    4 +
 src/go/doc/comment/testdata/escape.txt             |   55 +
 src/go/doc/comment/testdata/head.txt               |   92 +
 src/go/doc/comment/testdata/head2.txt              |   36 +
 src/go/doc/comment/testdata/head3.txt              |    7 +
 src/go/doc/comment/testdata/hello.txt              |   35 +
 src/go/doc/comment/testdata/link.txt               |   17 +
 src/go/doc/comment/testdata/link2.txt              |   31 +
 src/go/doc/comment/testdata/link3.txt              |   14 +
 src/go/doc/comment/testdata/link4.txt              |   77 +
 src/go/doc/comment/testdata/link5.txt              |   36 +
 src/go/doc/comment/testdata/link6.txt              |   50 +
 src/go/doc/comment/testdata/link7.txt              |   25 +
 src/go/doc/comment/testdata/list.txt               |   48 +
 src/go/doc/comment/testdata/list2.txt              |   57 +
 src/go/doc/comment/testdata/list3.txt              |   32 +
 src/go/doc/comment/testdata/list4.txt              |   38 +
 src/go/doc/comment/testdata/list5.txt              |   40 +
 src/go/doc/comment/testdata/list6.txt              |  129 +
 src/go/doc/comment/testdata/list7.txt              |   98 +
 src/go/doc/comment/testdata/list8.txt              |   56 +
 src/go/doc/comment/testdata/para.txt               |   17 +
 src/go/doc/comment/testdata/quote.txt              |   12 +
 src/go/doc/comment/testdata/text.txt               |   62 +
 src/go/doc/comment/testdata/text2.txt              |   14 +
 src/go/doc/comment/testdata/text3.txt              |   28 +
 src/go/doc/comment/testdata/text4.txt              |   29 +
 src/go/doc/comment/testdata/text5.txt              |   38 +
 src/go/doc/comment/testdata/text6.txt              |   18 +
 src/go/doc/comment/testdata/text7.txt              |   21 +
 src/go/doc/comment/testdata/text8.txt              |   94 +
 src/go/doc/comment/testdata/text9.txt              |   12 +
 src/go/doc/comment/testdata/words.txt              |   10 +
 src/go/doc/comment/testdata_test.go                |  202 ++
 src/go/doc/comment/text.go                         |  338 ++
 src/go/doc/comment/wrap_test.go                    |  141 +
 src/go/doc/comment_test.go                         |  274 +-
 src/go/doc/doc.go                                  |  132 +-
 src/go/doc/doc_test.go                             |    9 -
 src/go/doc/example.go                              |    8 +-
 src/go/doc/reader.go                               |   95 +-
 src/go/doc/synopsis.go                             |   91 +-
 src/go/doc/synopsis_test.go                        |   14 +-
 src/go/doc/testdata/pkgdoc/doc.go                  |   19 +
 src/go/doc/testdata/testing.go                     |    2 +-
 src/go/format/benchmark_test.go                    |   21 +-
 src/go/internal/gccgoimporter/parser.go            |   26 +-
 src/go/parser/parser.go                            |    1 -
 src/go/printer/comment.go                          |  154 +
 src/go/printer/nodes.go                            |   56 +-
 src/go/printer/printer.go                          |   19 +-
 src/go/printer/printer_test.go                     |    4 +-
 src/go/printer/testdata/comments.golden            |   17 +-
 src/go/printer/testdata/comments.input             |   24 +-
 src/go/printer/testdata/comments.x                 |    1 -
 src/go/printer/testdata/comments2.golden           |    1 -
 src/go/printer/testdata/doc.golden                 |   21 +
 src/go/printer/testdata/doc.input                  |   20 +
 src/go/scanner/scanner.go                          |    1 -
 src/go/token/token.go                              |    1 -
 src/go/types/api.go                                |    1 -
 src/go/types/check_test.go                         |    2 +-
 src/go/types/gotype.go                             |    4 +-
 src/go/types/infer.go                              |   10 +-
 src/go/types/lookup.go                             |   16 +-
 src/go/types/selection.go                          |    7 +-
 src/go/types/sizes.go                              |   26 +-
 src/go/types/typeterm.go                           |    8 +-
 src/hash/adler32/adler32.go                        |    1 +
 src/hash/crc32/crc32_amd64.go                      |    3 +
 src/hash/crc32/crc32_ppc64le.go                    |    1 +
 src/hash/crc32/crc32_s390x.go                      |    2 +
 src/hash/maphash/maphash.go                        |   55 +-
 src/hash/maphash/maphash_test.go                   |   60 +-
 src/html/template/context.go                       |    4 +-
 src/html/template/doc.go                           |  132 +-
 src/html/template/error.go                         |   17 +-
 src/html/template/escape.go                        |   12 +-
 src/html/template/html.go                          |   10 +-
 src/html/template/template.go                      |    2 +
 src/html/template/url.go                           |   18 +-
 src/image/draw/draw.go                             |   59 +-
 src/image/draw/draw_test.go                        |   64 +
 src/image/image.go                                 |    2 +
 src/image/jpeg/writer.go                           |   28 +-
 src/image/png/reader.go                            |    4 +-
 src/image/ycbcr.go                                 |    1 +
 src/index/suffixarray/suffixarray.go               |    1 -
 src/internal/bytealg/indexbyte_ppc64x.s            |   87 +-
 src/internal/fmtsort/sort.go                       |   24 +-
 src/internal/goarch/goarch.go                      |    1 +
 src/internal/goos/goos.go                          |    1 +
 src/internal/intern/intern.go                      |    1 +
 src/internal/nettrace/nettrace.go                  |    3 +-
 src/internal/poll/fcntl_libc.go                    |    1 +
 src/internal/poll/fd_opendir_darwin.go             |    1 +
 src/internal/poll/fd_poll_runtime.go               |    1 +
 src/internal/poll/fd_writev_darwin.go              |    1 +
 src/internal/poll/sendfile_solaris.go              |    1 +
 src/internal/profile/legacy_profile.go             |   30 +-
 src/internal/reflectlite/export_test.go            |    2 +
 src/internal/reflectlite/type.go                   |    3 +-
 src/internal/reflectlite/value.go                  |    1 +
 src/internal/syscall/unix/nonblocking_libc.go      |    1 +
 src/internal/syscall/windows/registry/key.go       |    1 -
 src/internal/testenv/testenv.go                    |    8 +-
 src/internal/txtar/archive.go                      |    8 +-
 src/io/ioutil/ioutil.go                            |   11 +
 src/log/log.go                                     |   11 +-
 src/log/syslog/doc.go                              |    2 +-
 src/make.bash                                      |    8 +-
 src/make.bat                                       |    6 +-
 src/make.rc                                        |    6 +-
 src/math/abs.go                                    |    1 +
 src/math/acosh.go                                  |    1 +
 src/math/asin.go                                   |    2 +
 src/math/asinh.go                                  |    1 +
 src/math/atan.go                                   |    5 +-
 src/math/atan2.go                                  |    1 +
 src/math/atanh.go                                  |    1 +
 src/math/big/arith_ppc64x.s                        |  154 +-
 src/math/big/example_rat_test.go                   |    9 +-
 src/math/big/float.go                              |    8 +-
 src/math/big/floatconv.go                          |   24 +-
 src/math/big/int.go                                |   52 +-
 src/math/big/intconv.go                            |    4 +-
 src/math/big/nat.go                                |    2 +-
 src/math/big/natconv.go                            |   23 +-
 src/math/big/rat.go                                |    6 +-
 src/math/big/ratconv.go                            |   16 +-
 src/math/big/sqrt.go                               |    4 +-
 src/math/bits.go                                   |    4 +-
 src/math/cbrt.go                                   |    1 +
 src/math/cmplx/isnan.go                            |    2 +-
 src/math/cmplx/pow.go                              |    1 +
 src/math/copysign.go                               |   10 +-
 src/math/dim.go                                    |    3 +
 src/math/erf.go                                    |    2 +
 src/math/erfinv.go                                 |    2 +
 src/math/exp.go                                    |    2 +
 src/math/expm1.go                                  |    2 +
 src/math/floor.go                                  |    5 +
 src/math/frexp.go                                  |    1 +
 src/math/gamma.go                                  |    1 +
 src/math/hypot.go                                  |    1 +
 src/math/j0.go                                     |    2 +
 src/math/j1.go                                     |    2 +
 src/math/jn.go                                     |    2 +
 src/math/ldexp.go                                  |    1 +
 src/math/lgamma.go                                 |    1 +
 src/math/log.go                                    |    1 +
 src/math/log1p.go                                  |    1 +
 src/math/logb.go                                   |    2 +
 src/math/mod.go                                    |    1 +
 src/math/modf.go                                   |    1 +
 src/math/nextafter.go                              |    2 +
 src/math/pow.go                                    |    1 +
 src/math/pow10.go                                  |    1 +
 src/math/rand/exp.go                               |    2 +-
 src/math/rand/normal.go                            |    2 +-
 src/math/rand/rand.go                              |    4 +-
 src/math/remainder.go                              |    1 +
 src/math/sin.go                                    |    2 +
 src/math/sincos.go                                 |    1 +
 src/math/sinh.go                                   |    2 +
 src/math/sqrt.go                                   |    1 +
 src/math/tan.go                                    |    1 +
 src/math/tanh.go                                   |    1 +
 src/math/trig_reduce.go                            |    2 +
 src/mime/multipart/multipart.go                    |    3 +-
 src/mime/testdata/test.types.globs2                |    2 +
 src/mime/type.go                                   |   10 +-
 src/mime/type_unix.go                              |    6 +-
 src/mime/type_unix_test.go                         |    2 +
 src/net/cgo_unix.go                                |   12 +-
 src/net/conf.go                                    |   16 +-
 src/net/dial.go                                    |    3 +
 src/net/fcntl_libc_test.go                         |    1 +
 src/net/http/cgi/host.go                           |    9 +-
 src/net/http/client.go                             |   46 +-
 src/net/http/cookie.go                             |   12 +-
 src/net/http/cookiejar/jar.go                      |    6 +-
 src/net/http/cookiejar/jar_test.go                 |   19 +-
 src/net/http/doc.go                                |    1 -
 src/net/http/fcgi/fcgi_test.go                     |    8 +-
 src/net/http/filetransport.go                      |   10 +-
 src/net/http/fs.go                                 |    2 +-
 src/net/http/h2_bundle.go                          |   18 +-
 src/net/http/httptest/recorder.go                  |   24 +-
 src/net/http/httptest/recorder_test.go             |    3 +-
 src/net/http/httptest/server.go                    |    2 +
 src/net/http/internal/chunked.go                   |    9 +-
 src/net/http/pprof/pprof.go                        |    8 +-
 src/net/http/request.go                            |   10 +-
 src/net/http/request_test.go                       |   14 +-
 src/net/http/response.go                           |   26 +-
 src/net/http/serve_test.go                         |   28 +-
 src/net/http/server.go                             |   15 +-
 src/net/http/status.go                             |  198 +-
 src/net/http/transfer.go                           |    9 +-
 src/net/http/transfer_test.go                      |    2 +-
 src/net/http/transport_test.go                     |   15 +-
 src/net/ipsock_posix.go                            |   38 +-
 src/net/mac.go                                     |    1 +
 src/net/mail/message.go                            |   12 +-
 src/net/net.go                                     |    3 +-
 src/net/netip/slow_test.go                         |   36 +-
 src/net/rpc/server.go                              |   19 +-
 src/net/smtp/smtp.go                               |    4 +-
 src/net/sock_linux.go                              |    4 +-
 src/net/textproto/reader.go                        |   26 +-
 src/net/textproto/reader_test.go                   |   29 +
 src/net/textproto/textproto.go                     |    1 -
 src/net/url/url.go                                 |   42 +-
 src/net/url/url_test.go                            |   25 +
 src/os/file.go                                     |    1 -
 src/os/file_plan9.go                               |    2 +-
 src/os/file_unix.go                                |    2 +-
 src/os/file_windows.go                             |    9 +-
 src/os/pipe_test.go                                |    1 +
 src/os/rawconn_test.go                             |    1 +
 src/os/signal/doc.go                               |   17 +-
 src/os/signal/signal_test.go                       |   14 +-
 src/os/stat_solaris.go                             |   10 +
 src/path/filepath/path.go                          |   18 +-
 src/path/filepath/path_windows_test.go             |   16 +-
 src/path/filepath/symlink_windows.go               |   11 +-
 src/path/path.go                                   |   16 +-
 src/plugin/plugin_dlopen.go                        |    1 +
 src/reflect/abi_test.go                            |    1 +
 src/reflect/all_test.go                            |   14 +-
 src/reflect/deepequal.go                           |    2 +-
 src/reflect/makefunc.go                            |    7 +-
 src/reflect/type.go                                |    1 +
 src/reflect/value.go                               |   37 +-
 src/reflect/visiblefields_test.go                  |    2 +-
 src/regexp/exec_test.go                            |    4 +-
 src/regexp/regexp.go                               |   18 +-
 src/regexp/syntax/doc.go                           |  185 +-
 src/regexp/syntax/parse.go                         |   11 +-
 src/regexp/syntax/prog.go                          |    2 +-
 src/run.bash                                       |    7 +-
 src/run.bat                                        |   27 +-
 src/run.rc                                         |    6 +-
 src/runtime/asan.go                                |    1 +
 src/runtime/callers_test.go                        |   30 +
 src/runtime/cgo/callbacks.go                       |    1 +
 src/runtime/cgo/callbacks_aix.go                   |    1 +
 src/runtime/cgo/openbsd.go                         |    1 +
 src/runtime/cgo_mmap.go                            |    3 +
 src/runtime/cgo_ppc64x.go                          |    1 +
 src/runtime/cgo_sigaction.go                       |    2 +
 src/runtime/cgocall.go                             |    4 +
 src/runtime/cgocheck.go                            |    5 +
 src/runtime/chan.go                                |   43 +-
 src/runtime/chan_test.go                           |   15 +
 src/runtime/cpuprof.go                             |    2 +
 src/runtime/crash_test.go                          |   44 +
 src/runtime/debug.go                               |    5 +-
 src/runtime/debug/garbage.go                       |    4 +-
 src/runtime/debug/heapdump_test.go                 |   26 +
 src/runtime/env_plan9.go                           |    4 +
 src/runtime/env_posix.go                           |    2 +
 src/runtime/error.go                               |    3 +-
 src/runtime/export_test.go                         |    1 +
 src/runtime/extern.go                              |   22 +-
 src/runtime/float.go                               |    3 +-
 src/runtime/histogram.go                           |    1 +
 src/runtime/internal/atomic/atomic_386.go          |    1 +
 src/runtime/internal/atomic/atomic_amd64.go        |    1 +
 src/runtime/internal/atomic/atomic_arm.go          |    2 +
 src/runtime/internal/atomic/atomic_mipsx.go        |    1 +
 src/runtime/internal/atomic/atomic_s390x.go        |    1 +
 src/runtime/internal/atomic/atomic_wasm.go         |    1 +
 src/runtime/lock_futex.go                          |    1 +
 src/runtime/lock_sema.go                           |    3 +-
 src/runtime/lockrank_off.go                        |    2 +
 src/runtime/lockrank_on.go                         |   11 +
 src/runtime/malloc.go                              |    2 +
 src/runtime/map_test.go                            |    5 +-
 src/runtime/mbarrier.go                            |    1 +
 src/runtime/mbitmap.go                             |   15 +-
 src/runtime/mem_aix.go                             |    2 +
 src/runtime/mem_bsd.go                             |    2 +
 src/runtime/mem_darwin.go                          |    2 +
 src/runtime/mem_js.go                              |    2 +
 src/runtime/mem_linux.go                           |    2 +
 src/runtime/mem_windows.go                         |    2 +
 src/runtime/memclr_ppc64x.s                        |   83 +-
 src/runtime/memclr_riscv64.s                       |   30 +-
 src/runtime/memmove_amd64.s                        |    4 +-
 src/runtime/memmove_ppc64x.s                       |   56 +-
 src/runtime/memmove_riscv64.s                      |   54 +-
 src/runtime/metrics/doc.go                         |    8 +-
 src/runtime/mfinal.go                              |   22 +-
 src/runtime/mgc.go                                 |    2 +-
 src/runtime/mgcmark.go                             |    3 +
 src/runtime/mgcstack.go                            |    1 +
 src/runtime/mgcsweep.go                            |    3 +-
 src/runtime/mgcwork.go                             |   16 +-
 src/runtime/mheap.go                               |   17 +-
 src/runtime/mpagealloc_64bit.go                    |    3 +-
 src/runtime/msan.go                                |    1 +
 src/runtime/mstats.go                              |    3 +
 src/runtime/mwbbuf.go                              |   10 +-
 src/runtime/netpoll.go                             |   24 +-
 src/runtime/netpoll_aix.go                         |    1 +
 src/runtime/norace_linux_test.go                   |    1 +
 src/runtime/norace_test.go                         |    1 +
 src/runtime/os2_aix.go                             |    1 +
 src/runtime/os3_solaris.go                         |    2 +
 src/runtime/os_aix.go                              |    2 +
 src/runtime/os_darwin.go                           |    4 +
 src/runtime/os_dragonfly.go                        |    3 +
 src/runtime/os_freebsd.go                          |    7 +
 src/runtime/os_js.go                               |    1 +
 src/runtime/os_linux.go                            |   11 +
 src/runtime/os_netbsd.go                           |    4 +
 src/runtime/os_openbsd.go                          |    2 +
 src/runtime/os_openbsd_libc.go                     |    1 +
 src/runtime/os_openbsd_syscall.go                  |    1 +
 src/runtime/os_openbsd_syscall2.go                 |    1 +
 src/runtime/os_plan9.go                            |    2 +
 src/runtime/os_windows.go                          |    5 +
 src/runtime/panic.go                               |   12 +-
 src/runtime/pprof/pprof.go                         |   64 +-
 src/runtime/pprof/pprof_test.go                    |    1 +
 src/runtime/pprof/proto.go                         |   14 +-
 src/runtime/proc.go                                |   46 +-
 src/runtime/proc_test.go                           |    1 +
 src/runtime/race.go                                |    4 +
 src/runtime/runtime1.go                            |    8 +
 src/runtime/runtime2.go                            |    3 +
 src/runtime/runtime_test.go                        |    1 +
 src/runtime/sema.go                                |    4 +
 src/runtime/signal_unix.go                         |   20 +
 src/runtime/sigqueue.go                            |    7 +
 src/runtime/sigqueue_plan9.go                      |    5 +
 src/runtime/stack.go                               |    4 +-
 src/runtime/string.go                              |    9 +-
 src/runtime/stubs.go                               |    5 +
 src/runtime/stubs2.go                              |    1 +
 src/runtime/stubs_linux.go                         |    1 +
 src/runtime/stubs_ppc64.go                         |    1 +
 src/runtime/symtab.go                              |    3 +
 src/runtime/symtab_test.go                         |   17 +-
 src/runtime/sys_darwin.go                          |    5 +-
 src/runtime/sys_libc.go                            |    1 +
 src/runtime/sys_openbsd2.go                        |    2 +
 src/runtime/syscall_aix.go                         |    2 +
 src/runtime/syscall_solaris.go                     |    2 +
 src/runtime/syscall_windows.go                     |    1 +
 src/runtime/syscall_windows_test.go                |    1 +
 src/runtime/testdata/testprog/crash.go             |   73 +
 src/runtime/testdata/testprogcgo/dropm_stub.go     |    1 +
 src/runtime/testdata/testprogcgo/eintr.go          |    1 +
 src/runtime/time.go                                |   11 +-
 src/runtime/time_fake.go                           |    1 +
 src/runtime/trace/annotation.go                    |   16 +-
 src/runtime/trace/trace.go                         |   65 +-
 src/runtime/type.go                                |   10 +-
 src/runtime/vdso_linux.go                          |    1 +
 src/runtime/vlrt.go                                |   11 +-
 src/sort/example_multi_test.go                     |    2 +-
 src/sort/export_test.go                            |    4 +
 src/sort/gen_sort_variants.go                      |  391 ++-
 src/sort/search.go                                 |   41 +
 src/sort/search_test.go                            |  106 +
 src/sort/slice.go                                  |    5 +-
 src/sort/sort.go                                   |   37 +-
 src/sort/sort_test.go                              |   70 +
 src/sort/zsortfunc.go                              |  371 ++-
 src/sort/zsortinterface.go                         |  371 ++-
 src/strconv/atof.go                                |    2 +
 src/strconv/doc.go                                 |    5 +-
 src/strconv/eisel_lemire.go                        |    4 +-
 src/strconv/ftoaryu.go                             |   10 +-
 src/strconv/quote.go                               |    8 +-
 src/strings/builder.go                             |    1 +
 src/strings/replace.go                             |   16 +-
 src/strings/strings.go                             |   16 +-
 src/sync/atomic/atomic_test.go                     |    3 +-
 src/sync/cond.go                                   |   12 +-
 src/sync/once.go                                   |    7 +-
 src/sync/pool_test.go                              |    1 +
 src/syscall/dir_plan9.go                           |    1 +
 src/syscall/exec_bsd.go                            |    1 +
 src/syscall/exec_freebsd.go                        |    1 +
 src/syscall/exec_libc.go                           |    1 +
 src/syscall/exec_libc2.go                          |    1 +
 src/syscall/exec_linux.go                          |    1 +
 src/syscall/exec_plan9.go                          |    4 +
 src/syscall/exec_windows.go                        |   10 +-
 src/syscall/js/js.go                               |   20 +-
 src/syscall/syscall.go                             |    1 -
 src/syscall/syscall_js.go                          |    1 +
 src/syscall/syscall_linux.go                       |    6 +-
 src/syscall/syscall_unix.go                        |    1 +
 src/testing/fuzz.go                                |    2 +-
 src/testing/quick/quick.go                         |   18 +-
 src/testing/testing.go                             |  272 +-
 src/text/template/funcs.go                         |    2 +
 src/text/template/helper.go                        |    1 +
 src/text/template/option.go                        |    1 +
 src/text/template/parse/lex.go                     |   24 +-
 src/text/template/parse/lex_test.go                |   16 +
 src/text/template/parse/parse.go                   |   30 +
 src/time/format.go                                 |    8 +
 src/time/sleep.go                                  |   14 +-
 src/time/tick.go                                   |    2 +-
 src/time/time.go                                   |    9 +-
 src/time/tzdata/tzdata.go                          |    1 +
 src/time/zoneinfo.go                               |    8 +-
 src/unicode/graphic.go                             |    2 +
 src/unicode/letter.go                              |    3 +
 src/unsafe/unsafe.go                               |    9 +-
 test/codegen/bmi.go                                |   46 +-
 test/codegen/memcombine.go                         |  102 +-
 test/codegen/switch.go                             |   50 +
 test/fixedbugs/issue52127.go                       |   62 +
 test/fixedbugs/issue52278.go                       |   12 +
 test/inline.go                                     |   45 +
 test/nosplit.go                                    |   45 +-
 test/run.go                                        |   51 +-
 test/shift3.go                                     |   41 +
 test/typeparam/issue51700.go                       |   26 +
 test/typeparam/issue52124.go                       |    6 +
 test/typeparam/issue52228.go                       |   30 +
 801 files changed, 20788 insertions(+), 7251 deletions(-)

diff --cc src/crypto/rand/rand_unix.go
index c9eb7d992d,2dd4158888..0b137e131f
--- a/src/crypto/rand/rand_unix.go
+++ b/src/crypto/rand/rand_unix.go
@@@ -48,8 -88,10 +94,11 @@@ func warnBlocked() 
  }
  
  func (r *reader) Read(b []byte) (n int, err error) {
 +	boring.Unreachable()
- 	if atomic.CompareAndSwapInt32(&r.used, 0, 1) {
+ 	r.mu.Lock()
+ 	defer r.mu.Unlock()
+ 	if !r.used {
+ 		r.used = true
  		// First use of randomness. Start timer to warn about
  		// being blocked on entropy not being available.
  		t := time.AfterFunc(time.Minute, warnBlocked)
