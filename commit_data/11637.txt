commit cb0de68a089fd2b05bcf87c4f487b30b96392b5e
Author: Kyle Lemons <kyle@kylelemons.net>
Date:   Mon Feb 6 14:10:03 2012 +1100

                cmd/go: build: print import errors when invoked on files
    
          This fix makes the goFilesPackage helper function print the errors from
          package imports and exit similar to how the packagesForBuild function does.
    
          Without this change, when invoking "go build *.go" with, for example,
          an old import path, the following stack trace is generated:
    
          panic: runtime error: invalid memory address or nil pointer dereference
    
          goroutine 1 [running]:
          go/build.(*Tree).PkgDir(...)
                  /opt/go/src/pkg/go/build/path.go:52 +0xfb
          main.(*builder).action(...)
                  /opt/go/src/cmd/go/build.go:327 +0xb8
          main.(*builder).action(...)
                  /opt/go/src/cmd/go/build.go:335 +0x208
          main.runBuild(...)
                  /opt/go/src/cmd/go/build.go:129 +0x386
          main.main()
                  /opt/go/src/cmd/go/main.go:126 +0x2d8
    
    Fixes #2865.
    
    R=rsc, dvyukov, r
    CC=golang-dev
    https://golang.org/cl/5624052

 src/cmd/go/build.go | 12 ++++++++++++
 1 file changed, 12 insertions(+)
