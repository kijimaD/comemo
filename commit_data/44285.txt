commit 60cbff6f1906ec1bbc939acfb7cc97b18e639ce9
Author: Roland Shoemaker <rolandshoemaker@gmail.com>
Date:   Mon May 11 16:21:54 2020 -0700

    crypto/x509: match cgo and Apple behavior in domain fallback of macOS roots
    
    This change makes the direct call darwin loadSystemRoots implementation
    match the existing cgo implementation, which in turn _mostly_ matches
    the Apple implementation. The main change here is that when
    SecTrustSettingsCopyTrustSettings the error is ignored, and can either
    cause a fallback to check admin trust settings, or cause the
    certificate to be marked kSecTrustSettingsResultUnspecified.
    
    As well as updating the implementation to match the cgo one, this
    change also updates the documentation of how the fallbacks work and
    how they match the Apple implementations. References are made to the
    Apple source where appropriate. This change does not update the
    existing comments in the cgo implementation, since the goal is to
    delete that code once the direct call implementation is matured.
    
    Updates #38888
    
    Change-Id: Id0344ea9d2eede3b715f341e9cbd3c1c661b7a90
    Reviewed-on: https://go-review.googlesource.com/c/go/+/233360
    Run-TryBot: Filippo Valsorda <filippo@golang.org>
    Reviewed-by: Filippo Valsorda <filippo@golang.org>

 src/crypto/x509/root_darwin_amd64.go | 41 ++++++++++++++++++++++++++----------
 1 file changed, 30 insertions(+), 11 deletions(-)
