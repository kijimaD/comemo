commit 2db587c0297224b9c525da0ed452502a4d2e0345
Author: Hajime Hoshi <hajimehoshi@gmail.com>
Date:   Sun May 10 04:22:11 2015 +0900

    encoding/xml: Reset the parent stack before printing a chardata or comment field in a struct
    
    This CL resets the parent stack when printing a character or comment field struct.
    In the case of XML elements, the previous parents stack must be considered. However,
    charadata or comment fields can't be printed in other fields so it seems required to reset
    the parent stack each time a chardata or comment field is printed.
    
    Fixes #5072
    
    Change-Id: I84f61c9bfce94133cd0c076c11211b9be5b4b1ac
    Reviewed-on: https://go-review.googlesource.com/9910
    Reviewed-by: Nigel Tao <nigeltao@golang.org>
    Reviewed-by: roger peppe <rogpeppe@gmail.com>

 src/encoding/xml/marshal.go      |  6 ++++++
 src/encoding/xml/marshal_test.go | 18 ++++++++++++++++++
 2 files changed, 24 insertions(+)
