commit da1bea0ef0355482e78b8dc0f3cf2f992a8464d7
Author: Russ Cox <rsc@golang.org>
Date:   Thu Mar 6 18:34:29 2014 -0500

    runtime: fix malloc page alignment + efence
    
    Two memory allocator bug fixes.
    
    - efence is not maintaining the proper heap metadata
      to make eventual memory reuse safe, so use SysFault.
    
    - now that our heap PageSize is 8k but most hardware
      uses 4k pages, SysAlloc and SysReserve results must be
      explicitly aligned. Do that in a few more call sites and
      document this fact in malloc.h.
    
    Fixes #7448.
    
    LGTM=iant
    R=golang-codereviews, josharian, iant
    CC=dvyukov, golang-codereviews
    https://golang.org/cl/71750048

 src/pkg/runtime/malloc.goc | 82 +++++++++++++++++++++++++++++++++-------------
 src/pkg/runtime/malloc.h   |  6 ++++
 src/pkg/runtime/mgc0.c     |  3 +-
 3 files changed, 68 insertions(+), 23 deletions(-)
