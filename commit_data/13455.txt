commit eeffa738a912a8c4d283c37d84628b64ecc1b98f
Author: Adam Langley <agl@golang.org>
Date:   Tue Jul 10 18:23:30 2012 -0400

    encoding/asn1: promote untyped strings to UTF8 as needed.
    
    Previously, strings that didn't have an explicit ASN.1 string type
    were taken to be ASN.1 PrintableStrings. This resulted in an error if
    a unrepresentable charactor was included.
    
    For compatibility reasons, I'm too afraid to switch the default string
    type to UTF8String, but this patch causes untyped strings to become
    UTF8Strings if they contain a charactor that's not valid in a
    PrintableString.
    
    Fixes #3791.
    
    R=golang-dev, bradfitz, r, r
    CC=golang-dev
    https://golang.org/cl/6348074

 src/pkg/crypto/x509/x509_test.go      |  2 +-
 src/pkg/encoding/asn1/common.go       |  2 ++
 src/pkg/encoding/asn1/marshal.go      | 38 +++++++++++++++++++++++++++++------
 src/pkg/encoding/asn1/marshal_test.go |  8 ++++++++
 4 files changed, 43 insertions(+), 7 deletions(-)
