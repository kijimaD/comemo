commit 3b6b86d1fe4275c0d5f89019a0170fa203c0d105
Author: Russ Cox <rsc@golang.org>
Date:   Mon Jul 6 08:54:12 2020 -0400

    go/build: rewrite TestDependencies to be cleaner, more correct
    
    TestDependencies defines the dependency policy
    (what can depend on what) for the standard library.
    
    The standard library has outgrown the idea of writing
    the policy as a plain map literal. Also, the checker was
    ignoring vendored packages, which makes it miss real
    problems.
    
    This commit adds a little language for describing
    partial orders and rewrites the policy in that language.
    
    It also changes the checker to look inside vendored
    packages and adds those to the policy as well.
    
    This turned up one important problem: net is depending
    on fmt, unicode via golang.org/x/net/dns/dnsmessage,
    filed as #40070.
    
    This is a test-only change, so it should be appropriate
    even for the release freeze, especially since it identified
    a real bug.
    
    Change-Id: I9b79f30761f167b8587204c959baa973583e39f2
    Reviewed-on: https://go-review.googlesource.com/c/go/+/241078
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/go/build/deps_test.go | 1130 ++++++++++++++++++++++++++-------------------
 1 file changed, 650 insertions(+), 480 deletions(-)
