commit c03d0e4fec6b02c09d286dae5df2f63164d74ea1
Author: Iskander Sharipov <iskander.sharipov@intel.com>
Date:   Mon Sep 17 21:37:30 2018 +0300

    cmd/compile/internal/gc: handle arith ops in samesafeexpr
    
    Teach samesafeexpr to handle arithmetic unary and binary ops.
    
    It makes map lookup optimization possible in
    
            m[k+1] = append(m[k+1], ...)
            m[-k] = append(m[-k], ...)
            ... etc
    
    Does not cover "+" for strings (concatenation).
    
    Change-Id: Ibbb16ac3faf176958da344be1471b06d7cf33a6c
    Reviewed-on: https://go-review.googlesource.com/135795
    Run-TryBot: Iskander Sharipov <iskander.sharipov@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/gc/typecheck.go |  6 ++++--
 test/codegen/mapaccess.go                | 24 ++++++++++++++++++++++++
 2 files changed, 28 insertions(+), 2 deletions(-)
