commit e6f9f39ce52e880b54e4cb08bf0cde73cf6c7dc2
Author: Martin Möhrmann <martisch@uos.de>
Date:   Thu Aug 25 14:17:52 2016 +0200

    cmd/compile: generate makeslice calls with int arguments
    
    Where possible generate calls to runtime makeslice with int arguments
    during compile time instead of makeslice with int64 arguments.
    
    This eliminates converting arguments for calls to makeslice with
    int64 arguments for platforms where int64 values do not fit into
    arguments of type int.
    
    godoc 386 binary shrinks by approximately 12 kilobyte.
    
    amd64:
    name         old time/op  new time/op  delta
    MakeSlice-2  29.8ns ± 1%  29.8ns ± 1%   ~     (p=1.000 n=24+24)
    
    386:
    name         old time/op  new time/op  delta
    MakeSlice-2  52.3ns ± 0%  45.9ns ± 0%  -12.17%  (p=0.000 n=25+22)
    
    Fixes  #15357
    
    Change-Id: Icb8701bb63c5a83877d26c8a4b78e782ba76de7c
    Reviewed-on: https://go-review.googlesource.com/27851
    Run-TryBot: Martin Möhrmann <martisch@uos.de>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

 src/cmd/compile/internal/gc/builtin.go         | 43 +++++++++++++-------------
 src/cmd/compile/internal/gc/builtin/runtime.go |  3 +-
 src/cmd/compile/internal/gc/walk.go            | 22 +++++++++++--
 src/runtime/slice.go                           | 23 ++++++++++----
 test/fixedbugs/issue4085b.go                   | 24 ++++++++------
 5 files changed, 74 insertions(+), 41 deletions(-)
