commit 2c4edb0eea6503da73eec69261b2771ad0c9d973
Author: Luuk van Dijk <lvd@golang.org>
Date:   Wed Jun 1 17:02:43 2011 +0200

    gc: make merely referencing an outer variable in a closure not force heapallocation.
    
    before: runtime_test.BenchmarkCallClosure1       20000000              135 ns/op
    after:  runtime_test.BenchmarkCallClosure1      500000000                6 ns/op
    
    R=rsc
    CC=golang-dev
    https://golang.org/cl/4527091

 src/cmd/gc/closure.c            |  6 ++++-
 src/cmd/gc/dcl.c                |  1 +
 src/cmd/gc/go.h                 | 10 +++++----
 src/cmd/gc/typecheck.c          | 49 ++++++++++++++++++++++++-----------------
 src/pkg/runtime/closure_test.go | 32 +++++++++++++++++++++++++++
 5 files changed, 73 insertions(+), 25 deletions(-)
