commit 8cdef129fb078a118c3b5032ea7e0b103bf61995
Author: Joel Sing <joel@sing.id.au>
Date:   Thu Mar 13 00:39:27 2025 +1100

    cmd/link: only check PIE size difference when the linkmode is the same
    
    Currently we check the size difference between non-PIE and PIE binaries
    without specifying a linkmode (and that is presumed to be internal).
    However, on some platforms (like openbsd/arm64), the use of
    -buildmode=pie results in external linking. Ensure that we only test
    internally linked non-PIE against internally linked PIE and externally
    linked non-PIE against externally linked PIE, avoiding unexpected
    differences.
    
    Fixes #72818
    
    Change-Id: I7e1da0976a4b5de387a59d0d6c04f58498a8eca0
    Reviewed-on: https://go-review.googlesource.com/c/go/+/657035
    Reviewed-by: Ian Lance Taylor <iant@google.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Than McIntosh <thanm@golang.org>

 src/cmd/link/elf_test.go | 29 +++++++++++------------------
 1 file changed, 11 insertions(+), 18 deletions(-)
