commit b9630c56db42dd58fd7ce21ea854815d0ab31878
Author: limeidan <limeidan@loongson.cn>
Date:   Thu Jul 11 21:03:45 2024 +0800

    cmd/internal/obj/loong64: optimize immediate loading
    
                          |        old       |      new                           |
                          |      sec/op      |    sec/op             vs base      |
    BinaryTree17               11.08 ± 2%        11.16 ± 1%        ~ (p=0.529 n=10)
    Fannkuch11                 2.716 ± 0%        2.737 ± 0%   +0.79% (p=0.000 n=10)
    FmtFprintfEmpty           67.37n ± 0%       66.42n ± 0%   -1.41% (p=0.000 n=10)
    FmtFprintfString          95.28n ± 0%       90.85n ± 0%   -4.64% (p=0.000 n=10)
    FmtFprintfInt             97.69n ± 0%       98.06n ± 0%   +0.38% (p=0.000 n=10)
    FmtFprintfIntInt          149.1n ± 0%       147.4n ± 0%   -1.14% (p=0.000 n=10)
    FmtFprintfPrefixedInt     223.6n ± 0%       196.5n ± 0%  -12.10% (p=0.000 n=10)
    FmtFprintfFloat           290.9n ± 0%       281.6n ± 1%   -3.21% (p=0.000 n=10)
    FmtManyArgs               670.6n ± 0%       642.6n ± 0%   -4.18% (p=0.000 n=10)
    GobDecode                 10.26m ± 1%       10.23m ± 1%        ~ (p=0.105 n=10)
    GobEncode                 12.09m ± 1%       11.94m ± 1%   -1.24% (p=0.000 n=10)
    Gzip                      316.9m ± 0%       315.9m ± 0%   -0.32% (p=0.001 n=10)
    Gunzip                    65.48m ± 0%       59.77m ± 0%   -8.72% (p=0.000 n=10)
    HTTPClientServer          70.36µ ± 0%       68.72µ ± 0%   -2.34% (p=0.000 n=10)
    JSONEncode                13.61m ± 1%       13.19m ± 1%   -3.13% (p=0.000 n=10)
    JSONDecode                57.52m ± 1%       54.15m ± 1%   -5.86% (p=0.000 n=10)
    Mandelbrot200             4.577m ± 0%       4.572m ± 0%   -0.10% (p=0.002 n=10)
    GoParse                   6.466m ± 0%       6.363m ± 0%   -1.58% (p=0.000 n=10)
    RegexpMatchEasy0_32       89.20n ± 0%       87.72n ± 0%   -1.65% (p=0.000 n=10)
    RegexpMatchEasy0_1K       748.6n ± 0%       907.6n ± 0%  +21.22% (p=0.000 n=10)
    RegexpMatchEasy1_32       94.14n ± 0%       93.81n ± 0%   -0.35% (p=0.000 n=10)
    RegexpMatchEasy1_1K       832.1n ± 0%       953.6n ± 0%  +14.59% (p=0.000 n=10)
    RegexpMatchMedium_32      982.7n ± 0%      1018.0n ± 0%   +3.59% (p=0.000 n=10)
    RegexpMatchMedium_1K      30.51µ ± 0%       30.00µ ± 0%   -1.65% (p=0.000 n=10)
    RegexpMatchHard_32        1.721µ ± 0%       1.664µ ± 0%   -3.34% (p=0.000 n=10)
    RegexpMatchHard_1K        50.76µ ± 0%       50.92µ ± 0%   +0.32% (p=0.000 n=10)
    Revcomp                   870.5m ± 0%       710.5m ± 0%  -18.38% (p=0.000 n=10)
    Template                  93.18m ± 1%       93.67m ± 1%        ~ (p=0.123 n=10)
    TimeParse                 309.2n ± 0%       307.8n ± 0%   -0.45% (p=0.000 n=10)
    TimeFormat                401.5n ± 0%       394.2n ± 0%   -1.82% (p=0.000 n=10)
    geomean                   72.73µ            71.70µ        -1.41%
    
    Change-Id: Id8d342ef3bb82a420434b2b841674683efef67be
    Reviewed-on: https://go-review.googlesource.com/c/go/+/620737
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    Reviewed-by: abner chenc <chenguoqi@loongson.cn>
    Reviewed-by: sophie zhao <zhaoxiaolin@loongson.cn>

 src/cmd/asm/internal/asm/endtoend_test.go       |   2 +
 src/cmd/asm/internal/asm/testdata/loong64enc1.s |  24 ++
 src/cmd/asm/internal/asm/testdata/loong64enc2.s |  46 ++++
 src/cmd/asm/internal/asm/testdata/loong64enc3.s |  65 +++++
 src/cmd/asm/internal/asm/testdata/loong64enc4.s |  42 ++++
 src/cmd/asm/internal/asm/testdata/loong64enc5.s |  17 ++
 src/cmd/internal/obj/loong64/a.out.go           |  54 +++-
 src/cmd/internal/obj/loong64/asm.go             | 321 +++++++++++++++++++++++-
 src/cmd/internal/obj/loong64/cnames.go          |  14 ++
 9 files changed, 579 insertions(+), 6 deletions(-)
