commit 9f90f31c3a3ac8fc306bb63c0fd80299afcddbc2
Author: Russ Cox <rsc@golang.org>
Date:   Mon Jun 29 12:49:25 2015 -0400

    cmd/compile: allow static init for unsafe.Pointer(&x) where x is global
    
    This avoids both a write barrier and then dynamic initialization
    globals of the form
    
            var x something
            var xp = unsafe.Pointer(&x)
    
    Using static initialization avoids emitting a relocation for &x,
    which helps cgo.
    
    Fixes #9411.
    
    Change-Id: I0dbf480859cce6ab57ab805d1b8609c45b48f156
    Reviewed-on: https://go-review.googlesource.com/11693
    Reviewed-by: Austin Clements <austin@google.com>
    Run-TryBot: Russ Cox <rsc@golang.org>

 src/cmd/compile/internal/gc/sinit.go |  8 ++++++++
 src/cmd/compile/internal/gc/walk.go  | 15 +++++++++++----
 test/sinit.go                        |  5 +++++
 3 files changed, 24 insertions(+), 4 deletions(-)
