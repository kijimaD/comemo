commit 1be3e76e7628cae8500c0c1f3aa620638aec351d
Author: Austin Clements <austin@google.com>
Date:   Wed Mar 1 21:03:20 2017 -0500

    runtime: simplify heap profile flushing
    
    Currently the heap profile is flushed by *either* gcSweep in STW mode
    or by gcMarkTermination in concurrent mode. Simplify this by making
    gcMarkTermination always flush the heap profile and by making gcSweep
    do one extra flush (instead of two) in STW mode.
    
    Change-Id: I62147afb2a128e1f3d92ef4bb8144c8a345f53c4
    Reviewed-on: https://go-review.googlesource.com/37715
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Rick Hudson <rlh@golang.org>

 src/runtime/mgc.go | 23 ++++++++---------------
 1 file changed, 8 insertions(+), 15 deletions(-)
