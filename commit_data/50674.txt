commit f249fa27a9117dd5986f35463fc6a1467ecc72bb
Author: Cuong Manh Le <cuong.manhle.vn@gmail.com>
Date:   Fri Nov 5 20:30:38 2021 +0700

    cmd/compile: only update source type when processing struct/array
    
    CL 360057 fixed missing update source type in storeArgOrLoad. However,
    we should only update the type when processing struct/array. If we
    update the type right before calling storeArgOrLoad, we may generate a
    value with invalid type, e.g, OpStructSelect with non-struct type.
    
    Fixes #49378
    
    Change-Id: Ib7e10f72f818880f550aae5c9f653db463ce29b0
    Reviewed-on: https://go-review.googlesource.com/c/go/+/361594
    Trust: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    Run-TryBot: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: David Chase <drchase@google.com>

 src/cmd/compile/internal/ssa/expand_calls.go |  4 ++--
 test/fixedbugs/issue49378.go                 | 25 +++++++++++++++++++++++++
 2 files changed, 27 insertions(+), 2 deletions(-)
