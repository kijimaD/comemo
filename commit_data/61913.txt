commit 3bd08b97921826c1b0a5fbf0789f4b49d7619977
Author: Michael Anthony Knyszek <mknyszek@google.com>
Date:   Fri Dec 13 23:18:59 2024 +0000

    runtime: usleep in TestWeakToStrongMarkTermination
    
    There's a subtle bug in this test (big surprise): time.Sleep allocates,
    so the time.Sleep(100*time.Millisecond) before unblocking gcMarkDone
    might itself end up in gcMarkDone.
    
    Work around this by using usleep here instead.
    
    Fixes #70532.
    
    Change-Id: I4c642ebb12f737cdb0d79ccff64b6059fc3d8b34
    Reviewed-on: https://go-review.googlesource.com/c/go/+/636155
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/runtime/gc_test.go | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)
