commit 7a0799b2c0bdfaf745dbd8c74a3db2f3d238fd1b
Author: Dmitri Shuralyov <dmitshur@golang.org>
Date:   Wed Feb 8 11:40:06 2023 -0500

    cmd/dist, test: convert test/run.go runner to a cmd/go test
    
    As motivated on the issue, we want to move the functionality of the
    run.go program to happen via a normal go test. Each .go test case in
    the GOROOT/test directory gets a subtest, and cmd/go's support for
    parallel test execution replaces run.go's own implementation thereof.
    
    The goal of this change is to have fairly minimal and readable diff
    while making an atomic changeover. The working directory is modified
    during the test execution to be GOROOT/test as it was with run.go,
    and most of the test struct and its run method are kept unchanged.
    The next CL in the stack applies further simplifications and cleanups
    that become viable.
    
    There's no noticeable difference in test execution time: it takes around
    60-80 seconds both before and after on my machine. Test caching, which
    the previous runner lacked, can shorten the time significantly.
    
    For #37486.
    Fixes #56844.
    
    Change-Id: I209619dc9d90e7529624e49c01efeadfbeb5c9ae
    Reviewed-on: https://go-review.googlesource.com/c/go/+/463276
    Run-TryBot: Dmitri Shuralyov <dmitshur@golang.org>
    Reviewed-by: Austin Clements <austin@google.com>
    Auto-Submit: Dmitri Shuralyov <dmitshur@golang.org>
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/dist/test.go                               |  66 ++----
 .../run.go => src/internal/testdir/testdir_test.go | 235 ++++++---------------
 test/README.md                                     |   4 +-
 test/codegen/README                                |  13 +-
 4 files changed, 88 insertions(+), 230 deletions(-)
