commit 5da9c8cd0a0427d1771b3a9a6d8d931430ce50dd
Author: Shenghou Ma <minux@golang.org>
Date:   Sat Dec 27 19:15:38 2014 -0500

    runtime: ignore SIGPROF to foreign threads before cgocallback is fully initialized
    
    Some libraries, for example, OpenBLAS, create work threads in a global constructor.
    If we're doing cpu profiling, it's possible that SIGPROF might come to some of the
    worker threads before we make our first cgo call. Cgocallback used to terminate the
    process when that happens, but it's better to miss a couple profiling signals than
    to abort in this case.
    
    Fixes #9456.
    
    Change-Id: I112b8e1a6e10e6cc8ac695a4b518c0f577309b6b
    Reviewed-on: https://go-review.googlesource.com/2141
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/runtime/crash_cgo_test.go | 55 +++++++++++++++++++++++++++++++++++++++++++
 src/runtime/sigqueue.go       |  9 +++++++
 2 files changed, 64 insertions(+)
