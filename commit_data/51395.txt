commit 97e740e8b0ff1b32b164b0cbef06c12c4d591f3f
Author: Michael Pratt <mpratt@google.com>
Date:   Fri Jan 21 16:52:56 2022 -0500

    runtime: replace TestFutexsleep with TestTimediv
    
    TestFutexsleep was originally created in CL 7876043 as a
    regression test for buggy division logic in futexsleep. Several months
    later CL 11575044 moved this logic to timediv (called by futexsleep).
    
    This test calls runtime.Futexsleep, which temporarily disables
    asynchronous preemption. Unfortunately, TestFutexSleep calls this from
    multiple goroutines, creating a race condition that may result in
    asynchronous preemption remaining disabled for the remainder of the
    process lifetime.
    
    We could fix this by moving the async preemption disable to the main
    test function, however this test has had a history of flakiness. As an
    alternative, this CL replaces the test wholesale with a new test for
    timediv, covering the overflow logic without the difficulty of dealing
    with futex.
    
    Fixes #50749.
    
    Change-Id: If9e1dac63ef1535adb49f9a9ffcaff99b9135895
    Reviewed-on: https://go-review.googlesource.com/c/go/+/380058
    Trust: Michael Pratt <mpratt@google.com>
    Run-TryBot: Michael Pratt <mpratt@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Michael Knyszek <mknyszek@google.com>

 src/runtime/export_futex_test.go | 19 ---------
 src/runtime/export_test.go       |  2 +
 src/runtime/futex_test.go        | 87 ----------------------------------------
 src/runtime/runtime_test.go      | 76 +++++++++++++++++++++++++++++++++++
 4 files changed, 78 insertions(+), 106 deletions(-)
