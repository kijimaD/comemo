commit 527ace0ffa81d59698d3a78ac3545de7295ea76b
Author: Cuong Manh Le <cuong.manhle.vn@gmail.com>
Date:   Thu Jun 16 23:04:25 2022 +0700

    cmd/compile: skip substituting closures in unsafe builtins arguments
    
    For unsafe.{Alignof,Offsetof,Sizeof}, subster will transform them them
    to OLITERAL nodes, and discard their arguments. However, any closure in
    their children nodes were already processed and added to declaration
    queue. Thus, we lack of information for generating instantiation for
    the closure.
    
    To fix it, just skip substituting the closures if we are going to edit
    the children nodes of unsafe builtins.
    
    Fixes #53390
    
    Change-Id: Ia815cd05af9dc0491f10faac4399f378ac53dec6
    Reviewed-on: https://go-review.googlesource.com/c/go/+/412794
    Reviewed-by: Keith Randall <khr@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@google.com>
    Run-TryBot: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

 src/cmd/compile/internal/noder/stencil.go | 27 ++++++++++++++++++++++-----
 test/typeparam/issue53390.go              | 20 ++++++++++++++++++++
 2 files changed, 42 insertions(+), 5 deletions(-)
