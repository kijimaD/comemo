commit 352d329c44d99b5c6cb325940006ca52f88195f3
Author: Austin Clements <austin@google.com>
Date:   Fri Apr 9 16:08:28 2021 -0400

    runtime: move zero-sized frame check from newproc to newproc1
    
    If GOEXPERIMENT=regabidefer is enabled, newproc currently checks that
    the call frame for new goroutines is empty. But there's one place in
    the runtime (debugCallWrap), where we call newproc1, and it happens to
    pass a non-empty frame. The current check didn't catch that. Move the
    empty call frame check from newproc to newproc1 to catch this.
    
    Updates #40724.
    
    Change-Id: I9998faf1e07e7b7af88e06a8177127f998c40252
    Reviewed-on: https://go-review.googlesource.com/c/go/+/309034
    Trust: Austin Clements <austin@google.com>
    Run-TryBot: Austin Clements <austin@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Michael Knyszek <mknyszek@google.com>

 src/runtime/debug_test.go |  8 ++++++--
 src/runtime/proc.go       | 14 ++++++++------
 2 files changed, 14 insertions(+), 8 deletions(-)
