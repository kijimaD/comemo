commit a0441c7ae3dea57a0553c9ea77e184c34b7da40f
Author: Ian Lance Taylor <iant@golang.org>
Date:   Thu Sep 22 21:17:05 2022 -0700

    encoding/gob: use saferio.SliceCap when decoding a slice
    
    This avoids allocating an overly large slice for corrupt input.
    
    Change the saferio.SliceCap function to take a pointer to the element type,
    so that we can handle slices of interface types. This revealed that a
    couple of existing calls were actually incorrect, passing the slice type
    rather than the element type.
    
    No test case because the problem can only happen for invalid data. Let
    the fuzzer find cases like this.
    
    Fixes #55338
    
    Change-Id: I3c1724183cc275d4981379773b0b8faa01a9cbd2
    Reviewed-on: https://go-review.googlesource.com/c/go/+/433296
    Reviewed-by: Ian Lance Taylor <iant@google.com>
    Reviewed-by: Daniel Mart√≠ <mvdan@mvdan.cc>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@google.com>
    Auto-Submit: Ian Lance Taylor <iant@google.com>

 src/debug/macho/fat.go          |  2 +-
 src/debug/macho/file.go         |  4 ++--
 src/debug/pe/symbol.go          |  2 +-
 src/encoding/gob/decode.go      | 19 ++++++++++++++++++-
 src/internal/saferio/io.go      |  9 +++++++--
 src/internal/saferio/io_test.go |  6 +++---
 6 files changed, 32 insertions(+), 10 deletions(-)
