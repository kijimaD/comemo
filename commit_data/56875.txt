commit 3824d3d71ef1479b71ca624b728356657f62e1d3
Author: Michael Pratt <mpratt@google.com>
Date:   Fri May 26 15:49:22 2023 -0400

    cmd/go: always track visited packages in setPGOProfilePath
    
    Currently we only track visited (copied) packages when a copy is
    required. When a copy is not required, we will rewalk each package's
    entire dependency graph every time we see it, which is terribly
    inefficient.
    
    Pull the visited package check up a level so that we visit packages only
    once regardless of how many times they are visited.
    
    Fixes #60455.
    Fixes #60428.
    
    Change-Id: I4e9b31eeeaa170db650c461a5de2ca984b9aba0f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/498735
    Run-TryBot: Bryan Mills <bcmills@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Bryan Mills <bcmills@google.com>
    Auto-Submit: Michael Pratt <mpratt@google.com>

 src/cmd/go/internal/load/pkg.go | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)
