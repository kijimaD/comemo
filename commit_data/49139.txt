commit 61f69d2559a1177c23dea06343a4784514e8dd85
Author: Rob Findley <rfindley@google.com>
Date:   Mon Jul 19 13:11:50 2021 -0400

    [dev.typeparams] go/types: merge instance and Named to eliminate sanitization
    
    Storing temporary syntactic information using an *instance type forces
    us to be careful not to leak references to *instance in the checker
    output. This is complex and error prone, as types are written in many
    places during type checking.
    
    Instead, temporarily pin the necessary syntactic information directly to
    the Named type during the type checking pass. This allows us to avoid
    having to sanitize references.
    
    This includes a couple of small, unrelated changes that were made in the
    process of debugging:
     - eliminate the expandf indirection: it is no longer necessary
     - include type parameters when printing objects
    
    For #46151
    
    Change-Id: I767e35b289f2fea512a168997af0f861cd242175
    Reviewed-on: https://go-review.googlesource.com/c/go/+/335929
    Trust: Robert Findley <rfindley@google.com>
    Trust: Robert Griesemer <gri@golang.org>
    Run-TryBot: Robert Findley <rfindley@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>

 src/go/types/check.go                  |   4 -
 src/go/types/decl.go                   |   8 +-
 src/go/types/infer.go                  |   3 -
 src/go/types/instance.go               |  53 +++------
 src/go/types/instantiate.go            |  67 ++++++-----
 src/go/types/named.go                  |  28 +++--
 src/go/types/object.go                 |   3 +
 src/go/types/predicates.go             |   6 +-
 src/go/types/sanitize.go               | 206 ---------------------------------
 src/go/types/sizeof_test.go            |   1 -
 src/go/types/subst.go                  |  15 +--
 src/go/types/testdata/check/issues.go2 |   4 +-
 src/go/types/typeparam.go              |   3 +-
 src/go/types/typestring.go             |   7 --
 src/go/types/typexpr.go                |   2 +-
 15 files changed, 96 insertions(+), 314 deletions(-)
