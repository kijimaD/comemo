commit 6b6de15d327142a19c978c8b9811310b174fd60b
Author: Cherry Zhang <cherryyz@google.com>
Date:   Thu Jul 7 10:49:43 2016 -0400

    [dev.ssa] cmd/compile: support NaCl in SSA for ARM
    
    NaCl code runs in sandbox and there are restrictions for its
    instruction uses
    (https://developer.chrome.com/native-client/reference/sandbox_internals/arm-32-bit-sandbox).
    
    Like the legacy backend, on NaCl,
    - don't use R9, which is used as NaCl's "thread pointer".
    - don't use Duff's device.
    - don't use indexed load/stores.
    - the assembler rewrites DIV/MOD to runtime calls, which on NaCl
      clobbers R12, so R12 is marked as clobbered for DIV/MOD.
    - other restrictions are satisfied by the assembler.
    
    Enable SSA specific tests on nacl/arm, and disable non-SSA ones.
    
    Updates #15365.
    
    Change-Id: I9262693ec6756b89ca29d3ae4e52a96fe5403b02
    Reviewed-on: https://go-review.googlesource.com/24859
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

 src/cmd/compile/internal/gc/ssa.go         |  7 +----
 src/cmd/compile/internal/ssa/config.go     | 17 +++++++++--
 src/cmd/compile/internal/ssa/gen/ARM.rules | 24 +++++++--------
 src/cmd/compile/internal/ssa/regalloc.go   |  3 ++
 src/cmd/compile/internal/ssa/rewriteARM.go | 48 +++++++++++++++---------------
 test/live.go                               |  2 +-
 test/live_ssa.go                           |  2 +-
 test/nilptr3.go                            |  2 +-
 test/nilptr3_ssa.go                        |  2 +-
 test/sliceopt.go                           |  2 +-
 10 files changed, 60 insertions(+), 49 deletions(-)
