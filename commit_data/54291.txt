commit cbd931c9c2705e0e3a44c3b299ac2bd3369f5eb5
Author: Daniel Martí <mvdan@mvdan.cc>
Date:   Thu Sep 22 13:35:08 2022 +0100

    encoding/gob: prevent a decoder state overflow
    
    When decoding a struct, if a positive delta is large enough to overflow
    when added to fieldnum, we would panic due to the resulting negative index.
    
    Instead, catch this problem and produce an error like we do with
    negative delta integers. If fieldnum ends up being negative or smaller
    than state.fieldnum, the addition overflowed.
    
    While here, remove an unnecessary break after an error call,
    since those error functions cause a panic.
    
    Fixes #55337.
    
    Change-Id: I7a0e4f43e5c81a703e79c1597e3bb3714cc832c8
    Reviewed-on: https://go-review.googlesource.com/c/go/+/432715
    Reviewed-by: Rob Pike <r@golang.org>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Bryan Mills <bcmills@google.com>
    Run-TryBot: Daniel Martí <mvdan@mvdan.cc>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/encoding/gob/decode.go       |  5 ++---
 src/encoding/gob/encoder_test.go | 13 +++++++++++++
 2 files changed, 15 insertions(+), 3 deletions(-)
