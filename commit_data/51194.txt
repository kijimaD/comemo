commit c3d444d09852981daa6ed9e0ba65d90c89a7d917
Author: Ian Lance Taylor <iant@golang.org>
Date:   Wed Nov 9 20:55:17 2022 -0800

    os/user: allocate buffers in Go memory, not C memory
    
    Since the first implementation of os/user, it's called C malloc
    to allocate memory for buffers. However, the buffers are just
    used for temporary storage, and we can just a []byte instead.
    
    To make this work without causing cgo pointer errors, we move
    the pwd and grp structs into C stack memory, and just return them.
    It's OK to store a Go pointer on the C stack temporarily.
    
    Change-Id: I9f8ffb6e51df1e585276c259fe99359d7835df87
    Reviewed-on: https://go-review.googlesource.com/c/go/+/449335
    Run-TryBot: Ian Lance Taylor <iant@google.com>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    Auto-Submit: Ian Lance Taylor <iant@google.com>
    Reviewed-by: Ian Lance Taylor <iant@google.com>

 src/os/user/cgo_lookup_unix.go | 158 +++++++++++++++++------------------------
 1 file changed, 67 insertions(+), 91 deletions(-)
