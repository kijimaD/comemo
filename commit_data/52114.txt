commit 85d54a7667c12ea2320f43b24129a68f020ac095
Author: Michael Munday <mike.munday@lowrisc.org>
Date:   Mon Sep 20 21:39:39 2021 +0100

    cmd/compile: use zero constants in comparisons where possible
    
    Some integer comparisons with 1 and -1 can be rewritten as comparisons
    with 0. For example, x < 1 is equivalent to x <= 0. This is an
    advantageous transformation on riscv64 because comparisons with zero
    do not require a constant to be loaded into a register. Other
    architectures will likely benefit too and the transformation is
    relatively benign on architectures that do not benefit.
    
    Change-Id: I2ce9821dd7605a660eb71d76e83a61f9bae1bf25
    Reviewed-on: https://go-review.googlesource.com/c/go/+/350831
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@google.com>
    Reviewed-by: Michael Knyszek <mknyszek@google.com>
    Run-TryBot: Michael Munday <mike.munday@lowrisc.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/compile/internal/ssa/_gen/generic.rules |   9 +
 src/cmd/compile/internal/ssa/rewritegeneric.go  | 420 ++++++++++++++++++++++++
 test/codegen/compare_and_branch.go              |  36 ++
 test/prove.go                                   |   2 +-
 4 files changed, 466 insertions(+), 1 deletion(-)
