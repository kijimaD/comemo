commit a5f3cb6f75f31ea7336ce87375cbc30c73360def
Author: Bryan C. Mills <bcmills@google.com>
Date:   Tue Feb 28 19:16:54 2023 +0000

    internal/testenv: use 'go env CGO_ENABLED' instead of a build constraint
    
    A build constraint reports whether the test binary was compiled with
    cgo enabled, but that doesn't necessarily imply that cgo can be used
    in the environment in which the test binary is run.
    
    In particular, cross-compiled builders (such as Android) may compile
    the test binaries on the host with CGO enabled but not provide a C
    toolchain on the device that runs the test.
    
    For #58775.
    
    Change-Id: Ibf2f44c9e956cd3fa898c3de67af4449e8ef2dd1
    Reviewed-on: https://go-review.googlesource.com/c/go/+/472215
    Reviewed-by: Ian Lance Taylor <iant@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Bryan Mills <bcmills@google.com>
    Auto-Submit: Bryan Mills <bcmills@google.com>

 src/internal/testenv/testenv.go     | 78 +++++++++++++++++++++++++------------
 src/internal/testenv/testenv_cgo.go | 11 ------
 2 files changed, 54 insertions(+), 35 deletions(-)
