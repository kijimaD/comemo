commit 8cd6d68a0881d2bc0081081a847bb36fc314e761
Author: qiulaidongfeng <2645477756@qq.com>
Date:   Wed Oct 23 20:55:43 2024 +0800

    cmd/go: fix incorrect determining default value of CGO_ENABLED
    
    The default value is the value obtained when
    no environment variables are set and go env  -w is not used.
    
    In the past,
    we used the current value
    (may be modified by an environment variable to a non-default value),
    error was used as the default value.
    
    For #69994
    
    Change-Id: Iead3a6cacd04dc51a094ffb9f7bb7553320fcd78
    Reviewed-on: https://go-review.googlesource.com/c/go/+/621995
    Reviewed-by: Michael Matloob <matloob@golang.org>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Michael Matloob <matloob@google.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>

 src/cmd/dist/build.go                      |  1 -
 src/cmd/dist/buildgo.go                    | 17 -----------------
 src/cmd/dist/buildruntime.go               |  2 ++
 src/cmd/go/internal/cfg/cfg.go             | 11 +++++++----
 src/cmd/go/testdata/script/env_changed.txt |  3 +++
 src/go/build/build.go                      |  2 +-
 6 files changed, 13 insertions(+), 23 deletions(-)
