commit f379e78951a405e7e99a60fb231eeedbf976c108
Author: Michael Matloob <matloob@golang.org>
Date:   Mon Apr 24 16:57:28 2023 -0400

    cmd/go: sanitize go env outputs
    
    go env, without any arguments, outputs the environment variables in
    the form of a script that can be run on the host OS. On Unix, single
    quote the strings and place single quotes themselves outside the
    single quoted strings. On windows use the set "var=val" syntax with
    the quote starting before the variable.
    
    Fixes #58508
    
    Change-Id: Iecd379a4af7285ea9b2024f0202250c74fd9a2bd
    Reviewed-on: https://go-review.googlesource.com/c/go/+/488375
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>
    Reviewed-by: Damien Neil <dneil@google.com>
    Run-TryBot: Michael Matloob <matloob@golang.org>
    Reviewed-by: Bryan Mills <bcmills@google.com>
    Reviewed-by: Quim Muntal <quimmuntal@gmail.com>

 src/cmd/go/internal/envcmd/env.go           | 60 +++++++++++++++++-
 src/cmd/go/internal/envcmd/env_test.go      | 94 +++++++++++++++++++++++++++++
 src/cmd/go/testdata/script/env_sanitize.txt |  5 ++
 src/cmd/go/testdata/script/work_env.txt     |  2 +-
 4 files changed, 158 insertions(+), 3 deletions(-)
