commit 2afe9d4dece86f523dc9e75696bffa158dcbd976
Author: Elias Naur <mail@eliasnaur.com>
Date:   Wed Jul 31 14:33:57 2019 +0200

    runtime: don't forward SIGPIPE on macOS
    
    macOS and iOS deliver SIGPIPE signals to the main thread and not
    the thread that raised it by writing to a closed socket or pipe.
    
    SIGPIPE signals can be suppressed for sockets with the SO_NOSIGPIPE
    option, but there is no similar option for pipes. We have no other
    choice but to never forward SIGPIPE on macOS.
    
    This is a fixup of reverted CL 188297.
    
    Fixes #33384
    
    Change-Id: I09b258b078857ad3b22025bc2902d1b12d2afd92
    Reviewed-on: https://go-review.googlesource.com/c/go/+/191785
    Run-TryBot: Elias Naur <mail@eliasnaur.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 misc/cgo/testcarchive/carchive_test.go | 34 +++++++++++++++++++++++--------
 misc/cgo/testcarchive/testdata/main2.c | 37 ++++++++++++++++++++--------------
 misc/cgo/testcarchive/testdata/main3.c | 21 +++++++++++++++++++
 src/runtime/signal_unix.go             |  7 +++++++
 4 files changed, 76 insertions(+), 23 deletions(-)
