commit b78aa6c2e790f5a7405262951cd6a4919f7d315b
Author: Quan Tong <quantonganh@gmail.com>
Date:   Wed Oct 11 01:55:24 2023 +0000

    cmd/go/internal/modcmd: do not copy test embed files when vendoring
    
    Currently, go mod vendor copy all files matched by //go:embed,
    even when it is in a _test.go file. According to the documentation,
    it should not include test code for vendored packages.
    
    Fixes #63473
    
    Change-Id: I28c411724fc7b7aeb683857fc114e20b08635e01
    Reviewed-on: https://go-review.googlesource.com/c/go/+/534376
    Auto-Submit: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>
    Reviewed-by: Carlos Amedee <carlos@golang.org>
    Reviewed-by: Bryan Mills <bcmills@google.com>

 src/cmd/go/internal/modcmd/vendor.go            | 10 ++++++++-
 src/cmd/go/testdata/script/mod_vendor_embed.txt | 30 +++++++++++++++++++++++++
 2 files changed, 39 insertions(+), 1 deletion(-)
