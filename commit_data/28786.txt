commit 846bc6c5ab396490717f8753cc3c271f9c1391e4
Author: David Chase <drchase@google.com>
Date:   Wed Jul 20 10:44:49 2016 -0400

    cmd/compile: change phi location to be optimistic at backedges
    
    This is:
    
    (1) a simple trick that cuts the number of phi-nodes
    (temporarily) inserted into the ssa representation by a factor
    of 10, and can cut the user time to compile tricky inputs like
    gogo/protobuf tests from 13 user minutes to 9.5, and memory
    allocation from 3.4GB to 2.4GB.
    
    (2) a fix to sparse lookup, that does not rely on
    an assumption proven false by at least one pathological
    input "etldlen".
    
    These two changes fix unrelated compiler performance bugs,
    both necessary to obtain good performance compiling etldlen.
    Without them it takes 20 minutes or longer, with them it
    completes in 2 minutes, without a gigantic memory footprint.
    
    Updates #16407
    
    Change-Id: Iaa8aaa8c706858b3d49de1c4865a7fd79e6f4ff7
    Reviewed-on: https://go-review.googlesource.com/23136
    Reviewed-by: Keith Randall <khr@golang.org>
    Run-TryBot: David Chase <drchase@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 .../internal/gc/sparselocatephifunctions.go        |   5 +-
 src/cmd/compile/internal/ssa/sparsetreemap.go      | 104 ++++++++++++---------
 2 files changed, 66 insertions(+), 43 deletions(-)
