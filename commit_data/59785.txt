commit 4f86f2267167a63b673c4a2a2994e008b32c90ea
Author: Damien Neil <dneil@google.com>
Date:   Thu Jun 5 13:47:06 2025 -0700

    testing/synctest, runtime: avoid panic when using linker-alloc WG from bubble
    
    We associate WaitGroups with synctest bubbles by attaching a
    special to the WaitGroup. It is not possible to attach a special
    to a linker-allocated value, such as:
    
        var wg sync.WaitGroup
    
    Avoid panicking when accessing a linker-allocated WaitGroup
    from a bubble. We have no way to associate these WaitGroups
    with a bubble, so just treat them as always unbubbled.
    This is probably fine, since the WaitGroup was always
    created outside the bubble in this case.
    
    Fixes #74005
    
    Change-Id: Ic71514b0b8d0cecd62e45cc929ffcbeb16f54a55
    Reviewed-on: https://go-review.googlesource.com/c/go/+/679695
    Reviewed-by: Michael Knyszek <mknyszek@google.com>
    Auto-Submit: Damien Neil <dneil@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/internal/synctest/synctest.go      | 22 +++++++++++++++++-----
 src/internal/synctest/synctest_test.go | 28 ++++++++++++++++++++++++++++
 src/runtime/export_test.go             |  6 ++++++
 src/runtime/synctest.go                | 29 +++++++++++++++++++++--------
 src/runtime/synctest_test.go           | 12 ++++++++++++
 src/sync/waitgroup.go                  | 12 ++++++++----
 src/testing/synctest/synctest.go       |  5 +++++
 7 files changed, 97 insertions(+), 17 deletions(-)
