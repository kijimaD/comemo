commit 899b158ee9e99642bdbea2008d7cc70382db6545
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Sat Jul 3 11:22:26 2021 -0700

    [dev.typeparams] cmd/compile: set Func.ClosureCalled in escape analysis
    
    The Func.ClosureCalled flag is an optimization used by escape analysis
    to detect closures that were directly called, so we know we have
    visibility of the result flows. It's not needed by any other phases of
    the compiler, so we might as well calculate it within escape analysis
    too.
    
    This saves some trouble during IR construction and trying to maintain
    the ClosureCalled flag through inlining and copying.
    
    Passes toolstash -cmp.
    
    Change-Id: Ic53cecb7ac439745c0dfba2cd202b9cc40f1e47c
    Reviewed-on: https://go-review.googlesource.com/c/go/+/332691
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    Trust: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>

 src/cmd/compile/internal/escape/call.go    | 7 +++++++
 src/cmd/compile/internal/inline/inl.go     | 9 +--------
 src/cmd/compile/internal/ir/func.go        | 2 +-
 src/cmd/compile/internal/noder/helpers.go  | 2 --
 src/cmd/compile/internal/noder/reader.go   | 3 ---
 src/cmd/compile/internal/noder/stencil.go  | 2 --
 src/cmd/compile/internal/typecheck/func.go | 2 --
 7 files changed, 9 insertions(+), 18 deletions(-)
