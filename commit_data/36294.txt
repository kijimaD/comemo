commit b2e66f1aec4d53df3f21245f68d264744688bb31
Author: Daniel Martí <mvdan@mvdan.cc>
Date:   Fri Jun 1 11:23:21 2018 +0100

    cmd/vet: rewrite structtag using go/types
    
    This lets us simplify the code considerably. For example, unquoting the
    tag is no longer necessary, and we can get the field name with a single
    method call.
    
    While at it, fix a typechecking error in testdata/structtag.go, which
    hadn't been caught since vet still skips past go/types errors in most
    cases.
    
    Using go/types will also let us expand the structtag check more easily
    if we want to, for example to allow it to check for duplicates in
    embedded fields.
    
    Finally, update one of the test cases to check for regressions when we
    output invalid tag strings. We also checked that these two changes to
    testdata/structtag.go didn't fail with the old structtag check.
    
    For #25593.
    
    Change-Id: Iea4906d0f30a67f36b28c21d8aa96251aae653f5
    Reviewed-on: https://go-review.googlesource.com/115676
    Run-TryBot: Daniel Martí <mvdan@mvdan.cc>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Alan Donovan <adonovan@google.com>
    Reviewed-by: Rob Pike <r@golang.org>

 src/cmd/vet/structtag.go          | 37 ++++++++++++++-----------------------
 src/cmd/vet/testdata/structtag.go |  4 ++--
 2 files changed, 16 insertions(+), 25 deletions(-)
