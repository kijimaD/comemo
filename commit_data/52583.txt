commit 6e03de7b83426fa2f598c428a19db707a845bf7e
Author: Cherry Mui <cherryyz@google.com>
Date:   Thu May 5 17:45:27 2022 -0400

    cmd/asm: require -p flag
    
    CL 391014 requires the compiler to be invoked with the -p flag, to
    specify the package path. Later, CL 394217 makes the compiler to
    produce an unlinkable object file, so "go tool compile x.go" can
    still be used on the command line. This CL does the same for the
    assembler, requiring -p, otherwise generating an unlinkable object.
    
    No special case for the main package, as the main package cannot
    be only assembly code, and there is no way to tell if it is the
    main package from an assembly file.
    
    Now we guarantee that we always have an expanded package path in
    the object file. A later CL will delete the name expansion code
    in the linker.
    
    Change-Id: I8c10661aaea2ff794614924ead958d80e7e2487d
    Reviewed-on: https://go-review.googlesource.com/c/go/+/404298
    Run-TryBot: Cherry Mui <cherryyz@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

 src/cmd/asm/internal/flags/flags.go |  3 ++-
 src/cmd/internal/goobj/objfile.go   | 10 +++++-----
 src/cmd/internal/obj/objfile.go     |  2 +-
 src/cmd/link/link_test.go           |  4 ++--
 test/run.go                         |  4 ++--
 5 files changed, 12 insertions(+), 11 deletions(-)
