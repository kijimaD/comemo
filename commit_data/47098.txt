commit 03cd66617352fa0324cf5db90aedc6a6c1dff076
Merge: 0f210b75f9 5b76343a10
Author: Filippo Valsorda <filippo@golang.org>
Date:   Wed Feb 24 15:49:21 2021 +0100

    [dev.boringcrypto] all: merge master (5b76343) into dev.boringcrypto
    
    Change-Id: I52c5b317a97c7723a7c077ae3cdfdc756fd3a1cf

 doc/go_spec.html                                   |    4 +-
 misc/cgo/test/callback.go                          |    2 +-
 src/cmd/asm/internal/asm/endtoend_test.go          |    2 +
 src/cmd/asm/internal/flags/flags.go                |    2 +
 src/cmd/asm/main.go                                |    1 +
 src/cmd/compile/internal/base/flag.go              |    1 +
 src/cmd/compile/internal/dwarfgen/dwarf.go         |    3 +-
 src/cmd/compile/internal/dwarfgen/scope.go         |    4 +-
 src/cmd/compile/internal/gc/export.go              |    5 +
 src/cmd/compile/internal/importer/exportdata.go    |   92 +
 src/cmd/compile/internal/importer/gcimporter.go    |  175 +
 .../compile/internal/importer/gcimporter_test.go   |  611 +++
 src/cmd/compile/internal/importer/iimport.go       |  612 +++
 src/cmd/compile/internal/importer/support.go       |  128 +
 src/cmd/compile/internal/importer/testdata/a.go    |   15 +
 src/cmd/compile/internal/importer/testdata/b.go    |   12 +
 .../compile/internal/importer/testdata/exports.go  |   89 +
 .../internal/importer/testdata/issue15920.go       |   12 +
 .../internal/importer/testdata/issue20046.go}      |    9 +-
 .../internal/importer/testdata/issue25301.go       |   18 +
 .../internal/importer/testdata/issue25596.go       |   14 +
 src/cmd/compile/internal/importer/testdata/p.go    |   14 +
 .../internal/importer/testdata/versions/test.go    |   29 +
 src/cmd/compile/internal/inline/inl.go             |    9 +-
 src/cmd/compile/internal/ir/class_string.go        |    7 +-
 src/cmd/compile/internal/ir/expr.go                |   14 +
 src/cmd/compile/internal/ir/name.go                |   15 +-
 src/cmd/compile/internal/ir/node.go                |    2 +
 src/cmd/compile/internal/ir/node_gen.go            |   27 +
 src/cmd/compile/internal/ir/op_string.go           |   52 +-
 src/cmd/compile/internal/ir/package.go             |    3 +
 src/cmd/compile/internal/noder/decl.go             |  241 ++
 src/cmd/compile/internal/noder/expr.go             |  365 ++
 src/cmd/compile/internal/noder/func.go             |   74 +
 src/cmd/compile/internal/noder/helpers.go          |  277 ++
 src/cmd/compile/internal/noder/import.go           |   26 +
 src/cmd/compile/internal/noder/irgen.go            |  209 +
 src/cmd/compile/internal/noder/noder.go            |   28 +-
 src/cmd/compile/internal/noder/object.go           |  175 +
 src/cmd/compile/internal/noder/scopes.go           |   64 +
 src/cmd/compile/internal/noder/sizes.go            |  150 +
 src/cmd/compile/internal/noder/stencil.go          |  460 +++
 src/cmd/compile/internal/noder/stmt.go             |  303 ++
 src/cmd/compile/internal/noder/types.go            |  328 ++
 src/cmd/compile/internal/noder/validate.go         |  113 +
 src/cmd/compile/internal/reflectdata/alg.go        |    4 +-
 src/cmd/compile/internal/reflectdata/reflect.go    |    7 +-
 src/cmd/compile/internal/ssagen/pgen.go            |    3 +-
 src/cmd/compile/internal/syntax/dumper.go          |    8 +-
 src/cmd/compile/internal/syntax/error_test.go      |    6 +-
 src/cmd/compile/internal/syntax/nodes.go           |   40 +-
 src/cmd/compile/internal/syntax/parser.go          |  778 ++--
 src/cmd/compile/internal/syntax/parser_test.go     |   52 +-
 src/cmd/compile/internal/syntax/pos.go             |    1 +
 src/cmd/compile/internal/syntax/printer.go         |   87 +-
 src/cmd/compile/internal/syntax/printer_test.go    |  142 +-
 src/cmd/compile/internal/syntax/syntax.go          |    1 +
 .../compile/internal/syntax/testdata/go2/chans.go2 |   62 +
 .../internal/syntax/testdata/go2/linalg.go2        |   83 +
 .../compile/internal/syntax/testdata/go2/map.go2   |  113 +
 .../compile/internal/syntax/testdata/go2/map2.go2  |  146 +
 .../internal/syntax/testdata/go2/slices.go2        |   68 +
 .../internal/syntax/testdata/go2/smoketest.go2     |   83 +
 .../internal/syntax/testdata/go2/typeinst.go2      |   60 +
 .../internal/syntax/testdata/go2/typeinst2.go2     |  256 ++
 .../internal/syntax/testdata/go2/typeparams.go2    |  451 +++
 .../compile/internal/syntax/testdata/tparams.go2   |   22 +
 src/cmd/compile/internal/syntax/testing.go         |   72 +
 src/cmd/compile/internal/syntax/testing_test.go    |   45 +
 src/cmd/compile/internal/syntax/walk.go            |  318 ++
 src/cmd/compile/internal/test/abiutilsaux_test.go  |    2 +-
 src/cmd/compile/internal/test/dep_test.go          |    7 +-
 src/cmd/compile/internal/test/fixedbugs_test.go    |    2 +-
 src/cmd/compile/internal/test/global_test.go       |    4 +-
 src/cmd/compile/internal/typecheck/builtin.go      |  198 +-
 src/cmd/compile/internal/typecheck/const.go        |    2 +-
 src/cmd/compile/internal/typecheck/dcl.go          |    2 +-
 src/cmd/compile/internal/typecheck/func.go         |   11 +-
 src/cmd/compile/internal/typecheck/iimport.go      |    2 +-
 src/cmd/compile/internal/typecheck/mkbuiltin.go    |   28 +-
 src/cmd/compile/internal/typecheck/type.go         |    2 +-
 src/cmd/compile/internal/typecheck/universe.go     |    2 +-
 src/cmd/compile/internal/types/fmt.go              |   22 +-
 src/cmd/compile/internal/types/kind_string.go      |   23 +-
 src/cmd/compile/internal/types/size.go             |    5 +
 src/cmd/compile/internal/types/sizeof_test.go      |    4 +-
 src/cmd/compile/internal/types/type.go             |   78 +-
 src/cmd/compile/internal/types2/api.go             |  443 +++
 src/cmd/compile/internal/types2/api_test.go        | 1791 +++++++++
 src/cmd/compile/internal/types2/assignments.go     |  368 ++
 src/cmd/compile/internal/types2/builtins.go        |  776 ++++
 src/cmd/compile/internal/types2/builtins_test.go   |  218 ++
 src/cmd/compile/internal/types2/call.go            |  770 ++++
 src/cmd/compile/internal/types2/check.go           |  455 +++
 src/cmd/compile/internal/types2/check_test.go      |  298 ++
 src/cmd/compile/internal/types2/conversions.go     |  166 +
 src/cmd/compile/internal/types2/decl.go            |  978 +++++
 src/cmd/compile/internal/types2/errors.go          |  172 +
 src/cmd/compile/internal/types2/errors_test.go     |   25 +
 src/cmd/compile/internal/types2/example_test.go    |  269 ++
 .../compile/internal/types2/examples/functions.go2 |  216 ++
 .../compile/internal/types2/examples/methods.go2   |   97 +
 src/cmd/compile/internal/types2/examples/types.go2 |  280 ++
 src/cmd/compile/internal/types2/expr.go            | 2020 ++++++++++
 .../internal/types2/fixedbugs/issue20583.src       |   12 +
 .../internal/types2/fixedbugs/issue39634.go2       |   92 +
 .../internal/types2/fixedbugs/issue39664.go2       |   16 +
 .../internal/types2/fixedbugs/issue39680.go2       |   28 +
 .../internal/types2/fixedbugs/issue39693.go2       |   15 +
 .../internal/types2/fixedbugs/issue39699.go2       |   30 +
 .../internal/types2/fixedbugs/issue39711.go2       |   12 +
 .../internal/types2/fixedbugs/issue39723.go2       |   10 +
 .../internal/types2/fixedbugs/issue39725.go2       |   17 +
 .../internal/types2/fixedbugs/issue39754.go2       |   21 +
 .../internal/types2/fixedbugs/issue39755.go2       |   24 +
 .../internal/types2/fixedbugs/issue39768.go2       |   21 +
 .../internal/types2/fixedbugs/issue39938.go2       |   51 +
 .../internal/types2/fixedbugs/issue39948.go2       |   10 +
 .../internal/types2/fixedbugs/issue39976.go2       |   17 +
 .../internal/types2/fixedbugs/issue39982.go2       |   37 +
 .../internal/types2/fixedbugs/issue40038.go2       |   16 +
 .../internal/types2/fixedbugs/issue40056.go2       |   16 +
 .../internal/types2/fixedbugs/issue40057.go2       |   18 +
 .../internal/types2/fixedbugs/issue40301.go2       |   13 +
 .../internal/types2/fixedbugs/issue40684.go2       |   16 +
 .../internal/types2/fixedbugs/issue41124.go2       |   92 +
 .../internal/types2/fixedbugs/issue42695.src       |   17 +
 .../internal/types2/fixedbugs/issue42758.go2       |   33 +
 .../internal/types2/fixedbugs/issue43110.src       |   43 +
 .../internal/types2/fixedbugs/issue43124.src       |   16 +
 .../internal/types2/fixedbugs/issue43125.src       |    8 +
 .../internal/types2/fixedbugs/issue43190.src       |   19 +
 src/cmd/compile/internal/types2/gccgosizes.go      |   40 +
 src/cmd/compile/internal/types2/hilbert_test.go    |  219 ++
 src/cmd/compile/internal/types2/importer_test.go   |   36 +
 src/cmd/compile/internal/types2/infer.go           |  356 ++
 src/cmd/compile/internal/types2/initorder.go       |  301 ++
 src/cmd/compile/internal/types2/issues_test.go     |  558 +++
 src/cmd/compile/internal/types2/labels.go          |  259 ++
 src/cmd/compile/internal/types2/lookup.go          |  512 +++
 src/cmd/compile/internal/types2/object.go          |  527 +++
 src/cmd/compile/internal/types2/object_test.go     |   88 +
 src/cmd/compile/internal/types2/objset.go          |   31 +
 src/cmd/compile/internal/types2/operand.go         |  339 ++
 src/cmd/compile/internal/types2/package.go         |   64 +
 src/cmd/compile/internal/types2/pos.go             |  368 ++
 src/cmd/compile/internal/types2/predicates.go      |  425 +++
 src/cmd/compile/internal/types2/resolver.go        |  725 ++++
 src/cmd/compile/internal/types2/resolver_test.go   |  222 ++
 src/cmd/compile/internal/types2/return.go          |  179 +
 src/cmd/compile/internal/types2/sanitize.go        |  149 +
 src/cmd/compile/internal/types2/scope.go           |  216 ++
 src/cmd/compile/internal/types2/selection.go       |  159 +
 src/cmd/compile/internal/types2/self_test.go       |   97 +
 src/cmd/compile/internal/types2/sizes.go           |  265 ++
 src/cmd/compile/internal/types2/sizes_test.go      |  107 +
 src/cmd/compile/internal/types2/stdlib_test.go     |  326 ++
 src/cmd/compile/internal/types2/stmt.go            |  932 +++++
 src/cmd/compile/internal/types2/subst.go           |  539 +++
 .../compile/internal/types2/testdata/blank.src}    |    4 +-
 .../compile/internal/types2/testdata/builtins.go2  |   53 +
 .../compile/internal/types2/testdata/builtins.src  |  902 +++++
 src/cmd/compile/internal/types2/testdata/chans.go2 |   62 +
 .../compile/internal/types2/testdata/const0.src    |  363 ++
 .../compile/internal/types2/testdata/const1.src    |  334 ++
 .../compile/internal/types2/testdata/constdecl.src |  138 +
 .../internal/types2/testdata/conversions.src       |   93 +
 .../internal/types2/testdata/conversions2.src      |  313 ++
 .../compile/internal/types2/testdata/cycles.src    |  174 +
 .../compile/internal/types2/testdata/cycles1.src   |   77 +
 .../compile/internal/types2/testdata/cycles2.src   |   98 +
 .../compile/internal/types2/testdata/cycles3.src   |   60 +
 .../compile/internal/types2/testdata/cycles4.src   |  110 +
 .../compile/internal/types2/testdata/cycles5.src   |  200 +
 .../compile/internal/types2/testdata/decls0.src    |  206 +
 .../compile/internal/types2/testdata/decls1.src    |  144 +
 .../internal/types2/testdata/decls2/decls2a.src    |  111 +
 .../internal/types2/testdata/decls2/decls2b.src    |   75 +
 .../compile/internal/types2/testdata/decls3.src    |  309 ++
 .../compile/internal/types2/testdata/decls4.src    |  199 +
 .../compile/internal/types2/testdata/decls5.src    |   10 +
 .../compile/internal/types2/testdata/errors.src    |   60 +
 src/cmd/compile/internal/types2/testdata/expr0.src |  180 +
 src/cmd/compile/internal/types2/testdata/expr1.src |  127 +
 src/cmd/compile/internal/types2/testdata/expr2.src |  260 ++
 src/cmd/compile/internal/types2/testdata/expr3.src |  564 +++
 .../compile/internal/types2/testdata/go1_12.src    |   34 +
 .../compile/internal/types2/testdata/go1_13.src    |   21 +
 src/cmd/compile/internal/types2/testdata/go1_8.src |   10 +
 src/cmd/compile/internal/types2/testdata/gotos.src |  560 +++
 .../compile/internal/types2/testdata/importC.src   |   54 +
 .../types2/testdata/importdecl0/importdecl0a.src   |   53 +
 .../types2/testdata/importdecl0/importdecl0b.src   |   30 +
 .../types2/testdata/importdecl1/importdecl1a.src   |   22 +
 .../types2/testdata/importdecl1/importdecl1b.src   |   11 +
 src/cmd/compile/internal/types2/testdata/init0.src |  106 +
 src/cmd/compile/internal/types2/testdata/init1.src |   97 +
 src/cmd/compile/internal/types2/testdata/init2.src |  139 +
 .../internal/types2/testdata/issue23203a.src       |   14 +
 .../internal/types2/testdata/issue23203b.src       |   14 +
 .../types2/testdata/issue25008/issue25008a.src     |   15 +
 .../types2/testdata/issue25008/issue25008b.src}    |    8 +-
 .../internal/types2/testdata/issue26390.src        |   11 +
 .../internal/types2/testdata/issue28251.src        |   65 +
 .../compile/internal/types2/testdata/issue6977.src |   82 +
 .../compile/internal/types2/testdata/issues.go2    |  249 ++
 .../compile/internal/types2/testdata/issues.src    |  365 ++
 .../compile/internal/types2/testdata/labels.src    |  207 +
 .../compile/internal/types2/testdata/linalg.go2    |   83 +
 .../compile/internal/types2/testdata/literals.src  |  111 +
 src/cmd/compile/internal/types2/testdata/main.go2  |    7 +
 src/cmd/compile/internal/types2/testdata/main.src  |    9 +
 src/cmd/compile/internal/types2/testdata/map.go2   |  113 +
 src/cmd/compile/internal/types2/testdata/map2.go2  |  146 +
 .../internal/types2/testdata/methodsets.src        |  214 ++
 .../internal/types2/testdata/mtypeparams.go2       |   52 +
 .../compile/internal/types2/testdata/shifts.src    |  398 ++
 .../compile/internal/types2/testdata/slices.go2    |   68 +
 src/cmd/compile/internal/types2/testdata/stmt0.src |  980 +++++
 src/cmd/compile/internal/types2/testdata/stmt1.src |  259 ++
 .../internal/types2/testdata/tinference.go2        |  105 +
 src/cmd/compile/internal/types2/testdata/tmp.go2   |   17 +
 .../compile/internal/types2/testdata/typeinst.go2  |   59 +
 .../compile/internal/types2/testdata/typeinst2.go2 |  256 ++
 .../internal/types2/testdata/typeparams.go2        |  430 +++
 .../compile/internal/types2/testdata/vardecl.src   |  214 ++
 src/cmd/compile/internal/types2/type.go            |  969 +++++
 src/cmd/compile/internal/types2/typestring.go      |  435 +++
 src/cmd/compile/internal/types2/typestring_test.go |  220 ++
 src/cmd/compile/internal/types2/typexpr.go         | 1254 ++++++
 src/cmd/compile/internal/types2/unify.go           |  451 +++
 src/cmd/compile/internal/types2/universe.go        |  278 ++
 src/cmd/compile/internal/types2/version.go         |   81 +
 src/cmd/compile/internal/walk/closure.go           |    2 +-
 src/cmd/compile/internal/walk/compare.go           |    2 +-
 src/cmd/dist/build.go                              |    1 +
 src/cmd/dist/sys_windows.go                        |    5 +
 src/cmd/dist/test.go                               |   32 +-
 src/cmd/dist/util.go                               |    4 +
 src/cmd/go.mod                                     |    2 +-
 src/cmd/go.sum                                     |    4 +-
 src/cmd/go/internal/modget/get.go                  |  106 +-
 src/cmd/go/internal/mvs/mvs.go                     |   48 +-
 src/cmd/go/internal/mvs/mvs_test.go                |  106 +-
 .../testdata/script/mod_get_downadd_indirect.txt   |   81 +
 .../go/testdata/script/mod_get_downup_artifact.txt |  165 +
 .../go/testdata/script/mod_get_downup_indirect.txt |  101 +
 src/cmd/go/testdata/script/mod_load_badchain.txt   |    3 +-
 .../go/testdata/script/vendor_test_issue14613.txt  |    2 +-
 src/cmd/gofmt/doc.go                               |    3 +
 src/cmd/gofmt/gofmt.go                             |   16 +-
 src/cmd/gofmt/gofmt_test.go                        |    2 +
 src/cmd/gofmt/testdata/typeparams.golden           |   35 +
 src/cmd/gofmt/testdata/typeparams.input            |   32 +
 src/cmd/internal/diff/diff.go                      |   20 +
 src/cmd/internal/goobj/funcinfo.go                 |   60 +-
 src/cmd/internal/goobj/objfile.go                  |    2 -
 src/cmd/internal/obj/arm/obj5.go                   |   16 +
 src/cmd/internal/obj/arm64/a.out.go                |    2 +-
 src/cmd/internal/obj/arm64/obj7.go                 |  307 +-
 src/cmd/internal/obj/link.go                       |   23 +-
 src/cmd/internal/obj/mips/obj0.go                  |   16 +
 src/cmd/internal/obj/objfile.go                    |   12 +-
 src/cmd/internal/obj/plist.go                      |   10 +-
 src/cmd/internal/obj/ppc64/obj9.go                 |   16 +
 src/cmd/internal/obj/riscv/obj.go                  |   22 +-
 src/cmd/internal/obj/s390x/objz.go                 |   16 +
 src/cmd/internal/obj/util.go                       |    2 +-
 src/cmd/internal/obj/x86/obj6.go                   |   15 +
 src/cmd/internal/objabi/funcid.go                  |  124 +-
 src/cmd/internal/objabi/util.go                    |    2 +-
 src/cmd/internal/objfile/pe.go                     |    2 +
 src/cmd/link/internal/arm64/asm.go                 |   34 +
 src/cmd/link/internal/arm64/obj.go                 |    5 +
 src/cmd/link/internal/ld/config.go                 |    6 +-
 src/cmd/link/internal/ld/deadcode.go               |    4 +
 src/cmd/link/internal/ld/dwarf.go                  |    4 +-
 src/cmd/link/internal/ld/main.go                   |    2 +-
 src/cmd/link/internal/ld/pcln.go                   |    9 +-
 src/cmd/link/internal/ld/pe.go                     |   98 +-
 src/cmd/link/internal/loader/loader.go             |   37 +-
 src/cmd/vendor/golang.org/x/sys/unix/mkerrors.sh   |    6 +-
 .../vendor/golang.org/x/sys/unix/ptrace_darwin.go  |   11 +
 src/cmd/vendor/golang.org/x/sys/unix/ptrace_ios.go |   11 +
 .../vendor/golang.org/x/sys/unix/syscall_aix.go    |   10 +-
 .../vendor/golang.org/x/sys/unix/syscall_bsd.go    |    8 +-
 .../vendor/golang.org/x/sys/unix/syscall_darwin.go |   24 +-
 .../golang.org/x/sys/unix/syscall_darwin_386.go    |    2 +-
 .../golang.org/x/sys/unix/syscall_darwin_amd64.go  |    2 +-
 .../golang.org/x/sys/unix/syscall_darwin_arm.go    |    2 +-
 .../golang.org/x/sys/unix/syscall_darwin_arm64.go  |    2 +-
 .../golang.org/x/sys/unix/syscall_dragonfly.go     |   17 +-
 .../golang.org/x/sys/unix/syscall_freebsd.go       |    8 +-
 .../golang.org/x/sys/unix/syscall_illumos.go       |   13 -
 .../vendor/golang.org/x/sys/unix/syscall_linux.go  |   18 +-
 .../golang.org/x/sys/unix/syscall_linux_386.go     |    6 +-
 .../golang.org/x/sys/unix/syscall_linux_amd64.go   |    2 +-
 .../golang.org/x/sys/unix/syscall_linux_arm.go     |   10 +-
 .../golang.org/x/sys/unix/syscall_linux_arm64.go   |    2 +-
 .../golang.org/x/sys/unix/syscall_linux_mips64x.go |    2 +-
 .../golang.org/x/sys/unix/syscall_linux_mipsx.go   |    8 +-
 .../golang.org/x/sys/unix/syscall_linux_ppc64x.go  |    4 +-
 .../golang.org/x/sys/unix/syscall_linux_riscv64.go |    2 +-
 .../golang.org/x/sys/unix/syscall_linux_s390x.go   |    2 +-
 .../golang.org/x/sys/unix/syscall_linux_sparc64.go |    4 +-
 .../vendor/golang.org/x/sys/unix/syscall_netbsd.go |   21 +-
 .../golang.org/x/sys/unix/syscall_openbsd.go       |    4 +-
 .../golang.org/x/sys/unix/syscall_solaris.go       |   16 +-
 src/cmd/vendor/golang.org/x/sys/unix/timestruct.go |   26 +-
 .../golang.org/x/sys/unix/zerrors_darwin_amd64.go  |   62 +-
 .../golang.org/x/sys/unix/zerrors_darwin_arm64.go  |   62 +-
 .../vendor/golang.org/x/sys/unix/zerrors_linux.go  |  157 +-
 .../golang.org/x/sys/unix/zerrors_linux_386.go     |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_amd64.go   |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_arm.go     |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_arm64.go   |    9 +-
 .../golang.org/x/sys/unix/zerrors_linux_mips.go    |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_mips64.go  |    6 +-
 .../x/sys/unix/zerrors_linux_mips64le.go           |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_mipsle.go  |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_ppc64.go   |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_ppc64le.go |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_riscv64.go |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_s390x.go   |    6 +-
 .../golang.org/x/sys/unix/zerrors_linux_sparc64.go |    6 +-
 .../golang.org/x/sys/unix/zsyscall_darwin_386.go   |    8 +-
 .../golang.org/x/sys/unix/zsyscall_darwin_amd64.go |    8 +-
 .../golang.org/x/sys/unix/zsyscall_darwin_arm.go   |    6 +-
 .../golang.org/x/sys/unix/zsyscall_darwin_arm64.go |    8 +-
 .../x/sys/unix/zsyscall_dragonfly_amd64.go         |    6 +-
 .../x/sys/unix/zsyscall_illumos_amd64.go           |   15 +-
 .../golang.org/x/sys/unix/zsyscall_netbsd_386.go   |   10 +
 .../golang.org/x/sys/unix/zsyscall_netbsd_amd64.go |   10 +
 .../golang.org/x/sys/unix/zsyscall_netbsd_arm.go   |   10 +
 .../golang.org/x/sys/unix/zsyscall_netbsd_arm64.go |   10 +
 .../x/sys/unix/zsyscall_solaris_amd64.go           |   27 +
 .../golang.org/x/sys/unix/zsysnum_linux_386.go     |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_amd64.go   |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_arm.go     |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_arm64.go   |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_mips.go    |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_mips64.go  |    2 +
 .../x/sys/unix/zsysnum_linux_mips64le.go           |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_mipsle.go  |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_ppc64.go   |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_ppc64le.go |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_riscv64.go |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_s390x.go   |    2 +
 .../golang.org/x/sys/unix/zsysnum_linux_sparc64.go |    2 +
 .../vendor/golang.org/x/sys/unix/ztypes_aix_ppc.go |    1 +
 .../golang.org/x/sys/unix/ztypes_aix_ppc64.go      |    1 +
 .../golang.org/x/sys/unix/ztypes_darwin_amd64.go   |    8 +
 .../golang.org/x/sys/unix/ztypes_darwin_arm64.go   |    8 +
 .../x/sys/unix/ztypes_dragonfly_amd64.go           |    1 +
 .../golang.org/x/sys/unix/ztypes_freebsd_386.go    |    1 +
 .../golang.org/x/sys/unix/ztypes_freebsd_amd64.go  |    1 +
 .../golang.org/x/sys/unix/ztypes_freebsd_arm.go    |    1 +
 .../golang.org/x/sys/unix/ztypes_freebsd_arm64.go  |    1 +
 .../vendor/golang.org/x/sys/unix/ztypes_linux.go   | 1496 ++++++--
 .../golang.org/x/sys/unix/ztypes_linux_386.go      |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_amd64.go    |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_arm.go      |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_arm64.go    |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_mips.go     |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_mips64.go   |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_mips64le.go |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_mipsle.go   |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_ppc64.go    |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_ppc64le.go  |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_riscv64.go  |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_s390x.go    |    2 +-
 .../golang.org/x/sys/unix/ztypes_linux_sparc64.go  |    2 +-
 .../golang.org/x/sys/unix/ztypes_netbsd_386.go     |    1 +
 .../golang.org/x/sys/unix/ztypes_netbsd_amd64.go   |    1 +
 .../golang.org/x/sys/unix/ztypes_netbsd_arm.go     |    1 +
 .../golang.org/x/sys/unix/ztypes_netbsd_arm64.go   |    1 +
 .../golang.org/x/sys/unix/ztypes_openbsd_386.go    |    1 +
 .../golang.org/x/sys/unix/ztypes_openbsd_amd64.go  |    1 +
 .../golang.org/x/sys/unix/ztypes_openbsd_arm.go    |    1 +
 .../golang.org/x/sys/unix/ztypes_openbsd_arm64.go  |    1 +
 .../golang.org/x/sys/unix/ztypes_openbsd_mips64.go |    1 +
 .../golang.org/x/sys/unix/ztypes_solaris_amd64.go  |    1 +
 .../golang.org/x/sys/windows/syscall_windows.go    |   35 +-
 .../golang.org/x/sys/windows/types_windows.go      |  311 +-
 .../x/sys/windows/types_windows_arm64.go           |   34 +
 .../golang.org/x/sys/windows/zsyscall_windows.go   |  154 +-
 src/cmd/vendor/modules.txt                         |    2 +-
 src/debug/pe/file.go                               |   15 +-
 src/go.mod                                         |    2 +-
 src/go.sum                                         |    4 +-
 src/go/ast/ast.go                                  |   88 +-
 src/go/ast/walk.go                                 |   10 +-
 src/go/build/build.go                              |  139 +-
 src/go/build/build_test.go                         |   88 +-
 src/go/build/deps_test.go                          |    2 +-
 src/go/constant/value.go                           |  162 +-
 src/go/internal/gccgoimporter/importer_test.go     |    2 +-
 src/go/parser/error_test.go                        |   23 +-
 src/go/parser/interface.go                         |    1 +
 src/go/parser/parser.go                            |  791 ++--
 src/go/parser/short_test.go                        |  158 +-
 src/go/parser/testdata/chans.go2                   |   62 +
 src/go/parser/testdata/linalg.go2                  |   83 +
 src/go/parser/testdata/map.go2                     |  109 +
 src/go/parser/testdata/metrics.go2                 |   58 +
 src/go/parser/testdata/set.go2                     |   31 +
 src/go/parser/testdata/slices.go2                  |   31 +
 src/go/parser/testdata/sort.go2                    |   27 +
 src/go/parser/testdata/typeparams.src              |   17 +
 src/go/printer/nodes.go                            |  112 +-
 src/go/printer/printer_test.go                     |    5 +-
 src/go/printer/testdata/declarations.golden        |   11 +
 src/go/printer/testdata/declarations.input         |   11 +-
 src/go/printer/testdata/generics.golden            |   33 +
 src/go/printer/testdata/generics.input             |   30 +
 src/go/types/api.go                                |   13 +
 src/go/types/api_test.go                           |  247 +-
 src/go/types/assignments.go                        |  116 +-
 src/go/types/builtins.go                           |  211 +-
 src/go/types/call.go                               |  665 +++-
 src/go/types/check.go                              |   28 +-
 src/go/types/check_test.go                         |   12 +-
 src/go/types/conversions.go                        |   30 +-
 src/go/types/decl.go                               |  209 +-
 src/go/types/errorcodes.go                         |   63 +-
 src/go/types/errors.go                             |   36 +-
 src/go/types/errors_test.go                        |   25 +
 src/go/types/eval_test.go                          |    4 +-
 src/go/types/examples/functions.go2                |  214 ++
 src/go/types/examples/methods.go2                  |   96 +
 src/go/types/examples/types.go2                    |  286 ++
 src/go/types/expr.go                               |  432 ++-
 src/go/types/exprstring.go                         |   76 +-
 src/go/types/fixedbugs/issue39634.go2              |   91 +
 src/go/types/fixedbugs/issue39664.go2              |   15 +
 src/go/types/fixedbugs/issue39680.go2              |   27 +
 src/go/types/fixedbugs/issue39693.go2              |   14 +
 src/go/types/fixedbugs/issue39699.go2              |   29 +
 src/go/types/fixedbugs/issue39711.go2              |   11 +
 src/go/types/fixedbugs/issue39723.go2              |    9 +
 src/go/types/fixedbugs/issue39725.go2              |   16 +
 src/go/types/fixedbugs/issue39754.go2              |   20 +
 src/go/types/fixedbugs/issue39755.go2              |   23 +
 src/go/types/fixedbugs/issue39768.go2              |   20 +
 src/go/types/fixedbugs/issue39938.go2              |   50 +
 src/go/types/fixedbugs/issue39948.go2              |    9 +
 src/go/types/fixedbugs/issue39976.go2              |   16 +
 src/go/types/fixedbugs/issue39982.go2              |   36 +
 src/go/types/fixedbugs/issue40038.go2              |   15 +
 src/go/types/fixedbugs/issue40056.go2              |   15 +
 src/go/types/fixedbugs/issue40057.go2              |   17 +
 src/go/types/fixedbugs/issue40301.go2              |   12 +
 src/go/types/fixedbugs/issue40684.go2              |   15 +
 src/go/types/fixedbugs/issue41124.go2              |   91 +
 src/go/types/fixedbugs/issue42758.go2              |   33 +
 src/go/types/infer.go                              |  359 ++
 src/go/types/lookup.go                             |  135 +-
 src/go/types/methodset.go                          |    5 +-
 src/go/types/object.go                             |    8 +-
 src/go/types/operand.go                            |   30 +-
 src/go/types/predicates.go                         |  193 +-
 src/go/types/resolver.go                           |  145 +-
 src/go/types/sanitize.go                           |  194 +
 src/go/types/scope.go                              |   34 +
 src/go/types/sizes.go                              |    8 +-
 src/go/types/stmt.go                               |  143 +-
 src/go/types/subst.go                              |  543 +++
 src/go/types/testdata/builtins.go2                 |   53 +
 src/go/types/testdata/builtins.src                 |    6 +-
 src/go/types/testdata/chans.go2                    |   62 +
 src/go/types/testdata/decls0.src                   |   10 +-
 src/go/types/testdata/expr3.src                    |   22 +-
 src/go/types/testdata/issues.go2                   |  255 ++
 src/go/types/testdata/issues.src                   |    4 +-
 src/go/types/testdata/linalg.go2                   |   83 +
 src/go/types/testdata/map.go2                      |  113 +
 src/go/types/testdata/map2.go2                     |  146 +
 src/go/types/testdata/slices.go2                   |   68 +
 src/go/types/testdata/stmt0.src                    |    4 +-
 src/go/types/testdata/tinference.go2               |  108 +
 src/go/types/testdata/tmp.go2                      |   17 +
 src/go/types/testdata/todos.go2                    |   22 +
 src/go/types/testdata/typeinst.go2                 |   59 +
 src/go/types/testdata/typeinst2.go2                |  256 ++
 src/go/types/testdata/typeparams.go2               |  458 +++
 src/go/types/type.go                               |  536 ++-
 src/go/types/typestring.go                         |  155 +-
 src/go/types/typestring_test.go                    |    4 +
 src/go/types/typexpr.go                            |  622 ++-
 src/go/types/unify.go                              |  452 +++
 src/go/types/universe.go                           |   55 +-
 src/math/asin_386.s                                |   30 -
 src/math/atan2_386.s                               |   13 -
 src/math/atan_386.s                                |   13 -
 src/math/exp2_386.s                                |   40 -
 src/math/expm1_386.s                               |   57 -
 src/math/frexp_386.s                               |   25 -
 src/math/ldexp_386.s                               |   14 -
 src/math/log10_386.s                               |   21 -
 src/math/log1p_386.s                               |   27 -
 src/math/log_386.s                                 |   13 -
 src/math/mod_386.s                                 |   17 -
 src/math/modf_386.s                                |   34 -
 src/math/remainder_386.s                           |   17 -
 src/math/stubs_386.s                               |   45 +
 src/net/net_windows_test.go                        |   17 +-
 src/os/exec/lp_windows_test.go                     |   19 +-
 src/os/exec_posix.go                               |    7 +-
 src/os/str.go                                      |   36 +-
 src/run.bash                                       |   10 +-
 src/run.bat                                        |    4 +-
 src/run.rc                                         |    9 +-
 src/runtime/asm_386.s                              |   52 +-
 src/runtime/asm_amd64.s                            |   56 +-
 src/runtime/asm_arm.s                              |   76 +-
 src/runtime/asm_arm64.s                            |   69 +-
 src/runtime/asm_mips64x.s                          |   52 +-
 src/runtime/asm_mipsx.s                            |   45 +-
 src/runtime/asm_ppc64x.s                           |   46 +-
 src/runtime/asm_riscv64.s                          |   46 +-
 src/runtime/asm_s390x.s                            |   46 +-
 src/runtime/asm_wasm.s                             |   15 +-
 src/runtime/cgo/linux_syscall.c                    |    2 +-
 src/runtime/cgocall.go                             |    9 +-
 src/runtime/cpuprof.go                             |   11 +-
 src/runtime/defs_windows.go                        |  128 +-
 src/runtime/defs_windows_386.go                    |   84 +-
 src/runtime/defs_windows_amd64.go                  |   87 +-
 src/runtime/defs_windows_arm.go                    |   85 +-
 src/runtime/defs_windows_arm64.go                  |   83 +
 src/runtime/export_test.go                         |    2 -
 src/runtime/extern.go                              |    4 +-
 src/runtime/internal/sys/arch.go                   |   34 +
 src/runtime/internal/sys/arch_386.go               |   13 +-
 src/runtime/internal/sys/arch_amd64.go             |   13 +-
 src/runtime/internal/sys/arch_arm.go               |   13 +-
 src/runtime/internal/sys/arch_arm64.go             |   13 +-
 src/runtime/internal/sys/arch_mips.go              |   13 +-
 src/runtime/internal/sys/arch_mips64.go            |   13 +-
 src/runtime/internal/sys/arch_mips64le.go          |   13 +-
 src/runtime/internal/sys/arch_mipsle.go            |   13 +-
 src/runtime/internal/sys/arch_ppc64.go             |   13 +-
 src/runtime/internal/sys/arch_ppc64le.go           |   13 +-
 src/runtime/internal/sys/arch_riscv64.go           |   15 +-
 src/runtime/internal/sys/arch_s390x.go             |   13 +-
 src/runtime/internal/sys/arch_wasm.go              |   13 +-
 src/runtime/internal/sys/stubs.go                  |   16 -
 src/runtime/memclr_arm.s                           |    1 +
 src/runtime/memclr_arm64.s                         |    1 +
 src/runtime/os2_aix.go                             |   42 +-
 src/runtime/os3_plan9.go                           |    4 -
 src/runtime/os3_solaris.go                         |   20 +-
 src/runtime/os_darwin.go                           |    5 +
 src/runtime/os_dragonfly.go                        |    5 +
 src/runtime/os_freebsd.go                          |    5 +
 src/runtime/os_js.go                               |   10 +
 src/runtime/os_linux.go                            |    5 +
 src/runtime/os_netbsd.go                           |    5 +
 src/runtime/os_openbsd_syscall1.go                 |    5 +
 src/runtime/os_openbsd_syscall2.go                 |    5 +
 src/runtime/os_plan9.go                            |   10 +
 src/runtime/os_windows.go                          |   76 +-
 src/runtime/os_windows_arm64.go                    |   14 +
 src/runtime/pprof/pprof_test.go                    |   54 +-
 src/runtime/print.go                               |   26 +-
 src/runtime/proc.go                                |  146 +-
 src/runtime/rt0_windows_arm64.s                    |   12 +
 src/runtime/runtime2.go                            |   13 +-
 src/runtime/runtime_test.go                        |    4 +-
 src/runtime/signal_arm64.go                        |    2 +-
 src/runtime/signal_windows.go                      |   63 +-
 src/runtime/stack.go                               |    6 +-
 src/runtime/stubs.go                               |    1 +
 src/runtime/stubs2.go                              |    5 +
 src/runtime/stubs_386.go                           |    3 +
 src/runtime/stubs_amd64.go                         |    5 +
 src/runtime/stubs_arm.go                           |    5 +
 src/runtime/stubs_arm64.go                         |    7 +
 src/runtime/stubs_mips64x.go                       |    5 +
 src/runtime/symtab.go                              |   49 +-
 src/runtime/sys_darwin.go                          |    6 +
 src/runtime/sys_openbsd1.go                        |    5 +
 src/runtime/sys_openbsd2.go                        |    6 +
 src/runtime/sys_wasm.go                            |    6 +-
 src/runtime/sys_windows_386.s                      |   98 +-
 src/runtime/sys_windows_amd64.s                    |   91 +-
 src/runtime/sys_windows_arm.s                      |  204 +-
 src/runtime/sys_windows_arm64.s                    |  579 +++
 src/runtime/sys_x86.go                             |    6 +-
 src/runtime/syscall_windows.go                     |    8 +-
 src/runtime/tls_arm64.h                            |   12 +-
 src/runtime/tls_arm64.s                            |    8 +-
 src/runtime/traceback.go                           |  113 +-
 src/runtime/wincallback.go                         |   29 +
 src/runtime/zcallback_windows_arm64.s              | 4012 ++++++++++++++++++++
 src/syscall/syscall_windows.go                     |   27 +-
 src/syscall/syscall_windows_386.go                 |    5 -
 src/syscall/types_windows_arm64.go                 |   22 +
 src/syscall/zsysnum_windows_386.go                 |    3 -
 src/syscall/zsysnum_windows_amd64.go               |    3 -
 src/vendor/modules.txt                             |    2 +-
 test/alias2.go                                     |    4 +-
 test/append1.go                                    |   10 +-
 test/assign.go                                     |    4 +-
 test/blank1.go                                     |    4 +-
 test/cannotassign.go                               |   22 +-
 test/chan/perm.go                                  |    2 +-
 test/cmp6.go                                       |   10 +-
 test/const1.go                                     |   56 +-
 test/const2.go                                     |    4 +-
 test/const7.go                                     |   77 +
 test/convert2.go                                   |   74 +-
 test/convlit.go                                    |   14 +-
 test/copy1.go                                      |    8 +-
 test/fixedbugs/bug040.go                           |    2 +-
 test/fixedbugs/bug062.go                           |    1 +
 test/fixedbugs/bug081.go                           |    2 +-
 test/fixedbugs/bug090.go                           |    2 +-
 test/fixedbugs/bug122.go                           |    2 +-
 test/fixedbugs/bug131.go                           |    1 +
 test/fixedbugs/bug132.go                           |    2 +-
 test/fixedbugs/bug163.go                           |    4 +-
 test/fixedbugs/bug175.go                           |    2 +-
 test/fixedbugs/bug192.go                           |    4 +-
 test/fixedbugs/bug205.go                           |    6 +-
 test/fixedbugs/bug215.go                           |    2 +-
 test/fixedbugs/bug223.go                           |    2 +-
 test/fixedbugs/bug224.go                           |    2 +-
 test/fixedbugs/bug229.go                           |    4 +-
 test/fixedbugs/bug280.go                           |    2 +-
 test/fixedbugs/bug289.go                           |    4 +-
 test/fixedbugs/bug325.go                           |    2 +-
 test/fixedbugs/bug326.go                           |    2 +-
 test/fixedbugs/bug340.go                           |    2 +-
 test/fixedbugs/bug342.go                           |    2 +-
 test/fixedbugs/bug350.go                           |    2 +-
 test/fixedbugs/bug357.go                           |    2 +-
 test/fixedbugs/bug362.go                           |    6 +-
 test/fixedbugs/bug371.go                           |    4 +-
 test/fixedbugs/bug379.go                           |    2 +-
 test/fixedbugs/bug383.go                           |    4 +-
 test/fixedbugs/bug386.go                           |    4 +-
 test/fixedbugs/bug389.go                           |    2 +-
 test/fixedbugs/bug390.go                           |    2 +-
 test/fixedbugs/bug397.go                           |    2 +-
 test/fixedbugs/bug416.go                           |    2 +-
 test/fixedbugs/bug418.go                           |    4 +-
 test/fixedbugs/bug462.go                           |    2 +
 test/fixedbugs/bug463.go                           |    4 +-
 test/fixedbugs/bug487.go                           |    6 +-
 test/fixedbugs/issue10975.go                       |    2 +-
 test/fixedbugs/issue11326.go                       |   16 +-
 test/fixedbugs/issue11361.go                       |    2 +-
 test/fixedbugs/issue11362.go                       |    1 -
 test/fixedbugs/issue11371.go                       |   12 +-
 test/fixedbugs/issue11674.go                       |   18 +-
 test/fixedbugs/issue11737.go                       |    2 +-
 test/fixedbugs/issue11945.go                       |    4 +
 test/fixedbugs/issue13365.go                       |   12 +-
 test/fixedbugs/issue13471.go                       |   22 +-
 test/fixedbugs/issue13480.go                       |   18 +-
 test/fixedbugs/issue13485.go                       |    4 +-
 test/fixedbugs/issue13539.go                       |    2 +-
 test/fixedbugs/issue13559.go                       |  114 +-
 test/fixedbugs/issue14136.go                       |    4 +-
 test/fixedbugs/issue14321.go                       |    2 +-
 test/fixedbugs/issue14729.go                       |    2 +-
 test/fixedbugs/issue15055.go                       |   16 +-
 test/fixedbugs/issue15898.go                       |    4 +-
 test/fixedbugs/issue16439.go                       |    8 +-
 test/fixedbugs/issue16949.go                       |   16 +-
 test/fixedbugs/issue17588.go                       |    2 +-
 test/fixedbugs/issue18392.go                       |    2 +-
 test/fixedbugs/issue19323.go                       |    4 +-
 test/fixedbugs/issue19482.go                       |    8 +-
 test/fixedbugs/issue19699b.go                      |    2 +-
 test/fixedbugs/issue19880.go                       |    2 +-
 test/fixedbugs/issue19947.go                       |    8 +-
 test/fixedbugs/issue20185.go                       |    4 +-
 test/fixedbugs/issue20415.go                       |    6 +-
 test/fixedbugs/issue20749.go                       |    4 +-
 test/fixedbugs/issue22389.go                       |    2 +-
 test/fixedbugs/issue22794.go                       |    1 +
 test/fixedbugs/issue22822.go                       |    5 +-
 test/fixedbugs/issue23094.go                       |    2 +-
 test/fixedbugs/issue23609.go                       |    6 +-
 test/fixedbugs/issue23823.go                       |    2 +-
 test/fixedbugs/issue24470.go                       |    1 +
 test/fixedbugs/issue25727.go                       |    6 +-
 test/fixedbugs/issue26616.go                       |   11 +-
 test/fixedbugs/issue27595.go                       |    6 +-
 test/fixedbugs/issue28079c.go                      |    2 +-
 test/fixedbugs/issue28450.go                       |   12 +-
 test/fixedbugs/issue30085.go                       |    5 +-
 test/fixedbugs/issue30087.go                       |    9 +-
 test/fixedbugs/issue31747.go                       |    4 +-
 test/fixedbugs/issue35291.go                       |    2 +-
 test/fixedbugs/issue38117.go                       |    2 +-
 test/fixedbugs/issue38745.go                       |    2 +-
 test/fixedbugs/issue3925.go                        |    2 +-
 test/fixedbugs/issue4085a.go                       |    8 +-
 test/fixedbugs/issue41500.go                       |    8 +-
 test/fixedbugs/issue4215.go                        |   22 +-
 test/fixedbugs/issue4251.go                        |    6 +-
 test/fixedbugs/issue43762.go                       |    6 +-
 test/fixedbugs/issue43908.go                       |   21 +
 test/fixedbugs/issue4429.go                        |    2 +-
 test/fixedbugs/issue44325.dir/a.go                 |   13 +
 test/fixedbugs/issue44325.dir/b.go                 |   13 +
 test/fixedbugs/issue44325.go                       |    7 +
 test/fixedbugs/issue44344.go                       |   30 +
 test/fixedbugs/issue4458.go                        |    2 +-
 test/fixedbugs/issue4470.go                        |    1 +
 test/fixedbugs/issue4517d.go                       |    2 +-
 test/fixedbugs/issue4909a.go                       |    4 +-
 test/fixedbugs/issue6402.go                        |    2 +-
 test/fixedbugs/issue6572.go                        |    3 +-
 test/fixedbugs/issue6750.go                        |    2 +-
 test/fixedbugs/issue6772.go                        |    4 +-
 test/fixedbugs/issue7129.go                        |    6 +-
 test/fixedbugs/issue7150.go                        |    2 +-
 test/fixedbugs/issue7153.go                        |    2 +-
 test/fixedbugs/issue7223.go                        |   10 +-
 test/fixedbugs/issue7310.go                        |    6 +-
 test/fixedbugs/issue8183.go                        |    6 +-
 test/fixedbugs/issue8438.go                        |    6 +-
 test/fixedbugs/issue8440.go                        |    2 +-
 test/fixedbugs/issue8745.go                        |    2 +-
 test/fixedbugs/issue9083.go                        |    1 +
 test/fixedbugs/issue9370.go                        |   24 +-
 test/fixedbugs/issue9432.go                        |    2 +-
 test/fixedbugs/issue9634.go                        |    2 +-
 test/func1.go                                      |    2 +-
 test/funcdup.go                                    |   24 +-
 test/funcdup2.go                                   |   12 +-
 test/init.go                                       |    2 +-
 test/initloop.go                                   |    2 +-
 test/interface/embed2.go                           |   10 +-
 test/interface/explicit.go                         |   12 +-
 test/interface/pointer.go                          |    4 +-
 test/interface/receiver1.go                        |    4 +-
 test/makechan.go                                   |   14 +-
 test/makemap.go                                    |   18 +-
 test/makenew.go                                    |    8 +-
 test/map1.go                                       |    2 +-
 test/method2.go                                    |    6 +-
 test/method6.go                                    |    2 +-
 test/method7.go                                    |   12 +
 test/named1.go                                     |    2 +-
 test/nilptr.go                                     |    3 +-
 test/rename1.go                                    |    2 +-
 test/run.go                                        |  127 +-
 test/runtime.go                                    |    2 +-
 test/slice3err.go                                  |   66 +-
 test/switch3.go                                    |    6 +-
 test/switch5.go                                    |   30 +-
 test/switch6.go                                    |    8 +-
 test/switch7.go                                    |    2 +-
 test/typecheckloop.go                              |    4 +-
 test/typeparam/fact.go                             |   32 +
 test/typeparam/importtest.go                       |   16 +
 test/typeparam/index.go                            |   46 +
 test/typeparam/list.go                             |   65 +
 test/typeparam/map.go                              |   39 +
 test/typeparam/min.go                              |   41 +
 test/typeparam/pair.go                             |   32 +
 test/typeparam/settable.go                         |   38 +
 test/typeparam/smallest.go                         |   42 +
 test/typeparam/smoketest.go                        |   56 +
 test/typeparam/stringable.go                       |   46 +
 test/typeparam/stringer.go                         |   88 +
 test/typeparam/struct.go                           |   49 +
 test/typeparam/sum.go                              |   50 +
 test/typeparam/tparam1.go                          |   42 +
 test/typeparam/value.go                            |   75 +
 test/typeswitch3.go                                |    6 +-
 test/used.go                                       |  165 +-
 test/varerr.go                                     |    2 +-
 778 files changed, 60616 insertions(+), 5350 deletions(-)

diff --cc src/go/build/build.go
index 35e07ea04c,0732f6aa19..5b5a742d72
--- a/src/go/build/build.go
+++ b/src/go/build/build.go
@@@ -1831,39 -1830,40 +1830,41 @@@ func splitQuoted(s string) (r []string
  	return args, err
  }
  
- // match reports whether the name is one of:
+ // matchAuto interprets text as either a +build or //go:build expression (whichever works),
+ // reporting whether the expression matches the build context.
  //
+ // matchAuto is only used for testing of tag evaluation
+ // and in #cgo lines, which accept either syntax.
+ func (ctxt *Context) matchAuto(text string, allTags map[string]bool) bool {
+ 	if strings.ContainsAny(text, "&|()") {
+ 		text = "//go:build " + text
+ 	} else {
+ 		text = "// +build " + text
+ 	}
+ 	x, err := constraint.Parse(text)
+ 	if err != nil {
+ 		return false
+ 	}
+ 	return ctxt.eval(x, allTags)
+ }
+ 
+ func (ctxt *Context) eval(x constraint.Expr, allTags map[string]bool) bool {
+ 	return x.Eval(func(tag string) bool { return ctxt.matchTag(tag, allTags) })
+ }
+ 
+ // matchTag reports whether the name is one of:
+ //
+ //	cgo (if cgo is enabled)
  //	$GOOS
  //	$GOARCH
- //	cgo (if cgo is enabled)
- //	!cgo (if cgo is disabled)
 +//	boringcrypto
  //	ctxt.Compiler
- //	!ctxt.Compiler
+ //	linux (if GOOS = android)
+ //	solaris (if GOOS = illumos)
  //	tag (if tag is listed in ctxt.BuildTags or ctxt.ReleaseTags)
- //	!tag (if tag is not listed in ctxt.BuildTags or ctxt.ReleaseTags)
- //	a comma-separated list of any of these
  //
- func (ctxt *Context) match(name string, allTags map[string]bool) bool {
- 	if name == "" {
- 		if allTags != nil {
- 			allTags[name] = true
- 		}
- 		return false
- 	}
- 	if i := strings.Index(name, ","); i >= 0 {
- 		// comma-separated list
- 		ok1 := ctxt.match(name[:i], allTags)
- 		ok2 := ctxt.match(name[i+1:], allTags)
- 		return ok1 && ok2
- 	}
- 	if strings.HasPrefix(name, "!!") { // bad syntax, reject always
- 		return false
- 	}
- 	if strings.HasPrefix(name, "!") { // negation
- 		return len(name) > 1 && !ctxt.match(name[1:], allTags)
- 	}
- 
+ // It records all consulted tags in allTags.
+ func (ctxt *Context) matchTag(name string, allTags map[string]bool) bool {
  	if allTags != nil {
  		allTags[name] = true
  	}
