commit fdaac84480b02e600660d0ca7c15339138807107
Author: Carlos Amedee <carlos@golang.org>
Date:   Mon Dec 23 11:27:20 2024 -0500

    os: use AddCleanup to close files
    
    This changes the finalizer mechanism used to close files from
    runtime.SetFinalizer to runtime.AddCleanup.
    
    Updates #70907
    
    Change-Id: I47582b81b0ed69609dd9dac158ec7bb8819c8c77
    Reviewed-on: https://go-review.googlesource.com/c/go/+/638555
    Reviewed-by: Michael Pratt <mpratt@google.com>
    Auto-Submit: Carlos Amedee <carlos@golang.org>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/os/file_plan9.go   | 16 +++++++++-------
 src/os/file_unix.go    | 21 ++++++++++++---------
 src/os/file_windows.go | 16 +++++++++-------
 src/os/root_openat.go  | 13 ++++++++-----
 src/os/root_unix.go    |  2 +-
 src/os/root_windows.go |  2 +-
 6 files changed, 40 insertions(+), 30 deletions(-)
