commit 4e8f1e139f5c69a1d596a54b035d6fc4fb08b94d
Author: Russ Cox <rsc@golang.org>
Date:   Thu Dec 10 18:47:09 2020 -0500

    [dev.regabi] cmd/compile: cleanup for concrete types - sinit
    
    An automated rewrite will add concrete type assertions after
    a test of n.Op(), when n can be safely type-asserted
    (meaning, n is not reassigned a different type, n is not reassigned
    and then used outside the scope of the type assertion,
    and so on).
    
    This sequence of CLs handles the code that the automated
    rewrite does not: adding specific types to function arguments,
    adjusting code not to call n.Left() etc when n may have multiple
    representations, and so on.
    
    This CL focuses on sinit.go.
    
    Passes buildall w/ toolstash -cmp.
    
    Change-Id: I3e9458e69a7a9b3f2fe139382bf961bc4473cc42
    Reviewed-on: https://go-review.googlesource.com/c/go/+/277928
    Trust: Russ Cox <rsc@golang.org>
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

 src/cmd/compile/internal/gc/iexport.go   |   6 +-
 src/cmd/compile/internal/gc/initorder.go |   2 +-
 src/cmd/compile/internal/gc/inl.go       |   3 +-
 src/cmd/compile/internal/gc/obj.go       |  25 ++--
 src/cmd/compile/internal/gc/sinit.go     | 214 +++++++++++++++++++------------
 src/cmd/compile/internal/gc/ssa.go       |   3 +-
 src/cmd/compile/internal/gc/typecheck.go |  14 +-
 src/cmd/compile/internal/ir/expr.go      |  40 +++---
 src/cmd/compile/internal/ir/fmt.go       |  14 +-
 src/cmd/compile/internal/ir/node.go      |   2 -
 src/cmd/compile/internal/ir/node_gen.go  |   8 +-
 11 files changed, 194 insertions(+), 137 deletions(-)
