commit 794f1ebff7aeb4085ce7059011330a5efd946156
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Wed Feb 15 18:43:34 2017 -0800

    cmd/compile: simplify needwritebarrier
    
    Currently, whether we need a write barrier is simply a property of the
    pointer slot being written to.
    
    The only optimization we currently apply using the value being written
    is that pointers to stack variables can omit write barriers because
    they're only written to stack slots... but we already omit write
    barriers for all writes to the stack anyway.
    
    Passes toolstash -cmp.
    
    Change-Id: I7f16b71ff473899ed96706232d371d5b2b7ae789
    Reviewed-on: https://go-review.googlesource.com/37109
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/compile/internal/gc/ssa.go  | 14 +++++---------
 src/cmd/compile/internal/gc/subr.go |  2 +-
 src/cmd/compile/internal/gc/walk.go | 28 +++-------------------------
 3 files changed, 9 insertions(+), 35 deletions(-)
