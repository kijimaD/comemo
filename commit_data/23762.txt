commit e707fbe1d77043bff2cf0de8ab7e930e1d1e20f1
Merge: 6f1884757f a788c913fa
Author: Keith Randall <khr@golang.org>
Date:   Thu Jun 11 10:20:39 2015 -0700

    [dev.ssa] Merge remote-tracking branch 'origin/master' into mbranch
    
    Semi-regular merge of tip into dev.ssa.
    
    Change-Id: Iec8e4266426bed233892e7dbe4448d16c8b89018

 .gitignore                                         |     2 +-
 doc/contribute.html                                |     9 +-
 doc/devel/pre_go1.html                             |   455 +
 doc/devel/release.html                             |   445 +-
 doc/devel/weekly.html                              |     2 +-
 doc/go1.1.html                                     |     2 +-
 doc/go1.5.txt                                      |    13 +-
 misc/cgo/testshared/shared_test.go                 |     2 +-
 misc/ios/detect.go                                 |     3 +
 misc/ios/go_darwin_arm_exec.go                     |     7 +
 src/archive/tar/reader.go                          |     3 +
 src/archive/tar/reader_test.go                     |    19 +
 src/archive/tar/testdata/issue10968.tar            |   Bin 0 -> 512 bytes
 src/archive/zip/writer.go                          |     8 +-
 src/cmd/asm/internal/arch/arch.go                  |     1 -
 src/cmd/asm/internal/asm/asm.go                    |    23 +-
 src/cmd/asm/internal/asm/parse.go                  |     8 +-
 src/cmd/asm/internal/asm/testdata/ppc64.s          |     4 +-
 src/cmd/compile/doc.go                             |   124 +
 src/cmd/compile/internal/arm/cgen64.go             |     6 +-
 src/cmd/compile/internal/arm/ggen.go               |     4 +-
 src/cmd/compile/internal/arm/gsubr.go              |     2 +-
 src/cmd/compile/internal/arm64/peep.go             |     4 +-
 src/cmd/compile/internal/big/arith.go              |    21 +-
 src/cmd/compile/internal/big/bits_test.go          |    22 +-
 src/cmd/compile/internal/big/decimal.go            |    14 +-
 src/cmd/compile/internal/big/float.go              |    89 +-
 src/cmd/compile/internal/big/float_test.go         |   101 +-
 src/cmd/compile/internal/big/floatconv.go          |   248 +-
 src/cmd/compile/internal/big/floatconv_test.go     |   212 +-
 src/cmd/compile/internal/big/floatexample_test.go  |    14 +-
 src/cmd/compile/internal/big/ftoa.go               |   277 +-
 src/cmd/compile/internal/big/nat.go                |     4 +-
 src/cmd/compile/internal/big/nat_test.go           |     6 +-
 src/cmd/compile/internal/gc/align.go               |     6 +-
 src/cmd/compile/internal/gc/cgen.go                |    70 +-
 src/cmd/compile/internal/gc/closure.go             |   112 +-
 src/cmd/compile/internal/gc/const.go               |   190 +-
 src/cmd/compile/internal/gc/cplx.go                |     7 +-
 src/cmd/compile/internal/gc/dcl.go                 |    87 +-
 src/cmd/compile/internal/gc/esc.go                 |   315 +-
 src/cmd/compile/internal/gc/export.go              |    15 +-
 src/cmd/compile/internal/gc/fmt.go                 |    84 +-
 src/cmd/compile/internal/gc/gen.go                 |    77 +-
 src/cmd/compile/internal/gc/go.go                  |    44 +-
 src/cmd/compile/internal/gc/go.y                   |   108 +-
 src/cmd/compile/internal/gc/gsubr.go               |    16 +-
 src/cmd/compile/internal/gc/init.go                |    14 +-
 src/cmd/compile/internal/gc/inl.go                 |    68 +-
 src/cmd/compile/internal/gc/lex.go                 |    65 +-
 src/cmd/compile/internal/gc/mkbuiltin.go           |     2 +-
 src/cmd/compile/internal/gc/mparith3.go            |     2 +-
 src/cmd/compile/internal/gc/obj.go                 |    17 +-
 src/cmd/compile/internal/gc/order.go               |    45 +-
 src/cmd/compile/internal/gc/pgen.go                |    32 +-
 src/cmd/compile/internal/gc/plive.go               |    32 +-
 src/cmd/compile/internal/gc/popt.go                |    28 +-
 src/cmd/compile/internal/gc/racewalk.go            |    38 +-
 src/cmd/compile/internal/gc/range.go               |    40 +-
 src/cmd/compile/internal/gc/reflect.go             |     4 +-
 src/cmd/compile/internal/gc/reg.go                 |    20 +-
 src/cmd/compile/internal/gc/select.go              |    34 +-
 src/cmd/compile/internal/gc/sinit.go               |   119 +-
 src/cmd/compile/internal/gc/ssa.go                 |    24 +-
 src/cmd/compile/internal/gc/subr.go                |    96 +-
 src/cmd/compile/internal/gc/swt.go                 |   157 +-
 src/cmd/compile/internal/gc/syntax.go              |   391 +-
 src/cmd/compile/internal/gc/typecheck.go           |   318 +-
 src/cmd/compile/internal/gc/unsafe.go              |     4 +-
 src/cmd/compile/internal/gc/walk.go                |   147 +-
 src/cmd/compile/internal/gc/y.go                   |   872 +-
 src/cmd/compile/internal/gc/y.output               | 10411 -------------------
 src/cmd/compile/internal/ppc64/peep.go             |     6 +-
 src/cmd/compile/internal/ppc64/prog.go             |     2 +-
 src/cmd/cover/cover_test.go                        |     4 +-
 src/cmd/dist/build.go                              |    91 +-
 src/cmd/dist/buildgo.go                            |     4 +-
 src/cmd/dist/buildruntime.go                       |     4 +-
 src/cmd/dist/buildtool.go                          |     2 +-
 src/cmd/dist/test.go                               |   218 +-
 src/cmd/dist/util.go                               |    25 +-
 src/cmd/doc/main.go                                |    27 +-
 src/cmd/doc/pkg.go                                 |    19 +
 src/cmd/go/alldocs.go                              |    21 +-
 src/cmd/go/bootstrap.go                            |     4 -
 src/cmd/go/build.go                                |    36 +-
 src/cmd/go/fix.go                                  |     2 +-
 src/cmd/go/fmt.go                                  |     2 +-
 src/cmd/go/go_test.go                              |  1770 ++++
 src/cmd/go/help.go                                 |     2 +-
 src/cmd/go/main.go                                 |     2 +-
 src/cmd/go/note.go                                 |    88 +-
 src/cmd/go/note_test.go                            |    51 +
 src/cmd/go/pkg.go                                  |   313 +-
 src/cmd/go/test.bash                               |  1150 --
 src/cmd/go/test.go                                 |     9 +-
 src/cmd/go/testdata/src/vetpkg/c.go                |     9 +
 src/cmd/go/testflag.go                             |     1 +
 src/cmd/go/tool.go                                 |     4 -
 src/cmd/go/vet.go                                  |     8 +-
 src/cmd/internal/obj/arm/asm5.go                   |    16 +-
 src/cmd/internal/obj/arm/obj5.go                   |    63 +-
 src/cmd/internal/obj/arm64/asm7.go                 |    11 +-
 src/cmd/internal/obj/arm64/obj7.go                 |    85 +-
 src/cmd/internal/obj/data.go                       |     4 +-
 src/cmd/internal/obj/go.go                         |     6 +-
 src/cmd/internal/obj/link.go                       |    66 +-
 src/cmd/internal/obj/objfile.go                    |     2 +-
 src/cmd/internal/obj/pass.go                       |     4 +-
 src/cmd/internal/obj/pcln.go                       |     2 +-
 src/cmd/internal/obj/ppc64/9.out.go                |     5 +-
 src/cmd/internal/obj/ppc64/asm9.go                 |    47 +-
 src/cmd/internal/obj/ppc64/obj9.go                 |    12 +-
 src/cmd/internal/obj/util.go                       |     4 +-
 src/cmd/internal/obj/x86/asm6.go                   |    34 +-
 src/cmd/internal/obj/x86/obj6.go                   |    90 +-
 src/cmd/internal/rsc.io/arm/armasm/ext_test.go     |     2 +-
 src/cmd/internal/rsc.io/x86/x86asm/ext_test.go     |     2 +-
 src/cmd/link/doc.go                                |    93 +
 src/cmd/link/internal/arm/asm.go                   |     2 +-
 src/cmd/link/internal/ld/data.go                   |    34 +-
 src/cmd/link/internal/ld/elf.go                    |    53 +-
 src/cmd/link/internal/ld/lib.go                    |    63 +-
 src/cmd/link/internal/ld/pe.go                     |    31 +-
 src/cmd/link/internal/ld/pobj.go                   |    80 +-
 src/cmd/objdump/objdump_test.go                    |     2 +-
 src/cmd/old5a/a.y                                  |     9 +
 src/cmd/old5a/y.go                                 |   339 +-
 src/cmd/old6a/a.y                                  |     9 +
 src/cmd/old6a/lex.go                               |     5 +-
 src/cmd/old6a/y.go                                 |   313 +-
 src/cmd/old8a/a.y                                  |     9 +
 src/cmd/old8a/y.go                                 |   311 +-
 src/cmd/old9a/a.y                                  |    11 +
 src/cmd/old9a/lex.go                               |     5 +-
 src/cmd/old9a/y.go                                 |   267 +-
 src/cmd/pprof/internal/commands/commands.go        |    10 +-
 src/cmd/pprof/internal/driver/driver.go            |     5 +-
 src/cmd/pprof/internal/profile/encode.go           |     2 +-
 src/cmd/pprof/internal/profile/profile.go          |     8 +-
 src/cmd/pprof/internal/svg/svg.go                  |    14 +-
 src/cmd/pprof/internal/svg/svgpan.go               |   291 +
 src/cmd/vet/asmdecl.go                             |   662 ++
 src/cmd/vet/assign.go                              |    49 +
 src/cmd/vet/atomic.go                              |    66 +
 src/cmd/vet/bool.go                                |   186 +
 src/cmd/vet/buildtag.go                            |    91 +
 src/cmd/vet/composite.go                           |   124 +
 src/cmd/vet/copylock.go                            |   154 +
 src/cmd/vet/deadcode.go                            |   296 +
 src/cmd/vet/doc.go                                 |   190 +
 src/cmd/vet/main.go                                |   486 +
 src/cmd/vet/method.go                              |   182 +
 src/cmd/vet/nilfunc.go                             |    67 +
 src/cmd/vet/print.go                               |   586 ++
 src/cmd/vet/rangeloop.go                           |    70 +
 src/cmd/vet/shadow.go                              |   244 +
 src/cmd/vet/shift.go                               |    82 +
 src/cmd/vet/structtag.go                           |   122 +
 src/cmd/vet/testdata/asm.go                        |    33 +
 src/cmd/vet/testdata/asm1.s                        |   254 +
 src/cmd/vet/testdata/asm2.s                        |   257 +
 src/cmd/vet/testdata/asm3.s                        |   178 +
 src/cmd/vet/testdata/asm4.s                        |    26 +
 src/cmd/vet/testdata/assign.go                     |    18 +
 src/cmd/vet/testdata/atomic.go                     |    43 +
 src/cmd/vet/testdata/bool.go                       |   113 +
 src/cmd/vet/testdata/buildtag.go                   |    14 +
 src/cmd/vet/testdata/buildtag_bad.go               |    15 +
 src/cmd/vet/testdata/composite.go                  |    63 +
 src/cmd/vet/testdata/copylock_func.go              |    90 +
 src/cmd/vet/testdata/copylock_range.go             |    67 +
 src/cmd/vet/testdata/deadcode.go                   |  2125 ++++
 src/cmd/vet/testdata/method.go                     |    22 +
 src/cmd/vet/testdata/nilfunc.go                    |    35 +
 src/cmd/vet/testdata/print.go                      |   342 +
 src/cmd/vet/testdata/rangeloop.go                  |    59 +
 src/cmd/vet/testdata/shadow.go                     |    54 +
 src/cmd/vet/testdata/shift.go                      |    78 +
 src/cmd/vet/testdata/structtag.go                  |    36 +
 src/cmd/vet/testdata/tagtest/file1.go              |    10 +
 src/cmd/vet/testdata/tagtest/file2.go              |    10 +
 src/cmd/vet/testdata/unsafeptr.go                  |    61 +
 src/cmd/vet/testdata/unused.go                     |    29 +
 src/cmd/vet/types.go                               |   370 +
 src/cmd/vet/unsafeptr.go                           |    97 +
 src/cmd/vet/unused.go                              |    93 +
 src/cmd/vet/vet_test.go                            |   122 +
 src/cmd/vet/whitelist/whitelist.go                 |    53 +
 src/cmd/yacc/testdata/expr/main.go                 |     2 +-
 src/crypto/cipher/gcm.go                           |    70 +-
 src/crypto/cipher/gcm_test.go                      |    31 +-
 src/crypto/rsa/rsa.go                              |     2 +-
 src/crypto/tls/handshake_server.go                 |    12 -
 src/crypto/tls/key_agreement.go                    |     2 +-
 src/database/sql/sql_test.go                       |     2 +-
 src/debug/dwarf/entry.go                           |     2 +-
 src/debug/gosym/pclntab_test.go                    |    16 +-
 src/encoding/csv/reader.go                         |     2 +-
 src/encoding/csv/writer.go                         |     2 +-
 src/encoding/gob/decode.go                         |    34 +-
 src/encoding/gob/encoder_test.go                   |    24 +
 src/encoding/pem/pem.go                            |    27 +-
 src/encoding/pem/pem_test.go                       |    93 +-
 src/encoding/xml/marshal.go                        |     6 +
 src/encoding/xml/marshal_test.go                   |    18 +
 src/flag/flag.go                                   |     9 +-
 src/fmt/fmt_test.go                                |     3 +-
 src/fmt/format.go                                  |    14 +-
 src/go/build/build.go                              |     8 +-
 src/go/build/syslist.go                            |     2 +-
 src/go/types/methodsetcache.go                     |    69 -
 src/go/types/typexpr.go                            |     6 +-
 src/html/template/escape.go                        |     4 +-
 src/html/template/escape_test.go                   |    12 +
 src/internal/trace/parser.go                       |     4 +-
 src/io/io.go                                       |     4 +-
 src/math/abs_ppc64x.s                              |     2 +-
 src/math/big/bits_test.go                          |     2 +-
 src/math/big/float.go                              |    11 +-
 src/math/big/float_test.go                         |    71 +-
 src/math/big/floatconv.go                          |   118 +-
 src/math/big/floatconv_test.go                     |   183 +-
 src/math/big/floatexample_test.go                  |     8 +-
 src/math/big/ftoa.go                               |   110 +-
 src/mime/encodedword_test.go                       |    56 +-
 src/net/file_test.go                               |     2 +-
 src/net/file_unix.go                               |     3 +-
 src/net/hook.go                                    |     1 +
 src/net/hosts.go                                   |    35 +-
 src/net/hosts_test.go                              |   138 +-
 src/net/http/client_test.go                        |     2 +-
 src/net/http/cookie.go                             |     2 +-
 src/net/http/cookie_test.go                        |     4 +
 src/net/http/server.go                             |     1 +
 src/net/http/transport_test.go                     |     2 +-
 src/net/internal/socktest/sys_windows.go           |     4 +-
 src/net/listen_test.go                             |     4 +-
 src/net/sock_posix.go                              |     2 +-
 src/net/testdata/ipv4-hosts                        |    12 +
 src/net/testdata/ipv6-hosts                        |    11 +
 .../{hosts_singleline => singleline-hosts}         |     0
 src/net/url/example_test.go                        |     2 +-
 src/os/exec.go                                     |     4 +-
 src/os/exec/lp_windows_test.go                     |     2 +-
 src/os/exec_windows.go                             |    18 +-
 src/os/stat_plan9.go                               |     2 +-
 src/path/path.go                                   |     2 +-
 src/race.bash                                      |     9 +-
 src/race.bat                                       |    10 +-
 src/reflect/asm_ppc64x.s                           |     4 +-
 src/regexp/regexp.go                               |     2 +-
 src/runtime/asm_386.s                              |    34 +-
 src/runtime/asm_amd64.s                            |    34 +-
 src/runtime/asm_amd64p32.s                         |    35 +-
 src/runtime/asm_arm.s                              |    42 +-
 src/runtime/asm_arm64.s                            |    41 +-
 src/runtime/asm_ppc64x.s                           |   132 +-
 src/runtime/atomic_ppc64x.s                        |     6 +-
 src/runtime/chan_test.go                           |     4 +
 src/runtime/duff_ppc64x.s                          |     2 +-
 src/runtime/env_test.go                            |     6 +
 src/runtime/lfstack_test.go                        |     2 +-
 src/runtime/mbarrier.go                            |    27 +-
 src/runtime/mbitmap.go                             |    31 +-
 src/runtime/memclr_ppc64x.s                        |     2 +-
 src/runtime/memmove_ppc64x.s                       |     6 +-
 src/runtime/mgc.go                                 |   120 +-
 src/runtime/mgcmark.go                             |   219 +-
 src/runtime/mgcwork.go                             |     4 +-
 src/runtime/mheap.go                               |     2 +-
 src/runtime/netpoll.go                             |     2 +-
 src/runtime/netpoll_solaris.go                     |     2 +-
 src/runtime/os1_darwin.go                          |    15 +-
 src/runtime/os1_dragonfly.go                       |    15 +-
 src/runtime/os1_freebsd.go                         |    15 +-
 src/runtime/os1_linux.go                           |    15 +-
 src/runtime/os1_netbsd.go                          |    16 +-
 src/runtime/os1_openbsd.go                         |    16 +-
 src/runtime/os3_solaris.go                         |    15 +-
 src/runtime/panic.go                               |     2 +-
 src/runtime/panic1.go                              |     1 +
 src/runtime/proc1.go                               |    22 +-
 src/runtime/race/testdata/select_test.go           |     2 +-
 src/runtime/runtime2.go                            |    15 +-
 src/runtime/slice.go                               |     2 +-
 src/runtime/sqrt_test.go                           |     2 +-
 src/runtime/stack1.go                              |    59 +-
 src/runtime/stack_test.go                          |    34 +
 src/runtime/stubs.go                               |     7 +
 src/runtime/sys_arm.go                             |     2 +-
 src/runtime/sys_linux_ppc64x.s                     |    62 +-
 src/runtime/sys_nacl_386.s                         |     2 +-
 src/runtime/traceback.go                           |    33 +-
 src/strings/strings.go                             |     4 +-
 src/sync/atomic/asm_ppc64x.s                       |    24 +-
 src/syscall/asm.s                                  |     7 -
 src/syscall/asm_linux_ppc64x.s                     |    16 +-
 src/syscall/dll_windows.go                         |     2 +-
 src/syscall/mksyscall_windows.go                   |     2 +-
 src/syscall/route_bsd.go                           |     2 +-
 src/testing/quick/quick.go                         |    14 +-
 src/testing/quick/quick_test.go                    |    17 +
 src/testing/testing.go                             |     9 +-
 src/text/template/exec.go                          |    14 +-
 src/text/template/exec_test.go                     |    17 +
 src/text/template/multi_test.go                    |    73 +
 src/text/template/parse/parse_test.go              |     4 +-
 src/text/template/template.go                      |    79 +-
 test/complit1.go                                   |    14 +
 test/escape2.go                                    |    12 +-
 test/escape2n.go                                   |    12 +-
 test/fixedbugs/issue10654.go                       |    17 +
 test/fixedbugs/issue10977.go                       |    20 +
 test/linkx.go                                      |     6 +-
 test/linkx_run.go                                  |    18 +-
 test/nosplit.go                                    |     2 +-
 test/run.go                                        |    16 +-
 318 files changed, 17781 insertions(+), 16028 deletions(-)
