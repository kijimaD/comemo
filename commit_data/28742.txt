commit fb3cf5c686b09bab8c1bef5f7589aaef0e6d9712
Author: Ian Lance Taylor <iant@golang.org>
Date:   Sat Jul 9 19:38:04 2016 -0700

    math/rand: fix raciness in Rand.Read
    
    There are no synchronization points protecting the readVal and readPos
    variables. This leads to a race when Read is called concurrently.
    Fix this by adding methods to lockedSource, which is the case where
    a race matters.
    
    Fixes #16308.
    
    Change-Id: Ic028909955700906b2d71e5c37c02da21b0f4ad9
    Reviewed-on: https://go-review.googlesource.com/24852
    Reviewed-by: Joe Tsai <thebrokentoaster@gmail.com>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>

 src/math/rand/race_test.go | 47 ++++++++++++++++++++++++++++++++++++++++++++++
 src/math/rand/rand.go      | 42 ++++++++++++++++++++++++++++++++++++-----
 2 files changed, 84 insertions(+), 5 deletions(-)
