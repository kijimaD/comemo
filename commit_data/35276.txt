commit bcdbd58ce48d71cb912238caaa193d832901e227
Author: Elias Naur <elias.naur@gmail.com>
Date:   Thu May 3 15:38:37 2018 +0200

    cmd/link/internal/ld: skip DWARF combining for iOS binaries
    
    The macOS and iOS external linker strips DWARF information from
    binaries because it assumes the information will go into separate
    DWARF information .dSYM files. To preserve the embedded debugging
    information, the Go linker re-combines the separate DWARF
    information into the unmapped __DWARF segment of the final
    executable.
    
    However, the iOS dyld linker does not allow unmapped segments, so
    use the presence of the LC_VERSION_MIN_IPHONEOS linker command to
    skip DWARF combining. Note that we can't use GOARCH for detection
    since the iOS emulator runs on  GOARCH=386 and GOARCH=amd64 and we
    will run into https://golang.org/issues/25148.
    
    Updates #25148.
    
    Change-Id: I29a1bc468fdee74ab3b27c46931501a0a8120c66
    Reviewed-on: https://go-review.googlesource.com/111275
    Run-TryBot: Elias Naur <elias.naur@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

 src/cmd/link/dwarf_test.go                      | 36 ++++++++--
 src/cmd/link/internal/ld/lib.go                 | 11 ++--
 src/cmd/link/internal/ld/macho_combine_dwarf.go | 88 ++++++++++++++-----------
 3 files changed, 88 insertions(+), 47 deletions(-)
