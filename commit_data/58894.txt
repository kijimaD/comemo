commit 66d34c7d08d7c536c3165dc49ed318e73ea5acc2
Author: Bryan C. Mills <bcmills@google.com>
Date:   Wed Jan 17 15:00:40 2024 -0500

    cmd/go/internal/modfetch: set protocol.version=2 for shallow git fetches
    
    This works around an apparent bug in the Git HTTP backend, introduced
    in Git 2.21, that causes responses for the version 1 protocol to
    provide incomplete tags.
    
    For Git commands older than 2.18, this configuration flag is ignored.
    (Note that Git 2.29 and above already use protocol version 2 by
    default.)
    
    Fixes #56881.
    
    Change-Id: I9b241cfb604e5f633ca6a5d799df6706246684a7
    Cq-Include-Trybots: luci.golang.try:gotip-linux-amd64-longtest,gotip-windows-amd64-longtest
    Reviewed-on: https://go-review.googlesource.com/c/go/+/556358
    Run-TryBot: Bryan Mills <bcmills@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>

 src/cmd/go/internal/modfetch/codehost/git.go | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)
