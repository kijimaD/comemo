commit b8fd3440cd3973a16184c4c878b557cf6c6703e4
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Thu Dec 31 21:32:52 2020 -0800

    [dev.regabi] cmd/compile: report unused variables during typecheck
    
    Unused variables are a type-checking error, so they should be reported
    during typecheck rather than walk.
    
    One catch is that we only want to report unused-variable errors for
    functions that type check successfully, but some errors are reported
    during noding, so we don't have an easy way to detect that
    currently. As an approximate solution, we simply check if we've
    reported any errors yet.
    
    Passes toolstash -cmp.
    
    Change-Id: I9400bfc94312c71d0c908a491e85c16d62224c9c
    Reviewed-on: https://go-review.googlesource.com/c/go/+/280973
    Trust: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>

 src/cmd/compile/internal/typecheck/typecheck.go | 34 +++++++++++++++++++++++++
 src/cmd/compile/internal/walk/walk.go           | 30 ----------------------
 2 files changed, 34 insertions(+), 30 deletions(-)
