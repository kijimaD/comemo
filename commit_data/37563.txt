commit cc880de4bebf9b9242a8f5d1d7e9cf01863bb701
Author: Russ Cox <rsc@golang.org>
Date:   Fri Aug 17 22:32:22 2018 -0400

    cmd/go: allow 'go run x.go' to use nearby internal imports in module mode
    
    In GOPATH mode the rule has always been that 'go run x.go' can
    import whatever the package in x.go's directory would be able to
    import. Apply the same rule here.
    
    The bad import path was triggering other mysterious errors
    during 'go run' in other circumstances. Setting it correctly fixes
    those too.
    
    Fixes #26046.
    Fixes #27022.
    
    Change-Id: I0a9b0a154a20f48add5a199da85572e7ffe0cde4
    Reviewed-on: https://go-review.googlesource.com/129798
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

 src/cmd/go/internal/load/pkg.go                 | 56 +++++++++++++------------
 src/cmd/go/internal/modload/init.go             |  1 +
 src/cmd/go/internal/modload/load.go             | 22 ++++++++++
 src/cmd/go/testdata/script/mod_run_internal.txt | 46 ++++++++++++++++++++
 src/cmd/go/testdata/script/mod_run_path.txt     | 15 +++++++
 5 files changed, 114 insertions(+), 26 deletions(-)
