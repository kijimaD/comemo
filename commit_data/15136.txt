commit 572d984eaa64e6e3a1a67ecde9f6a1038d76becc
Author: Russ Cox <rsc@golang.org>
Date:   Mon Feb 4 22:48:31 2013 -0500

    cmd/gc: fix escape analysis
    
    If the analysis reached a node twice, then the analysis was cut off.
    However, if the second arrival is at a lower depth (closer to escaping)
    then it is important to repeat the traversal.
    
    The repeating must be cut off at some point to avoid the occasional
    infinite recursion. This CL cuts it off as soon as possible while still
    passing all tests.
    
    Fixes #4751.
    
    R=ken2
    CC=golang-dev, lvd
    https://golang.org/cl/7303043

 src/cmd/gc/esc.c | 28 ++++++++++++++++++++++++----
 src/cmd/gc/go.h  |  1 +
 test/escape2.go  | 16 ++++++++++++++++
 3 files changed, 41 insertions(+), 4 deletions(-)
