commit 6fbdfe48041c883a9f6d8c981a7205b7c327862a
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Jan 24 14:11:04 2020 -0500

    cmd/compile: on PPC64, fold offset into some loads/stores only when offset is 4-aligned
    
    On PPC64, MOVWload, MOVDload, and MOVDstore are assembled to a
    "DS from" instruction which requiers the offset is a multiple of
    4. Only fold offset to such instructions if it is a multiple of 4.
    
    Fixes #36723.
    
    "GOARCH=ppc64 GOOS=linux go build -gcflags=all=-d=ssa/check/on std cmd"
    passes now.
    
    Change-Id: I67f2a6ac02f0d33d470f68ff54936c289a4c765b
    Reviewed-on: https://go-review.googlesource.com/c/go/+/216379
    Reviewed-by: Carlos Eduardo Seo <cseo@linux.vnet.ibm.com>

 src/cmd/compile/internal/ssa/gen/PPC64.rules | 29 +++++++-------
 src/cmd/compile/internal/ssa/rewritePPC64.go | 56 ++++++++++++++--------------
 test/fixedbugs/issue36723.go                 | 26 +++++++++++++
 3 files changed, 70 insertions(+), 41 deletions(-)
