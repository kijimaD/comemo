commit f6f2f77142fcf0a4ec317bff6850ffb6ee6f0bb2
Author: Dmitriy Vyukov <dvyukov@google.com>
Date:   Wed Aug 6 01:50:37 2014 +0400

    runtime: cache one GC workbuf in thread-local storage
    We call scanblock for lots of small root pieces
    e.g. for every stack frame args and locals area.
    Every scanblock invocation calls getempty/putempty,
    which accesses lock-free stack shared among all worker threads.
    One-element local cache allows most scanblock calls
    to proceed without accessing the shared stack.
    
    LGTM=rsc
    R=golang-codereviews, rlh
    CC=golang-codereviews, khr, rsc
    https://golang.org/cl/121250043

 src/pkg/runtime/malloc.h |  3 +++
 src/pkg/runtime/mcache.c |  1 +
 src/pkg/runtime/mgc0.c   | 25 ++++++++++++++++++++++++-
 3 files changed, 28 insertions(+), 1 deletion(-)
