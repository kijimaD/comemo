commit 0b6b5641d7f30cc1cf6ec623793ec758861359dc
Author: Heschi Kreinick <heschi@google.com>
Date:   Fri Sep 29 14:14:03 2017 -0400

    cmd/compile: use correct stack slots in location lists
    
    When variables need to be spilled to the stack, they usually get their
    own stack slot. Local variables have a slot allocated if they need one,
    and arguments start out on the stack. Before this CL, the debug
    information made the assumption that this was always the case, and so
    didn't bother storing an actual stack offset during SSA analysis.
    
    There's at least one case where this isn't true: variables that alias
    arguments. Since the argument is the source of the variable, the
    variable will begin its life on the stack in the argument's stack slot,
    not its own. Therefore the debug info needs to track the actual stack
    slot for each location entry.
    
    No detectable performance change, despite the O(N) loop in getHomeSlot.
    
    Change-Id: I2701adb7eddee17d4524336cb7aa6786e8f32b46
    Reviewed-on: https://go-review.googlesource.com/67231
    Reviewed-by: Alessandro Arzilli <alessandro.arzilli@gmail.com>
    Reviewed-by: David Chase <drchase@google.com>

 src/cmd/compile/internal/gc/pgen.go   | 41 ++++++++++++++++------
 src/cmd/compile/internal/ssa/debug.go | 65 ++++++++++++++++++++++++++---------
 2 files changed, 80 insertions(+), 26 deletions(-)
