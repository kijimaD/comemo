commit 09d9520be931a32a8ab18990a5684550e3f4b6cb
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue Feb 10 15:56:32 2015 +1300

    liblink, cmd/6l: re-enable -shared on amd64
    
    The creation of liblink and subsequent introduction of more explicit
    TLS handling broke 6l's (unsupported) -shared flag.  This change adds
    -shared flags to cmd/asm and 6g and changes liblink to generate shared-
    library compatible instruction sequences when they are passed, and
    changes 6l to emit the appropriate ELF relocation.
    
    A proper fix probably also requires go tool changes.
    
    Fixes #9652.
    
    Change-Id: I7b7718fe7305c802ac994f4a5c8de68cfbe6c76b
    Reviewed-on: https://go-review.googlesource.com/4321
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Ian Lance Taylor <iant@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/6l/asm.go                   |  7 +++++++
 src/cmd/asm/internal/flags/flags.go |  1 +
 src/cmd/asm/main.go                 |  3 +++
 src/cmd/internal/gc/lex.go          |  3 +++
 src/cmd/internal/obj/x86/asm6.go    | 29 +++++++++++++++++++++++++----
 src/cmd/internal/obj/x86/obj6.go    |  2 ++
 6 files changed, 41 insertions(+), 4 deletions(-)
