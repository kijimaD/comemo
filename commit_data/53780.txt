commit c94f39a80e30f38c8a6e72f58c4cb63c1c106eb0
Author: Keith Randall <khr@golang.org>
Date:   Tue May 30 10:19:50 2023 -0700

    cmd/compile: simplify uninterruptable range check for write barriers
    
    Make the load detection a bit clearer and more precise. In particular,
    for architectures which have to materialize the address using a
    separate instruction, we were using the address materialization
    instruction, not the load itself.
    
    Also apply the marking a bit less. We don't need to mark the load itself,
    only the instructions after the load. And we don't need to mark the WBend
    itself, only the instructions before it.
    
    Change-Id: Ie367a8023b003d5317b752d873bb385f931bb30e
    Reviewed-on: https://go-review.googlesource.com/c/go/+/499395
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Keith Randall <khr@google.com>

 src/cmd/compile/internal/liveness/plive.go | 43 +++++++++++++-----------------
 1 file changed, 19 insertions(+), 24 deletions(-)
