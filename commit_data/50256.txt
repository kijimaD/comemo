commit 3d051ba8d40a8c2e2b02c0a96cf0c47b1a9c469b
Author: Bryan C. Mills <bcmills@google.com>
Date:   Tue Mar 17 21:29:54 2020 -0400

    cmd/dist: run a checkNotStale on the builders before running tests
    
    This should be a no-op, but if the sharded builders are for some
    reason distributing stale snapshots — or testing them with mismatched
    environments — this should catch them out at a relatively low cost
    (#24300 notwithstanding).
    
    Given the frequently at which (*tester).runPending already checks for
    staleness, we do not expect the impact of this extra check to be
    significant for most builders.
    
    For #33598
    Updates #24300
    
    Change-Id: I197d6a69c72e2eec9e4563b459206de76c89e8a1
    Reviewed-on: https://go-review.googlesource.com/c/go/+/223755
    Trust: Bryan C. Mills <bcmills@google.com>
    Run-TryBot: Bryan C. Mills <bcmills@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Dmitri Shuralyov <dmitshur@golang.org>

 src/cmd/dist/test.go | 50 +++++++++++++++++++++++++++++---------------------
 1 file changed, 29 insertions(+), 21 deletions(-)
