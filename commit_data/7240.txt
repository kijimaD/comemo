commit eaae95fa3d9f54665ef954df26c2fd54a32460c3
Author: Robert Griesemer <gri@golang.org>
Date:   Tue Jan 25 13:32:56 2011 -0800

    scanner: fix Position returned by Scan, Pos
    
    The implementation of the position computation
    was surprisingly broken. Implemented fixes and
    added extra test cases.
    
    There is a slight interface change: Calling
    Pos() returns the current position; but if
    called before Scan() that position may not
    be the position of the next token returned
    by Scan() (depending on the scan settings
    and the source text) - this in contrast to
    the original comment.
    
    However, after calling Scan(), the Scanner's
    Position field reports the position of the
    scanned token, as before.
    
    Fixes #1327.
    
    R=rsc
    CC=golang-dev
    https://golang.org/cl/3972047

 src/pkg/scanner/scanner.go      |  81 +++++++++++++++++++++--------
 src/pkg/scanner/scanner_test.go | 110 +++++++++++++++++++++++++++++++---------
 2 files changed, 144 insertions(+), 47 deletions(-)
