commit c5fee935bbb8f02406eb653cfed550593755a1a4
Author: Cherry Mui <cherryyz@google.com>
Date:   Thu Dec 16 14:33:13 2021 -0500

    cmd/link: force eager binding when using plugins on darwin
    
    When building/using plugins on darwin, we need to use flat
    namespace so the same symbol from the main executable and the
    plugin can be resolved to the same address. Apparently, when using
    flat namespace the dynamic linker can hang at forkExec when
    resolving a lazy binding. Work around it by forcing early bindings.
    
    Fixes #38824.
    
    Change-Id: I983aa0a0960b15bf3f7871382e8231ee244655f4
    Reviewed-on: https://go-review.googlesource.com/c/go/+/372798
    Trust: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Than McIntosh <thanm@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Cherry Mui <cherryyz@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 misc/cgo/testplugin/plugin_test.go            | 28 +++++++++++++++++++++++++
 misc/cgo/testplugin/testdata/forkexec/main.go | 30 +++++++++++++++++++++++++++
 src/cmd/link/internal/ld/lib.go               |  5 ++++-
 3 files changed, 62 insertions(+), 1 deletion(-)
