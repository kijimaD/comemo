commit 0e3114871e221485d89bf94dc019fcfa3df9c21a
Author: Cherry Zhang <cherryyz@google.com>
Date:   Mon Jul 20 18:07:00 2020 -0400

    [dev.link] cmd/link: fix hash collision check
    
    For content-addressable symbols, we build its content hash based
    on the symbol data and relocations. When the compiler builds the
    symbol data, it may not always include the trailing zeros, e.g.
    the data of [10]int64{1,2,3} is only the first 24 bytes.
    Therefore, we may end up with symbols with the same contents
    (thus same hash) but different sizes. This is not actually a hash
    collision. In this case, we can deduplicate them and keep the one
    with the larger size.
    
    Change-Id: If6834542d7914cc00f917d7db151955e5aee6f30
    Reviewed-on: https://go-review.googlesource.com/c/go/+/243718
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Jeremy Faller <jeremy@golang.org>

 src/cmd/link/internal/loader/loader.go    | 63 +++++++++++++++----------------
 src/cmd/link/link_test.go                 | 20 ++++++++++
 src/cmd/link/testdata/testHashedSyms/p.go | 33 ++++++++++++++++
 3 files changed, 84 insertions(+), 32 deletions(-)
