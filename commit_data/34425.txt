commit 1ded8334f7e99f6fd9284dd71f9fcf72da10c3c8
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Tue Sep 19 14:28:03 2017 -0700

    [release-branch.go1.9] cmd/compile/internal/syntax: fix source buffer refilling
    
    The previous code seems to have an off-by-1 in it somewhere, the
    consequence being that we didn't properly preserve all of the old
    buffer contents that we intended to.
    
    After spending a while looking at the existing window-shifting logic,
    I wasn't able to understand exactly how it was supposed to work or
    where the issue was, so I rewrote it to be (at least IMO) more
    obviously correct.
    
    Fixes #21938.
    
    Change-Id: I1ed7bbc1e1751a52ab5f7cf0411ae289586dc345
    Reviewed-on: https://go-review.googlesource.com/64830
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Robert Griesemer <gri@golang.org>
    Reviewed-on: https://go-review.googlesource.com/70977
    Run-TryBot: Russ Cox <rsc@golang.org>
    Reviewed-by: Matthew Dempsky <mdempsky@google.com>

 src/cmd/compile/internal/syntax/scanner_test.go | 13 +++++++++++++
 src/cmd/compile/internal/syntax/source.go       | 11 ++++++-----
 2 files changed, 19 insertions(+), 5 deletions(-)
