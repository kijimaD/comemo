commit 72c4ee1a9daba7b952c9440851d3b9ebbaa58458
Author: Dmitriy Vyukov <dvyukov@google.com>
Date:   Wed May 22 23:04:46 2013 +0400

    runtime: properly synchronize GC and finalizer goroutine
    This is needed for preemptive scheduler, because the goroutine
    can be preempted at surprising points.
    
    R=golang-dev, iant
    CC=golang-dev
    https://golang.org/cl/9376043

 src/pkg/runtime/mgc0.c | 36 +++++++++++++++---------------------
 1 file changed, 15 insertions(+), 21 deletions(-)
