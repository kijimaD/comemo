commit 17aa21279965f5d088606639c17aa60208a34b7d
Author: Bryan C. Mills <bcmills@google.com>
Date:   Mon Nov 22 14:30:40 2021 -0500

    runtime: in TestSpuriousWakeupsNeverHangSemasleep, wait for the runtime to register handlers
    
    According to https://man7.org/linux/man-pages/man7/signal.7.html, the
    default behavior of SIGIO is to terminate the program. The Go runtime
    changes that behavior with its own signal handler, so the program will
    terminate if we send the signal before the runtime has finished
    setting up.
    
    Fixes #49727
    
    Change-Id: I65db66f5176831c8d7454eebc0138d825c68e100
    Reviewed-on: https://go-review.googlesource.com/c/go/+/366255
    Trust: Bryan C. Mills <bcmills@google.com>
    Run-TryBot: Bryan C. Mills <bcmills@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/runtime/semasleep_test.go          | 41 +++++++++++++++++++++++++---------
 src/runtime/testdata/testprog/sleep.go |  7 +++++-
 2 files changed, 37 insertions(+), 11 deletions(-)
