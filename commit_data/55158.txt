commit 71971be034ae47f56682c26129711c29a17f3441
Author: Robert Griesemer <gri@golang.org>
Date:   Thu Jan 12 10:04:38 2023 -0800

    go/types: generate util_test.go, cosmetic changes to generator.go
    
    Change-Id: I80e4bbda302b9170d2367af2442ee282bdf51b12
    Reviewed-on: https://go-review.googlesource.com/c/go/+/461679
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Robert Griesemer <gri@google.com>
    Auto-Submit: Robert Griesemer <gri@google.com>
    Reviewed-by: Robert Findley <rfindley@google.com>
    Reviewed-by: Robert Griesemer <gri@google.com>
---
 src/go/types/generator.go | 8 +++++---
 src/go/types/util_test.go | 2 ++
 2 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/src/go/types/generator.go b/src/go/types/generator.go
index 3f2668028d..a053072f6b 100644
--- a/src/go/types/generator.go
+++ b/src/go/types/generator.go
@@ -37,9 +37,9 @@ func main() {
 	// process provided filenames, if any
 	if flag.NArg() > 0 {
 		for _, filename := range flag.Args() {
-			fmt.Println("generating", filename)
 			generate(filename, filemap[filename])
 		}
+		fmt.Printf("generated %d files\n", flag.NArg())
 		return
 	}
 
@@ -47,6 +47,7 @@ func main() {
 	for filename, action := range filemap {
 		generate(filename, action)
 	}
+	fmt.Printf("generated %d files\n", len(filemap))
 }
 
 func generate(filename string, action action) {
@@ -117,6 +118,7 @@ var filemap = map[string]action{
 	"under.go":         nil,
 	"unify.go":         fixSprintf,
 	"universe.go":      fixGlobalTypVarDecl,
+	"util_test.go":     fixTokenPos,
 	"validtype.go":     nil,
 }
 
@@ -152,8 +154,8 @@ func renameImportPath(f *ast.File, from, to string) {
 	})
 }
 
-// fixTokenPos changes imports of "cmd/compile/internal/syntax" to "go/token"
-// and uses of syntax.Pos to token.Pos.
+// fixTokenPos changes imports of "cmd/compile/internal/syntax" to "go/token",
+// uses of syntax.Pos to token.Pos, and calls to x.IsKnown() to x.IsValid().
 func fixTokenPos(f *ast.File) {
 	ast.Inspect(f, func(n ast.Node) bool {
 		switch n := n.(type) {
diff --git a/src/go/types/util_test.go b/src/go/types/util_test.go
index cba6e24319..4667451a97 100644
--- a/src/go/types/util_test.go
+++ b/src/go/types/util_test.go
@@ -1,3 +1,5 @@
+// Code generated by "go run generator.go"; DO NOT EDIT.
+
 // Copyright 2023 The Go Authors. All rights reserved.
 // Use of this source code is governed by a BSD-style
 // license that can be found in the LICENSE file.
