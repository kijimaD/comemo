commit 8f262a2843a6f3ef32e938ce39c0ffeb84f04a42
Author: Achille Roussel <achille.roussel@gmail.com>
Date:   Wed Oct 18 19:21:55 2023 +0000

    internal/cpu: detect support of AVX512
    
    Extracts changes from that were submitted in other CLs to enable AVX512
    detection, notably:
    - https://go-review.googlesource.com/c/go/+/271521
    - https://go-review.googlesource.com/c/go/+/379394
    - https://go-review.googlesource.com/c/go/+/502476
    
    This change adds properties to the cpu.X86 fields to enable runtime
    detection of AVX512, and the hasAVX512F, hasAVX512BW, and hasAVX512VL
    macros to support bypassing runtime checks in assembly code when
    GOAMD64=v4 is set.
    
    Change-Id: Ia7c3f22f1e66bf1de575aba522cb0d0a55ce791f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/536257
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Martin Möhrmann <martin@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Auto-Submit: Martin Möhrmann <martin@golang.org>
    Reviewed-by: Keith Randall <khr@google.com>
    Run-TryBot: Martin Möhrmann <moehrmann@google.com>
    Commit-Queue: Martin Möhrmann <martin@golang.org>
    Reviewed-by: Martin Möhrmann <moehrmann@google.com>

 src/internal/cpu/cpu.go          |  3 +++
 src/internal/cpu/cpu_x86.go      | 37 +++++++++++++++++++++++++++++++------
 src/internal/cpu/cpu_x86_test.go | 18 ++++++++++++++++++
 src/runtime/asm_amd64.h          |  3 +++
 src/runtime/asm_amd64.s          | 12 ++++++------
 5 files changed, 61 insertions(+), 12 deletions(-)
