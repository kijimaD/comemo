commit 1f411e9b6d8849014653c89a9df77b8aadd082e6
Author: Roland Shoemaker <roland@golang.org>
Date:   Fri Jan 7 12:18:30 2022 -0800

    testing: only snapshot coverage during fuzzing
    
    Only snapshot/reset coverage counters when we are actually fuzzing.
    This prevents a race when running corpus/seed values during the testing
    phase.
    
    Fixes #50488
    
    Change-Id: I7dd5a0353a296c0b13eede29ad9af7c78814fa2d
    Reviewed-on: https://go-review.googlesource.com/c/go/+/376554
    Trust: Katie Hockman <katie@golang.org>
    Reviewed-by: Katie Hockman <katie@golang.org>
    Trust: Roland Shoemaker <roland@golang.org>
    Run-TryBot: Roland Shoemaker <roland@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/go/testdata/script/test_fuzz_test_race.txt | 38 ++++++++++++++++++++++
 src/testing/fuzz.go                                |  6 ++--
 2 files changed, 42 insertions(+), 2 deletions(-)
