commit 734b26d4b9b90cab4b770a8d55fdaeb3a7683bd7
Author: Michael Pratt <mpratt@google.com>
Date:   Fri May 5 16:58:43 2023 -0400

    runtime: exclude extra M's from debug.SetMaxThreads
    
    The purpose of the debug.SetMaxThreads limit is to avoid accidental fork
    bomb from something like millions of goroutines blocking on system
    calls, causing the runtime to create millions of threads.
    
    By definition we don't create threads created in C, so this isn't a
    problem for those threads, and we can exclude them from the limit. If C
    wants to create tens of thousands of threads, who are we to say no?
    
    Fixes #60004.
    
    Change-Id: I62b875890718b406abca42a9a4078391e25aa21b
    Reviewed-on: https://go-review.googlesource.com/c/go/+/492743
    Auto-Submit: Michael Pratt <mpratt@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Run-TryBot: Michael Pratt <mpratt@google.com>

 src/runtime/proc.go | 29 +++++++++++++++++++++++++----
 1 file changed, 25 insertions(+), 4 deletions(-)
