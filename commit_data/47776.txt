commit b55cbbb9e76969d67fbc6e264a584ad18c2f95fa
Author: Bryan C. Mills <bcmills@google.com>
Date:   Thu Dec 9 11:42:42 2021 -0500

    net: pass a testing.TB to newLocal* helpers
    
    Passing in an explicit testing.TB gives two benefits:
    
    1. It allows the helper to fail the test itself, instead of returning
       an error to the caller. A non-nil error invariably fails the
       calling test, and none of these callers bother to add detail to the
       error when logging it anyway so returning the error just added
       noise to the test bodies.
    
    2. It allows the helper to use t.Cleanup to perform any needed cleanup
       tasks, which will be used in CL 370695 to clean up temp directories
       used as namespaces for unix socket paths.
    
    For #34611
    
    Change-Id: I805e701687c12de2caca955649369294229c10b4
    Reviewed-on: https://go-review.googlesource.com/c/go/+/370696
    Trust: Bryan Mills <bcmills@google.com>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>
    Run-TryBot: Bryan Mills <bcmills@google.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/net/conn_test.go             |  5 +--
 src/net/dial_test.go             | 38 ++++--------------
 src/net/dial_unix_test.go        |  5 +--
 src/net/error_test.go            | 15 ++-----
 src/net/file_test.go             | 35 ++++++----------
 src/net/listen_test.go           | 25 +++++-------
 src/net/mockserver_test.go       | 84 +++++++++++++++++++++++++--------------
 src/net/net_test.go              | 49 ++++++-----------------
 src/net/protoconn_test.go        |  5 +--
 src/net/rawconn_test.go          | 15 ++-----
 src/net/sendfile_test.go         | 25 +++---------
 src/net/server_test.go           | 20 ++--------
 src/net/splice_test.go           | 71 +++++++++------------------------
 src/net/tcpsock_test.go          | 25 +++---------
 src/net/tcpsock_unix_test.go     |  5 +--
 src/net/timeout_test.go          | 86 +++++++++-------------------------------
 src/net/udpsock_test.go          | 20 ++--------
 src/net/unixsock_test.go         | 15 ++-----
 src/net/unixsock_windows_test.go |  5 +--
 src/net/writev_test.go           |  5 +--
 20 files changed, 164 insertions(+), 389 deletions(-)
