commit 319a8c45accc9319f9cedf8a4cf2bdda627cf8c6
Author: Rob Pike <r@golang.org>
Date:   Mon Mar 21 13:02:10 2011 -0700

    syscall: rename from .sh to .pl, because these files are in Perl.
    Also delete references to nacl.
    
    R=rsc, r2
    CC=golang-dev
    https://golang.org/cl/4275060
---
 src/pkg/syscall/mkall.sh                           | 37 ++++++++--------------
 src/pkg/syscall/{mksyscall.sh => mksyscall.pl}     |  4 +--
 .../{mksyscall_windows.sh => mksyscall_windows.pl} |  4 +--
 .../{mksysnum_darwin.sh => mksysnum_darwin.pl}     |  2 +-
 .../{mksysnum_freebsd.sh => mksysnum_freebsd.pl}   |  2 +-
 .../{mksysnum_linux.sh => mksysnum_linux.pl}       |  2 +-
 src/pkg/syscall/zsyscall_darwin_amd64.go           |  2 +-
 src/pkg/syscall/zsysnum_darwin_amd64.go            |  2 +-
 src/pkg/syscall/ztypes_darwin_amd64.go             |  2 +-
 9 files changed, 24 insertions(+), 33 deletions(-)

diff --git a/src/pkg/syscall/mkall.sh b/src/pkg/syscall/mkall.sh
index a1f8ae2ff4..7e4511f38f 100755
--- a/src/pkg/syscall/mkall.sh
+++ b/src/pkg/syscall/mkall.sh
@@ -63,7 +63,7 @@
 #
 # * zsyscall_${GOOS}_${GOARCH}.go
 #
-# Generated by mksyscall.sh; see syscall_${GOOS}.go above.
+# Generated by mksyscall.pl; see syscall_${GOOS}.go above.
 #
 # * zsysnum_${GOOS}_${GOARCH}.go
 #
@@ -76,7 +76,7 @@
 GOOSARCH="${GOOS}_${GOARCH}"
 
 # defaults
-mksyscall="./mksyscall.sh"
+mksyscall="./mksyscall.pl"
 mkerrors="./mkerrors.sh"
 run="sh"
 
@@ -101,55 +101,46 @@ _* | *_ | _)
 	;;
 freebsd_386)
 	mkerrors="$mkerrors -f -m32"
-	mksyscall="./mksyscall.sh -l32"
-	mksysnum="curl -s 'http://svn.freebsd.org/viewvc/base/head/sys/kern/syscalls.master?view=markup' | ./mksysnum_freebsd.sh"
+	mksyscall="./mksyscall.pl -l32"
+	mksysnum="curl -s 'http://svn.freebsd.org/viewvc/base/head/sys/kern/syscalls.master?view=markup' | ./mksysnum_freebsd.pl"
 	mktypes="godefs -gsyscall -f-m32"
 	;;
 freebsd_amd64)
 	mkerrors="$mkerrors -f -m64"
-	mksysnum="curl -s 'http://svn.freebsd.org/viewvc/base/head/sys/kern/syscalls.master?view=markup' | ./mksysnum_freebsd.sh"
+	mksysnum="curl -s 'http://svn.freebsd.org/viewvc/base/head/sys/kern/syscalls.master?view=markup' | ./mksysnum_freebsd.pl"
 	mktypes="godefs -gsyscall -f-m64"
 	;;
 darwin_386)
 	mkerrors="$mkerrors -f -m32"
-	mksyscall="./mksyscall.sh -l32"
-	mksysnum="./mksysnum_darwin.sh /home/rsc/pub/xnu-1228/bsd/kern/syscalls.master"
+	mksyscall="./mksyscall.pl -l32"
+	mksysnum="./mksysnum_darwin.pl /home/rsc/pub/xnu-1228/bsd/kern/syscalls.master"
 	mktypes="godefs -gsyscall -f-m32"
 	;;
 darwin_amd64)
 	mkerrors="$mkerrors -f -m64"
-	mksysnum="./mksysnum_darwin.sh /home/rsc/pub/xnu-1228/bsd/kern/syscalls.master"
+	mksysnum="./mksysnum_darwin.pl /home/rsc/pub/xnu-1228/bsd/kern/syscalls.master"
 	mktypes="godefs -gsyscall -f-m64"
 	mkerrors="./mkerrors.sh"
 	;;
 linux_386)
 	mkerrors="$mkerrors -f -m32"
-	mksyscall="./mksyscall.sh -l32"
-	mksysnum="./mksysnum_linux.sh /usr/include/asm/unistd_32.h"
+	mksyscall="./mksyscall.pl -l32"
+	mksysnum="./mksysnum_linux.pl /usr/include/asm/unistd_32.h"
 	mktypes="godefs -gsyscall -f-m32"
 	;;
 linux_amd64)
 	mkerrors="$mkerrors -f -m64"
-	mksysnum="./mksysnum_linux.sh /usr/include/asm/unistd_64.h"
+	mksysnum="./mksysnum_linux.pl /usr/include/asm/unistd_64.h"
 	mktypes="godefs -gsyscall -f-m64"
 	;;
-nacl_386)
-	NACL="/home/rsc/pub/nacl/native_client"
-	NACLRUN="$NACL/src/trusted/service_runtime"
-	NACLSDK="$NACL/src/third_party/nacl_sdk/linux/sdk/nacl-sdk/nacl"
-	mksyscall="./mksyscall.sh -l32 -nacl"
-	mksysnum="./mksysnum_nacl.sh $NACLRUN/include/bits/nacl_syscalls.h"
-	mktypes="godefs -gsyscall -f-m32 -f-I$NACLSDK/include -f-I$NACL"
-	mkerrors="./mkerrors_nacl.sh $NACLRUN/include/sys/errno.h"
-	;;
 linux_arm)
 	mkerrors="$mkerrors"
-	mksyscall="./mksyscall.sh -b32"
-	mksysnum="./mksysnum_linux.sh /usr/include/asm/unistd.h"
+	mksyscall="./mksyscall.pl -b32"
+	mksysnum="./mksysnum_linux.pl /usr/include/asm/unistd.h"
 	mktypes="godefs -gsyscall"
 	;;
 windows_386)
-	mksyscall="./mksyscall_windows.sh -l32"
+	mksyscall="./mksyscall_windows.pl -l32"
 	mksysnum=
 	mktypes=
 	mkerrors="./mkerrors_windows.sh -f -m32"
diff --git a/src/pkg/syscall/mksyscall.sh b/src/pkg/syscall/mksyscall.pl
similarity index 97%
rename from src/pkg/syscall/mksyscall.sh
rename to src/pkg/syscall/mksyscall.pl
index a62809441c..d4f9c2ab74 100755
--- a/src/pkg/syscall/mksyscall.sh
+++ b/src/pkg/syscall/mksyscall.pl
@@ -19,7 +19,7 @@
 # block, as otherwise the system call could cause all goroutines to
 # hang.
 
-$cmdline = "mksyscall.sh " . join(' ', @ARGV);
+$cmdline = "mksyscall.pl " . join(' ', @ARGV);
 $errors = 0;
 $_32bit = "";
 $nacl = 0;
@@ -37,7 +37,7 @@ if($ARGV[0] eq "-nacl") {
 }
 
 if($ARGV[0] =~ /^-/) {
-	print STDERR "usage: mksyscall.sh [-b32 | -l32] [file ...]\n";
+	print STDERR "usage: mksyscall.pl [-b32 | -l32] [file ...]\n";
 	exit 1;
 }
 
diff --git a/src/pkg/syscall/mksyscall_windows.sh b/src/pkg/syscall/mksyscall_windows.pl
similarity index 98%
rename from src/pkg/syscall/mksyscall_windows.sh
rename to src/pkg/syscall/mksyscall_windows.pl
index 3b1c9df850..4557a3ae7b 100755
--- a/src/pkg/syscall/mksyscall_windows.sh
+++ b/src/pkg/syscall/mksyscall_windows.pl
@@ -23,7 +23,7 @@
 #	  //sys LoadLibrary(libname string) (handle uint32, errno int) [failretval==-1] = LoadLibraryA
 #	  and is [failretval==0] by default.
 
-$cmdline = "mksyscall_windows.sh " . join(' ', @ARGV);
+$cmdline = "mksyscall_windows.pl " . join(' ', @ARGV);
 $errors = 0;
 $_32bit = "";
 
@@ -36,7 +36,7 @@ if($ARGV[0] eq "-b32") {
 }
 
 if($ARGV[0] =~ /^-/) {
-	print STDERR "usage: mksyscall_windows.sh [-b32 | -l32] [file ...]\n";
+	print STDERR "usage: mksyscall_windows.pl [-b32 | -l32] [file ...]\n";
 	exit 1;
 }
 
diff --git a/src/pkg/syscall/mksysnum_darwin.sh b/src/pkg/syscall/mksysnum_darwin.pl
similarity index 92%
rename from src/pkg/syscall/mksysnum_darwin.sh
rename to src/pkg/syscall/mksysnum_darwin.pl
index 192e61a731..d078a1836c 100755
--- a/src/pkg/syscall/mksysnum_darwin.sh
+++ b/src/pkg/syscall/mksysnum_darwin.pl
@@ -6,7 +6,7 @@
 # Generate system call table for Darwin from master list
 # (for example, xnu-1228/bsd/kern/syscalls.master).
 
-my $command = "mksysnum_darwin.sh " . join(' ', @ARGV);
+my $command = "mksysnum_darwin.pl " . join(' ', @ARGV);
 
 print <<EOF;
 // $command
diff --git a/src/pkg/syscall/mksysnum_freebsd.sh b/src/pkg/syscall/mksysnum_freebsd.pl
similarity index 93%
rename from src/pkg/syscall/mksysnum_freebsd.sh
rename to src/pkg/syscall/mksysnum_freebsd.pl
index e52835d497..03f7d9e256 100755
--- a/src/pkg/syscall/mksysnum_freebsd.sh
+++ b/src/pkg/syscall/mksysnum_freebsd.pl
@@ -6,7 +6,7 @@
 # Generate system call table for FreeBSD from master list
 # (for example, /usr/src/sys/kern/syscalls.master).
 
-my $command = "mksysnum_freebsd.sh " . join(' ', @ARGV);
+my $command = "mksysnum_freebsd.pl " . join(' ', @ARGV);
 
 print <<EOF;
 // $command
diff --git a/src/pkg/syscall/mksysnum_linux.sh b/src/pkg/syscall/mksysnum_linux.pl
similarity index 91%
rename from src/pkg/syscall/mksysnum_linux.sh
rename to src/pkg/syscall/mksysnum_linux.pl
index 89ece8a914..e97c87f445 100755
--- a/src/pkg/syscall/mksysnum_linux.sh
+++ b/src/pkg/syscall/mksysnum_linux.pl
@@ -3,7 +3,7 @@
 # Use of this source code is governed by a BSD-style
 # license that can be found in the LICENSE file.
 
-my $command = "mksysnum_linux.sh ". join(' ', @ARGV);
+my $command = "mksysnum_linux.pl ". join(' ', @ARGV);
 
 print <<EOF;
 // $command
diff --git a/src/pkg/syscall/zsyscall_darwin_amd64.go b/src/pkg/syscall/zsyscall_darwin_amd64.go
index 1edb31883b..46afd05410 100644
--- a/src/pkg/syscall/zsyscall_darwin_amd64.go
+++ b/src/pkg/syscall/zsyscall_darwin_amd64.go
@@ -1,4 +1,4 @@
-// mksyscall.sh syscall_bsd.go syscall_darwin.go syscall_darwin_amd64.go
+// mksyscall.pl syscall_bsd.go syscall_darwin.go syscall_darwin_amd64.go
 // MACHINE GENERATED BY THE COMMAND ABOVE; DO NOT EDIT
 
 package syscall
diff --git a/src/pkg/syscall/zsysnum_darwin_amd64.go b/src/pkg/syscall/zsysnum_darwin_amd64.go
index 8d5c93478b..f9c6e077d5 100644
--- a/src/pkg/syscall/zsysnum_darwin_amd64.go
+++ b/src/pkg/syscall/zsysnum_darwin_amd64.go
@@ -1,4 +1,4 @@
-// mksysnum_darwin.sh /home/rsc/pub/xnu-1228/bsd/kern/syscalls.master
+// mksysnum_darwin.pl /home/rsc/pub/xnu-1228/bsd/kern/syscalls.master
 // MACHINE GENERATED BY THE ABOVE COMMAND; DO NOT EDIT
 
 package syscall
diff --git a/src/pkg/syscall/ztypes_darwin_amd64.go b/src/pkg/syscall/ztypes_darwin_amd64.go
index 91ee457961..936a4e8040 100644
--- a/src/pkg/syscall/ztypes_darwin_amd64.go
+++ b/src/pkg/syscall/ztypes_darwin_amd64.go
@@ -229,7 +229,7 @@ type Msghdr struct {
 	Name         *byte
 	Namelen      uint32
 	Pad_godefs_0 [4]byte
-	Iov          *Iovec
+	Iov          uint64
 	Iovlen       int32
 	Pad_godefs_1 [4]byte
 	Control      *byte
