commit c769f034d796769ad10fc03fe6866b36039d1a09
Author: Jay Conrod <jayconrod@google.com>
Date:   Wed Apr 15 13:56:09 2020 -0400

    cmd/go/internal/modload: support go.mod retract directive
    
    The go command now recognizes 'retract' directives in go.mod. A
    retract directive may be used by a module author to indicate a
    version should not be used. The go command will not automatically
    upgrade to a retracted version. Retracted versions will not be
    considered when resolving version queries like "latest" that don't
    refer to a specific version.
    
    Internally, when the go command resolves a version query, it will find
    the highest release version (or pre-release if no release is
    available), then it will load retractions from the go.mod file for
    that version. Comments on retractions are treated as a rationale and
    may appear in error messages. Retractions are only loaded when a query
    is resolved, so this should have no impact on performance for most
    builds, except when go.mod is incomplete.
    
    For #24031
    
    Change-Id: I17d643b9e03a3445676dbf1a5a351090c6ff6914
    Reviewed-on: https://go-review.googlesource.com/c/go/+/228380
    Run-TryBot: Jay Conrod <jayconrod@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Michael Matloob <matloob@golang.org>
    Reviewed-by: Bryan C. Mills <bcmills@google.com>

 src/cmd/go/alldocs.go                              |   8 +-
 src/cmd/go/internal/modinfo/info.go                |  17 ++-
 src/cmd/go/internal/modload/help.go                |   8 +-
 src/cmd/go/internal/modload/list.go                |   3 +-
 src/cmd/go/internal/modload/modfile.go             | 146 ++++++++++++++++++++-
 .../example.com_retract_self_prev_v1.0.0-bad.txt   |  14 ++
 .../mod/example.com_retract_self_prev_v1.1.0.txt   |  14 ++
 .../mod/example.com_retract_self_prev_v1.9.0.txt   |  18 +++
 .../mod/example.com_retract_v1.0.0-bad.txt         |  10 ++
 .../mod/example.com_retract_v1.0.0-good.txt        |  10 ++
 .../mod/example.com_retract_v1.0.0-unused.txt      |  10 ++
 .../go/testdata/mod/example.com_retract_v1.1.0.txt |  13 ++
 src/cmd/go/testdata/script/mod_download.txt        |  64 +++++----
 src/cmd/go/testdata/script/mod_retract.txt         |  40 ++++++
 src/cmd/go/testdata/script/mod_sumdb_golang.txt    |  12 +-
 15 files changed, 340 insertions(+), 47 deletions(-)
