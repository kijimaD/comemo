commit 8e6cf5f70c77daadf1b2c798f227031be156a904
Author: HÃ¥vard Haugen <havard.haugen@gmail.com>
Date:   Wed Jan 28 23:07:05 2015 +0100

    encoding/gob: clean up decoderMap after errBadType
    
    When decoding an invalid typeId the associated *decEngine was not
    removed from decoderMap. If the decoder was run again on the same input
    a nil *decEngine was found in the map and assumed to be initialized,
    resulting in a panic.
    
    Fixes #9649
    
    Change-Id: I5bb51808362a21c09228c2705a658f073e5b59b3
    Reviewed-on: https://go-review.googlesource.com/3509
    Reviewed-by: Rob Pike <r@golang.org>

 src/encoding/gob/codec_test.go | 19 +++++++++++++++++++
 src/encoding/gob/decode.go     |  4 +++-
 2 files changed, 22 insertions(+), 1 deletion(-)
