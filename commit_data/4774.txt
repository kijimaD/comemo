commit 33e396a4a725a2da9cc9ef1f6a0734f0c1381b8d
Author: Russ Cox <rsc@golang.org>
Date:   Wed Feb 3 16:31:34 2010 -0800

    finalizers; merge package malloc into package runtime
    
    R=r, cw
    CC=golang-dev
    https://golang.org/cl/198085

 src/pkg/Makefile                         |   2 -
 src/pkg/container/vector/numbers_test.go |  38 ++++-----
 src/pkg/fmt/fmt_test.go                  |  18 ++---
 src/pkg/malloc/Makefile                  |  11 ---
 src/pkg/malloc/malloc.go                 |  29 -------
 src/pkg/runtime/Makefile                 |   1 +
 src/pkg/runtime/cgo2c.c                  |   3 +
 src/pkg/runtime/extern.go                |  68 ++++++++++++++++
 src/pkg/runtime/malloc.cgo               |  46 +++++++++--
 src/pkg/runtime/malloc.h                 |   6 ++
 src/pkg/runtime/mfinal.c                 | 127 ++++++++++++++++++++++++++++++
 src/pkg/runtime/mgc0.c                   | 130 +++++++++++++++++++++----------
 src/pkg/runtime/runtime.h                |   1 +
 src/pkg/runtime/type.h                   |   9 +++
 test/gc.go                               |  16 ++--
 test/malloc1.go                          |  13 ++--
 test/mallocfin.go                        |  58 ++++++++++++++
 test/mallocrand.go                       |  82 +++++++++----------
 test/mallocrep.go                        |  47 +++++------
 test/mallocrep1.go                       |  92 +++++++++++-----------
 20 files changed, 554 insertions(+), 243 deletions(-)
