commit d77b809df908d81406ceced91fe1b1399f1e29f1
Merge: 2e2ef666b4 fc8eb264bb
Author: Cherry Zhang <cherryyz@google.com>
Date:   Fri Oct 25 13:41:36 2019 -0400

    [dev.link] all: merge branch 'master' into dev.link
    
    The only conflict is in cmd/internal/obj/link.go and the
    resolution is trivial.
    
    Change-Id: Ic79b760865a972a0ab68291d06386531d012de86

 doc/contrib.html                                   |   2 +-
 doc/go1.14.html                                    |  34 +
 doc/modules.md                                     |  61 ++
 doc/play/hello.go                                  |   2 +
 misc/benchcmp                                      |   5 -
 src/bytes/hash/hash.go                             |   4 +-
 src/bytes/hash/hash_test.go                        |  14 +
 src/cmd/cgo/doc.go                                 |   4 +-
 src/cmd/compile/internal/amd64/ssa.go              |   8 +
 src/cmd/compile/internal/arm/ssa.go                |   2 +-
 src/cmd/compile/internal/gc/align.go               |   5 +
 src/cmd/compile/internal/gc/builtin.go             |   4 +-
 src/cmd/compile/internal/gc/builtin/runtime.go     |   4 +-
 src/cmd/compile/internal/gc/escape.go              |   8 +-
 src/cmd/compile/internal/gc/go.go                  |   2 +
 src/cmd/compile/internal/gc/lex.go                 |   2 +-
 src/cmd/compile/internal/gc/main.go                |  12 +
 src/cmd/compile/internal/gc/obj.go                 |   3 +
 src/cmd/compile/internal/gc/plive.go               |  11 +-
 src/cmd/compile/internal/gc/reflect.go             |  27 +-
 src/cmd/compile/internal/gc/sizeof_test.go         |   2 +-
 src/cmd/compile/internal/gc/ssa.go                 | 684 ++++++++++++++-
 src/cmd/compile/internal/gc/syntax.go              |  62 +-
 src/cmd/compile/internal/gc/typecheck.go           |   5 +
 src/cmd/compile/internal/gc/walk.go                |  60 +-
 src/cmd/compile/internal/ssa/config.go             |  17 +-
 src/cmd/compile/internal/ssa/deadstore.go          |   5 +
 src/cmd/compile/internal/ssa/func.go               |  12 +-
 src/cmd/compile/internal/ssa/gen/AMD64.rules       |   4 +-
 src/cmd/compile/internal/ssa/gen/AMD64Ops.go       |   5 +
 src/cmd/compile/internal/ssa/gen/ARM.rules         |   3 +
 src/cmd/compile/internal/ssa/gen/ARM64.rules       |   1 +
 src/cmd/compile/internal/ssa/gen/ARMOps.go         |   4 +
 src/cmd/compile/internal/ssa/gen/PPC64.rules       |   1 +
 src/cmd/compile/internal/ssa/gen/S390X.rules       |   1 +
 src/cmd/compile/internal/ssa/gen/genericOps.go     |  14 +
 src/cmd/compile/internal/ssa/opGen.go              |  40 +
 src/cmd/compile/internal/ssa/prove.go              |  40 +-
 src/cmd/compile/internal/ssa/rewriteAMD64.go       |  42 +-
 src/cmd/compile/internal/ssa/rewriteARM.go         |  16 +
 src/cmd/compile/internal/ssa/rewriteARM64.go       |  16 +
 src/cmd/compile/internal/ssa/rewritePPC64.go       |  16 +
 src/cmd/compile/internal/ssa/rewriteS390X.go       |  16 +
 src/cmd/cover/cover_test.go                        |   4 +-
 src/cmd/dist/build.go                              |   2 +-
 src/cmd/go.mod                                     |   2 +-
 src/cmd/go.sum                                     |   4 +-
 src/cmd/go/alldocs.go                              |  16 +-
 src/cmd/go/go_test.go                              |  44 +-
 src/cmd/go/internal/cfg/cfg.go                     |   3 +
 src/cmd/go/internal/get/get.go                     |   2 +-
 src/cmd/go/internal/help/helpdoc.go                |   6 +-
 src/cmd/go/internal/list/list.go                   |  15 +-
 src/cmd/go/internal/modcmd/download.go             |   3 +
 src/cmd/go/internal/modcmd/edit.go                 |   5 +-
 src/cmd/go/internal/modcmd/graph.go                |   5 +
 src/cmd/go/internal/modcmd/init.go                 |   8 +-
 src/cmd/go/internal/modcmd/mod.go                  |   9 +-
 src/cmd/go/internal/modcmd/tidy.go                 |   2 +
 src/cmd/go/internal/modcmd/vendor.go               |   2 +
 src/cmd/go/internal/modcmd/verify.go               |   7 +-
 src/cmd/go/internal/modcmd/why.go                  |   2 +
 src/cmd/go/internal/modfetch/codehost/codehost.go  |   7 +-
 src/cmd/go/internal/modfetch/codehost/git.go       |  14 +-
 src/cmd/go/internal/modfetch/codehost/git_test.go  |  16 +-
 src/cmd/go/internal/modfetch/codehost/shell.go     |   2 +-
 src/cmd/go/internal/modfetch/codehost/vcs.go       |  12 +-
 src/cmd/go/internal/modfetch/coderepo.go           |   9 +-
 src/cmd/go/internal/modfetch/fetch.go              |   8 +-
 src/cmd/go/internal/modfile/gopkgin.go             |  47 -
 src/cmd/go/internal/modfile/print.go               |   1 +
 src/cmd/go/internal/modfile/read.go                |   3 +-
 src/cmd/go/internal/modload/build.go               |  31 +-
 src/cmd/go/internal/modload/init.go                | 120 ++-
 src/cmd/go/internal/modload/list.go                |  19 +-
 src/cmd/go/internal/modload/load.go                |  22 +-
 src/cmd/go/internal/search/search.go               |  12 +-
 src/cmd/go/internal/work/build.go                  |  23 +-
 src/cmd/go/internal/work/init.go                   |  10 +-
 src/cmd/go/internal/work/security.go               |   3 +
 src/cmd/go/internal/work/security_test.go          |   2 +
 src/cmd/go/main.go                                 |   2 +-
 src/cmd/go/script_test.go                          |  14 +-
 .../testdata/mod/not-rsc.io_quote_v0.1.0-nomod.txt |  59 ++
 src/cmd/go/testdata/script/README                  |   2 +-
 src/cmd/go/testdata/script/list_ambiguous_path.txt |   3 +-
 src/cmd/go/testdata/script/mod_cache_rw.txt        |  49 ++
 .../go/testdata/script/mod_convert_vendor_json.txt |   2 +-
 .../script/mod_convert_vendor_manifest.txt         |   2 +-
 src/cmd/go/testdata/script/mod_fs_patterns.txt     |  35 +-
 src/cmd/go/testdata/script/mod_getmode_vendor.txt  |   9 +-
 src/cmd/go/testdata/script/mod_outside.txt         |  13 +-
 src/cmd/go/testdata/script/mod_replace.txt         |   7 +
 src/cmd/go/testdata/script/mod_tidy_replace.txt    |  26 +
 src/cmd/go/testdata/script/mod_vendor.txt          |  30 +-
 src/cmd/go/testdata/script/mod_vendor_auto.txt     |  13 +-
 src/cmd/go/testdata/script/mod_vendor_replace.txt  |  27 +
 src/cmd/go/testdata/script/modfile_flag.txt        |  67 ++
 src/cmd/internal/obj/link.go                       |   9 +-
 src/cmd/internal/obj/x86/obj6.go                   |  13 +-
 src/cmd/internal/objabi/funcdata.go                |  11 +-
 src/cmd/internal/objabi/funcid.go                  |   6 +
 src/cmd/internal/objabi/stack.go                   |   2 +-
 src/cmd/link/internal/ld/lib.go                    |   5 +
 src/cmd/link/internal/ld/pcln.go                   |  13 +-
 src/cmd/link/internal/ld/symtab.go                 |   3 +-
 src/cmd/link/internal/loadpe/ldpe.go               |  23 +-
 .../x/tools/go/analysis/passes/asmdecl/asmdecl.go  |   5 -
 .../x/tools/go/analysis/passes/printf/printf.go    |   4 +-
 .../golang.org/x/tools/go/analysis/validate.go     |   7 -
 src/cmd/vendor/modules.txt                         |   2 +-
 src/cmd/vet/testdata/print/print.go                |   5 +-
 src/crypto/tls/handshake_test.go                   |  15 +-
 src/crypto/tls/handshake_unix_test.go              |  18 +
 src/crypto/x509/verify.go                          |   4 +-
 src/database/sql/fakedb_test.go                    |   3 -
 src/fmt/scan.go                                    |  13 +
 src/fmt/scan_test.go                               |  19 +-
 src/go.mod                                         |   2 +-
 src/go.sum                                         |   4 +-
 src/go/build/build.go                              |   8 +-
 src/go/parser/parser.go                            |  13 +-
 src/go/parser/testdata/issue34946.src              |  22 +
 src/go/types/decl.go                               |  12 +-
 src/internal/reflectlite/type.go                   |   4 +-
 src/internal/singleflight/singleflight_test.go     |   2 +-
 .../syscall/windows/registry/registry_test.go      |  50 +-
 src/internal/syscall/windows/registry/value.go     |   2 +-
 src/io/io.go                                       |   3 +
 src/io/ioutil/ioutil_test.go                       |  31 +
 src/log/syslog/syslog_test.go                      |   6 -
 src/math/all_test.go                               |  75 ++
 src/math/big/nat.go                                |  14 +-
 src/math/big/nat_test.go                           |  29 +-
 src/math/big/rat.go                                |  68 +-
 src/math/big/rat_test.go                           |  30 +-
 src/math/fma.go                                    | 169 ++++
 src/net/dial_test.go                               |   8 +-
 src/net/http/clientserver_test.go                  |   6 +
 src/net/http/cookie.go                             |   5 +-
 src/net/http/httptest/example_test.go              |  22 +
 src/net/http/httptest/server.go                    |  12 +-
 src/net/http/httptest/server_test.go               |  36 +
 src/net/http/pprof/pprof.go                        |   3 +
 src/net/http/request.go                            |   3 +-
 src/net/http/serve_test.go                         |  93 ++
 src/net/http/server.go                             |  40 +-
 src/net/http/transport.go                          |  12 +-
 src/net/http/transport_test.go                     | 170 ++++
 src/net/interface_test.go                          |  17 -
 src/net/server_test.go                             | 114 +--
 src/os/exec/exec_test.go                           |   4 +-
 src/os/os_test.go                                  |   3 -
 src/os/signal/signal_test.go                       |  49 ++
 src/reflect/export_test.go                         |  11 +-
 src/reflect/type.go                                | 131 ++-
 src/runtime/callers_test.go                        |  29 +
 src/runtime/checkptr.go                            |  76 +-
 src/runtime/cpuflags.go                            |   3 +
 src/runtime/crash_test.go                          |   8 +
 src/runtime/crash_unix_test.go                     |  24 +
 src/runtime/defer_test.go                          |  63 +-
 src/runtime/defs1_linux.go                         |   1 +
 src/runtime/defs1_netbsd_386.go                    |   5 +
 src/runtime/defs1_netbsd_amd64.go                  |   5 +
 src/runtime/defs1_netbsd_arm.go                    |   5 +
 src/runtime/defs1_netbsd_arm64.go                  |   5 +
 src/runtime/defs1_solaris_amd64.go                 |   5 +-
 src/runtime/defs2_linux.go                         |   2 +-
 src/runtime/defs_aix.go                            |   3 +-
 src/runtime/defs_aix_ppc64.go                      |   3 +-
 src/runtime/defs_darwin.go                         |   1 +
 src/runtime/defs_darwin_386.go                     |   1 +
 src/runtime/defs_darwin_amd64.go                   |   1 +
 src/runtime/defs_darwin_arm.go                     |   1 +
 src/runtime/defs_darwin_arm64.go                   |   1 +
 src/runtime/defs_freebsd.go                        |   5 +
 src/runtime/defs_freebsd_386.go                    |   5 +
 src/runtime/defs_freebsd_amd64.go                  |   5 +
 src/runtime/defs_freebsd_arm.go                    |   5 +
 src/runtime/defs_linux.go                          |   3 +-
 src/runtime/defs_linux_386.go                      |   6 +-
 src/runtime/defs_linux_amd64.go                    |   6 +-
 src/runtime/defs_linux_arm.go                      |   2 +
 src/runtime/defs_linux_arm64.go                    |   6 +-
 src/runtime/defs_linux_mips64x.go                  |   2 +
 src/runtime/defs_linux_mipsx.go                    |   2 +
 src/runtime/defs_linux_ppc64.go                    |   2 +
 src/runtime/defs_linux_ppc64le.go                  |   2 +
 src/runtime/defs_linux_s390x.go                    |   2 +
 src/runtime/defs_netbsd.go                         |   5 +
 src/runtime/defs_openbsd.go                        |   5 +
 src/runtime/defs_openbsd_386.go                    |   5 +
 src/runtime/defs_openbsd_amd64.go                  |   5 +
 src/runtime/defs_openbsd_arm.go                    |   5 +
 src/runtime/defs_openbsd_arm64.go                  |   5 +
 src/runtime/defs_solaris.go                        |   5 +-
 src/runtime/export_linux_test.go                   |   3 +
 src/runtime/export_nbpipe_test.go                  |  12 +
 src/runtime/export_test.go                         |   8 +
 src/runtime/funcdata.h                             |   1 +
 src/runtime/lock_futex.go                          |   2 +-
 src/runtime/lock_js.go                             |  29 +-
 src/runtime/lock_sema.go                           |   2 +-
 src/runtime/mgcscavenge.go                         |   3 +-
 src/runtime/nbpipe_pipe.go                         |  19 +
 src/runtime/nbpipe_pipe2.go                        |  25 +
 src/runtime/nbpipe_test.go                         |  93 ++
 src/runtime/netpoll.go                             |  59 +-
 src/runtime/netpoll_aix.go                         |  46 +-
 src/runtime/netpoll_epoll.go                       |  71 +-
 src/runtime/netpoll_fake.go                        |   7 +-
 src/runtime/netpoll_kqueue.go                      |  55 +-
 src/runtime/netpoll_solaris.go                     |  46 +-
 src/runtime/netpoll_stub.go                        |  21 +
 src/runtime/netpoll_windows.go                     |  37 +-
 src/runtime/os2_aix.go                             |  18 +-
 src/runtime/os3_solaris.go                         |  12 +-
 src/runtime/os_aix.go                              |  17 +
 src/runtime/os_dragonfly.go                        |   3 +
 src/runtime/os_freebsd.go                          |   1 +
 src/runtime/os_linux.go                            |   2 +
 src/runtime/os_netbsd.go                           |   3 +-
 src/runtime/os_openbsd.go                          |   2 +-
 src/runtime/os_solaris.go                          |  12 +-
 src/runtime/os_windows.go                          |   2 +
 src/runtime/panic.go                               | 311 ++++++-
 src/runtime/proc.go                                | 263 +++++-
 src/runtime/proc_test.go                           |  39 +
 src/runtime/race.go                                |  13 +
 src/runtime/race0.go                               |   2 +
 src/runtime/race_amd64.s                           |  18 +-
 src/runtime/race_arm64.s                           |  13 +-
 src/runtime/race_ppc64le.s                         |  19 +-
 src/runtime/rt0_js_wasm.s                          |   2 +-
 src/runtime/runtime-gdb_test.go                    |   4 +-
 src/runtime/runtime2.go                            |  55 +-
 src/runtime/runtime_linux_test.go                  |   8 +-
 src/runtime/runtime_test.go                        |  26 -
 src/runtime/signal_unix.go                         |  94 +-
 src/runtime/stack.go                               |  13 +-
 src/runtime/stubs2.go                              |   5 +
 src/runtime/symtab.go                              |  11 +-
 src/runtime/sys_darwin_386.s                       |  12 +
 src/runtime/sys_darwin_amd64.s                     |  12 +
 src/runtime/sys_darwin_arm.s                       |  14 +
 src/runtime/sys_darwin_arm64.s                     |  14 +
 src/runtime/sys_dragonfly_amd64.s                  |  34 +-
 src/runtime/sys_freebsd_386.s                      |  47 +-
 src/runtime/sys_freebsd_amd64.s                    |  43 +-
 src/runtime/sys_freebsd_arm.s                      |  46 +-
 src/runtime/sys_linux_386.s                        |  40 +-
 src/runtime/sys_linux_amd64.s                      |  39 +-
 src/runtime/sys_linux_arm.s                        |  71 +-
 src/runtime/sys_linux_arm64.s                      |  70 +-
 src/runtime/sys_linux_mips64x.s                    |  40 +-
 src/runtime/sys_linux_mipsx.s                      |  46 +-
 src/runtime/sys_linux_ppc64x.s                     |  33 +-
 src/runtime/sys_linux_s390x.s                      |  40 +-
 src/runtime/sys_netbsd_386.s                       |  47 +-
 src/runtime/sys_netbsd_amd64.s                     |  43 +-
 src/runtime/sys_netbsd_arm.s                       |  40 +-
 src/runtime/sys_netbsd_arm64.s                     |  48 +-
 src/runtime/sys_openbsd_386.s                      |  41 +-
 src/runtime/sys_openbsd_amd64.s                    |  36 +-
 src/runtime/sys_openbsd_arm.s                      |  35 +-
 src/runtime/sys_openbsd_arm64.s                    |  41 +-
 src/runtime/time.go                                | 961 ++++++++++++++++++++-
 src/sync/atomic/atomic_test.go                     |   3 +
 src/syscall/env_plan9.go                           |  16 +-
 src/syscall/getdirentries_test.go                  |   6 +-
 src/syscall/security_windows.go                    |   4 +-
 src/syscall/sockcmsg_dragonfly.go                  |  16 +
 src/syscall/sockcmsg_unix.go                       |  26 -
 src/syscall/sockcmsg_unix_other.go                 |  38 +
 src/syscall/syscall_bsd.go                         |   2 +-
 src/syscall/syscall_darwin.go                      |   3 +-
 src/syscall/syscall_darwin_386.go                  |   1 -
 src/syscall/syscall_darwin_amd64.go                |   1 -
 src/syscall/syscall_darwin_arm.go                  |   4 -
 src/syscall/syscall_darwin_arm64.go                |   4 -
 src/syscall/syscall_dragonfly.go                   |  20 +-
 src/syscall/syscall_freebsd.go                     |   9 +-
 src/syscall/syscall_linux.go                       |   2 +-
 src/syscall/syscall_solaris.go                     |   2 +-
 src/syscall/syscall_windows.go                     |   8 +-
 src/syscall/zsyscall_darwin_386.go                 |  42 +-
 src/syscall/zsyscall_darwin_386.s                  |   4 +-
 src/syscall/zsyscall_darwin_amd64.go               |  42 +-
 src/syscall/zsyscall_darwin_amd64.s                |   4 +-
 src/syscall/zsyscall_darwin_arm.go                 |  21 +
 src/syscall/zsyscall_darwin_arm.s                  |   2 +
 src/syscall/zsyscall_darwin_arm64.go               |  21 +
 src/syscall/zsyscall_darwin_arm64.s                |   2 +
 src/testing/benchmark.go                           |  22 +-
 src/testing/sub_test.go                            |  32 +-
 src/testing/testing.go                             |  13 +-
 src/time/internal_test.go                          |   3 +-
 src/time/sleep.go                                  |  17 +-
 .../golang.org/x/net/dns/dnsmessage/message.go     |   2 +-
 src/vendor/golang.org/x/net/http2/hpack/encode.go  |   2 +-
 src/vendor/golang.org/x/net/route/address.go       |   2 +-
 src/vendor/golang.org/x/net/route/message.go       |   2 +-
 src/vendor/golang.org/x/net/route/route.go         |   2 +-
 src/vendor/golang.org/x/net/route/route_classic.go |   2 +-
 src/vendor/golang.org/x/net/route/sys.go           |   3 +
 src/vendor/golang.org/x/net/route/sys_dragonfly.go |  14 +-
 .../golang.org/x/net/route/zsys_dragonfly.go       |   4 +-
 src/vendor/modules.txt                             |   2 +-
 test/codegen/math.go                               |  10 +
 test/defererrcheck.go                              |  86 ++
 test/fixedbugs/issue35027.go                       |  23 +
 test/live.go                                       |  18 +-
 test/nosplit.go                                    |   6 +-
 314 files changed, 6737 insertions(+), 1166 deletions(-)

diff --cc src/cmd/internal/obj/link.go
index 2e94d55225,468e9402ee..76c6f261a3
--- a/src/cmd/internal/obj/link.go
+++ b/src/cmd/internal/obj/link.go
@@@ -409,12 -405,11 +409,13 @@@ type FuncInfo struct 
  	dwarfAbsFnSym      *LSym
  	dwarfDebugLinesSym *LSym
  
- 	GCArgs       *LSym
- 	GCLocals     *LSym
- 	GCRegs       *LSym
- 	StackObjects *LSym
+ 	GCArgs             *LSym
+ 	GCLocals           *LSym
+ 	GCRegs             *LSym
+ 	StackObjects       *LSym
+ 	OpenCodedDeferInfo *LSym
 +
 +	FuncInfoSym *LSym
  }
  
  type InlMark struct {
