commit 1c783f7c68aae4effd6dcc9692a6574418556ebb
Author: Wayne Zuo <wdvxdr@golangcn.org>
Date:   Fri Oct 7 12:19:32 2022 +0800

    cmd/compile: split 3 operand LEA in late lower pass
    
    On newer amd64 cpus 3 operand LEA instructions are slow, CL 114655 split
    them to 2 LEA instructions in genssa.
    
    This CL make late lower pass run after addressing modes, and split 3
    operand LEA in late lower pass so that we can do common-subexpression
    elimination for splited LEAs.
    
    Updates #21735
    
    Change-Id: Ied49139c7abab655e1a14a6fd793bdf9f987d1f1
    Reviewed-on: https://go-review.googlesource.com/c/go/+/440035
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Run-TryBot: Wayne Zuo <wdvxdr@golangcn.org>
    Reviewed-by: Keith Randall <khr@golang.org>
    Reviewed-by: Keith Randall <khr@google.com>
    Reviewed-by: Joedian Reid <joedian@golang.org>

 .../compile/internal/ssa/_gen/AMD64latelower.rules |  11 +
 src/cmd/compile/internal/ssa/compile.go            |   2 +-
 src/cmd/compile/internal/ssa/config.go             |   1 +
 .../compile/internal/ssa/rewriteAMD64latelower.go  | 406 +++++++++++++++++++++
 4 files changed, 419 insertions(+), 1 deletion(-)
