commit e28a0d397b3118d518a0ef3c4cd68c0577d3d9a6
Author: Wèi Cōngruì <crvv.mail@gmail.com>
Date:   Thu Dec 14 10:54:11 2017 +0800

    os: don't wait for Close if the File was returned by NewFile
    
    os.NewFile doesn't put the fd into non-blocking mode.
    In most cases, an *os.File returned by os.NewFile is in blocking mode.
    
    Updates #7970
    Updates #21856
    Updates #23111
    
    Change-Id: Iab08432e41f7ac1b5e25aaa8855d478adb7f98ed
    Reviewed-on: https://go-review.googlesource.com/83995
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/internal/poll/fd_unix.go |  1 +
 src/os/pipe_test.go          | 29 +++++++++++++++++++++++------
 2 files changed, 24 insertions(+), 6 deletions(-)
