commit 02c01725002a73739cefbc9fcf2575469be6da13
Author: Dan Scales <danscales@google.com>
Date:   Mon Jul 12 19:34:15 2021 -0700

    [dev.typeparams] cmd/compile: add dictionary entries for itab conversion
    
    This fix the case where a type param or derived type is converted to a
    non-empty interface. Previously, we were converting to an empty
    interface and then using DOTTYPE to convert to the correct non-empty
    interface. In that case, we can get the needed itab directly from the
    dictionary. This is needed for correctness from shapes, if the
    destination interface is parameterized, else we will incorrectly convert
    to the shape version of the interface.
    
    Creating/writing an itab can involve generating wrappers for a bunch of
    methods, which may use dictionaries. So, all the
    dictionaries/instantiations are being generated on the fly and have
    recursive relationships, it is simplest to finish creating/writing the
    itabs at the end of the stenciling phase. So, we create a list of the
    dictionaries which need to be completed by writing out their itab
    entries.
    
    The existing tests ordered.go, ifaceconv.go, and issue44688.go make use
    of this optimization.
    
    Got itab conversions for bound calls working, except for 13.go.
    Also, want to get rid of the concretify, but I think we need more info
    on the Bound from types2.
    
    Change-Id: If552958a7b8a435500d6cc42c401572c367b30d1
    Reviewed-on: https://go-review.googlesource.com/c/go/+/336993
    Trust: Dan Scales <danscales@google.com>
    Run-TryBot: Dan Scales <danscales@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/noder/irgen.go         |  19 +++-
 src/cmd/compile/internal/noder/stencil.go       | 127 ++++++++++++++++++------
 src/cmd/compile/internal/reflectdata/reflect.go |  18 ++++
 test/run.go                                     |   3 +-
 4 files changed, 134 insertions(+), 33 deletions(-)
