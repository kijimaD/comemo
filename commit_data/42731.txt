commit ef9c8a38ad177fa7f48dfaad5d0e27f39a03529d
Author: Keith Randall <khr@golang.org>
Date:   Tue Jul 7 09:32:12 2020 -0700

    cmd/compile: don't rewrite (CMP (AND x y) 0) to TEST if AND has other uses
    
    If the AND has other uses, we end up saving an argument to the AND
    in another register, so we can use it for the TEST. No point in doing that.
    
    Change-Id: I73444a6aeddd6f55e2328ce04d77c3e6cf4a83e0
    Reviewed-on: https://go-review.googlesource.com/c/go/+/241280
    Run-TryBot: Keith Randall <khr@golang.org>
    Reviewed-by: Josh Bleecher Snyder <josharian@gmail.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/compile/internal/ssa/gen/AMD64.rules |  16 ++--
 src/cmd/compile/internal/ssa/rewriteAMD64.go | 128 ++++++++++++++++++++-------
 test/codegen/logic.go                        |  24 +++++
 3 files changed, 128 insertions(+), 40 deletions(-)
