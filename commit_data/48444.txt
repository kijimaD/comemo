commit 58631ba54f45506f2f178bb01d22273e7dfba674
Author: Bryan C. Mills <bcmills@google.com>
Date:   Wed Mar 9 17:19:23 2022 -0500

    internal/testenv: add GOROOT and use it to fix tests broken with -trimpath
    
    This fixes many (but not all) of the tests that currently fail
    (due to a bogus path reported by runtime.GOROOT) when run with
    'go test -trimpath std cmd'.
    
    Updates #51461
    
    Change-Id: Ia2cc05705529c4859e7928f32eeceed647f2e986
    Reviewed-on: https://go-review.googlesource.com/c/go/+/391806
    Trust: Bryan Mills <bcmills@google.com>
    Run-TryBot: Bryan Mills <bcmills@google.com>
    Reviewed-by: Russ Cox <rsc@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/cmd/api/goapi.go                               |  12 ++-
 src/cmd/api/goapi_test.go                          |   2 +
 .../compile/internal/importer/gcimporter_test.go   |   8 +-
 src/cmd/compile/internal/syntax/parser_test.go     |   7 +-
 src/cmd/compile/internal/types2/main_test.go       |  17 ++++
 src/cmd/compile/internal/types2/stdlib_test.go     |  26 +++---
 src/cmd/doc/doc_test.go                            |   8 ++
 src/cmd/go/internal/imports/scan_test.go           |   3 +-
 src/cmd/gofmt/long_test.go                         |   7 +-
 src/cmd/internal/moddeps/moddeps_test.go           |  23 +++--
 src/cmd/link/internal/ld/nooptcgolink_test.go      |   3 +-
 src/cmd/nm/nm_test.go                              |   2 +-
 src/go/importer/importer_test.go                   |   9 +-
 src/go/internal/gcimporter/gcimporter_test.go      |  10 +-
 src/go/internal/srcimporter/srcimporter_test.go    |   9 +-
 src/go/types/main_test.go                          |  17 ++++
 src/go/types/stdlib_test.go                        |  31 +++----
 src/internal/testenv/testenv.go                    | 101 ++++++++++++++++++++-
 src/net/netip/inlining_test.go                     |   7 +-
 src/path/filepath/path_test.go                     |   2 +-
 src/runtime/runtime-gdb_test.go                    |  18 ++--
 src/time/zoneinfo_test.go                          |   3 +-
 22 files changed, 242 insertions(+), 83 deletions(-)
