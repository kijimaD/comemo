commit 54a112d7197ec320527614e7502a3243eab93b6e
Author: Ruixin Bao <ruixin.bao@ibm.com>
Date:   Tue Sep 29 15:55:19 2020 -0400

    crypto/ecdsa: use FillBytes on s390x
    
    Originally, zeroExtendAndCopy is used to pad src with leading zeros and
    copy the padded src into the destination. It is no longer needed after
    CL 230397 introduced FillBytes. We can simply use that and remove the
    zeroExtendAndCopy function. It is cleaner and reduces some allocation.
    
    In addition, this patch tries to avoid calling hashToInt function in
    both Sign and Verify function so some allocation is reduced.
    
    Benchmarks:
    name             old alloc/op   new alloc/op   delta
    SignP256-8         1.60kB ± 0%    1.49kB ± 0%    -7.23%  (p=0.000 n=20+20)
    SignP384-8         1.74kB ± 0%    1.59kB ± 0%    -8.50%  (p=0.000 n=20+18)
    VerifyP256-8         176B ± 0%        0B       -100.00%  (p=0.000 n=20+20)
    KeyGeneration-8      640B ± 0%      640B ± 0%      ~     (all equal)
    
    name             old allocs/op  new allocs/op  delta
    SignP256-8           22.0 ± 0%      17.0 ± 0%   -22.73%  (p=0.000 n=20+20)
    SignP384-8           22.0 ± 0%      17.0 ± 0%   -22.73%  (p=0.000 n=20+20)
    VerifyP256-8         7.00 ± 0%      0.00       -100.00%  (p=0.000 n=20+20)
    KeyGeneration-8      13.0 ± 0%      13.0 ± 0%      ~     (all equal)
    
    Change-Id: Ic4c95191eded55deb3420d97db501689f3b173c9
    Reviewed-on: https://go-review.googlesource.com/c/go/+/232297
    Reviewed-by: Michael Munday <mike.munday@ibm.com>
    Run-TryBot: Michael Munday <mike.munday@ibm.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Trust: Filippo Valsorda <filippo@golang.org>

 src/crypto/ecdsa/ecdsa_s390x.go | 59 +++++++++++++++++++----------------------
 1 file changed, 27 insertions(+), 32 deletions(-)
