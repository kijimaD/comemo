commit 5e33d11e1051734b2495021aa64ed9f47fbae87e
Author: Dan Scales <danscales@google.com>
Date:   Thu Aug 5 15:59:39 2021 -0700

    [dev.typeparams] cmd/compile: do transformCall with non-shape type of call
    
    Do the transformCall using the original types2-derived type of the call
    (in particular, the types of the params as non-shapes). Currently, since
    we were using the param types of the instantiation, we might add in
    interface conversions to an interface with shapes in the one case of a
    full-instantiated generic call. So, we do the transformCall() before
    installing the shaped-based instantiation. transformCall() works
    correctly even in the case of OCALL/FUNCINST.
    
    Fixed two related bugs:
      - Fixed case where we still were not correctly substituting the types
        for a function instantiation.
      - The type substituter needs to copy field flags while substituting in
        tstruct.
    
    Change-Id: I14e960737d6840a75846ede480e6650534ba3af3
    Reviewed-on: https://go-review.googlesource.com/c/go/+/340259
    Trust: Dan Scales <danscales@google.com>
    Run-TryBot: Dan Scales <danscales@google.com>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/noder/expr.go      |  8 ++++++--
 src/cmd/compile/internal/noder/stencil.go   | 11 ++++++++---
 src/cmd/compile/internal/noder/transform.go |  3 ++-
 src/cmd/compile/internal/typecheck/subr.go  |  6 ++++++
 4 files changed, 22 insertions(+), 6 deletions(-)
