commit f1a8ca30fcaa91803c353999448f6f3a292f1db1
Author: Jay Conrod <jayconrod@google.com>
Date:   Thu Jun 27 15:28:08 2019 -0400

    go/build: don't check if srcDir in GOPATH when deciding to use modules
    
    go/build.Context.Import loads package information using 'go list' when
    in module mode. It does this when GO111MODULE is not "off", there is a
    go.mod file in any parent directory, and neither the path nor the
    source directory are in GOROOT. Import no longer checks whether the
    source directory is in GOPATH if GO111MODULE=auto or unset.
    
    Also fixed subdirectory checks that did not handle relative source
    directory paths. mod_gobuild_import should have failed when we changed
    the meaning of GO111MODULE=auto but didn't because of this.
    
    Fixes #32799
    
    Change-Id: Ic5210b7e00cb58f91ea9455b67b49d5aed4eec63
    Reviewed-on: https://go-review.googlesource.com/c/go/+/184098
    Run-TryBot: Jay Conrod <jayconrod@google.com>
    Reviewed-by: Bryan C. Mills <bcmills@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/go/testdata/script/mod_gobuild_import.txt | 20 +++++++++++--
 src/go/build/build.go                             | 36 ++++++++++-------------
 2 files changed, 34 insertions(+), 22 deletions(-)
