commit f798dc682539df0bc60b30bedce9d6f5d5192d47
Author: Carlo Alberto Ferraris <cafxx@strayorange.com>
Date:   Thu Sep 1 14:06:55 2022 +0900

    fmt: recycle printers with large buffers
    
    Previously when a printer had a large buffer we dropped both
    the buffer and the printer. There is no need to drop the printer
    in this case, as a printer with a nil buffer is valid. So we
    just drop the buffer and recycle the printer anyway.
    This saves one allocation in case the buffer is over the limit.
    
    Also tighten some of the tests for other unrelated cases.
    
    Change-Id: Iba1b6a71ca4691464b8c68ab0b6ab0d4d5d6168c
    Reviewed-on: https://go-review.googlesource.com/c/go/+/427395
    Reviewed-by: Ian Lance Taylor <iant@google.com>
    Run-TryBot: Rob Pike <r@golang.org>
    Reviewed-by: Heschi Kreinick <heschi@google.com>
    Reviewed-by: Rob Pike <r@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>

 src/fmt/fmt_test.go | 15 ++++++++++-----
 src/fmt/print.go    | 14 ++++++++------
 2 files changed, 18 insertions(+), 11 deletions(-)
