commit 433c1d3b4ab41fa4272bd61f8ad2918ccd1e390d
Author: Rhys Hiltner <rhys.hiltner@gmail.com>
Date:   Thu Aug 15 18:47:38 2024 -0700

    runtime: store zero-delay mutex contention events
    
    Mutex contention events with delay of 0 need more than CL 604355 added:
    When deciding which event to store in the M's single available slot,
    always choose to drop the zero-delay event. Store an explicit flag for
    whether we have an event to store, rather than relying on a non-zero
    delay.
    
    And, fix a test of sync.Mutex contention that expects those events to
    have non-zero delay. The reporting of non-runtime contention like this
    has long allowed zero-delay events, which we see when cputicks has low
    resolution.
    
    Fixes #68892
    Fixes #68906
    
    Change-Id: Id412141e4eb09724f3ce195899a20d59c92d7b78
    Reviewed-on: https://go-review.googlesource.com/c/go/+/606115
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Auto-Submit: Rhys Hiltner <rhys.hiltner@gmail.com>
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    Reviewed-by: Michael Pratt <mpratt@google.com>

 src/runtime/mprof.go            | 8 +++++++-
 src/runtime/pprof/pprof_test.go | 2 +-
 2 files changed, 8 insertions(+), 2 deletions(-)
