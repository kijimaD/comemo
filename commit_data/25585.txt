commit 4255b78c7da08170321a166d540dfc2c4cfd2ac5
Author: Michael Hudson-Doyle <michael.hudson@canonical.com>
Date:   Tue Oct 27 13:36:11 2015 +1300

    cmd/go: handle linking against a shared library that implicitly includes a package
    
    If you say "go install -buildmode=shared a b" and package a depends on another
    package c, package c is implicitly included in the resulting shared library (as
    specified by "Go Execution Modes"). But if c depends on b, linking against this
    shared library hangs, because the go tool doesn't know when computing c's
    dependencies that c is part of the same shared library as c.
    
    Fix this by tracking the shared library a package *is* in separately from the
    shared library a package has been explicitly linked into.
    
    Fixes #13044
    
    Change-Id: Iacfedab24ae9731ed53d225678b447a2a888823c
    Reviewed-on: https://go-review.googlesource.com/16338
    Run-TryBot: Michael Hudson-Doyle <michael.hudson@canonical.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/cmd/go/build.go | 34 +++++++++++++++++++++++-----------
 1 file changed, 23 insertions(+), 11 deletions(-)
