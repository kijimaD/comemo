commit 0d42cebacdba1855d11f29f708587c9a7a5cb976
Author: Michael Anthony Knyszek <mknyszek@google.com>
Date:   Fri May 9 19:33:22 2025 +0000

    runtime: report finalizer and cleanup queue length with checkfinalizer>0
    
    This change adds tracking for approximate finalizer and cleanup queue
    lengths. These lengths are reported once every GC cycle as a single line
    printed to stderr when GODEBUG=checkfinalizer>0.
    
    This change lays the groundwork for runtime/metrics metrics to produce
    the same values.
    
    For #72948.
    For #72950.
    
    Change-Id: I081721238a0fc4c7e5bee2dbaba6cfb4120d1a33
    Reviewed-on: https://go-review.googlesource.com/c/go/+/671437
    Reviewed-by: Michael Pratt <mpratt@google.com>
    Auto-Submit: Michael Knyszek <mknyszek@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/runtime/mcleanup.go | 29 +++++++++++++++++++++++++++++
 src/runtime/mfinal.go   | 26 ++++++++++++++++++++------
 src/runtime/mgc.go      | 13 +++++++++++++
 src/runtime/proc.go     |  2 ++
 src/runtime/runtime2.go |  3 ++-
 5 files changed, 66 insertions(+), 7 deletions(-)
