commit c52aca1c761f724c3192ee0ac4f4a19754fc5948
Author: Jed Denlea <jed@fastly.com>
Date:   Thu Jun 15 15:53:09 2017 -0700

    image/gif: fix writeImageBlock with SubImages
    
    If an image has been cropped horizontally, writeImageBlock detects that
    its width and Stride differ and acts accordingly.
    
    However, if an image has been cropped vertically, trimming from the
    bottom, the whole original image will be written in place.  This results
    in more data in the LZW stream than necessary, and many decoders
    including image/gif's itself will fail to load.
    
    Fixes #20692
    
    Change-Id: Id332877e31bcf3729c89d8a50c1be0464028d82e
    Reviewed-on: https://go-review.googlesource.com/45972
    Run-TryBot: Emmanuel Odeke <emm.odeke@gmail.com>
    Run-TryBot: Nigel Tao <nigeltao@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Nigel Tao <nigeltao@golang.org>

 src/image/gif/writer.go      |  2 +-
 src/image/gif/writer_test.go | 28 ++++++++++++++++++++++++++++
 2 files changed, 29 insertions(+), 1 deletion(-)
