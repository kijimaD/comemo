commit 289ab30457a73d29462d584a499fcf48a6aa7fa5
Author: Iskander Sharipov <iskander.sharipov@intel.com>
Date:   Wed Jun 6 20:13:19 2018 +0300

    cmd/link: fix duplicated "unresolved inter-package jump" errors
    
    This is extension to https://golang.org/cl/113955 that handled
    duplicated "unresolved relocation" errors.
    
    For platforms with trampoline support, additional error is generated
    per each undefined symbol. This breaks TestUndefinedRelocErrors test
    on these platforms.
    
    Proposed fix:
    
            1. Changes error text to be identical to normal undefined reloc.
               If relocation is undefined, jump to it will be unresolved
               as well.
    
            2. Introduces a map that can be used by all sites that
               handle this kind of errors which makes it easier
               to report such errors exactly once.
    
    Errors on ppc64 before this change (note first 4 lines):
    
            main.defined1: unresolved inter-package jump to main.undefined()
            main.defined1: unresolved inter-package jump to main.undefined()
            main.defined2: unresolved inter-package jump to main.undefined()
            main.defined2: unresolved inter-package jump to main.undefined()
            main.defined1: relocation target main.undefined not defined
            main.defined2: relocation target main.undefined not defined
            runtime.main_main·f: function main is undeclared in the main package
    
    After this change:
    
            main.defined1: relocation target main.undefined not defined
            main.defined2: relocation target main.undefined not defined
            runtime.main_main·f: function main is undeclared in the main package
    
    Because of (1), errors output is the same on all platforms now.
    
    Fixes #25753
    
    Change-Id: Ic3084202a6fc5d4a6d2d0a93344f012b37fe58ed
    Reviewed-on: https://go-review.googlesource.com/116676
    Run-TryBot: Iskander Sharipov <iskander.sharipov@intel.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/cmd/link/internal/ld/data.go | 23 ++---------------------
 src/cmd/link/internal/ld/link.go | 27 +++++++++++++++++++++++++++
 2 files changed, 29 insertions(+), 21 deletions(-)
