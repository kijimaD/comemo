commit c46632a2e0c61786900c2c324989aa90e8821aea
Author: Jeremy Faller <jeremy@golang.org>
Date:   Tue Mar 17 10:24:40 2020 -0400

    [dev.link] cmd/link: parallelize asmb on amd64
    
    Introduces a parallel OutBuf implementation, and POC on amd64. Due to
    some of the weird behaviors I saw on MacOS (SIGBUS while calling msync),
    I will wait for feedback to port to other architectures.
    
    On my mac, sped up Asmb by ~78% for cmd/compile (below). Will likely
    have an appreciable speedup on kubelet benchmark.
    
    Asmb                      39.1ms ±11%     8.5ms ±10%     -78.17%  (p=0.000 n=10+9)
    TotalTime                  596ms ± 2%     577ms ± 8%      -3.07%  (p=0.034 n=8+10)
    
    Change-Id: Id2a2577c3f4da155d8dccc862897f43b941877ac
    Reviewed-on: https://go-review.googlesource.com/c/go/+/223742
    Run-TryBot: Jeremy Faller <jeremy@golang.org>
    Reviewed-by: Cherry Zhang <cherryyz@google.com>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/link/internal/amd64/asm.go         |  32 +++++----
 src/cmd/link/internal/ld/data.go           | 110 ++++++++++++++++++++++++++---
 src/cmd/link/internal/ld/lib.go            |  28 +++-----
 src/cmd/link/internal/ld/link.go           |   4 +-
 src/cmd/link/internal/ld/outbuf.go         | 110 +++++++++++++++++++++++++----
 src/cmd/link/internal/ld/outbuf_mmap.go    |   9 ++-
 src/cmd/link/internal/ld/outbuf_windows.go |   1 +
 src/cmd/link/internal/ld/sym.go            |   8 ++-
 src/cmd/link/internal/x86/asm.go           |   2 +-
 9 files changed, 245 insertions(+), 59 deletions(-)
