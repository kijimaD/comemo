commit e356aa656d92ffd551e89edd9ed6ac00ea0278ef
Author: Than McIntosh <thanm@google.com>
Date:   Fri May 5 15:53:33 2023 -0400

    cmd/cover: add new "emit meta file" mode for packages without tests
    
    Introduce a new mode of execution for instrumenting packages that have
    no test files. Instead of just skipping packages with no test files
    (during "go test -cover" runs), the go command will invoke cmd/cover
    on the package passing in an option in the config file indicating that
    it should emit a coverage meta-data file directly for the package (if
    the package has no functions, an empty file is emitted). Note that
    this CL doesn't actually wire up this functionality in the Go command,
    that will come in a later patch.
    
    Updates #27261.
    Updates #58770
    Updates #24570.
    
    Cq-Include-Trybots: luci.golang.try:gotip-linux-amd64-longtest,gotip-windows-amd64-longtest
    Change-Id: I01e8a3edb62441698c7246596e4bacbd966591c3
    Reviewed-on: https://go-review.googlesource.com/c/go/+/495446
    Reviewed-by: Bryan Mills <bcmills@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/cmd/cover/cfg_test.go                          | 155 ++++++++++++++++-----
 src/cmd/cover/cover.go                             |  97 +++++++++----
 src/cmd/cover/testdata/pkgcfg/b/b.go               |  10 --
 src/cmd/cover/testdata/pkgcfg/b/b_test.go          |   9 --
 src/cmd/cover/testdata/pkgcfg/main/main.go         |  15 --
 .../cover/testdata/pkgcfg/noFuncsNoTests/nfnt.go   |   8 ++
 .../cover/testdata/pkgcfg/yesFuncsNoTests/yfnt.go  |  13 ++
 src/internal/coverage/covcmd/cmddefs.go            |   7 +
 8 files changed, 220 insertions(+), 94 deletions(-)
