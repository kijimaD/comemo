commit 92cb157cf3aa51d28e441dbb2b671795f22140f8
Author: David Chase <drchase@google.com>
Date:   Tue Dec 29 22:44:30 2020 -0500

    [dev.regabi] cmd/compile: late expansion of return values
    
    By-hand rebase of earlier CL, because that was easier than
    letting git try to figure things out.
    
    This will naively insert self-moves; in the case that these
    involve memory, the expander detects these and removes them
    and their vardefs.
    
    Change-Id: Icf72575eb7ae4a186b0de462bc8cf0bedc84d3e9
    Reviewed-on: https://go-review.googlesource.com/c/go/+/279519
    Trust: David Chase <drchase@google.com>
    Reviewed-by: Jeremy Faller <jeremy@golang.org>

 src/cmd/compile/internal/ir/fmt.go           |  5 ++
 src/cmd/compile/internal/ssa/expand_calls.go | 78 ++++++++++++++++++++++------
 src/cmd/compile/internal/ssa/func.go         |  6 ++-
 src/cmd/compile/internal/ssa/op.go           | 10 +++-
 src/cmd/compile/internal/ssagen/ssa.go       | 77 ++++++++++++++++++++-------
 5 files changed, 138 insertions(+), 38 deletions(-)
