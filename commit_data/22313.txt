commit 50a66562a067504c9a21a0ccc00f209ac78166ca
Author: Austin Clements <austin@google.com>
Date:   Thu Mar 12 16:53:57 2015 -0400

    runtime: track heap bytes marked by GC
    
    This tracks the number of heap bytes marked by a GC cycle. We'll use
    this information to precisely trigger the next GC cycle.
    
    Currently this aggregates the work counter in gcWork and dispose
    atomically aggregates this into a global work counter. dispose happens
    relatively infrequently, so the contention on the global counter
    should be low. If this turns out to be an issue, we can reduce the
    number of disposes, and if it's still a problem, we can switch to
    per-P counters.
    
    Change-Id: I1bc377cb2e802ef61c2968602b63146d52e7f5db
    Reviewed-on: https://go-review.googlesource.com/8388
    Reviewed-by: Russ Cox <rsc@golang.org>

 src/runtime/malloc.go  |  2 +-
 src/runtime/mgc.go     | 15 +++++++++++++++
 src/runtime/mgcmark.go | 22 ++++++++++++++++------
 src/runtime/mgcwork.go | 16 ++++++++++++++++
 4 files changed, 48 insertions(+), 7 deletions(-)
