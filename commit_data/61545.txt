commit 53b2b64b649b26c7bb3397bec5d86d3b203eb015
Author: Michael Anthony Knyszek <mknyszek@google.com>
Date:   Fri Nov 15 19:22:16 2024 +0000

    sync: add explicit noCopy fields to Map, Mutex, and Once
    
    Following CLs will refactor Mutex and change the internals of Map. This
    ends up breaking tests in x/tools for the copylock vet check, because
    the error message changes. Let's insulate ourselves from such things
    permanently by adding an explicit noCopy field. We'll update the vet
    check to accept that as the problem, rather than depend on less explicit
    internals.
    
    We capture Once here too to clean up the error message as well.
    
    Change-Id: Iead985fc8ec9ef3ea5ff615f26dde17bb03aeadb
    Reviewed-on: https://go-review.googlesource.com/c/go/+/627777
    Reviewed-by: Cherry Mui <cherryyz@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>
    Auto-Submit: Michael Knyszek <mknyszek@google.com>
    Reviewed-by: Tim King <taking@google.com>

 src/sync/map.go   | 2 ++
 src/sync/mutex.go | 2 ++
 src/sync/once.go  | 2 ++
 test/assign.go    | 7 +++++--
 4 files changed, 11 insertions(+), 2 deletions(-)
