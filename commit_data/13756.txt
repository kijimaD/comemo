commit 67ee9a7db103b5ae5c8d077fef9e21cf6f137f3a
Author: Dave Cheney <dave@cheney.net>
Date:   Thu Sep 6 17:50:26 2012 +1000

    crypto/tls: fix data race on conn.err
    
    Fixes #3862.
    
    There were many areas where conn.err was being accessed
    outside the mutex. This proposal moves the err value to
    an embedded struct to make it more obvious when the error
    value is being accessed.
    
    As there are no Benchmark tests in this package I cannot
    feel confident of the impact of this additional locking,
    although most will be uncontended.
    
    R=dvyukov, agl
    CC=golang-dev
    https://golang.org/cl/6497070

 src/pkg/crypto/tls/conn.go             | 59 +++++++++++++++++-----------------
 src/pkg/crypto/tls/handshake_client.go |  4 +--
 2 files changed, 32 insertions(+), 31 deletions(-)
