commit 3e63cdf8507709ebfb0906a3dbdc14c402cc0cd6
Author: Alexandru Moșoi <brtzsnr@gmail.com>
Date:   Thu Mar 23 22:29:59 2017 +0100

    cmd/compile: optimize shift when counter has different type.
    
    We already handle n << (uint64(c)&63).
    This change also handles n << (uint8(c)&63)
    where the SSA compiler promotes the counter to 32 bits.
    
    Fixes #19681
    
    Change-Id: I9327d64a994286aa0dbf76eb995578880be6923a
    Reviewed-on: https://go-review.googlesource.com/38550
    Run-TryBot: Alexandru Moșoi <alexandru@mosoi.ro>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssa/gen/AMD64.rules |  3 ++
 src/cmd/compile/internal/ssa/rewriteAMD64.go | 52 ++++++++++++++++++++++++++++
 2 files changed, 55 insertions(+)
