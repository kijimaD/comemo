commit 6c024a4cf13f66b9a65616491340b33e0f7b099d
Author: Russ Cox <rsc@golang.org>
Date:   Sat May 20 16:53:13 2023 -0400

    cmd/go/internal/gover: add new Go version package
    
    Clean up Go version comparison.
    
    CL 494436 added an ad hoc version comparison for the toolchain switch.
    
    There are also other version comparisons scattered throughout the code,
    assuming that using semver.Compare with a "v" prefix gives the right answer.
    As we start to allow versions like "go 1.21rc1" in the go.mod file,
    those comparisons will not work properly.
    
    A future CL will need to inject Go versions into semver for use with MVS,
    so do what Bryan suggested in the review of CL 494436 and rewrite the
    comparison in terms of that conversion.
    
    For #57001.
    
    Change-Id: Ia1d441f1bc259874c6c1b3b9349bdf9823a707d4
    Reviewed-on: https://go-review.googlesource.com/c/go/+/496735
    Run-TryBot: Russ Cox <rsc@golang.org>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Auto-Submit: Russ Cox <rsc@golang.org>
    Reviewed-by: Bryan Mills <bcmills@google.com>

 src/cmd/go/go_test.go                              |   8 +-
 src/cmd/go/gotoolchain.go                          |  38 ++--
 src/cmd/go/gotoolchain_port.go                     | 117 -----------
 src/cmd/go/gotoolchain_test.go                     |  49 -----
 src/cmd/go/internal/gover/gomod.go                 |  43 ++++
 src/cmd/go/internal/gover/gover.go                 | 225 +++++++++++++++++++++
 src/cmd/go/internal/gover/gover_test.go            | 137 +++++++++++++
 src/cmd/go/internal/gover/latest.go                |  30 +++
 src/cmd/go/internal/gover/mod.go                   |  75 +++++++
 src/cmd/go/internal/gover/mod_test.go              |  71 +++++++
 src/cmd/go/internal/modcmd/download.go             |   4 +-
 src/cmd/go/internal/modcmd/edit.go                 |   3 +-
 src/cmd/go/internal/modcmd/tidy.go                 |   6 +-
 src/cmd/go/internal/modcmd/vendor.go               |   8 +-
 src/cmd/go/internal/modload/init.go                |  55 +----
 src/cmd/go/internal/modload/load.go                |  18 +-
 src/cmd/go/internal/modload/modfile.go             |  35 ++--
 src/cmd/go/internal/modload/vendor.go              |   3 +-
 src/cmd/go/internal/work/build.go                  |   2 -
 src/cmd/go/internal/work/gc.go                     |   7 +-
 src/cmd/go/internal/workcmd/edit.go                |   3 +-
 .../go/testdata/script/mod_load_missing_std.txt    |   1 +
 src/cmd/go/testdata/script/mod_tidy_too_new.txt    |   2 +
 23 files changed, 662 insertions(+), 278 deletions(-)
