commit 68c10286c795e286c3efaa7df6d52d12af446d57
Author: Jason A. Donenfeld <Jason@zx2c4.com>
Date:   Thu Apr 19 23:46:52 2018 +0200

    syscall: avoid extra syscall on send/recvmsg on Linux
    
    By simply rearranging the logic, we avoid the overhead of a superfluous
    call to getsockopt. For, if p is already non empty, there's no point
    in having to check if we need to attach dummy payload. This has
    performance benefits when using send/recvmsg for high speed
    communications.
    
    Change-Id: Id85cff17328ecbf6d09dd52fbeeaa691dbe69b75
    Reviewed-on: https://go-review.googlesource.com/108338
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/syscall/syscall_linux.go | 40 ++++++++++++++++++++++------------------
 1 file changed, 22 insertions(+), 18 deletions(-)
