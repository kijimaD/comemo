commit f9b9ecc5ee1b3ea8212ee801e719fb748dedc20e
Author: Russ Cox <rsc@golang.org>
Date:   Wed Aug 27 22:50:08 2014 -0400

    runtime: fix nacl build
    
    The NaCl "system calls" were assumed to have a compatible
    return convention with the C compiler, and we were using
    tail jumps to those functions. Don't do that anymore.
    
    Correct mistake introduced in newstackcall duringconversion
    from (SP) to (FP) notation. (Actually this fix, in asm_amd64p32.s,
    slipped into the C compiler change, but update the name to
    match what go vet wants.)
    
    Correct computation of caller stack pointer in morestack:
    on amd64p32, the saved PC is the size of a uintreg, not uintptr.
    This may not matter, since it's been like this for a while,
    but uintreg is the correct one. (And on non-NaCl they are the same.)
    
    This will allow the NaCl build to get much farther.
    It will probably still not work completely.
    There's a bug in 6l that needs fixing too.
    
    TBR=minux
    CC=golang-codereviews
    https://golang.org/cl/134990043

 src/pkg/runtime/asm_amd64p32.s      |  2 +-
 src/pkg/runtime/os_nacl.go          |  2 +-
 src/pkg/runtime/stack.c             |  2 +-
 src/pkg/runtime/sys_nacl_386.s      | 98 ++++++++++++++++++++++++++-----------
 src/pkg/runtime/sys_nacl_amd64p32.s | 95 +++++++++++++++++++++++++----------
 src/pkg/runtime/sys_nacl_arm.s      | 96 ++++++++++++++++++++++++++----------
 6 files changed, 210 insertions(+), 85 deletions(-)
