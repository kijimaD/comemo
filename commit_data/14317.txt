commit 6ae448e8dfc675c0fbda18e2b555af54ae656f69
Author: Dmitriy Vyukov <dvyukov@google.com>
Date:   Tue Nov 6 20:11:16 2012 +0400

    runtime: fix deadlock in parallel for test
    The deadlock occurs when another goroutine requests GC
    during the test. When wait=true the test expects physical parallelism,
    that is, that P goroutines are all active at the same time.
    If GC is requested, then part of the goroutines are not scheduled,
    so other goroutines deadlock.
    With wait=false, goroutines finish parallel for w/o waiting for all
    other goroutines.
    Fixes #3954.
    
    R=golang-dev, bradfitz
    CC=golang-dev
    https://golang.org/cl/6820098

 src/pkg/runtime/parfor_test.go | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)
