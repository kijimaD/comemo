commit b459bc8152210c14b66e23351690ff774cd68d2c
Author: Jay Conrod <jayconrod@google.com>
Date:   Fri Sep 11 09:31:30 2020 -0400

    cmd/go: make 'go mod download' update go.sum after downloads are complete
    
    'go mod download' calls WriteGoMod once via modload.ListModules when
    it loads the build list. This saves sums for go.mod files needed by
    MVS, but the write occurs before any zip files are downloaded.
    
    With this change, 'go mod download' calls WriteGoMod again (and thus,
    modfetch.WriteGoSum) after downloading and verifying module zip files,
    so the sums of the zip files will be saved, too.
    
    Fixes #41341
    
    Change-Id: I7d56754aa255256ed45fd93cb154c2e6ea5f45a9
    Reviewed-on: https://go-review.googlesource.com/c/go/+/254357
    Run-TryBot: Jay Conrod <jayconrod@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Bryan C. Mills <bcmills@google.com>

 src/cmd/go/internal/modcmd/download.go      |  3 +++
 src/cmd/go/testdata/script/mod_download.txt | 18 ++++++++++++++++++
 2 files changed, 21 insertions(+)
