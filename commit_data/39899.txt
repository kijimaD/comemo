commit 24781a1faf62ac5c9a553af6f46b787e972f5539
Author: Jay Conrod <jayconrod@google.com>
Date:   Fri Sep 13 11:10:36 2019 -0400

    cmd/go: fix link error for -coverpkg in GOPATH mode
    
    If a generated test main package transitively depends on a main
    package, the main package will now always be rebuilt as a library and
    will not be compiled with '-p main'.
    
    This expands the fix for #30907, which only applied to packages with
    the BuildInfo set (main packages built in module mode). Linking
    multiple packages with BuildInfo caused link errors, but it appears
    these errors apply to some symbols in GOPATH mode.
    
    Fixes #34114
    
    Change-Id: Ic1e53437942269a950dd7e45d163707922c92edd
    Reviewed-on: https://go-review.googlesource.com/c/go/+/195279
    Run-TryBot: Jay Conrod <jayconrod@google.com>
    Reviewed-by: Bryan C. Mills <bcmills@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/cmd/go/internal/load/test.go                    | 11 +++++++----
 .../testdata/script/cover_pkgall_multiple_mains.txt | 21 ++++++++++++---------
 2 files changed, 19 insertions(+), 13 deletions(-)
