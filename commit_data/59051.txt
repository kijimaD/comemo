commit d3d390984bffed4a2d188043a498e535953eec3a
Author: Dominik Honnef <dominik@honnef.co>
Date:   Sat Jan 20 17:34:06 2024 +0100

    internal/trace/v2: store stacks as PCs, not frames
    
    Most stacks share some frames, especially prefixes, and deduplicating
    them can save significant amounts of memory.
    
    This will be especially true when we convert traces from the old to the
    new format. Here, all stacks exist in a single generation and will be
    live together.
    
    For busy traces, such as one of running Staticcheck on std, with CPU
    profiling enabled, this change saves ~400 MiB of memory.
    
    Change-Id: Ie676f628dd2715e1c6077747dd4e08acf3331e5e
    Reviewed-on: https://go-review.googlesource.com/c/go/+/557355
    Reviewed-by: Dmitri Shuralyov <dmitshur@google.com>
    Reviewed-by: Michael Knyszek <mknyszek@google.com>
    Auto-Submit: Michael Knyszek <mknyszek@google.com>
    LUCI-TryBot-Result: Go LUCI <golang-scoped@luci-project-accounts.iam.gserviceaccount.com>

 src/internal/trace/v2/base.go       |  5 +++--
 src/internal/trace/v2/event.go      |  3 ++-
 src/internal/trace/v2/generation.go | 45 ++++++++++++++++++++++++-------------
 3 files changed, 35 insertions(+), 18 deletions(-)
