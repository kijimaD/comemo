commit 3c0f69a52101c69b5a8288195fa74c7ecfa2fa43
Author: Brad Fitzpatrick <bradfitz@golang.org>
Date:   Mon Jun 26 19:07:24 2017 +0000

    net/http/httputil: always deep copy the Request.Header map in ReverseProxy
    
    We used to do it sometimes as an optimization, but the optimization is
    flawed: in all non-contrived cases we need to deep clone the map
    anyway. So do it always, which both simplifies the code but also fixes
    the X-Forward-For value leaking to the caller's Request, as well as
    modifications from the optional Director func.
    
    Fixes #18327
    
    Change-Id: I0c86d10c557254bf99fdd988227dcb15f968770b
    Reviewed-on: https://go-review.googlesource.com/46716
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/net/http/httputil/reverseproxy.go      | 26 +++++++++++------------
 src/net/http/httputil/reverseproxy_test.go | 33 ++++++++++++++++++++++++++++++
 2 files changed, 45 insertions(+), 14 deletions(-)
