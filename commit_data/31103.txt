commit dec95d8fad2e1b3dea3fa1472cc21542c40236ce
Author: Daniel Theophanes <kardianos@gmail.com>
Date:   Fri Apr 7 12:21:50 2017 -0700

    database/sql: correctly guard the query Row preventing early release
    
    When a Tx starts a query, prevent returning the connection to the pool
    until after the query finishes.
    
    Fixes #19058
    
    Change-Id: I2c0480d9cca9eeb173b5b3441a5aeed6f527e0ac
    Reviewed-on: https://go-review.googlesource.com/40400
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>

 src/database/sql/sql.go      | 18 +++++++++++++-----
 src/database/sql/sql_test.go |  1 -
 2 files changed, 13 insertions(+), 6 deletions(-)
