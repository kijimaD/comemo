commit 8a3c587dc1a5f7a9cd87b764b74e28a57935ab40
Author: Dmitriy Vyukov <dvyukov@google.com>
Date:   Wed Jan 22 10:30:10 2014 +0400

    runtime: fix and improve CPU profiling
    
    - do not lose profiling signals when we have no mcache (possible for syscalls/cgo)
    - do not lose any profiling signals on windows
    - fix profiling of cgo programs on windows (they had no m->thread setup)
    - properly setup tls in cgo programs on windows
    - check _beginthread return value
    
    Fixes #6417.
    Fixes #6986.
    
    R=alex.brainman, rsc
    CC=golang-codereviews
    https://golang.org/cl/44820047

 src/pkg/runtime/cgo/gcc_windows_386.c   | 16 ++++++++++------
 src/pkg/runtime/cgo/gcc_windows_amd64.c | 14 ++++++++++----
 src/pkg/runtime/cgo/libcgo.h            |  1 +
 src/pkg/runtime/os_windows.c            | 27 ++++++++++++++-------------
 src/pkg/runtime/os_windows_386.c        |  4 ++--
 src/pkg/runtime/os_windows_amd64.c      |  4 ++--
 src/pkg/runtime/pprof/pprof_test.go     | 11 -----------
 src/pkg/runtime/proc.c                  | 33 ++++++++++++++++++++-------------
 src/pkg/runtime/runtime.h               |  2 +-
 src/pkg/runtime/signal_386.c            |  2 +-
 src/pkg/runtime/signal_amd64.c          |  2 +-
 src/pkg/runtime/signal_arm.c            |  2 +-
 12 files changed, 63 insertions(+), 55 deletions(-)
