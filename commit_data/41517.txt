commit 24950952759cb26144333b0a47eae7da44808eec
Author: Cherry Zhang <cherryyz@google.com>
Date:   Tue Sep 24 17:31:12 2019 -0400

    [dev.link] cmd/link: load full symbol contents after deadcode pass
    
    If the new object file format is used, now we load full symbol
    contents after the deadcode pass, for reachable symbols only.
    We still load some informations early, like relocations and the
    contents of type symbols, which are used in the deadcode pass.
    If we rewrite deadcode to use index directly, we could delay more
    of the loading (to sym.Symbol), and perhaps delay the creation of
    sym.Symbol.
    
    TODO: internal linking with host objects doesn't work yet.
    
    Change-Id: I7d4880e8f150e8709ffac277e62191623440e4cf
    Reviewed-on: https://go-review.googlesource.com/c/go/+/197258
    Run-TryBot: Cherry Zhang <cherryyz@google.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/link/internal/ld/deadcode.go      |  10 +-
 src/cmd/link/internal/ld/go.go            |   6 +-
 src/cmd/link/internal/ld/lib.go           |  92 ++++++++-------
 src/cmd/link/internal/ld/link.go          |  29 +++++
 src/cmd/link/internal/ld/main.go          |   3 +
 src/cmd/link/internal/objfile/objfile2.go | 189 ++++++++++++++++++++++--------
 6 files changed, 228 insertions(+), 101 deletions(-)
