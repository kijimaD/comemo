commit d8a7990ffad9aebfb7261df7afb3049da4a09986
Author: Ben Burkert <ben@benburkert.com>
Date:   Thu Jun 8 13:19:28 2017 -0700

    net: support all PacketConn and Conn returned by Resolver.Dial
    
    Allow the Resolver.Dial func to return instances of Conn other than
    *TCPConn and *UDPConn. If the Conn is also a PacketConn, assume DNS
    messages transmitted over the Conn adhere to section 4.2.1. "UDP usage".
    Otherwise, follow section 4.2.2. "TCP usage".
    
    Provides a hook mechanism so that DNS queries generated by the net
    package may be answered or modified before being sent to over the
    network.
    
    Updates #19910
    
    Change-Id: Ib089a28ad4a1848bbeaf624ae889f1e82d56655b
    Reviewed-on: https://go-review.googlesource.com/45153
    Run-TryBot: Brad Fitzpatrick <bradfitz@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Brad Fitzpatrick <bradfitz@golang.org>

 src/net/dnsclient_unix.go      | 24 ++++++-------
 src/net/dnsclient_unix_test.go | 78 +++++++++++++++++++++++++++++++++++-------
 src/net/lookup.go              |  8 +++--
 src/net/lookup_unix.go         | 10 ++----
 4 files changed, 86 insertions(+), 34 deletions(-)
