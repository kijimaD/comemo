commit 5dac279fbdd8a4273253de98a4e44484b20bec5b
Author: Matthew Dempsky <mdempsky@google.com>
Date:   Fri Jul 2 16:29:42 2021 -0700

    [dev.typeparams] cmd/compile: formalize "hidden parameters" idea
    
    This CL formalizes the closure-var trick used for method-value
    wrappers to be reusable for defining other functions that take hidden
    parameters via the closure-context register. In particular, it:
    
    1. Adds a new ir.NewHiddenParam function for creating hidden
    parameters.
    
    2. Changes ir.NewClosureVar to copy Type/Typecheck from the closure
    variable, so that callers can needing to manually copy these.
    
    3. Updates existing code accordingly (i.e., method-value wrappers to
    start using ir.NewHiddenParam, and closure builders to stop copying
    types).
    
    Longer term, I anticipate using this to pass dictionaries to stenciled
    functions within unified IR.
    
    Change-Id: I9da3ffdb2a26d15c6e89a21b4e080686d6dc872c
    Reviewed-on: https://go-review.googlesource.com/c/go/+/332612
    Trust: Matthew Dempsky <mdempsky@google.com>
    Run-TryBot: Matthew Dempsky <mdempsky@google.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Cuong Manh Le <cuong.manhle.vn@gmail.com>

 src/cmd/compile/internal/escape/call.go       |  4 +---
 src/cmd/compile/internal/escape/escape.go     | 10 ++++++++--
 src/cmd/compile/internal/escape/expr.go       |  3 ---
 src/cmd/compile/internal/escape/graph.go      |  8 ++++++--
 src/cmd/compile/internal/ir/name.go           | 24 +++++++++++++++++++++++-
 src/cmd/compile/internal/noder/reader.go      | 15 ++-------------
 src/cmd/compile/internal/typecheck/iimport.go |  9 ++-------
 src/cmd/compile/internal/walk/closure.go      |  9 +--------
 8 files changed, 43 insertions(+), 39 deletions(-)
