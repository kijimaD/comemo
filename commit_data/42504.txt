commit d5854bf8e63a5b4f8ffea6cd1a82ffcc7bb0b87b
Author: Than McIntosh <thanm@google.com>
Date:   Mon Dec 16 14:14:29 2019 -0500

    [dev.link] cmd/link: support updates to contents of obj-based Syms
    
    Add in the hooks to SymbolBuilder and to the loader to allow
    the linker to make modifications to a non-external symbol (e.g.
    a sym whose index is less than loader.extStart).
    
    The basic idea is to manufacture a new external symbol with the same
    name and version, then import the old symbol's content (type, data,
    relocations, etc) into the payload struct for the new symbol, and
    finally redirect the name lookup tables to target the new sym for the
    specified name/version.
    
    This change is needed in order to convert over the host object loaders
    to avoid use of sym.Symbol.
    
    Change-Id: I79cd42b23794e830bbdbcbcd2c500c35c351f01f
    Reviewed-on: https://go-review.googlesource.com/c/go/+/211897
    Reviewed-by: Cherry Zhang <cherryyz@google.com>

 src/cmd/link/internal/loader/loader.go        | 274 ++++++++++++++++++++------
 src/cmd/link/internal/loader/loader_test.go   |  49 +++--
 src/cmd/link/internal/loader/symbolbuilder.go |  25 ++-
 3 files changed, 262 insertions(+), 86 deletions(-)
