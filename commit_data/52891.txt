commit 2fd8c5b2d80809040e348a431ff292efbeb6e82c
Author: qmuntal <quimmuntal@gmail.com>
Date:   Wed May 3 12:19:58 2023 +0200

    runtime: don't check the exit code in TestWERDialogue
    
    TestWERDialogue intent is to check that the WER dialog doesn't pop-up
    when `GOTRACEBACK=wer` is set. CL 474915 extended the test to also
    check the error code of the crashed process. This change is causing
    failures in Microsoft internal test pipelines because some WER setups
    can modify the exit code of the crashed application, for example to
    signal that the crash dump has been collected.
    
    Fix this issue by not checking the error code in TestWERDialogue. Also,
    add a new test, TestCrashExitCode, which does the same but using
    `GOTRACEBACK=crash` instead, so that we have one test that checks the
    error code.
    
    Change-Id: Iedde09e1df7223009ebef38a32a460f1ab07e31a
    Reviewed-on: https://go-review.googlesource.com/c/go/+/491935
    Run-TryBot: Quim Muntal <quimmuntal@gmail.com>
    TryBot-Result: Gopher Robot <gobot@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>
    Reviewed-by: Bryan Mills <bcmills@google.com>

 src/runtime/syscall_windows_test.go | 49 ++++++++++++++++++++++++++++---------
 1 file changed, 37 insertions(+), 12 deletions(-)
