commit ebb92dfed96fadb3c563ff11cead85bbb7536793
Author: Tobias Klauser <tklauser@distanz.ch>
Date:   Mon Mar 1 19:55:22 2021 +0100

    internal/poll, runtime: handle netpollopen error in poll_runtime_pollOpen
    
    When netpollopen in poll_runtime_pollOpen returns an error, the work in
    runtime_pollUnblock and runtime_pollClose can be avoided since the
    underlying system call to set up the poller failed.
    
    E.g. on linux, this avoids calling netpollclose and thus epoll_ctl(fd,
    EPOLL_CTL_DEL, ...) in case the file does not support epoll, i.e.
    epoll_ctl(fd, EPOLL_CTL_ADD, ...) in netpollopen failed.
    
    Fixes #44552
    
    Change-Id: I564d90340fd1ab3a6490526353616a447ae0cfb8
    Reviewed-on: https://go-review.googlesource.com/c/go/+/297392
    Trust: Tobias Klauser <tobias.klauser@gmail.com>
    Run-TryBot: Tobias Klauser <tobias.klauser@gmail.com>
    TryBot-Result: Go Bot <gobot@golang.org>
    Reviewed-by: Ian Lance Taylor <iant@golang.org>

 src/internal/poll/fd_poll_runtime.go | 4 ----
 src/runtime/netpoll.go               | 9 ++++++---
 2 files changed, 6 insertions(+), 7 deletions(-)
