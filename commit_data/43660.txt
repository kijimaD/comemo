commit 93c9a3bd387f561dd07e4811602b0755276444ee
Author: Jeremy Faller <jeremy@golang.org>
Date:   Fri Apr 17 16:07:45 2020 -0400

    [dev.link] cmd/link: remove buffered file I/O from OutBuf
    
    Recreation of CL 228317.
    
    The problem with that original CL was a late requested change,
    reordering reloc and asmb, resulting in symbols having stale pointers to
    their data. I've fixed this by preallocating the heap variable in OutBuf
    for platforms w/o mmap.
    
    Change-Id: Icdb392ac2c8d6518830f4c84cf422e78b8ab68c7
    Reviewed-on: https://go-review.googlesource.com/c/go/+/228782
    Run-TryBot: Jeremy Faller <jeremy@golang.org>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Than McIntosh <thanm@google.com>

 src/cmd/link/internal/amd64/asm.go        |   5 --
 src/cmd/link/internal/arm/asm.go          |   4 --
 src/cmd/link/internal/arm64/asm.go        |   4 --
 src/cmd/link/internal/ld/data.go          |   8 +--
 src/cmd/link/internal/ld/main.go          |  14 ++--
 src/cmd/link/internal/ld/outbuf.go        | 110 +++++++++---------------------
 src/cmd/link/internal/ld/outbuf_nommap.go |  13 ++--
 src/cmd/link/internal/ld/outbuf_test.go   |   1 +
 src/cmd/link/internal/ld/xcoff.go         |   3 -
 src/cmd/link/internal/mips/asm.go         |   2 -
 src/cmd/link/internal/mips64/asm.go       |   4 --
 src/cmd/link/internal/ppc64/asm.go        |   5 --
 src/cmd/link/internal/riscv64/asm.go      |   2 -
 src/cmd/link/internal/s390x/asm.go        |   2 -
 src/cmd/link/internal/wasm/asm.go         |   2 -
 src/cmd/link/internal/x86/asm.go          |   5 --
 16 files changed, 47 insertions(+), 137 deletions(-)
