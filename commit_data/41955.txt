commit 334d410ae35a28d770fe43009ca346b4387c1399
Author: Michael Munday <mike.munday@ibm.com>
Date:   Sun Apr 12 10:45:24 2020 +0100

    cmd/compile: fix incorrect block for s390x Select1 op
    
    When inserting Select0 and Select1 ops we need to ensure that they
    live in the same block as their argument. This is because they need
    to be scheduled immediately after their argument for register and
    flag allocation to work correctly.
    
    Fixes #38356.
    
    Change-Id: Iba384dbe87010f1c7c4ce909f08011e5f1de7fd5
    Reviewed-on: https://go-review.googlesource.com/c/go/+/227879
    Run-TryBot: Michael Munday <mike.munday@ibm.com>
    TryBot-Result: Gobot Gobot <gobot@golang.org>
    Reviewed-by: Keith Randall <khr@golang.org>

 src/cmd/compile/internal/ssa/gen/S390X.rules | 15 +++++---
 src/cmd/compile/internal/ssa/rewriteS390X.go | 14 +++++---
 test/fixedbugs/issue38356.go                 | 54 ++++++++++++++++++++++++++++
 3 files changed, 75 insertions(+), 8 deletions(-)
